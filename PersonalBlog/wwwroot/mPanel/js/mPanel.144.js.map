{"version":3,"sources":["webpack://mPanel/./node_modules/tinymce/icons/default/icons.js","webpack://mPanel/./node_modules/tinymce/icons/default/index.js","webpack://mPanel/./node_modules/tinymce/plugins/link/index.js","webpack://mPanel/./node_modules/tinymce/plugins/link/plugin.js","webpack://mPanel/./node_modules/tinymce/plugins/paste/index.js","webpack://mPanel/./node_modules/tinymce/plugins/paste/plugin.js","webpack://mPanel/./node_modules/tinymce/themes/silver/index.js","webpack://mPanel/./node_modules/tinymce/themes/silver/theme.js","webpack://mPanel/./node_modules/tinymce/tinymce.js"],"names":["tinymce","IconManager","add","icons","eq","call","id","global","util","Tools","resolve","global$1","isType","type","value","t","x","Array","prototype","isPrototypeOf","constructor","name","String","isSimpleType","isString","isArray","isNull","a","isBoolean","isFunction","assumeExternalTargets","editor","externalTargets","getParam","getDefaultLinkTarget","getTargetList","getRelList","shouldShowLinkTitle","allowUnsafeLinkTarget","getDefaultLinkProtocol","noop","constant","never","always","none","NONE","o","isNone","fold","n","_s","is","isSome","getOr","getOrThunk","thunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","some","constant_a","self","me","f","s","v","elementEq","b","Optional","from","nativeIndexOf","indexOf","nativePush","push","flatten","xs","r","i","len","length","apply","findMap","arr","cat","someIf","global$2","getValue","item","sanitizeList","list","extractValue","out","text","title","getText","menu","items","sanitizeWith","extracter","ListOptions","label","__assign","Object","assign","arguments","p","hasOwnProperty","this","keys","has","obj","key","global$3","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","predicate","collapsed","contents","cloneContents","walker","firstChild","elements","current","next","hasProtocol","url","test","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","selection","getNode","isImageFigure","dom","select","getParent","getAnchorText","anchorElm","innerText","textContent","getContent","format","replace","hasLinks","grep","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","getRng","nodeType","className","linkDomMutation","attachState","data","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","applyLinkOverrides","acc","getLinkAttrs","undoManager","transact","attach","focus","setAttribs","updateLink","linkImageFigure","execCommand","insertContent","createHTML","encode","createLink","unwrapOptions","cls","class","pred","onTrue","onFalse","props","k","each$1","internalFilter","_k","link","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","setEndAfter","setRng","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","findTextByValue","catalog","isListGroup","DialogChanges","initialData","linkCatalog","persistentData","onCatalogChange","change","catalogs","fieldName","anchor","persistentText","hasPersistentText","meta","getDelta","onChange","getData","getTitleFromUrlChange","ts","rawIndexOf","global$4","global$5","tryEmailTransform","message","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","AnchorListOptions","anchorNodes","anchors","ClassListOptions","getLinkClassList","global$6","RelOptions","initialTarget","isTargetBlank_1","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","extractor","convertURL","linkList","getLinkList","callback","send","success","JSON","parse","err","parseJson","error","_","output","then","optItems","LinkListOptions","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","transform","setEditorTimeout","windowManager","confirm","state","delayedConfirm","DialogConfirms","pData","handleSubmit","settings","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","buttons","primary","_a","newData","setData","makeDialog","spec","getLink","getSelectedLink","getStart","gotoLink","targetEl","$","scrollIntoView","document","createElement","evt","createEvent","initMouseEvent","window","dispatchEvent","removeChild","appendClickRemove","open$1","openDialog","gotoSelectedLink","toggleState","toggler","on","off","toggleActiveState","setActive","mode","isReadOnly","toggleEnabledState","updateState","setDisabled","toggleUnlinkState","hasLinks$1","parents","e","ui","registry","addToggleButton","icon","tooltip","onAction","onSetup","addButton","setupButtons","addMenuItem","shortcut","setupMenuItems","addContextMenu","update","element","setupContextMenu","onSetupLink","buttonApi","addContextForm","launch","hasContextToolbar","initValue","commands","formApi","setAttrib","collapse","collapseSelectionToEnd","hide","setupContextToolbars","metaKeyPressed","preventDefault","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setupGotoLinks","addCommand","useQuickLink","fire","toolbarKey","register","addShortcut","setup","Cell","initial","get","set","isNonNullable","isNullable","nativeSlice","slice","from$1","subject","clear","isSet","checkRange","str","substr","start","firePastePlainTextToggle","shouldPasteDataImages","shouldMergeFormats","getRetainStyleProps","getValidate","getAllowHtmlDataUrls","getPasteDataImages","getAllowedImageFileTypes","explode","internalMark","isMarked","html","global$7","global$8","nbsp","global$9","global$a","filter$1","content","RegExp","trimHtml","all","s1","s2","isWordContent","isNumericList","found","pattern","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","txt","trimListStart","regExp","removeIgnoredNodes","_listIgnore","convertParagraphToLi","paragraphNode","listName","level","_listLevel","parent","append","attr","wrap","lastChild","child","walk","nodeText","matches","exec","parseInt","filterStyles","validStyles","styleValue","outputStyles","styles","parseStyle","serializeStyle","count","processResult","cancelled","pasteHtml","merge","paste","isAbsoluteUrl","isImageUrl","suffix","linkSelection","pasteHtmlFn","isCollapsed","extra","insertImage","createImage","isNewLineChar","c","doPaste","internal","pasteAsText","args","isWordHtml","shouldUseDefaultFilters","retainStyleProperties","makeMap","spaces","Math","floor","validElements","getWordValidElements","valid_elements","valid_children","rule","attributes","attributesOrder","style","domParser","addAttributeFilter","nodes","unwrap","addNodeFilter","rootNode","shouldConvertWordFakeLists","validate","serialize","filterWordContent","preProcess","preProcessArgs","wordContent","firePastePreProcess","filteredContent","parser","fragment","forced_root_block","isRootContent","preProcess$1","hasEventListeners","isDefaultPrevented","tempBody","postProcessArgs","firePastePostProcess","innerHTML","postProcessFilter","filterContent","process","isSmartPasteEnabled","action","smartInsertContent","pasteHtml$1","internalFlag","unmark","pasteText","encodedText","rootTag","rootAttrs","blocks","tagOpen","tag","encodeAllRaw","openContainer","tagClose","paragraphs","toBlockElements","toBRs","convert","tabSpace","getTabSpaces","normalizedText","isCollapsibleWhitespace","pcIsSpace","idx","isNewline","normalizeWhitespace","getForcedRootBlock","getForcedRootBlockAttrs","getDataTransferItems","dataTransfer","legacyText","types","contentType","ex","hasContentType","clipboardContent","mimeType","hasHtmlOrText","uniqueId","pasteImageData","clipboardData","images","getAsFile","files","allowedExtensions","file","extension","ext","mimeOverrides","jpg","jpe","jfi","jif","jfif","pjpeg","pjp","svg","hasOwn","isImage","getImagesFromDataTransfer","blob","isDataTransferItem","reader","FileReader","onload","uri","result","readAsDataURL","fileResults","imageItem","decodeURIComponent","base64","Image","src","imgElm","getImagesDataImgFilter","isValidDataUriImage","blobCache","editorUpload","blobInfo","existingBlobInfo","getByData","useFileName","getImagesReuseFilename","name_1","m","match","extractFilename","filename","blobUri","pasteImage","isKeyboardPasteEvent","getPasteBinParent","ie","inline","getEl","isDefaultContent","pasteBinDefaultContent","isDefault","pasteBinElm","PasteBin","lastRng","lastRngCell","gecko","setStyle","getStyle","stopPropagation","isExternalPasteBin","_e","delegatePasteEvents","pasteBinClone","unbind","getHtml","copyAndRemove","toElm","fromElm","pasteBinClones","childNodes","shift","dirtyWrappers","cleanWrapper","getLastRng","Clipboard","pasteFormat","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","keyboardPastePressed","insertClipboardContent","isKeyBoardPaste","plainTextMode","shortEndedElements","ignoreElements","blockElements","isPlainTextHtml","getShortEndedElements","getBlockElements","currentNode","shortEnded","alert","removePasteBinOnKeyUp","webkit","navigator","userAgent","stopImmediatePropagation","ieFake","firePaste","once","isKeyboardPaste","clipboardEvent","getDoc","getClipboardContent","isBrokenAndroidClipboardEvent","registerEventHandlers","isWebKitFakeUrl","isDataUri","isPasteInsert","transparentSrc","registerEventsAndFilters","setClipboardData","fallback","done","iOS","hasWorkingClipboardApi","clearData","setHtml5Clipboard","markedHtml","mark","outer","inner","contenteditable","setStyles","position","top","left","width","overflow","range","offscreenRange","createRng","selectNodeContents","setTimeout","contextual","hasSelectedContent","isTableSelection","global$b","getCaretRangeFromEvent","getCaretRangeFromPoint","clientX","clientY","setFocusedRange","addPreProcessFilter","filterFunc","removeExplorerBrElementsAfterBlocks","block","blockName","removeWebKitStyles","webKitStyles","webKitStylesSetting","getWebkitStyles","shouldRemoveWebKitStyles","dom_1","node_1","before","after","inputStyles","decode","inputValue","currentValue","toHex","removeUnderlineAndFontInAnchor","root","find","makeSetupHandler","clipboard","pastePlainTextToggleHandler","console","log","hasProPlugin","draggingInternallyState","isPasteAsTextEnabled","quirks","addPostProcessFilter","setup$2","active","addToggleMenuItem","register$2","togglePlainTextPaste","plugin","plugins","getPreProcess","postProcess","getPostProcess","setup$1","browser","isChrome","isFirefox","rng_1","cut","copy","register$1","shouldBlockDrop","plainTextContent","dropContent","shouldFilterDrop","content_1","compose","fa","fb","_i","identity","curry","fn","initialArgs","restArgs","not","die","__rest","getOwnPropertySymbols","propertyIsEnumerable","__spreadArrays","il","j","jl","SimpleResultType","isObject","isUndefined","isNumber","isArrayOf","contains","num","chunk","array","partition","pass","fail","foldr","eachr","foldl","until","findUntil","findIndex","reverse","difference","a1","a2","comparator","head","last","isValue","isError","_opt","_f","onValue","mapError","toOptional","opt","onError","Result","fromOption","res","stype","serror","svalue","Value","SimpleResult","results","values","errors","map$2","tupleMap","tuple","mapToArray","find$1","get$1","hasNonNullableKey","Adt","cases","constructors","adt","acase","keys$1","argLength","branches","branchKeys","reqKey","params","hasOwnProperty$1","baseMerge","merger","objects","ret","curObject","deepMerge","old","nu","cached","called","strict","defaultedThunk","asOption","asDefaultedOptionThunk","mergeWithThunk","defaulted","bothErrors","firstError","secondError","bothValues","wrap$1","wrapAll$1","keyvalues","kv","wrapAll","mergeErrors$1","ResultCombine","partitions","formatObj","input","stringify","path","getErrorInfo","adt$1","field","fallbackAccess","fallbackThunk","cExtractOne","strength","okey","presence","prop","bundle","av","extract","bundleAsOption","optValue","outcome","ov","missingStrict","strictAccess","optionAccess","optionDefaultedAccess","baseThunk","base","instantiator","value$1","validator","custom","getSetKeys","objAcc","objOfOnly","fields","delegate","objOf","fieldNames","unsupported","unsupportedFields","mergeValues$1","cExtract","_instantiator","arrOf","oneOf","props_1","anyValue","arrOfObj","choose","missingKey","chosen","ch","branch","missingBranch","vp","chooseFrom","_anyValue","arrOfObj$1","objFields","valueThunkOf","getDelegate","valueOf","setOf$1","validatedKeys","validateKeys","validKeys","vk","setOf","asRaw","errs","extraction","errInfo","formatError","asRawOrDie","es","chooseProcessor","choose$1","anyValue$1","typedValue","expectedType","actualType","number","string","boolean","functionProcessor","isPostMessageable","every","iter","callbackFn","postMessageable","validateEnum","strict$1","strictOf","strictNumber","strictString","strictStringEnum","strictFunction","strictObjOf","objSchema","strictArrayOfObj","strictArrayOf","option","optionOf","optionNumber","optionString","optionFunction","optionObjOf","defaulted$1","defaultedOf","defaultedNumber","defaultedString","defaultedStringEnum","defaultedBoolean","defaultedFunction","defaultedArrayOf","defaultedObjOf","state$1","fromDom","SugarElement","scope","div","hasChildNodes","createTextNode","unknown","nu$1","major","minor","Version","versionRegexes","agent","cleanedAgent","regexes","firstMatch","group","Number","find$2","detect$1","candidates","candidate","search","contains$1","endsWith","blank","normalVersionRegex","checkContains","uastring","browsers","oses","PlatformInfo","edge","chrome","opera","firefox","safari","nu$2","version","isBrowser","isEdge","isIE","isOpera","isSafari","Browser","windows","android","linux","solaris","freebsd","chromeos","nu$3","isOS","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","isChromeOS","OperatingSystem","PlatformDetection","mediaMatch","UaString","os","deviceType","isiPad","isiPhone","isMobile","isTouch","isTablet","isPhone","iOSwebview","isDesktop","isWebView","DeviceType","query","matchMedia","platform","detect$3","selector","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","bypassSelector","childElementCount","eq$1","e1","e2","contains$2","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","ieContains","d1","d2","regularContains","ensureIsRoot","isRoot","ancestor","stop","el","transformed","closest","isSource","component","simulatedEvent","event","nu$4","parts","constant$1","touchstart","touchmove","touchend","touchcancel","mousedown","mousemove","mouseout","mouseup","mouseover","focusin","focusout","keydown","keyup","click","transitionend","selectstart","prefixName","alloy","tap","postBlur","postPaste","receive","execute","focusItem","longpress","sandboxClose","typeaheadCancel","systemInit","documentTouchmove","documentTouchend","windowScroll","windowResize","attachedToDom","detachedFromDom","dismissRequested","repositionRequested","focusShifted","slotVisibility","changeTab","dismissTab","highlight","dehighlight","emit","dispatchWith","emitWith","properties","emitExecute","dispatch","getSystem","triggerEvent","derive","configs","abort","run","prevent","handler","runActionExtra","runOnSourceName","redirectToPart","detail","partName","uid","getByUid","redirectee","redirectToUid","partUids","runWithTarget","ev","getByDom","cutter","stopper","runOnSource","runOnAttached","runOnDetached","runOnInit","runOnExecute","runOnName","Function","isType$1","isElement","isText","isDocument","isDocumentFragment","owner","ownerDocument","documentOrOwner","dos","documentElement","defaultView","offsetParent","children","index","cs","marker","nextSibling","prepend","append$1","empty","rogue","wrapper","children$1","get$2","docDom","createDocumentFragment","contentElements","rawSet","setAttribute","set$1","get$3","getOpt","has$1","hasAttribute","remove$1","removeAttribute","container","clone","cloneNode","getOuter","isDeep","shallow$1","events","can","originator","isRecursive","warn","DefaultEvents","freeze","__proto__","unique","generate$1","prefix","time","Date","getTime","random","idAttr","prefix$1","idAttr$1","writeOnly","defineProperty","writable","read$1","generate$2","make","NoContextApi","getComp","debugInfo","triggerFocus","triggerEscape","build","addToWorld","removeFromWorld","addToGui","removeFromGui","broadcast","broadcastOn","broadcastEvent","isConnected","singleton","cleanParameters","parameters","substring","markAsExtraApi","extraName","endIndex","openBracketIndex","toFunctionAnnotation","premadeTag","premade","comp","makeApi","apiFunction","markAsSketchApi","rest","getApis","NoState","init","nu$5","readState","byInnerKey","indexKey","chain","nu$6","getCurried","descHandler","cHandler","behaviourTuple","fuse$1","tuples","eventOrder","eventName","order","keyName","sorted","aKey","bKey","aIndex","bIndex","sortKeys","sortedTuples","handlers","all$1","any","fuse","missingOrderError","combineGroups","byEventName","assembled","rawHandler","read","assemble","purpose","uncurried","partition$2","mergeValues","baseBehaviour","toEvents","read$2","supports","classList","add$2","clazz","add$1","remove$4","remove$2","remove$3","get$4","cleanClass","has$2","add$3","remove$5","isSupported","getPropertyValue","isShadowRoot","supported","Element","attachShadow","getRootNode","isSupported$1","getContentContainer","getShadowRoot","getShadowHost","host","inBody","fbc","fab","doc","internalSet","property","setProperty","internalRemove","removeProperty","set$2","setAll$1","css","setOptions","get$5","getComputedStyle","getUnsafeProperty","getRaw","raw","getAllRaw","ruleName","isValidValue","remove$6","reflow","offsetWidth","get$6","set$3","generate$3","validated","behaviours","optBlobThunk","config","generateFrom","generateFrom$1","getBehaviours$1","getEvents","bList","bData","baseEvents","behaviourEvents","behaviour","nameToHandlers","groupByEvents","combine$1","getMe","systemApi","toInfo","bBlob","getBehaviours","definition","setAll","innerHtml","domChildren","renderToDom","defnA","mod","components","infoModification","domModification","toModification","baseModification","baseMod","modsByBehaviour","exhibit","byAspect","modification","combineObjects","combinedClasses","combinedAttributes","combinedStyles","combine","getDomDefinition","subcomponents","hasConfigured","behaviourName","apis","connect","newApi","disconnect","syncComponents","subs","external","extSpec","uids","build$1","getPremade","userSpec","specEvents","buildSubcomponents","completeSpec","buildFromSpec","prebuilt","premade$1","Dimension","getOffset","parseFloat","aggregate","isNaN","h","max","cumulativeInclusions","getBoundingClientRect","height","offsetHeight","get$7","getOuter$1","translate","y","SugarPosition","firstDefinedOrZero","absolute","win","offsetLeft","offsetTop","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","viewport","box","boxPosition","api$1","get$8","getOuter$2","fromRawEvent","rawEvent","shadowRoot","isOpenShadowHost","composed","composedPath","getOriginalEventTarget","kill","mkEvent","binder","useCapture","wrapped","handle","addEventListener","removeEventListener","get$9","_DOC","to","scrollTo","bounds","right","bottom","getBounds","_win","scroll","get$a","clientWidth","clientHeight","visualViewport","pageLeft","pageTop","walkUp","navigation","view","Navigation","frameElement","find$3","d","paths","pathTo","frames","offset","loc","bounds$1","xy","w","absolute$1","ClosestOrAncestor","EventConfiguration","ancestor$1","closest$1","closest$2","ancestor$2","descendant$1","querySelector","one","closest$3","manager","ariaId","isPartOf","queryElem","dep","find$4","isAriaPartOf","AttributeValue","eventConfig","monitorEvent","patterns","NORMAL","noLogger","LOGGING","logger","sequence","startTime","logEventCut","_name","logEventStopped","logNoParent","logEventNoHandlers","logEventResponse","write","finishTime","makeEventLogger","STOP","processEvent","menuFields","itemFields","itemSchema","_initSize","tieredMenuMarkers","markers","required","onPresenceHandler","stack","lines","line","getTrace","onHandler","onKeyboardHandler","onStrictHandler","onStrictKeyboardHandler","snapshot","initSize","nu$7","bubble","direction","boundsRestriction","adt$2","southeast","southwest","northeast","northwest","south","north","east","west","restrictions","restriction","getRestriction","mapToObject","eastX","middleX","westX","northY","southY","centreY","southeast$1","bubbles","southwest$1","northeast$1","northwest$1","north$1","south$1","east$1","eastEdgeX","west$1","westEdgeX","all$2","allRtl","aboveOrBelow","aboveOrBelowRtl","belowOrAbove","belowOrAboveRtl","ActiveReceiving","receiveConfig","channelMap","channels","receivingData","targetChannels","universal","chooseChannels","channelInfo","channelSchema","onReceive","ReceivingSchema","loadEvent","bConfig","bState","_simulatedEvent","revokeBehaviour","doCreate","configSchema","schemaSchema","getConfig","wrappedApis","apiF","apiName","bName","markAsBehaviourApi","wrapApi","wrappedExtra","extraF","revoke","prepared","configAsRaw","initialConfig","behaviourInfo","exhibitor","derive$1","capabilities","simpleSchema","create$1","modeSchema","createModes$1","modes","createModes","branchKey","Receiving","ActivePosition","posConfig","useFixed","focus$1","activeElement","preserve","refocus","focused","descend","hasFocus","child_1","oldFocus","newFocus","NuPositionCss","applyPositionCss","addPx","adt$3","relative","fixed","positionWithDirection","posName","decision","decisionX","decisionY","decisionRight","decisionBottom","toBox","origin","viewport$1","pos","outerScroll","cycleBy","delta","min","clamp","adt$4","fit","nofit","layout","anchorBox","options","elementBox","panelWidth","panelHeight","attemptBestFit","reposition","deltaW","deltaH","candidateX","candidateY","bubbleOffsets","bubbleLeft","bubbleTop","adjustedBounds","boundsRestrictions","applyRestriction","dir","bubbleOffset","adjustedLeft","adjustedTop","adjustedRight","adjustedBottom","adjustBounds","boundsY","boundsBottom","boundsX","boundsRight","newY","newX","boundsWidth","boundsHeight","xInBounds","yInBounds","originInBounds","sizeInBounds","abs","maxX","maxY","limitX","limitY","calcReposition","upAvailable","downAvailable","maxHeight","middle","cataVertical","westAvailable","eastAvailable","maxWidth","cataHorizontal","classesOn","classesOff","candidateYforTest","attempt","newReposition","newDeltaW","newDeltaH","bestNext","attempts","preference","setMaxHeight","absMax","setMax","anchored","available","expandable","defaultOr","dephault","go","classInfo","setClasses","maxHeightFunction","setHeight","maxWidthFunction","setWidth","allAlignments","nu$8","yoffset","getClasses","xDelta","yDelta","alignmentsOn","alignmentsOff","innerNorthwest","innerNortheast","innerNorth","innerSouthwest","innerSoutheast","innerSouth","innerWest","innerEast","onDirection","isLtr","isRtl","getDirection","Attribute","isBottomToTopDir","BottomToTop","schema$1","get$b","defaultLtr","defaultRtl","defaultBottomLtr","defaultBottomRtl","dirElement","isBottomToTop","customLtr","layouts","ls","onLtr","customRtl","onRtl","ltr","onBottomLtr","rtl","onBottomRtl","HotspotAnchor","anchorInfo","hotspot","overrides","placer","MakeshiftAnchor","SimRange","soffset","finish","foffset","adt$5","Situ","situ","adt$6","domRange","exact","SimSelection","exactFromRange","simRange","getWin","startSitu","_finishSitu","_soffset","_finish","_foffset","getStart$1","relativeToNative","finishSitu","createRange","setStart","setStartAfter","setEndBefore","setEnd","setFinish","exactToNative","toRect","rect","adt$7","fromRange","startOffset","endOffset","FocusInsideModes","api$2","getOption","nodeValue","NodeValue","elementsWithCursorPosition","isCursorPosition","descendants","querySelectorAll","readRange","rangeCount","firstRng","getRangeAt","doGetExact","focusNode","focus_1","makeRange","same","after$2","anchorOffset","focusOffset","getFirstRect$1","ranges","getRanges","rev","diagnose","asLtrRange","rects","getClientRects","point","adt$8","screen","toFixed","toAbsolute","sum","points","sumAsAbsolute","positions","absolute$2","getRootPoint","frame","frameOwner","compOwner","capRect","newLeft","newTop","newWidth","newHeight","pointed","calcNewAnchor","optBox","rootPoint","onNone","onRelative","onFixed","topLeft","sumAsFixed","layoutsLtr","showAbove","layoutsRtl","descendOnce$1","get$c","descendOnce","getAnchorSelection","getSelection","getNativeSelection","sel","getExact","modStart","modFinish","SelectionAnchor","selectionBox","rawRect","NodeAnchor","nodeBox","eastX$1","westX$1","northY$1","southY$1","southeast$2","southwest$2","northeast$2","northwest$2","all$3","allRtl$1","SubmenuAnchor","submenuInfo","AnchorSchema","submenu","makeshift","place","anchoring","placee","overrideOptions","simple","box$1","positionWithin","posState","boxElement","boundsBox","positionWithinBounds","anchorage","oldVisibility","getRelativeOrigin","placement","doPlace","vis","PositionApis","getMode","pConfig","_pState","PositionSchema","Positioning","fireDetaching","fireAttaching","replaceChildren","newChildren","childComp","detachChildren","deleted","attach$1","attachWith","insertion","doDetach","detach","parent$1","detachChildren$1","attachSystem","guiSystem","attachSystemWith","inserter","detachSystem","rebuild","sandbox","sConfig","sState","_data","getAttachPoint","built","newState","onOpen","onClose","isOpen","_sandbox","_sConfig","cloak","_sState","sink","cssKey","newValue","store","cloakVisibilityAttr","decloak","hasPosition","oldValue","restore","SandboxApis","openWhileCloaked","transaction","getState","setContent","ActiveSandbox","sandboxConfig","sandboxState","SandboxSchema","Sandboxing","dismissPopups","repositionPopups","mouseReleased","schema$2","receivingChannel","rawSpec","isExtraPart","fireEventInstead","fe","schema$3","receivingChannel$1","doReposition","onLoad","repConfig","repState","onUnload","RepresentApis","setValue","ActiveRepresenting","resetOnDom","_se","memory","isNotSet","dataset","dataByValue","dataByText","lookup","itemString","currentDataByValue","currentDataByText","newDataByValue","newDataByText","RepresentState","manual","setValue$1","onSetValue","DatasetStore","getDataKey","getFallbackEntry","initialValue","ManualStore","_repState","MemoryStore","initVal","RepresentSchema","Representing","setValueFrom","source","field$1","forbidden","_v","get$d","dump","augment","SketchBehaviours","_placeholder","adt$9","single","multiple","isSubstituted","substitute","compSpec","placeholders","uiType","newSpec","subPlaceholder","scan","req","valueThunk","childSpecs","substituted","valuesThunk","preprocessor","placeholder","adt$a","optional","fFactory","sketch","fSchema","fName","fPname","typeSpec","fGroupSchema","fDefaults","fOverrides","requiredSpec","externalSpec","optionalSpec","groupSpec","asNamedPart","part","name$1","adtConstructor","partSchema","external$1","PartType","asCommon","combine$2","partSpec","partValidated","defaults","generate$4","np","g","doGenerateOne","pname","generateOne","schemas","names","substitutes","internals","externals","factory","_partSpec","_partValidated","units","u","ps","ph","replacements","used","substituteAll","substitutePlaces","getPart","partKey","getPartOrDie","getParts","partKeys","system","pk","getAllParts","pUid","getAllPartNames","getPartsOrDie","defaultUids","baseUid","partTypes","partNames","pn","defaultUidsSchema","AlloyParts","generate","asRawOrDie$1","partSchemas","partUidsSchemas","baseS","composite","specWithUid","supplyUid","partUidsSchema","hasUid","singleSchema","compositeSchema","single$2","rawConfig","extraApis","configFields","single$1","composite$1","partFields","inside","ComposeApis","getCurrent","composeConfig","_composeState","ComposeSchema","Composing","dehighlightAllExcept","hConfig","hState","skip","highlighted","highlightClass","skipComp","onDehighlight","highlight$1","isHighlighted","onHighlight","queryTarget","getFirst","_hState","itemClass","getLast","selected","dest","getCandidates","HighlightApis","dehighlightAll","highlightFirst","firstComp","highlightLast","lastComp","highlightAt","getByIndex","highlightBy","getHighlighted","getPrevious","getNext","HighlightSchema","Highlighting","BACKSPACE","TAB","ENTER","ESCAPE","SPACE","LEFT","UP","RIGHT","DOWN","cyclePrev","tryPrev","cycleNext","tryNext","inSet","which","and","preds","isShift","isControl","isNotShift","classification","reportFocusShifting","prevFocus","focusee","highlights","typical","infoSchema","stateInit","getKeydownRules","getKeyupRules","optFocusIn","processKey","getRules","keyingConfig","keyingState","transitions","onFocusHandler","focusInside","OnFocusMode","focusIn","keyboardEvents","isEnterOrSpace","OnEnterOrSpaceMode","tryGoInsideComponent","create$3","cyclicField","isVisible","tabbingConfig","visibilitySelector","_tabbingState","tabstops","visibles","firstTabstop","findInitial","focusManager","cycle","findCurrent","tabstop","stopIndex","useTabstopAt","isTabstop","cyclic","goFromTabstop","navigate","onEscape","onEnter","AcyclicType","CyclicType","defaultExecute","doDefaultExecute","stopEventForFirefox","_component","schema$4","execute$1","executeConfig","ExecutionType","_executeState","spaceExec","useSpace","enterExec","useEnter","downExec","useDown","execKeys","useControlEnter","flatgrid","dimensions","numRows","numColumns","setGridSize","getNumRows","getNumColumns","KeyingState","useH","movement","move","use","west$2","moveLeft","moveRight","east$2","useV","north$2","south$2","isHidden","locateVisible","locate","findIndex$1","withGrid","numCols","address","newIndex","row","column","cycleHorizontal","oldRow","oldColumn","colsInRow","newColumn","cycleVertical","newRow","newCol","schema$5","gridConfig","_gridState","first","doMove","gridState","identified","handleTab","captureTab","moveNorth","moveSouth","getKeydownRules$1","getKeyupRules$1","FlatgridType","horizontal","tryCycle","schema$6","execute$3","flowConfig","findCurrent$1","focusIn$1","_state","getInitial","moveLeft$1","moveRight$1","doMove$1","flowState","executeOnMove","doEscape$1","getKeyupRules$2","FlowType","_flowState","westMovers","allowVertical","eastMovers","toCell","matrix","rowIndex","columnIndex","cell","cycleHorizontal$1","startCol","deltaCol","newColIndex","cycleVertical$1","colIndex","startRow","deltaRow","nextRowIndex","colsInNextRow","nextColIndex","moveHorizontal","moveVertical","schema$7","focusIn$2","matrixConfig","previousSelector","selectors","doMove$2","ifCycle","ifMove","cycles","inRow","cellsInRow","allRows","rows","toMatrix","moveLeft$3","moveRight$3","moveNorth$1","moveSouth$1","getKeydownRules$3","getKeyupRules$3","MatrixType","schema$8","execute$5","menuConfig","focusIn$3","moveUp$1","moveDown$1","getKeydownRules$4","menuState","moveOnTab","getKeyupRules$4","MenuType","schema$9","SpecialType","specialInfo","onSpace","onShiftEnter","onShiftTab","onTab","onUp","onDown","onLeft","onRight","stopSpaceKeyup","acyclic","flow","flatgrid$1","execution","special","Keying","keyConfig","keyState","sendFocusIn","isFlatgridState","insert","replaceConfig","childSpec","remove$7","replaceState","removee","_replaceConfig","replaceAt","replaceeIndex","replacer","replacee","appendAt","Replacing","appendee","prependee","replaceBy","replaceePred","eventHandlers","events$4","focus$2","focusConfig","ignore","onFocus","FocusApis","blur","isFocused","ActiveFocus","tabindex","stopMousedown","FocusSchema","Focusing","updateAriaState","toggleConfig","ariaInfo","aria","updateClass","toggleClass","toggle","set$6","on$1","onLoad$4","ToggleApis","isOn","ActiveToggle","executor","load","toggleOnExecute","updateExpanded","status","ToggleSchema","pressed","syncWithExpanded","checked","expanded","Toggling","pointerEvents","onClick","events$7","optAction","hoverEvent","focusEvent","onHover","hover","focus$3","schema$a","toggling","hasSubmenu","itemBehaviours","tConfig","ignoreFocus","schema$b","schema$c","components$1","focusWidget","widget","onHorizontalArrow","autofocus","setSource","_widget","widgetBehaviours","itemSchema$1","separator","parts$1","itemInfo","builder","unit","fakeFocus","schema$d","grid","movementInfo","rowSelector","focus$4","Menu","_spec","_externals","menuBehaviours","selectedItem","role","trace","byItem","byMenu","triggerItem","triggerMenu","extractPreparedMenu","prep","LayeredState","expansions","menus","directory","getPreparedMenu","menuValue","lookupMenu","lookupItem","itemValue","setMenuBuilt","menuName","setContents","sPrimary","sMenus","sExpansions","sPaths","menuItems","menuPaths","_triggerItem","generate$5","expand","refresh","otherMenus","menuValues","getPrimary","getMenus","isClear","getTriggeringPath","getItemByValue","extraPath","revPath","menuIndex","getTriggeringItem","triggeringItemValue","triggeredItem","triggeredMenu","triggeringItem","triggeringPath","getTriggerData","collapseItem","tieredMenu","collapseMenu","tmenu","highlightPrimary","repositionMenus","_rawUiSpec","ExpandHighlightDecision","submenuParentItems","layeredState","getItemValue","toDirectory","_container","_menuName","setActiveMenu","mv","closeOthers","others","backgroundMenu","stayInDom","updateAriaExpansions","parentItems","itemComp","getSubmenuParents","updateMenuPath","latestMenuName","menuPrep","activeMenu","expandRight","HighlightSubmenu","activeMenuPrep","nbMenu","buildIfRequired","onOpenSubmenu","collapseLeft","onCollapseMenu","keyOnItem","getSource","onExecute","componentMap","primaryName","makeSketch","buildMenus","onOpenMenu","highlightImmediately","navigateOnHover","updateView","HighlightParent","getActiveItem","currentItem","allMenus","preparedMenus","extractMenuFromContainer","primaryMenu","onRepositionMenu","tmenuBehaviours","_keyInfo","selectedMenu","tieredData","singleData","InlineView","showWithin","thing","showWithinBounds","lazySink","showMenuWithinBounds","menuSpec","menuSandbox","getSubmenuLayouts","triggeringPaths","isFirstTierSubmenu","submenuTriggers","st","submenuLayouts","makeMenu","showAt","showMenuAt","inlineBehaviours","getRelated","isPartOfRelated","onShow","onHide","fireDismissalEventInstead","fireRepositionEventInstead","westEdgeX$1","middleX$1","eastEdgeX$1","northY$2","southY$2","southeast$3","southwest$3","northeast$3","northwest$3","north$3","south$3","Button","lookupAttr","buttonBehaviours","roleAttrs","getModAttributes","record","isSketchSpec","anyInSystem","asSpec","defaultIcon","get$e","getFirst$1","notificationIconMap","warning","Notification","memBannerText","translationProvider","renderPercentBar","percent","renderPercentText","memBannerProgress","progress","updateProgress","updateText","text$1","banner","iconChoices","memButton","iconProvider","closeButton","ItemResponse","last$2","rate","timer","cancel","clearTimeout","throttle","repeatLeft","isBlock","getContentEditable","isBoundary","backwards","create$4","detect$4","extractContents","insertNode","normalize","last$1","setCursorLocation","getEnd","isWhitespace","chr","stripTriggerChar","triggerCh","getContext","initRange","minChars","getRoot","char","charAt","findChar","spot","lastIndexOf","triggerChar","findStart","selectNode","point$1","toLast","isText$1","toLeaf","isElement$1","lookupWithContext","getDatabase","context","fetchOptions","database","startText","autocompleters","lookupByChar","autocompleter","leaf","isPreviousCharContent","isStartOfWord","lookupData","ac","fetch","maxResults","matchText","columns","highlightOn","separatorMenuItemSchema","autocompleterItemSchema","autocompleterSchema","baseToolbarButtonFields","toolbarButtonSchema","createToolbarButton","baseToolbarToggleButtonFields","toggleButtonSchema","createToggleButton","contextBarFields","contextButtonFields","contextToggleButtonFields","launchButtonFields","launchToggleButtonFields","toggleOrNormal","contextformbutton","contextformtogglebutton","contextFormSchema","contextToolbarSchema","ToolbarMode","ItemResponse$1","navClass","selectableClass","presetClasses","normal","color","tickedClass","textClass","caretClass","activeClass","containerClass","containerRowClass","classForPreset","presets","forMenu","hasIcons","markers$1","menuClasses","dom$1","chunk$1","rowDom","chunks","preprocessCollection","isSeparator","allSplits","currentSplit","forCollection","initItems","_hasIcons","_item","menuHasIcons","handleError","createHorizontalPartialMenuWithAlloyItems","_columns","_presets","structure","createPartialMenuWithAlloyItems","forSwatch","forToolbar","cardImageFields","cardImageSchema","cardTextFields","cardTextSchema","itemSchema$2","cardimage","cardtext","cardcontainer","cardContainerSchema","commonMenuItemFields","cardMenuItemSchema","choiceMenuItemSchema","fancyMenuItemSchema","menuItemSchema","nestedMenuItemSchema","toggleMenuItemSchema","detectSize","margin","selectorClass","descendants$1","columnLength","thisTop","cTop","ceil","SimpleBehaviours","namedEvents","TooltippingSchema","TooltippingState","popup","clearTimer","getTooltip","isShowing","setTooltip","clearTooltip","resetTimer","delay","ExclusivityChannel","ShowTooltipEvent","HideTooltipEvent","hideAllExclusive","_tConfig","_tState","TooltippingApis","setComponents","tState","specs","Tooltipping","tooltipConfig","tooltipDom","tooltipComponents","show","nativeDisabled","onLoad$5","disableConfig","disableState","disabled","disable","enable","hasNative","useNative","nativeDisable","nativeEnable","ariaDisable","ariaEnable","_disableState","disableClass","onDisabled","onEnabled","isDisabled","nativeIsDisabled","ariaIsDisabled","DisableApis","ActiveDisable","DisableSchema","Disabling","getHeightSetting","getElement","getWidthSetting","DOM","getMinWidthSetting","getMinHeightSetting","getMaxWidthSetting","getMaxHeightSetting","isMenubarEnabled","isToolbarEnabled","toolbar","isToolbarTrue","isToolbarString","isToolbarObjectArray","isMultipleToolbars","getMultipleToolbarsSetting","toolbars","toolbarArray","ToolbarLocation","getToolbarMode","FocusMode","getToolbarLocation","auto","isToolbarLocationBottom","fixedContainerElement","fixedContainerSelector","useFixedContainer","getUiContainer","isDistractionFree","isStickyToolbar","getMenubar","getAnchorTop","getAnchorBottom","ReadOnlyChannel","ReadOnlyDataSchema","broadcastReadonly","uiComponents","readonly","outerContainer","mothership","uiMothership","setupReadonlyModeSwitch","setMode","receivingConfig","DisablingConfigs","runWithApi","getApi","onControlAttached","editorOffCell","onDestroy","onControlDetached","onMenuItemExecute","itemResponse","triggersSubmenu","CLOSE_ON_EXECUTE","menuItemEventOrder","componentRenderPipeline","renderCommonItem","providersbackstage","optComponents","buildData","convertText","mac","alt","ctrl","access","updated","segment","renderIcon","iconHtml","renderText","renderHtml","renderStyledText","renderShortcut","renderCheckmark","renderItemDomStructure","rtlClass","ariaLabel","domTitle","rtlIcon","rtlTransform","renderItemStructure","providersBackstage","renderIcons","fallbackIcon","iconName","needRtlClass","iconContent","textRender","itemText","iconSvg","providerBackstage","baseDom","colorClass","renderColorStructure","leftIcon","checkmark","checkMark","htmlContent","shortcutContent","caret","renderNormalItemStructure","tooltipBehaviour","sharedBackstage","tooltipWorker","getSink","_tooltip","replaceText","encoded","encodeText","escapedMatchRegex","escapeRegExp","parts$2","hexColour","shorthandRegex","longformRegex","isHexString","hex","fromRgba","rgbaColour","red","green","blue","round","rgbRegex","rgbaRegex","alpha","isRgbaComponent","fromHsv","hsv","hue","saturation","brightness","side","chroma","fromHex","longForm","splitForm","getLongForm","fromStringValues","rgba","fireResizeContent","storageName","choiceItem","defaultColors","colorCache","storageString","getItem","localstorage","cache","splice","unshift","pop","setItem","ColorCache","hasCustomColors","getColors","unmapped","getColorMap","colorMap","colors","canvas","ctx","byteAsHex","colorByte","alphaByte","toUpperCase","asHexColor","clearRect","fillStyle","fillRect","getImageData","mapColors","addColor","getColorCols$1","defaultCols","getColorCols","sqrt","applyColor","onChoice","colorPickerDialog","dialog","colorOpt","getColors$1","hasCustom","getAdditionalColors","getFetch","setIconColor","splitButtonApi","newColor","pathId","setIconFill","setIconStroke","registerTextColorButton","lastColor","addSplitButton","getCurrentColor","currentRgb","rgbaString","rgbMatch","rgbaMatch","fromString","currentHex","_splitButtonApi","onItemAction","fireTextColorChange","registerTextColorMenuItem","addNestedMenuItem","getSubmenuItems","fancytype","colorpicker","submit","getOnSubmit","details","onCancel","createPartialChoiceMenu","onItemValueHandler","alloyItems","createChoiceItems","itemPresets","useText","isSelected","isActive","_api","renderChoiceItem","deriveMenuMovement","menuMarkers","cellOverEvent","cellExecuteEvent","makeCell","col","labelId","se","makeComponents","cells","cellRow","makeLabelText","fancyMenuItems","inserttable","sizeLabelId","makeCells","memLabel","selectedRow","selectedColumn","selectCells","colorswatch","backstage","colorinput","shared","providers","widgetSpec","render","extras","directionClass","alignClass","align","valign","getValignClass","renderContainer","renderImage","cardText","createMenuItemFromBridge","isHorizontalMenu","parseForHorizontalMenu","menuitem","createNestedMenuItem","downwardsCaret","renderSubmenuCaret","nested","createToggleMenuItem","toggle$1","createSeparatorMenuItem","createFancyMenuItem","valueOpt","fancy","createAutocompleteItems","createCardMenuItem","card","createAutocompleterItem","autocomplete","createPartialMenu","createItem","itemHasIcon","createTieredDataFrom","partialMenu","Autocompleter","activeAutocompleter","processingAction","cancelIfNecessary","hideIfNecessary","lastElement","getAutocompleters","popups","getAll","triggerChars","datasetValues","dv","newContext","getTriggerContext","doLookup","lookupInfo","matchLength","commenceIfNecessary","combinedItems","choices","itemMeta","nr","autocompleterApi","reload","BUBBLE_TO_SANDBOX","ld","focusMode","ContentFocus","createMenuFrom","display","autocompleterUiApi","onKeypress","isMenuOpen","isProcessingAction","getView","redirectKeyToItem","AutocompleterEditorEvents","filter$2","bind$3","bind$2","capture$1","capture","fromRawEvent$1","closest$4","DelayedFunction","fun","ref","schedule","getTouch","touches","settingsSchema","rawSettings","tapEvent","startData","longpressFired","longpress$1","touch","distX","distY","isFarEnough","fireIfReady","monitor","simpleEvents","tapStopped","pasteTimeout","onPaste","onKeydown","stopBackspace","isDangerous","onFocusIn","bindFocus","focusoutTimeout","onFocusOut","bindBlur","derive$2","rawTarget","adt$b","stopped","resume","complete","doTriggerHandler","eventType","isStopped","isCut","fromSource","handlerInfo","eventHandler","doTriggerOnUntilStopped","triggerOnUntilStopped","Registry","registerId","extraArgs","curryArgs","unregisterId","handlersById","_eventName","filterByType","broadcastHandler","isAboveRoot","findHandler","unregister","tagId","readOrTag","conflict","failOnDuplicate","getById","Container","domWithoutAttributes","containerBehaviours","takeover","domEvents","triggerUntilStopped","_alloyId","triggerHandler","broadcast$1","broadcastData","receivers","receiver","listeners","_logger","fromExternal","listener","destroy","schema$e","parts$3","excludeFactory","exclude","FormField","fieldBehaviours","descriptor","descriptorId","getField","getLabel","ActiveTabstopping","tabConfig","tabAttr","TabstopSchema","Tabstopping","renderFormFieldWith","pLabel","pField","extraClasses","extraBehaviours","renderFormFieldSpecWith","renderFormFieldDomWith","renderLabel","formChangeEvent","formCloseEvent","formCancelEvent","formActionEvent","formSubmitEvent","formBlockEvent","formUnblockEvent","formTabChangeEvent","formResizeEvent","schema$f","focusBehaviours","selectOnFocus","setSelectionRange","inputBehaviours","dom$2","inputAttributes","inputClasses","Input","exports$1","module","exports","define","require","EphoxContactWrapper","code","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","runClearTimeout","Item","nextTick","env","argv","versions","addListener","removeListener","removeAllListeners","prependListener","prependOnceListener","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","Promise","TypeError","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","thisArg","_unhandledRejectionFn","Handler","reason","prom","remaining","race","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","Global","boltExport","HighlightOnOpen","nu$a","baseFn","callbacks","nCallback","isReady","LazyValue","pure","errorReporter","make$3","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","Future","ariaElements","isAriaElement","markValid","invalidConfig","invalidClass","notify","notifyInfo","getContainer","validHtml","onValid","markInvalid","invalidState","onInvalid","_invalidState","validatorInfo","run$1","onValidate","valid","InvalidateApis","isInvalid","ActiveInvalidate","onEvent","validateOnLoad","InvalidateSchema","Invalidating","validation","CouplingApis","getCoupled","coupleConfig","coupleState","getOrCreate","CouplingSchema","Coupling","coupled","partType","getAnchor","getHotspot","getAnchorOverrides","mapFetch","onOpenSync","highlightOnOpen","futureData","fetcher","getLazySink","tdata","HighlightFirst","openF","close$1","_onOpenSync","_highlightOnOpen","togglePopup","sinkDetail","internalSink","lazySinkFn","doRepositionMenus","makeSandbox","ariaOwner","sandboxClasses","sandboxBehaviours","matchWidth","useMinWidth","buttonWidth","set$4","sandboxFields","schema$g","parts$4","Dropdown","switchToMenu","HighlightNone","triggerExecute","dropdownBehaviours","Unselecting","unselectable","colorInputChangeEvent","colorSwatchChangeEvent","colorPickerCancelEvent","hsvColour","fieldsUpdate","sliderUpdate","paletteUpdate","labelPart","edgePart","model","edgeActions","det","mouseIsDown","tlEdgePart","tedgePart","trEdgePart","redgePart","brEdgePart","bedgePart","blEdgePart","SliderParts","getValueFromEvent","spectrum","sliderChangeEvent","getEventSource","isTouchEvent","touchEvent","mouseEvent","minX","minY","min1X","min1Y","max1X","max1Y","range$2","xRange","yRange","halfX","halfY","step","stepSize","snap","snapToGrid","snapStart","rounded","hasEdge","edgeName","hasLEdge","hasREdge","hasTEdge","hasBEdge","xValue","yValue","xyValue","fireSliderChange","reduceBy","increaseBy","capValue","findValueOf","hasMinEdge","hasMaxEdge","minBound","maxBound","screenRange","capMin","capMax","findOffsetOf","extraValue","remainder","adjustment","rawSteps","maxSteps","snapValueOf","findOffsetOfValue","maxOffset","centerMinEdge","centerMaxEdge","getBounds$1","getBoundsProperty","getMinXBounds","getMaxXBounds","getMinYBounds","getMaxYBounds","getXScreenRange","getYScreenRange","getCenterOffsetOf","componentMinEdge","componentMaxEdge","spectrumMinEdge","getXCenterOffSetOf","componentBounds","spectrumBounds","getYCenterOffSetOf","fireSliderChange$1","sliderValue","findValueOfOffset","handleMovement","moveBy","findPositionOfValue","slider","minEdge","maxEdge","minOffset","findOffsetOfValue$1","HorizontalModel","sliderVal","setToMin","setToMax","setPositionFromValue","thumb","edges","getSpectrum","getLeftEdge","getRightEdge","thumbRadius","fireSliderChange$2","sliderValue$1","findValueOfOffset$1","handleMovement$1","moveBy$1","findPositionOfValue$1","findOffsetOfValue$2","onLeft$1","onRight$1","onUp$1","onDown$1","edgeActions$1","VerticalModel","getTopEdge","getBottomEdge","fireSliderChange$3","sliderValue$2","handleMovement$2","isVerticalMovement","moveBy$2","onLeft$2","onRight$2","onUp$2","onDown$2","edgeActions$2","TwoDModel","mX","mY","xPos","yPos","thumbXRadius","thumbYRadius","Slider","getThumb","modelDetail","changeValue","wasDown","onChoose","onDragStart","onDragEnd","sliderBehaviours","getInitialValue","onInit","resetToMin","resetToMax","sliderFactory","getClass","_thumb","owner$3","schema$h","getPartName","make$4","formBehaviours","form","resPs","resPThunk","pName","Form","fSpec","fieldParts","validInput","invalidInput","validatingInput","translatePrefix","rgbFormFactory","onValidHexx","onInvalidHexx","invalidation","isValid","renderTextField","description","helptext","comps","concats","copyRgbToForm","rgb","memPreview","updatePreview","preview","setValueRgb","onInvalidInput","onValidInput","isHexInputEvent","hexField","copyRgbToHex","onValidRgb","onValidHex","formPartStrings","redStrings","greenStrings","blueStrings","hexStrings","updateHex","copyHexToRgb","makeFactory","updates","rgbForm","onInvalidHex","sbPalette","_translate","spectrumPart","thumbPart","setColour","grdWhite","createLinearGradient","addColorStop","grdBlack","_detail","_slider","setRgba","_apis","setSliderColour","paletteFactory","paletteRgba","memPalette","memRgb","updatePalette","palette","updateFields","runUpdates","hsvColour$1","minRGB","maxRGB","fromRgb","newHsvColour","nuHex","calcHex","sliderUpdates","ComposingConfigs","english","translate$1","getEnglishText","global$c","processors","withComp","optInitialValue","getter","setter","RepresentingConfigs","mem","rawProcessors","other","rawValue","postprocess","beforeObject","afterObject","craftWithClasses","outline","craft","triggerTab","onFocus$1","targetComp","isPseudoStop","platformNeedsSandboxing","create$5","resize","clone$1","tCanvas","get2dContext","drawImage","getWidth","image","naturalWidth","getHeight","naturalHeight","Promise$1","anyWindow","asap","immediateFn","catch","values_1","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","mimetype","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","end","bytes","charCodeAt","Uint8Array","Blob","dataUriToBlobSync","create$6","getCanvas","initialType","toAdjustedDataURL","canvasToDataURL","getType","toBase64","toAdjustedBlob","toAdjustedBase64","dataurl","toCanvas","fromBlob","onloadend","blobToDataUri","blobUrl","URL","createObjectURL","removeListeners","loaded","blobToImage","revokeObjectURL","revokeImageUrl","blobToCanvas","fromCanvas","clamp$1","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","colorFilter","ir","pixels","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","applyMatrix","putImageData","applyColorFilter","complexAdjustableColorFilter","matrixAdjustFn","adjust","kernel","colorFn","invert","basicColorFilter","contrast","sharpen","pixelsIn","pixelsOut","pIn","pOut","aMatrix","halfSide","drgba","cy","cx","scx","innerOffset","wt","applyConvoluteFilter","convoluteFilter","gamma","pow","applyLookup","filterImpl","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","_a$1","invert$1","sharpen$1","gamma$1","brightness$1","contrast$1","flip$1","axis","applyFlip","flip","resize$2","newCanvas","resize$1","rotate$1","angle","translateX","translateY","rotate","PI","applyRotate","renderIcon$1","renderIconFromPack","iconsProvider","renderReplacableIconFromPack","renderLabel$1","internalToolbarButtonExecute","toolbarButtonEventOrder","updateMenuText","updateMenuIcon","renderCommonDropdown","optMemDisplayText","optMemDisplayIcon","onLeftOrRightInMenu","dropdown","tooltipAttributes","translatedTooltip","displayIcon","separator$1","realItems","isMenuItemReference","unwrapReferences","isExpandingMenuItem","submenuItems","getFromExpandingItem","getFromItem","generateValueIfRequired","build$2","mainMenu","submenus","getMenuButtonApi","renderMenuButton","_comp","getFetch$1","getButton","getMenuItemAction","storage","orig","getMenuItemSetup","renderCommonSpec","actionOpt","common","domFinal","renderIconButtonSpec","renderIconButton","iconButtonSpec","renderButtonSpec","translatedText","borderless","renderButton","buttonSpec","getAction","buttonType","renderFooterButton","isMenuFooterButtonSpec","menuButtonSpec","fixedSpec","memButton_1","isNormalFooterButtonSpec","schema$i","coupledPart","selfName","otherName","lock","onLockedChange","parts$5","locked","lockClass","FormCoupledInputs","coupledFieldBehaviours","field1Name","field1","field2Name","field2","getField1","getField2","getLock","parseSize","sizeText","convertUnit","inInch","noSizeConversion","_input","renderSizeInput","converter","ratioEvent","pLock","formGroup","getFieldPart","isField1","widthField","heightField","_lock","newSize","unitDec","numText","formatSize","otherFieldText","oa","ob","optCurrent","optOther","value1","value2","cSize","oSize","ratioSizeConversion","undo","redo","zoom","back","swap","tempTransform","transformApply","saveState","disable$1","enable$1","external$2","renderEditPanel","imagePanel","createButton","createIconButton","disableAllComponents","eventcomp","enableAllComponents","panelDom","noop$1","emit$1","emitDisable","emitEnable","emitTransform","getBackSwap","memContainer","ButtonPanel","emitTransformApply","createBackButton","button","createSpacer","createApplyButton","makeCropTransform","getRect","applyCrop","crop","crop$1","cropPanelComponents","hideCrop","CropPanel","memSize","constrain","resizePanelComponents","sizeInput","ResizePanel","makeValueTransform","horizontalFlip","verticalFlip","counterclockwiseRotate","clockwiseRotate","flipRotateOnAction","operation","emitTempTransform","flipRotateComponents","FlipRotatePanel","makeSlider","makeVariableSlider","valTransform","createVariableFilterPanel","filterPanelComponents","variableFilterPanelComponents","FilterPanel","BrightnessPanel","ContrastPanel","GammaPanel","makeColorTransform","adjustR","adjustG","adjustB","adjustColors","colorize","colorize$1","makeColorSlider","redOpt","memRed","blueOpt","memBlue","greenOpt","memGreen","colorizePanelComponents","ColorizePanel","getTransformPanelEvent","panel","sharpenTransform","invertTransform","buttonPanelComponents","_anyInSystem","showCrop","measurements","getMeasurements","getApplyButton","global$d","global$e","global$f","global$g","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","startX","startY","handleElement","getElementById","drag","deltaX","screenX","deltaY","screenY","cursor","docSize","scrollWidth","scrollHeight","getDocumentSize","handleElm","runtimeStyle","zIndex","opacity","appendTo","Delimiter","renderImagePanel","initialUrl","memBg","zoomState","cropRect","rectState","viewRectState","repaintImg","panelW","panelH","bg","cRect","setRect","setClampRect","setViewPortRect","updateSrc","aImg","lastViewRect","viewRect","inflate","zoomFit","currentRect","viewPortRect","clampRect","containerElm","dragHelpers","handles","xMul","yMul","blockers","getRelativeRect","outerRect","innerRect","moveRect","startRect","instance","setInnerRect","repaint","updateElementRect","relativeRect","blocker","activeHandle","moveAndBlock","SPACEBAR","extend","toggleVisibility","getInnerRect","helper","CropRect","newRect","currentZoom","newZoom","setButtonEnabled","enabled","renderImageTools","initialState","blobState","tempState","undoStack","canUndo","canRedo","removed","UndoStack","setBlobState","createState","destroyState","destroyTempState","addBlobState","states","getBlobState","getTempState","temp","updateTempState","newTempState","addTempState","applyTempState","postApply","currentState","getHistoryStates","undoEnabled","redoEnabled","makeState","updateButtonUndoStates","historyStates","sideBar","imageResultToBlob","unblock","editPanel","applyButton","blobManipulate","blobToImageResult","oImg","manipulate","currentUrl","memUndo","memRedo","renderSideBar","_oImg","tempManipulate","manipulateApply","disableUndoRedo","isSingleListItem","dataAttribute","fetchItems","dropdownComp","selectedValue","findItemByValue","HtmlSelect","initialValues","selectClasses","selectAttributes","selectBehaviours","baseInputBehaviours","multiline","validatingBehaviours","vl","inputMode","inputmode","classname","extraClasses2","flex","maximized","ActiveStreaming","streamConfig","streamState","processor","stream","streams","cancelEvent","_config","setTimer","StreamingState","StreamingSchema","streamInfo","sInfo","throttler","onStream","stopEvent","Streaming","setValueFromItem","itemData","setCursorAtEnd","setSelectionOn","itemExecute","schema$j","parts$6","previewing","selectsOver","inputDisplay_1","getDisplayText","setSelectionToEnd","attemptSelectOver","populateFromBrowse","typeahead","Typeahead","navigateList","highlighter","focusBehaviours$1","responseTime","previousValue_1","pv","sandboxIsOpen","openClass","onItemExecute","dismissOnBlur","typeaheadBehaviours","wrap$2","bindFuture","resA","bindResult","mapResult","foldResult","whenError","whenValue","withTimeout","errorThunk","timedOut","FutureResult","worker","separator$2","toMenuItem","staticMenuItem","filteredTargets","toMenuItems","filterLinkTargets","headerTargets","linkInfo","anchorTargets","anchorTargetTop","anchorTop","anchorTargetBottom","anchorBottom","filterByQuery","term","lowerCaseTerm","errorId","make$6","factories","bar","interpreter","renderBar","collection","runOnItem","tgt","collectionEvents","currentActive","iterCollectionItems","applyAttributes","childElm","htmlLines","mapItemName","renderCollection","alertbanner","iconTooltip","renderAlertBanner","renderInput","textarea","renderTextarea","backstageShared","renderLabel$2","iframe","iframeSpec","makeIframe","isSandbox","sandboxed","sourcing","cachedValue","_frameComponent","frameComponent","contentWindow","getDynamicSource","renderIFrame","renderDialogButton","checkbox","repBehaviour","toggleCheckboxHandler","makeIcon","memIcons","renderCheckbox","colorInputBackstage","span","emitSwatchChange","colorBit","memColorButton","renderPanelButton","colorPicker","colorButton","_field","renderColorInput","colourPickerFactory","memPicker","picker","dropzone","actions","onDrop","transferEvent","handleFiles","onSelect","allowedImageFileTypes","getSetting","filterByExtension","memInput","accept","renderDropZone","renderGrid","listbox","initialItem","listBoxWrap","sketchSpec","renderListBox","selectbox","translatedOptions","chevron","selectWrap","renderSelectBox","sizeinput","urlinput","urlBackstage","updateHistory","urlEntry","addToHistory","fileType","urlInputValue","getLinkInformation","history","historyTargets","getHistory","getItems","memUrlBox","_newValue","getValidationHandler","memInvalidIcon","invalidComp","completer","_menu","_entry","errId","memStatus","optUrlPicker","getUrlPicker","browseUrlEvent","memUrlPickerButton","componentData","urlData","fieldname","chosenData","renderUrlInput","customeditor","editorApi","memReplaced","ta","isOldCustomEditor","scriptId","scriptUrl","ea","cvalue","ed","htmlpanel","imagetools","table","header","renderTd","renderTable","renderPanel","noFormParts","interpretInForm","oldBackstage","newBackstage","interpretParts","bubbleAlignments","valignCentre","alignCentre","alignLeft","alignRight","getInlineDialogAnchor","contentAreaElement","lazyAnchorbar","lazyUseEditableAreaAnchor","getBannerAnchor","getCursorAnchor","bodyElement","getNodeAnchor","getAnchors","isToolbarTop","useFixedToolbarContainer","getContentAreaContainer","inlineDialog","hasCustomColors$1","getColors$2","getColorCols$2","ColorInputBackstage","isDraggableModal$1","isDraggableModal","DialogBackstage","defaultStyleFormats","mapFormats","userFormats","fmt","customFormats","formats","isBlockFormat","isSelectorFormat","formatNameWithPrefix","getStyleFormats","getUserStyleFormats","registeredUserFormats","registerFormats","formatter","registerCustomFormats","isMergeStyleFormats","processBasic","isSelectedFor","getPreviewFor","formatterSpec","getStylePreview","register$3","doEnrich","newItems_1","enrichMenu","getStyleItems","enrichSupported","formatName","customSpec","newItem","enrichCustom","init$7","getCssText","settingsFormats","settingsFlattenedFormats","eventsFormats","eventsFlattenedFormats","replaceSettings","enriched","modifications","fromSettings","fromEvents","getFlattenedKeys","trim$1","hasContentEditableState","contentEditable","isContentEditableTrue","isContentEditableFalse","create$8","getElementText","isValidAnchor","isEditable","isHeader","isChildOfContentEditableTrue","isValidHeader","headerTarget","headerId","getOrGenerateId","getLevel","anchorTarget","anchorId","anchorText","hasTitle","LinkTargets","elms","getTargetElements","getHeaderTargets","getAnchorTargets","STORAGE_KEY","isHttpUrl","isRecordOfUrlArray","getAllHistory","unparsedHistory","SyntaxError","itemsWithoutUrl","setAllHistory","isTruthy","getPicker","getFilePickerCallback","getTextSetting","UrlInputBackstage","noTypeaheadUrls","getFilePickerValidatorHandler","pickerTypes","optFileTypes","getFilePickerTypes","optLegacyTypes","getFileBrowserCallbackTypes","optTypes","_picker","getPickerTypes","getPickerSetting","entry","expandable$1","setMax$1","hideContextToolbarEvent","schema$k","parts$7","Toolbar","shell","toolbarBehaviours","setGroups","groups","output$1","within","withinWidth","apportion","total","parray","toUnit","storedGroups","bGroups","setOverflow","overflowGroup","builtGroups","focusedComp","focusedElm","overflows","overflower","divide","tryFit","fits","fitLast","fitAll","partition$3","schema$l","schema$m","parts$8","schema$n","parts$9","toggledClass","toggle$2","toolbarSandbox","position$2","bounder","setGroups$1","FloatingToolbarButton","makeSandbox$1","getToolbar","schema$o","parts$a","ToolbarGroup","tgroupBehaviours","itemSelector","buildGroups","refresh$1","memFloatingToolbarButton","overflowGroups","floatingToolbarButton","SplitFloatingToolbar","getOverflowBounds","overflowToggledClass","splitToolbarBehaviours","getOverflow","getAnimationRoot","slideConfig","getDimensionProperty","dimension","getDimension","disableTransitions","shrinkingClass","growingClass","setShrunk","closedClass","setGrown","doImmediateShrink","slideState","_calculatedSize","setCollapsed","onStartShrink","onShrunk","doStartShrink","calculatedSize","doStartSmartShrink","doStartGrow","wasShrinking","beforeSize","fullSize","setExpanded","onStartGrow","isGrowing","_slideState","isShrinking","SlidingApis","isExpanded","grow","shrink","immediateShrink","hasGrown","hasShrunk","isTransitioning","toggleGrow","ActiveSliding","propertyName","onGrown","SlidingSchema","Sliding","schema$p","parts$b","onClosed","onOpened","toggleToolbar","overf","refresh$3","SplitSlidingToolbar","toolbarToggleEvent","_button","doSetGroups","isOpen$1","toolbarHeightChange","renderToolbarGroupCommon","toolbarGroup","renderToolbarGroup","getToolbarbehaviours","toolbarSpec","modeName","onAttached","initGroups","renderMoreToolbarCommon","cyclicKeying","renderFloatingMoreToolbar","baseSpec","headerElem","moreDrawerData","lazyHeader","headerBounds","docElem","docBounds","overflowXOffset","renderSlidingMoreToolbar","renderToolbar","scrolling","groupToolbarButtonSchema","baseMenuButtonFields","MenuButtonSchema","createMenuButton","splitButtonSchema","ActiveReflecting","reflectingConfig","reflectingState","renderComponents","newComponents","channel","rawData","ReflectingApis","reflectState","ReflectingSchema","Reflecting","optS","schema$q","arrowPart","arrow","buttonPart","btn","splitDropdown","parts$c","SplitDropdown","executeOnButton","buttonEvents","splitDropdownBehaviours","getButtonApi","getToggleApi","getTooltipAttributes","focusButtonEvent","rtlIcon$1","rtlTransform$1","renderCommonStructure","_d","getIconName","needsRtlClass","renderCommonToolbarButton","specialisation","itemApi","toolbarButtonBehaviours","renderToolbarButtonWith","bonusEvents","renderToolbarToggleButtonWith","fetchChoices","runOnExecute$1","getFormApi","ContextForm","findPrimary","mementos","bridged","renderContextToggleButton","renderContextButton","generateOne$1","asSpecs","compInSystem","generate$7","getContextToolbarBounds","viewportBounds","contentAreaBox","toolbarOrMenubarEnabled","contentBoxWidth","maxViewportWidth","getHorizontalBounds","_b","isToolbarLocationTop","headerBox","isToolbarBelowContentArea","isToolbarAbove","containerBounds","getVerticalBounds","isPositionedAtTop","matchTargetWith","ctxs","toolbarApi","contextToolbars","contextForms","categorise","forms","inNodeScope","inEditorScope","formNavigators","lookupTable","contextForm","registerForm","contextToolbar","registerToolbar","forwardSlideEvent","backSlideEvent","changeSlideEvent","resizingClass","generateSelectItems","_editor","generateItem","rawItem","response","si","invalid","validateItems","preItems","getCurrentValue","shouldHide","createMenuItems","createSelectButton","setInitialValue","getComponent","nodeChangeHandler","exponentPart","unsignedDecimalLiteral","ResizeTypes","buildBasicSettingsDataset","settingName","delimiter","rawFormats","SemiColon","alignMenuItems","command","getSpec","updateSelectMenuIcon","alignment","_format","canApply","systemStackFonts","splitFonts","fontFamily","fonts","font","getSpec$1","getMatchingValue","getFirstFont","queryCommandValue","matchOpt","isSystemFontStack","updateSelectMenuText","legacyFontSizes","keywordFontSizes","getSpec$2","fontSize","_loop_1","precision","pt","factor","round$1","toPt","legacy","toLegacy","Space","findNearest","getStyles","revocable","doRevoke","destroyable","unbindable","onSetupFormatToggle","boundCallback","formatChanged","initialized","onActionToggleFormat","getSpec$3","getSpec$4","getFormatItems","flattenedItems","defaultToolbar","renderFromBridge","bridgeBuilder","togglebutton","menubutton","splitbutton","displayChannel","underlinePath","buttonComp","_c","renderSplitButton","grouptoolbarbutton","TopToBottom","floating","identifyButtons","renderFloatingToolbarButton","allowToolbarGroups","styleSelectButton","styleselect","createStyleSelect","fontsizeSelectButton","createFontsizeSelect","fontSelectButton","createFontSelect","formatButton","createFormatSelect","alignMenuButton","createAlignSelect","bespokeButtons","fontsizeselect","fontselect","formatselect","toolbarConfig","prefixes","toolbarGroups","groupsStrings","filteredItemGroups","subItem","removeUnusedDefaults","isToolbarGroupSettingArray","createToolbar","toolbarItem","extractFrom","lookupButton","bubbleAlignments$1","anchorOverrides","desktopAnchorSpecLayouts","mobileAnchorSpecLayouts","register$4","registryContextToolbars","contextbar","currentWidth","newContents","oldContents","forwardContents","shouldContextToolbarHide","isContextMenuOpen","nodeBounds","diffTop","aTop","aBottom","bTop","bBottom","lastElementBounds","ele","contextToolbarBounds","forceHide","hideOrRepositionIfNecessary","lastAnchor","contextBarEle","wrapInPopDialog","shortcuts","getScopes","alloySpec","buildToolbar","scopes","allButtons","toolbarType","default","buildContextToolbarGroups","buildContextMenuGroups","launchContext","sElem","getAnchorLayout","launchContextToolbar","rootElem","startNode","isOutsideRoot","nodeCandidates","editorCandidates","nodeMatches","editorMatches","doesPositionExist","filterToolbarsByPosition","hasSelectionToolbars","hasNodeToolbars","nodeToolbars","selectionToolbars","filterByPositionForStartNode","matchStartNode","ancestorElem","findPosition_1","filterByPositionForAncestorNode","matchAncestor","lookup$1","parts$d","partType$1","schema$r","itemsPart","parts$e","CustomList","name$2","_external","listBehaviours","setItems","itemComps","numListsRequired","numListsToAdd","itemsToAdd","makeItem","itemsToRemove","builtLists","setupItem","setup$4","isDocked","getBehaviours$2","StaticHeader","getOffsetParent","offsetParent$1","getOrigin","morphAdt","static","appear","contextualInfo","transitionClass","fadeOutClass","fadeInClass","disappear","isVisibleForModes","isBottomCompletelyVisible","isTopCompletelyVisible","getPrior","getInitialPosition","revertToOriginal","setInitialPosition","offsetBox_1","_left","_top","_right","_bottom","getMorph","getModes","morphToOriginal","storePrior","winBox","top_1","isTop","morphToFixed","morphToStatic","onUndocked","morphToCoord","onDocked","updateVisibility","morphToDocked","contextInfo","lazyContext","isPartiallyVisible","setVisible","refresh$4","lazyViewport","morph","setDocked","refreshInternal","reset","getMorphToOriginal","resetInternal","DockingApis","setModes","ActiveDocking","dockInfo","dockState","onShown","onHidden","DockingSchema","Docking","docked","visible","initialBounds","visibility","editorStickyOnClass","editorStickyOffClass","updateIframeContentFlow","parentElem","padding","parentWidth","getOccupiedHeight","updateSinkVisibility","sinkElem","updateEditorClasses","editorContainer","getBehaviours$3","runOnSinkElement","onDockingSwitch","additionalBehaviours","getIframeBehaviours","headerHeight","boxHeight","topBound","focusedElem","ownerDoc","activeElm","rootElm","findFocusedElem","getDockingMode","StickyHeader","containerHeader","viewHeight","innerHeight","scrollPos","markerElement","markerPos","markerHeight","markerTop","markerBottom","editorHeaderPos","editorHeaderHeight","editorHeaderTop","editorHeaderBottom","editorHeaderDockedAtTop","editorHeaderDockedAtBottom","scrollFromBehindHeader","SilverMenubar","setMenus","newMenus","activeButton","hoveredButton","activeComp","hoveredComp","prev","owner$4","schema$s","getPartName$1","make$7","getSlotNames","onSlot","def","slot","doShowing","_key","hideSlot","hideSlots","showSlot","getSlot","hideAllSlots","slotBehaviours","slotApis","SlotContainer","sSpec","sidebarSchema","makePanels","panelConfigs","createSidebar","sidepanel","sidePanelSpec","makeSidebar","slotContainer","whichSidebar","sidebar","fixSize","autoSize","fromHtml$2","getAttrs","renderSpinner","partMenubar","partMultipleToolbar","_mToolbar","tc","_index","partToolbar","sliding","toolbarFactory","renderer","lazyToolbar","lazyMoreButton","partHeader","sticky","partSocket","partSidebar","partThrobber","OuterContainer","getSocket","setSidebar","toggleSidebar","getHeader","setToolbar","setToolbars","mToolbar","refreshToolbar","toggleToolbarDrawer","isToolbarDrawerToggled","getThrobber","focusToolbar","setMenubar","menubar","focusMenubar","grps","grp","renderedToolbars","defaultMenus","edit","tools","help","parseItemsString","identifyMenus","rawMenuData","userDefinedMenus","validMenus","menuData","removedMenuItems","getRemovedMenuItems","itemName","removedMenuItem","make$8","fireSkinLoaded$1","_skinLoaded","fireSkinLoaded","loadStylesheet","stylesheetUrl","styleSheetLoader","unload","loadUiSkins","skinUrl","loadShadowDomUiSkins","loadSkin","isInline","skin","skinName","documentBaseURI","baseURL","getSkinUrl","contentCSS","isSkinDisabled","fireSkinLoadError","fireSkinLoadError$1","rawUiConfig","toolbarButtonsConfig","detection","isiOS12","Iframe","lastToolbarWidth","eTargetNode","targetNode","uiRoot","attachSystemAfter","innerWidth","initialDocEle","lastWindowDimensions","lastDocumentDimensions","resizeWindow","resizeDocument","docEle","fireScrollContent","elementLoad","setupEvents","socket","limit","unbinder","_ui","addQueryValueHandler","toolbarMode","iframeContainer","parseToInt","numToPx","calcCappedSize","minSize","maxSize","minOverride","maxOverride","getWidth$1","baseWidth","minWidth","getTargetPosAndBounds","targetElm","Inline","floatContainer","isSticky","editorMaxWidthOpt","headerBackstage","isSplitToolbar","calcToolbarOffset","tbar","repositionPopups$1","updateChromeUi","resetDocking","bodyMargin","targetBounds","updateChromePosition","floatContainerComp","updateMode","updateUi","currentMode","newMode","toolbar_1","toolbarHeight","docHeight","calcMode","setDockingMode","verticalDir","setupMode","addClass","removeClass","InlineHeader","toolbarPersist","isToolbarPersist","uiContainer","prevPosAndBounds","resizeContent","prevPos","prevBounds","hasResized","requestAnimationFrame","setupEvents$1","nodeChanged","toggleFormat","register$8","_idx","registerFormatButtons","registerCommandButtons","registerCommandToggleButtons","registerButtons$1","registerMenuItems","toggleUndoRedoState","checkState","onUndoStateChange","unsupportedLength","decimalDigits","dot","normaliseLineHeight","accepted","unitRaw","check","isUnit","normalise","getLineHeights","getLineHeightFormats","Map","lastApi","setup$8","cmd","register$5","alignSelectMenu","fontSelectMenu","styleSelectMenu","formatSelectMenu","fontsizeSelectMenu","register$6","registerMenuItems$1","registerButtons$2","register$9","applyFormat","removeFormat","registerCommands","lastForeColor","lastBackColor","registerToolbarButton","hasVisual","onVisualAid","toggleVisualAidState","registerMenuItems$2","register$a","queryCommandState","onNodeChange","toggleOutdentState","registerButtons","register$7","registerMenuItems$3","addMenuButton","registerButtons$3","register$b","nu$d","isTouchEvent$1","getPointAnchor","pageX","pageY","fromPageXY","containerPos","getPos","dx","dy","transpose$1","transposeContentAreaContainer","fromClientXY","getSelectionAnchor","getNodeAnchor$1","initAndShow","buildMenu","contextmenu","useNodeAnchor","anchorSpec","bubbleAlignments$2","initAndShow$1","getPointAnchorSpec","openiOS_1","originalSelection","selectionReset","unbindEventListeners","preventMousedown","clearSelectionReset","setupiOSOverrides","touch_1","rngRect","isTouchWithinSelection","patchPipeConfig","shouldNeverUseNative","isSeparator$1","separator$3","makeContextItem","addContextMenuGroup","groupItems","isTriggeredByKeyboard","pointerType","getSelectedElement","setup$9","setContextMenuState","hideContextMenu","showContextMenu","isNativeOverrideKeyEvent","isContextMenuDisabled","getAvoidOverlapSelector","shouldUseNodeAnchor","selectedElement","defaultItems","contextMenus","getMenuItems","getContextMenu","sections","allItems","generateContextMenu","hideEvents","adt$c","subtract","add$4","transform$1","changes","asFixed","coord","asAbsolute","asOffset","toStyles","stylesOpt","absorb","partialCoord","originalCoord","absorbOne","stencil","optX","optY","absolute$3","fixed$1","parseAttrToInt","NaN","moveOrSnap","snapInfo","newCoord","snapsInfo","leftAttr","topAttr","get$f","getCoords","mustSnap","findClosestSnap","findSnap","fixedCoord","set$8","spanned","findMatchingSnap","snaps","sensor","coord1","coord2","withinRange","getSnapPoints","deltas","getDeltas","bestDeltas","DraggingApis","snapTo","dragConfig","getTarget","repositionTarget","scroll_1","origin_1","snapPin","initialAttribute","instigate","anyComponent","zindex","changeZIndex","discard","resetZIndex","createComponent","blockerClass","blockerEvents","SnapSchema","schema$t","calcStartData","move$1","dragState","dragMode","dragStartData","getStartData","dlt","currentCoord","oc","location","getCurrentCoord","optSnaps","coords","absoluteCoord","newCoords","offset$1","clampCoords","translated","snapping","onSensor","calcNewCoord","onDrag","dragBy","stopDrag","updateStartState","setStartData","MouseData","events$g","stop$1","delayDrop","dragApi","drop","forceDrop","init$c","schema$u","TouchData","getDataFrom","events$h","blockerCell","init$d","mouse","mouseOrTouch","Dragging","dragger","previous","dragEvent","nuData","calculateDelta","calcSnap","selectorOpt","td","snapWidth","selectorHandle","sensorLeft","sensorTop","getSnapsConfig","cellOpt","currentTd","isSameCell","createSelector","setup$a","tlTds","brTds","startCell","finishCell","getTopLeftSnap","memTopLeft","getBottomRightSnap","memBottomRight","topLeftSnaps","bottomRightSnaps","bottomRight","getSnapConfig","isAbove","isBelow","cellRect","viewportHeight","aboveViewport","belowViewport","showOrHideHandle","snapTopLeft","snapBottomRight","otherCells","upOrLeftCells","downOrRightCells","getP","isHidden$1","renderStatusbar","getTextComponents","newPathElements","divider","newPath","parent_1","isPropagationStopped","updatePath","_btn","newAcc","renderElementPath","replaceCountText","words","characters","currentVal","wordCount","renderWordCount","resizeType","None","Both","Vertical","getResizeType","originalHeight","originalWidth","getDimensions","dim","fireResizeEditor","resize$3","renderResizeHandlerIcon","getComponents","setup$b","isGridUiContainer","sinkSpec","reactiveWidthSpec","lazyOuterContainer","platformClasses","deviceClasses","isToolbarBottom","dirAttributes","verticalDirAttributes","memAnchorBar","lazyThrobber","contextMenuState","HeaderBackstage","interpretWithoutForm","init$8","throbber","statusbar","socketSidebarContainer","hasMultipleToolbar","hasToolbar","hasMenubar","editorComponents","containerComponents","border","addQueryStateHandler","ship","fireDismissPopups","onTouchstart","onTouchmove","onTouchend","onMousedown","onMouseup","onContentClick","onContentMouseup","onWindowScroll","onWindowResize","onEditorResize","setup$3","setEditorSize","parsedHeight","baseHeight","minHeight","getHeight$1","getHeightWithFallback","parsedWidth","getWidthWithFallback","renderUI","sidebars","handleToggle","setup$6","throbberState","toggleThrobber","timerId","setup$7","getToolbarGroups","toolbarGroupButtonConfig","addGroupToolbarButton","toolbarOpt","getUi","broadcastAll","schema$x","basic","parts$f","dragBlockClass","getDragBounds","BlockingApis","getBusySpec","blockerBehaviours","blockSpec","isBlocked","onBlock","blockWith","onUnblock","BlockingSchema","Blocking","ModalDialog","dialogComp","modalEventsId","externalBlocker","blockerDom","getFooter","setIdle","setBusy","modalBehaviours","labelledElement","labelElement","describedElement","describeElement","describeId","dialogToggleMenuItemSchema","dialogToggleMenuItemDataProcessor","baseFooterButtonFields","dialogFooterButtonFields","normalFooterButtonFields","menuFooterButtonFields","dialogFooterButtonSchema","alertBannerFields","alertBannerSchema","buttonFields","buttonSchema","checkboxFields","checkboxSchema","checkboxDataProcessor","formComponentFields","formComponentWithLabelFields","collectionFields","collectionSchema","collectionDataProcessor","colorInputSchema","colorInputDataProcessor","colorPickerSchema","colorPickerDataProcessor","customEditorFields","customEditorFieldsOld","customEditorSchema","customEditorDataProcessor","dropZoneSchema","dropZoneDataProcessor","createGridFields","itemsField","htmlPanelFields","htmlPanelSchema","iframeFields","iframeSchema","iframeDataProcessor","imageToolsFields","imageToolsSchema","inputFields","inputSchema","inputDataProcessor","createLabelFields","listBoxSingleItemFields","listBoxNestedItemFields","listBoxItemSchema","listBoxFields","listBoxSchema","listBoxDataProcessor","selectBoxFields","selectBoxSchema","selectBoxDataProcessor","sizeInputFields","sizeInputSchema","sizeInputDataProcessor","tableFields","tableSchema","textAreaFields","textAreaSchema","textAreaDataProcessor","urlInputFields","urlInputSchema","urlInputDataProcessor","createItemsField","itemSchema$3","sErr","passValue","panelSchema","panelFields","tabFields","tabPanelFields","tabPanelSchema","dialogButtonFields","dialogButtonSchema","dialogSchema","tabpanel","urlDialogButtonSchema","urlDialogSchema","getAllObjects","isNamedItem","dataProcessors","togglemenuitem","createDataValidator","namedItems","getNamedItems","getDataProcessor","extract$1","internalDialog","dataValidator","DialogManager","openUrl","redial","toValidValues","renderBodyPanel","memForm","formValue","vals","TabButton","tabButtonBehaviours","schema$y","tabsPart","barDetail","dismissTab$1","tabbar","changeTab$1","clickToDismiss","tabClass","parts$g","Tabbar","tabbarBehaviours","selectedClass","tab","Tabview","tabviewBehaviours","schema$z","barPart","tabs","viewPart","parts$h","TabSection","changeTabBy","section","byPred","tabSectionBehaviours","selectFirst","tabValue","tabview","tabData","onChangeTab","onDismissTab","getViewItems","showTab","tabKey","setTabviewHeight","updateTabviewHeight","dialogBody","maxTabHeight","tablist","documentElement$1","tabviewHeight","currentTabHeight","dialogTopMargin","dialogBottomMargin","getMaxTabviewHeight","getTabview","SendDataToSectionChannel","SendDataToViewChannel","renderTabPanel","storedValue","updateDataWithForm","formData","validData","currentData","setDataOnForm","oldTab","allTabs","tabMode","smartTabHeight","extraEvents","tabviewComp","heights","maxTabHeightOpt","_tab","measureHeights","oldHeight","naiveTabHeight","_viewItems","oldName","tsection","dialogChannel","titleChannel","bodyChannel","footerChannel","bodySendMessageChannel","renderBody","ariaAttrs","incoming","isTabPanel","hiddenHeader","pClose","pUntitled","pBodyMessage","pFooter","footer","pFooterGroup","startButtons","endButtons","renderDialog","dialogClass","blockerBackdropClass","scrollLockClass","extraStyles","dialogEvents","renderClose","renderTitle","renderDragHandle","pTitle","pHandle","draghandle","draggable","renderModalHeader","bs","getEventExtras","lazyDialog","closeWindow","blockEvent","renderModalDialog","mapMenuButtons","mapItems","extractCellsToObject","innerAcc","initCommonEvents","fireApiEvent","_event","SilverDialogEvents","getInstanceApi","withSpec","currentDialogInit","cur","onTabChange","newTabName","oldTabName","footerButtons","buttonGroups","makeGroup","memento","renderFooter","initSpec","makeButton","lookupByName","buttonName","lookup$2","renderModalFooter","getCompByName","form_1","getFormWrapper","getDialogApi","doRedial","menuItemStates","withRoot","instanceApi","valueComp","representedValues","menuItemCurrentState","prevData","mergedData","newInternalData","dialogState","validateData","tabSection","dialogInit","global$h","SUPPORTED_MESSAGE_ACTIONS","isSupportedMessage","mceAction","renderUrlDialog","bodySpec","currentDialog","iframeUri","base_uri","iframeDomain","protocol","port","messageHandlerUnbinder","isSameOrigin","handleMessage","isCustomMessage","onMessage","iframeEle","postMessage","sendMessage","inlineAdditionalBehaviours","setup$e","isStickyToolbar$1","alertDialog","closeDialog","memFooterClose","titleSpec","closeSpec","footerCloseButton","setup$c","confirmDialog","memFooterYes","footerNo","footerYesButton","setup$d","openModalDialog","internalInitialData","renderModalBody","storagedMenuButtons","objOfCells","dialogSize","getDialogSizeClasses","outerForm","renderDialog$1","openInlineDialog","config$1","refreshDocking","dialogUi","titleId","dialogLabelId","dialogContentId","memHeader","memBody","contentId","renderInlineBody","memFooter","renderInlineFooter","renderInlineDialog","inlineDialogComp","isAlertOrConfirmDialog","openModalUrlDialog","windowMgr","getWindowManagerImpl","getNotificationManagerImpl","closeCallback","hideCloseButton","notificationWrapper","notification","progressBar","moveTo","moveRel","layoutDirection_1","getLayoutDirection","nodeAnchor","nuText","notifications","prePositionNotifications","firstItem","positionNotifications","getArgs","NotificationManagerImpl","typeOf","eqString","eqArray","eqa","eqRecord","kx","ky","compareFn","contramap","eqSortedArray","q","eqAny","tx","isEquatableType","map$1","bifilter","isArray$1","each$2","l","indexOf$1","reduce","iteratee","accumulator","startsWith","lTrim","rTrim","platform$1","fileApi","windowsPhone","Env","caretAfter","documentMode","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","desktop","whiteSpaceRegExp","delim","exts","sp","scn","de","cn","ns","createNS","onCreate","_addCacheSuffix","toArray$1","recurse","is$1","eq$2","prevSibling","previousSibling","prevSiblings","nextSiblings","getStyleContainer","getHead","intoView","alignToTop","scrollIntoViewIfNeeded","isNodeType","isRestrictedNode","getPrototypeOf","matchNodeNames","lowercasedNames","matchStyleValues","computed","attrName","isBogus","isTable","tagName","isTextareaOrInput","isComment$1","isDocument$1","isDocumentFragment$1","isBr","isImg","isTableCell","isMedia","browser$1","firstElement","hasChild","module$1","unite","requestAnimationFramePromise","descendant","promiseObj","wrappedSetTimeout","wrappedSetInterval","debounce","func","Delay","requestAnimationFrameFunc","vendors","setEditorInterval","StyleSheetLoader","documentOrShadowRoot","idCount","loadedStates","edos","maxLoadTime","failure","urlWithSuffix","passed","failed","getOrCreateState","onerror","waitForWebKitLinkLoaded","waitCallback","styleSheets","ownerNode","testCallback","now","linkElem","contentCssCors","referrerPolicy","loadF","styleContainer","loadAll","urls","futures","asyncValues","asyncValue","par","unloadAll","_setReferrerPolicy","WeakMap","forElement","referenceElement","rootDom","sl","DomTreeWalker","prev2","shallow","findSibling","findPreviousNode","startName","siblingName","sibling","lazyLookup","isHeading","isBr$1","isTextBlock","isList","isListItem","isTableSection","isTableCell$1","isWsPreserveElement","ZWSP","isZwsp$1","trim$2","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","hasContent","isBeforeInline","isAtStart","isAfterInline","isAtEnd","startsWithCaretContainer","endsWithCaretContainer","showCaretContainerBlock","caretContainer","lastBr","brs","getElementsByTagName","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$2","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isEditableCaretCandidate","isInEditable","whiteSpaceRegExp$1","isWhitespaceText","isContent","rootElement","hasWhitespacePreserveParent","isNamedAnchor","isBookmark","isBogus$1","isBogusAll$1","isEmpty","skipBogus","brCount","isEmptyNode","isInlineContent","isBookmarkNode","isSpan","trimNode","currentChildren","isDocument$2","isKeepElement","prevIsInline","nextIsInline","surroundedByInlineContent","isKeepTextNode","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","baseEntities","'","reverseEntities","buildEntitiesLookup","radix","entity","fromCharCode","namedEntities","encodeRaw","encodeNumeric","encodeNamed","entities","Entities","getEncodeFunc","entitiesMap","nameMap","named","numeric","nativeDecode","mapCache","dummyObj","makeMap$2","each$3","extend$1","explode$1","compileElementMap","Schema","patternElements","customElementsMap","specialElements","createLookupTable","defaultValue","extendWith","schemaItems","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","arrayToMap","addAttrs","schemaItem","caption","script","compileSchema","verify_html","valid_styles","invalidStyles","invalid_styles","validClasses","valid_classes","whiteSpaceElementsMap","selfClosingElementsMap","shortEndedElementsMap","boolAttrMap","nonEmptyOrMoveCaretBeforeOnEnter","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","blockElementsMap","textInlineElementsMap","patternToRegExp","addValidElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","validElementsArr","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","custom_elements","extended_valid_elements","dd","dt","li","th","tr","tbody","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getValidClasses","getInvalidStyles","getTextBlockElements","getBoolAttrs","getSelfClosingElements","getNonEmptyElements","getMoveCaretBeforeOnEnterElements","getWhiteSpaceElements","getSpecialElements","isValidChild","attrPatterns","getCustomElements","support","Expr","isXML","tokenize","compile","outermostContext","sortInput","hasDuplicate","setDocument","document$1","documentIsHTML","rbuggyQSA","rbuggyMatches","contains$3","Styles","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","encodingItems","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","allow_svg_data_urls","lastIndex","serializeStyles","styleList","i_1","styleMap","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","mozPressure","returnFalse","returnTrue","addEvent","attachEvent","removeEvent","detachEvent","fix","originalEvent","srcElement","isMouseEvent","eventDoc","cancelBubble","isImmediatePropagationStopped","hasIsDefaultPrevented","bindOnReady","eventUtils","domLoaded","readyHandler","readyState","EventUtils","expando","hasMouseEnterLeave","hasFocusIn","callbackList","fakeName","nativeHandler","defaultNativeHandler","executeHandlers","namesList","mouseEnterLeave","currentTarget","related","relatedTarget","ci","eventMap","parentWindow","clean","Event","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","push_native","indexOf$2","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","seed","nid","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","diff","sourceIndex","createPositionalPseudo","argument","matchIndexes","setFilters","tokens","addCombinator","matcher","combinator","checkNonElements","doneName","xml","oldCache","outerCache","newCache","elementMatcher","matchers","condense","unmatched","newUnmatched","mapped","setMatcher","preFilter","postFilter","postFinder","postSelector","preMap","postMap","preexisting","elems","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","hasCompare","getTop","attrId","tmp","disconnectedMatch","adown","bup","compare","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","excess","unquoted","nodeNameSelector","operator","what","forward","ofType","nodeIndex","useCache","pseudo","matched","lang","elemLang","hash","tabIndex","selectedIndex","even","odd","lt","gt","nth","createInputPseudo","createButtonPseudo","filters","parseOnly","soFar","preFilters","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","matcherFromGroupMatchers","token","compiled","push$1","slice$1","rquickExpr$1","skipUniques","isDefined","isString$1","createFragment","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","hasClass","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","DomQueryConstructor","whiteSpaceRegExp$2","trim$3","each$4","hook","removeAttr","camel","dashed","currentStyle","prependTo","replaceWith","wrapInner","classState","existingClassName","trigger","docElm","object","sibling$1","firstSibling","contentDocument","wrappedResult","parentsUntil","nextUntil","prevUntil","overrideDefaults","sub","each$5","grep$1","simpleSelectorRe","updateInternalStyleAttr","$elm","findNodeIndex","normalized","lastNodeType","DOMUtils","_this","addedStyles","counter","boundEvents","ownEvents","$$","defaultVal","getAttribs","originalValue","onSetAttrib","attrElm","attrValue","root_element","getPos$1","bodyTop","captionTop","captionHeight","getTableCaptionDeltaY","getSize","collect","selectorVal","_findSib","setHTML","canHaveHTML","parentElm","newElm","keepChildren","$node","oldElm","replaceChild","isNonEmptyElement","rv","stdMode","boxModel","deep","clone_1","getViewPort","argWin","getPrev","outHtml","update_styles","stylesArg","removeAllAttribs","removeAttributeNode","cssText","addStyle","styleElm","styleSheet","loadCSS","getOuterHTML","outerHTML","setOuterHTML","insertAfter","reference","referenceNode","rename","attrNode","findCommonAncestor","pe","rgbVal","bogusVal","splitElm","replacementElm","beforeFragment","afterFragment","getContentEditableParent","isChildOf","dumpRng","keepValues","keep_values","keepUrlHook","setupAttrHooks","DOMUtils$1","each$6","grep$2","ScriptLoader","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","cleanup","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","currentCode","getLanguageData","I18n","setCode","newCode","getCode","langData","translation","getLangData","textstr","removeContext","isTokenised","$1","$2","hasCode","AddOnManager","_listeners","runListeners","matchedListeners","dependencies","createUrl","baseUrl","resource","addOnUrl","urlString","deps","newUrl","loadDependencies","waitFor","requireLangPack","languages","languageLoad","language","addOn","addOnConstructor","addComponents","pluginName","pluginUrl","PluginManager","ThemeManager","AddOnManager$1","annotation","dataAnnotation","dataAnnotationId","identify","annotationName","an","newStart","getAttr","findMarkers","TextWalker","TextSeeker","isBlockBoundary","newOffset","forwards","lift2","clone$2","toStart","isValidOverflow","overflowY","rect1","rect2","halfHeight","containsXY","getSelectedNode","extendingChars","isExtendingChar","isElement$3","isCaretCandidate$1","isBlock$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","isZeroRect","clientRect","clientRects","brNode","nbsp$1","getBrClientRect","sc","ec","so","eo","newRng","getBoundingClientRectWebKitText","collapseAndInflateWidth","newClientRect","CaretPosition","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","getCaretPositionClientRects","toRange","isEqual","fromRangeStart","fromRangeEnd","pos1","pos2","isTextPosition","isElementPosition","HDirection","CaretPosition$1","trimEmptyTextNode","rangeInsertNode","insertFragment","isText$5","isBogus$2","nodeIndex$1","normalizedParent","getChildNodes","equal$1","createPathItem","numTextFragments","normalizedNodeIndex","outputOffset","normalizedTextOffset","resolve$1","resolvePathItem","dataLen","targetOffset","findTextPosition","isContentEditableFalse$2","getPoint","trimmedOffset","getNormalizedTextOffset","findIndex$2","moveEndPoint","normalizeTableCellSelection","getOffsetBookmark","findAdjacentContentEditableFalseElm","getLocation","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","getUndoBookmark","DOM$1","getBodySetting","bodyObj","getContentSecurityPolicy","isAutomaticUploadsEnabled","shouldReuseFileName","getIconPackName","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getReferrerPolicy","getLanguageCode","shouldIndentUseMargin","getObjectResizing","getEventRoot","getTheme","shouldValidate","isInlineBoundariesEnabled","hasContentCssCors","getPlugins","isElement$4","isText$6","removeNode","trimCount","trimmedText","deleteZwspChars","deleteData","removeUnchanged","removeAndReposition","removeTextAndReposition","removeTextCaretContainer","newPosition","removeElementAndReposition","removeElementCaretContainer","caretContainerNode","browser$2","isContentEditableFalse$3","isMedia$1","isTableCell$2","getAbsoluteClientRect","scrollX","scrollY","rootRect","FakeCaret","cursorInterval","lastVisualCaret","rootBlock","caretBlock","fakeCaretTargetNodes","trimInlineCaretContainers","caretState","textNode","splitText","insertInline","isInlineFakeCaretTarget","br","blockNode","insertBlock","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isMedia$2","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","isCefOrCaretContainer","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","before$2","after$1","normalizeRange","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isAtomicContentEditableFalse","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","findCaretPosition","startPos","nextNode","innerNode","Forwards","moveForwardFromBr","rootContentEditableFalseElm","CaretWalker","Backwards","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","fromPosition","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","walkToPositionIn","nextPosition","prevPosition","firstPositionIn","lastPositionIn","CARET_ID","isCaretNode","getParentCaretContainer","addBogus","tryFindRangePosition","padEmptyCaretContainer","isEmpty$1","insertZwsp","setEndPoint","isValidTextNode","restoreEndPoint","appendData","getBookmark$1","getCaretBookmark","getRangeBookmark","isPathBookmark","resolvePaths","isStringPathBookmark","resolveCaretPositionBookmark","isIdBookmark","endPos","spos","epos","resolveId","isIndexBookmark","resolveIndex$1","isRangeBookmark","resolve$2","isBookmarkNode$1","isNbsp","actual","isWhiteSpace$1","isContent$1","isNode","moveStart","isInlineBlock","isWhiteSpaceNode","getNonWhiteSpaceSibling","inc","nextName","isTextBlock$1","allowSpaces","replaceVars","vars","isEq","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$1","isInlineFormat","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findParentContentEditable","walkText","findSpace","findContent","findWordEndPoint","includeTrailingSpaces","lastTextNode","textSeeker","textOffset","findSelectorEndPoint","curFormat","findBlockEndPoint","scopeRoot","isAtBlockBoundary","findParentContainer","block_expand","isSelfOrParentBookmark","expandRng","includeTrailingSpace","clampToExistingChildren","walk$1","collectSiblings","endNode","siblings","findEndPoint","walkBoundary","siblings_1","startPoint","endPoint","getCellsFromElementOrRanges","selectedCells","getSelectedNodes","getCellsFromRanges","getCellsFromEditor","getSel","getFirstChildren","getLastChildren","hasAllContentsSelected","getStartNode","getEndNode","moveEndPoint$1","hasAnyRanges","runOnRanges","fakeSelectionNodes","fakeNodeRng","fillBookmark","makeAnnotation","eDoc","decorate","master","annotate","newWrappers","finishWrapper","processElements","processElement","wrapName","isZeroWidth","isAnnotation","processNodes","Annotator","annotations","serializer","spans","identifyParserNode","persistent","_registry","changeCallbacks","withCallbacks","updateCallbacks","callbackMap","outputData","fireNoAnnotation","fireCallbacks","initialRng","hasFakeSelection","applyWordGrab","selectionRng","annotateWithBookmark","annotationChanged","nodesAlready","findAll","BookmarkManager","BookmarkManager$1","getContentEditableRoot","isXYWithinRange","VK","DELETE","END","HOME","modifierPressed","isContentEditableFalse$6","ControlSelection","selectedElmGhost","resizeHelper","selectedHandle","startW","startH","ratio","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","rootDocument","resizeHandles","nw","ne","sw","contextMenuSelectImage","isEventOnImageOutsideRange","getResizeTarget","isResizable","setGhostElmSize","ghostElm","resizeGhostElement","resizeHelperX","resizeHelperY","getResizeImgProportional","selectedElmX","selectedElmY","fireObjectResizeStart","endGhostResize","wasResizeStarted","setSizeProp","showResizeRect","fireObjectResized","hideResizeRect","unbindResizeHandleEvents","targetWidth","targetHeight","unSelectabe","startDrag","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","handleMSControlSelect_1","delayedSelect","throttledUpdateResizeRect","composing","hasCeProperty","fromPoint$1","pointDoc","caretPositionFromPoint","offsetNode","caretRangeFromPoint","createTextRange","moveToPoint","elementFromPoint","moveToElementText","findClosestIeRange","parentElement","findParent","moveOutOfContentEditableFalse","isEq$1","rng1","hasParent","findParent$1","hasParentWithName","isTable$3","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","hasContentEditableFalseParent","isPrevNode","normRng","split$1","RangeUtils","normalizedRng","compareRanges","documentFocusInHandler","RangeUtils$1","excludeFromDescend","markerInfo","cleanupFun","withMarker","preserveWith","applyWithMarker","withScrollEvents","fireScrollIntoViewEvent","fireAfterScrollIntoViewEvent","withElement","elementMarker","startElement","endElement","scrollToMarker","intoWindowIfNeeded","viewportBottom","largerThanViewport","intoWindow","intoFrame","frameViewHeight","op","rangeIntoWindow","elementIntoWindow","rangeIntoFrame","elementIntoFrame","scrollRangeIntoView","browser$3","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","bookmarkToNativeRng","newBookmark","FocusManager","isEditorUIElement","throttledStore","mouseUpPage","registerPageMouseUp","registerFocusOut","registerMouseUp","selectionChange","isManualNodeChange","registerEditorEvents","DOM$2","isUIElement","customSelector","getCustomUiSelector","isEditorUIElement$1","registerEvents","editorManager","focusedEditor","blurredEditor","getActiveElement","activeEditor","unregisterDocumentEvents","normalizeSelection","getCollapsedNode","getFocusInElement","caretPos","focusBody","hasFocus$1","rawBody","hasInlineFocus","iframeElement","hasIframeFocus","activateEditor","getEndpointElement","real","getStart$2","skipEmptyTextNodes","processRanges","ancestor$3","isEq$2","matchesUnInheritedFormatSelector","formatList","inherit","matchParents","matchNode","matchName","matchItems","similar","onmatch","matchAllOnNode","formatNames","matchSimilar","isVariableValue","fieldValues","isVariableFormatName","typeLookup","walk$2","isEmptyTextNode$1","AstNode","selfAttrs","cloneAttrs","selfAttr","refNode","makeMap$3","Writer","indent","indentBefore","indent_before","indentAfter","indent_after","entity_encoding","htmlOutput","element_format","cdata","comment","pi","doctype","HtmlSerializer","writer","8","7","10","11","sortedAttrs","elementRule","restoreDataUris","imageId","uris","safeSvgDataUrlElements","findEndTagIndex","startIndex","tokenRegExp","checkBogusAttribute","attrString","SaxParser","fix_self_closing","parseInternal","base64Extract","endRegExp","attrList","textData","isInternalElement","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","filteredUrlAttrs","scriptUriRegExp","parsingMode","processEndTag","processText","processComment","allow_conditional_comments","processMalformedComment","startTag","lcHtml","isConditionalComment","endIfIndex","endCommentRegexp","findCommentEndIndex","parseAttribute","val2","val3","attrRule","processAttr","fillAttrsMap","isValidPrefixAttrName","unescape","allow_html_data_urls","allowSvgDataUrls","blockSvgDataUris","isInvalidUri","attrRegExp","selfClosing","self_closing_elements","removeInternalElements","remove_internals","fixSelfClosing","processHtml","bogusValue","preserve_cdata","dataImageUri","extractBase64DataUris","findEndTag","SaxParser$1","trimInternal","endTagIndex","bogusAllRegExp","tempAttrs","trimContentRegExp","getTempAttrs","trimExternal","each$7","ElementUtils","attribs","compareObjects","obj1","obj2","isChar","isBeforeSpace","isAfterSpace","isEmptyText","matchesElementPosition","isImageBlock","isCefNode","isBogusAll","isBeforeImageBlock","isAfterImageBlock","isBeforeMedia","isAfterMedia","isBeforeTable","isAfterTable","isBeforeContentEditableFalse","isAfterContentEditableFalse","fillWithPaddingBr","trimBlockTrailingBr","lastChildPrevSibling","parents$1","rawParent","parentsUntil$1","parentsAndSelf","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","newPos","fromBlock","isAtBlockBoundary$1","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isBr$5","findBr","parentBlocks","isBeforeBr","isAfterBr","getElementFromPrevPosition","findPreviousBr","findNextBr","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isInPre","isPreValue","needsToBeNbspLeft","needsToBeNbspRight","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbsps","newText","firstPos","normalizeNbspAtStart","chars","normalizeNbspMiddle","lastPos","normalizeNbspAtEnd","normalizeNbspsInEditor","normalize$1","isEndOfContent","isStartOfContent","replaceData","previousCharIsSpace","normalizeContent","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","mergeToPrev","whitespaceOffset","newNode","insertData","needsReposition","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPosOutsideElmAfterDelete","findCaretPositionForwardsFromElm","findCaretPositionForward","startPosition","findCaretPositionBackwardsFromElm","findCaretPositionBackwards","findCaretPosition$1","setSelection","isBlock$2","paddEmptyBlock","deleteElement","moveCaret","rawNode","afterDeletePos","parentBlock","normalizedAfterDeletePos","afterDeletePosOpt","prevTextOpt","nextTextOpt","deleteNormalized","isInlineElement","paddPos","tableCellRng","deleteAction","removeTable","emptyCells","deleteCellSelection","getClosestCell","getClosestTable","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","isWithinSameTable","getTableSelection","optCellRng","endCell","getCellRangeFromStartTable","partialSelection","cRng","tableSelection","getTableSelectionFromCellRng","getCellIndex","getSelectedCells","getActionFromRange","isRootFromElement","getCellRng","isSingleCellTable","isSingleCellTableContentSelected","freefallRtl","deleteCellContents","deleteContents","lastNode","lastBlock","additionalCleanupNodes","deleteTableElement","getParentCell","getParentCaption","emptyElement","isNearTable","deleteCaret","startElm","fromCell","deleteBetweenCells","deleteCaretCells","fromPos","isBeforeOrAfterTable","fromCaption","isDeleteOfLastCharPos","emptyCaretCaption","toCaption","validateCaretCaption","deleteCaretInsideCaption","deleteCaretCaption","backspaceDelete","deleteCellRange","deleteCaptionRange","deleteTableRange","deleteRange","normalize$2","commonAncestorContainer","newEndPos","createRange$1","normalizeBlockSelectionRange","isListFragment","nonEmptyElements","hasOnlyOneChild","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","trimListItems","isPadding","getParentLi","findLastOf","newCaretPos","insertAtCaret","domFragment","cleanupDomFragment","toDomFragment","liTarget","liElms","isAt","caretWalker","findFirstIn","beforeRng","afterRng","getSplit","insertMiddle","isTableCell$4","insertHtmlAtCaret","trimOrPadLeftRight","bookmarkHtml","caretElement","canHaveChildren","isTableCellContentSelected","deleteSelectedContent","parserArgs","isParentBlockLi","markFragmentElements","_selectionOverrides","showBlockCaretContainer","validInsertion","textInlineElements","root_1","elementUtils_1","testNode","reduceInlineTextElements","nextRng","parentEditableFalseElm","getContentEditableFalseParent","isPartOfFragment","findNextCaretRng","moveSelectionToMarker","trimBrsFromTableCell","addVisual","traverse","filter$3","nodeFilters","attributeFilters","attrMatches","name_2","findMatchingNodes","isTreeNode","setEditorHtml","moveSelection","sibling$2","child$1","ZWSP$1","CARET_ID$1","isCaretContainerEmpty","getEmptyCaretContainers","findFirstTextNode","createCaretContainer","fill","removeCaretContainerNode","trimZwspFromCaretContainer","removeCaretContainer","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","formatNode","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","allBrs","getLastChildren$1","insertCaretContainerNode","cleanedFormatNode","validFormats","matchedFormats","fmtName","otherFormatName","filterObj","validKey","fmt1","filteredFmt1","fmt2","filteredFmt2","equal","areSimilarFormats","clonedFormatNode","cleanFormatNode","caretTextNode","isFormatElement","postProcessHooks","filter$4","each$8","isPre","getSelectedBlocks","pre","pre1","pre2","each$9","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","mergeSiblings","merge_siblings","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","removeResult","MCE_ATTR_RE","each$a","isEq$3","isChildOfInlineParent","lastIdx","normalizeTableSelection","isTableCellOrRow","childNode","wrapWithSiblings","removeFormatInternal","compareNode","stylesModified","matchName$1","isColorFormatAndAnchor","preserve_attributes","attrsToPreserve","remove_similar","valueOut","rootBlockElm","forcedRootBlock","list_block","forced_root_block_attrs","removeNode$1","newName","removeFormatFromClone","splitToFormatRoot","formatRoot","findFormatRoot","lastClone","firstClone","formatRootParent","mixed","wrapAndSplit","lastContentEditable","isRemoveBookmarkNode","removeRngStyle","textDecoration","ceFalseOverride","each$b","each$c","hasFormatProperty","setElementFormat","onformat","styleVal","applyNodeStyle","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","parentName","canFormatEmptyLines","validBRParentElements","figcaption","summary","hasCaretNodeSibling","canFormatBR","childCount","isEmptyTextNode","getChildCount","isElementNode$1","getChildElementNode","mergeStyles","clear_child_styles","clearChildStyles","mergeWithChildren","merge_with_parents","mergeWithParents","backgroundColor","mergeBackgroundColorAndFontSize","processTextDecorationsAndColor","mergeTextDecorationsAndColor","mergeSubSup","wordcharRegex","importNode","applyCaretFormat","curSelNode","firstFormat","defaultBlock","fake","formatItem","filterRemainingFormats","currentFormats","formatChangedInternal","registeredFormatListeners","formatChangeData","formatsList","newFormats","remainingFormats","updateAndFireChangeCallbacks","formatChangeItems","addListeners","fromElements","tableModel","tableRow","cellPosition","getSpan","cellExists","findElementPos","extractRows","sx","sy","ey","newRows","toDom","tableElement","tableBody","createDomTable","modelRowsToDomRows","getFullySelectedListWrappers","_li","findParentListContainer","listCont","listElm","_style","emptyFragment","getFragmentFromRange","innerElm","commonAnchorContainer","wrapElements","listWrappers","allWrappers","directListWrappers","getWrapElements","getTableFragment","selectedTableCells","tableElm","firstCell","lastCell","fullTableModel","rowspan","colspan","y2","x2","fillout","skipCellsX","fromDom$1","subTable","sectionedTableModel","getInnerText","bin","shouldTrim","trimLeadingCollapsibleText","getSelectedContentInternal","parentBlockOpt","contextNodeName","getContextNodeName","shouldTrimSpaces","nonRenderedText","parentBlockText","textIndex","getTextContent","getInner","tmpElm","getSelectionFragment","getSerializedContent","getOuterHtml","fragments","vDown","vUp","buildScript","buildSnake","getMiddleSnake","currentFragments","createFragment$1","insertAt","removeAt","applyDiff","start1","end1","start2","end2","diag","i2","snake","undoLevelDocument","createFromEditor","trimmedFragments","trimmed","beforeBookmark","createFragmentedLevel","createCompleteLevel","applyToEditor","getLevelContent","getCleanLevelContent","implementation","createHTMLDocument","isEq$4","level1","level2","hasEqualContent","hasEqualCleanedContent","isUnlocked","locks","setTyping","typing","endTyping","isTreeNode$1","runSerializerFiltersOnFragment","getNodeFilters","getAttributeFilters","makePlainAdaptor","beforeChange","addUndoLevel","currentLevel","bm","customUndoRedoLevels","getCustomUndoRedoLevels","setDirty","hasUndo","hasRedo","callback1","callback2","matchAll","matchedFormatNames","checkedMap","rawElm","no_events","emptyRegExp","trimEmptyContents","getContentFromBody","getContentInternal","setContentTree","forcedRootBlockName","padd","setContentString","setContentInternal","isVisualAidsEnabled","matchedElm","getVisualAidsTableClass","value_1","cls_1","getVisualAidsAnchorClass","addVisualInternal","getModel","isRtc","getRtcInstanceWithFallback","rtcInstance","getRtcInstanceWithError","mergeAndNormalizeText","outerNode","outerElm","oldLength","walkPastBookmark","normalizeTextIfRequired","deleteFromCallbackMap","newCallbacks","isNativeIeSelection","isAttachedToDom","EditorSelection","selectedRange","explicitRange","selectorChangedWithUnbind","selectorChangedData","currentSelectors","matchedSelectors","SelectorChanged","contentArgs","setupArgs","contextBlock","contextArgs","cleanContent","prevText","nextText","rngSetContent","createContextualFragment","setContent$1","getRng$1","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","isValidRange","ieRange","removeAllRanges","addRange","setBaseAndExtent","isForward","anchorRange","focusRange","bookmarkManager","controlSelection","getSelectedContent","getContent$1","select$1","compareEndPoints","setNode","getNode$1","endElm","selectedBlocks","selectorChanged","getScrollContainer","scrollContainer","scrollElementIntoView","placeCaretAt","addFilters","convert_fonts_to_spans","fontSizes","face","removeAttrs","addFontToSpansFilter","font_size_legacy_values","addStrikeToSpanFilter","parseDataUri$1","uriParts","buildBlob","uriToBlob","rejectWithError","xhr","XMLHttpRequest","responseType","blobUriToBlob","ImageScanner","uploadStatus","cachedPromises","getAllImages","isUploaded","promises","imageInfo","newPromise","getByUri","dataUri","imageToBlobInfo","paddEmptyNode","padd_empty_with_br","hasOnlyChild","isEmpty$2","whitespaceElements","isPadded","makeMap$4","each$d","explode$2","extend$2","DomParser","matchedNodes","matchedAttributes","root_name","filterNode","fi","fl","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","getRootBlockName","whiteSpaceElements","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","isLineBreakNode","attrFiltersLen","tempNode","isPaddedWithNbsp","newParent","nonSplitableElements","textBlockElements","fixInvalidChildren","rootBlockNode","addRootBlocks","remove_trailing_brs","prevName","allow_unsafe_link_target","appendRel","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","blob_cache","processImage","inputSrc","isInternalImageSource","isBogusImage","images_dataimg_filter","imgElem_1","isValidDataImg","registerBase64ImageFilter","inline_styles","addTempAttr","htmlParser","DomSerializerImpl","internalName","shouldFireEvent","oldDoc","impl","firePreProcess","getHtmlFromNode","brNode1","brNode2","trimTrailingBr","parseHtml","firePostProcess","postProcess$1","serializeNode","toHtml","addRules","setRules","DomSerializer","domSerializer","setContent$2","DOM$3","safeDestroy","hasOwnProperty$2","deviceDetection","legacyMobilePlugins","defaultTouchSettings","table_grid","object_resizing","normalizePlugins","pluginNames","trimmedPlugins","hasSection","sectionResult","getDefaultMobileSettings","mobileSettings","defaultMobileSettings","toolbar_mode","toolbar_sticky","getExternalPlugins$1","overrideSettings","userDefinedExternalPlugins","external_plugins","processPlugins","isMobileDevice","defaultOverrideSettings","forcedPlugins","forced_plugins","desktopPlugins","mobileConfig","getSectionConfig","combinedPlugins","combinePlugins","mobilePlugins","theme","isSectionTheme","getPlatformPlugins","combineSettings","defaultSettings","defaultDeviceSettings","mobile","extractSections","extendedSettings","isOnMobile","sectionSettings","getSection","getFiltered","iconPack","getProp","propName","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","isXYInContentArea","bodyElm","transposedPoint","getBoundingClientRect$1","transpose","isInsideElementContentArea","NotificationManager","getImplementation","unimplemented","getTopNotification","closeNotification","otherNotification","fireEvent","isEditorAttachedToDom","addNotification","serviceMessage","getServiceMessage","getNotifications","WindowManager","dialogs","getParams","setParams","funcBind","fireCloseEvent","otherDialog","storeSelectionAndOpenDialog","fireOpenEvent","addDialog","displayNotification","notificationManager","displayError","logError","errorType","fireError","createLoadError","pluginLoadError","initError","Uploader","pendingPromises","defaultHandler","withCredentials","credentials","upload","onprogress","path1","path2","json","responseText","basePath","FormData","handlerSuccess","handlerFailure","resolvePending","blobInfos","openNotification","isPending","pendingUploadBlobInfo","markPending","closeNotification_1","markUploaded","failureOptions","removeFailed","uploadBlobInfo","uploadBlobs","count$1","uuid","rnd","BreakType","each$e","parsedSelectorToHtml","ancestry","sItem","wrapInHtml","parentCandidate","ancestorName","parentRequired","elmRule","getRequiredParent","siblingElm","parseSelectorItem","$0","$3","$4","previewFrag","parentFontSize","previewCss","previewStyles","getPreviewStyles","removeVars","previewOpt","previewElm","Formatter","valigntop","verticalAlign","valignmiddle","valignbottom","alignleft","textAlign","aligncenter","marginLeft","marginRight","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","strikethrough","forecolor","hilitecolor","fontname","fontsize","lineheight","lineHeight","fontsize_class","blockquote","subscript","superscript","_fmt","_itemName","removeformat","getFormats","FormatRegistry","formatChangeState","disableCaretContainer","applyFormat$1","removeFormat$1","matchFormat","closestFormat","matchAllFormats","matchNodeFormat","canApplyFormat","UndoManager","beforeChange$1","addUndoLevel$1","undo$1","redo$1","clear$1","reset$1","hasUndo$1","hasRedo$1","transact$1","ignore$1","extra$1","isFirstTypedCharacter","addNonTypingUndoLevel","isDirty","modKey","inputType","isInsertFromPasteOrDrop","registerEvents$1","addKeyboardShortcuts","nonTypingKeycodes","placeholderAttr","isKeyboardEvent","isDeleteEvent","strongRtl","isInlineTarget","getInlineBoundarySelector","findRootInline","findInlineParents","normalizePosition","normalizeForwards","normalizeBackwards","getParentBlock$1","isBeforeRoot","paddEmptyBody","placeCaretInEmptyBody","blockBoundary","getBlockPosition","blockPosition","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","nestedBlockMerge","toBlock","insertionPoint","sidelongBlockMerge","trimBr","mergeBlockInto","parentsAndSelf$1","findInsertionPoint","getInsertionPoint","mergeBlocks","block1","block2","backspaceDelete$1","fromBlockPos","toBlockPos","blockPos","lastPositionInBlock","skipLastBr","isDifferentBlocks","parent1","parent2","hasSameParent","readFromRange","read$3","isRawNodeInTable","deleteRange$1","noPrevious","noNext","isSelectionInTable","isEverythingSelected","emptyEditor","deleteRangeMergeBlocks","backspaceDelete$2","_forward","isContentEditableTrue$2","isContentEditableFalse$7","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","ceRoot","renderRangeCaret","isBeforeBoundary","isAfterBoundary","deleteContentAndShowCaret","peekCaretPosition","caretRange","trimEmptyTextNode$1","backspaceDelete$3","getNextPosFn","isBeforeFn","nextCaretPosition","deleteBoundaryText","DeleteAction","moveToElement","moveToPosition","findCefPosition","isDeleteFromCefDifferentBlocks","toCefElm","blockElm","deleteEmptyBlockOrMoveToCef","getAncestorCe","backspaceDeleteCaret","selectedNode","caretLocation","isAtContentEditableBlockCaret","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","getContentEditableAction","read$4","hideFakeCaret","deleteElement$1","paddEmptyElement","backspaceDelete$4","backspaceDeleteRange","backspaceDelete$5","deleteCaret$1","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertInline$1","insertBefore$1","insertAfter$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","evaluateUntil","fns","Location","rescope","before$4","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","after$3","isValidLocation","readLocation","getName","outside","betweenInlines","fromInline","toInline","hasSameParentBlock","skipNoMovement","fromLocation","toLocation","location2","location1","findLocationSimple","findLocation","findLocationTraverse","modify","setCaretPosition","setSelected","renderCaretLocation","isInlineTarget$1","findLocation$1","moveWord","_caret","hasSelectionModifyApi","moveByWord","setupSelectedState","inlineBoundaries","selectedInlines","targetInlines","toggleInlines","isAtZwsp","safeRemoveCaretContainer","inlines","_inline","renderInsideInlineCaret","moveNextWord","movePrevWord","setCaretLocation","deleteFromTo","rangeFromPositions","backspaceDelete$6","rescope$1","toPosition","normalizedFirstPos","normalizedLastPos","hasOnlyTwoOrLessPositionsLeft","backspaceDeleteCollapsed","hasOnlyOneChild$1","deleteCaret$2","parentInlines","getParentInlines","normalizedFromPos","nextPos","willDeleteLastPositionInElement","isFormatElement$1","innerMost","replaceWithCaretFormat","deleteLastPosition","backspaceDelete$7","deleteElement$2","backspaceDelete$8","isNearMedia","deleteCaret$3","deleteRange$2","parseIndentValue","getIndentStyleName","useMargin","canOutdent","getBlocksToIndent","indentStyleName","intentValue","validateBlocks","isListComponent","parentIsListComponent","indentation","getIndentation","indentUnit","indentValue","indentElement","backspaceDelete$9","nativeCommand","isBlockElement","isValidTarget","shouldRemoveTextNode","rootNodeName","hasBlockParent","restoreSelection","blockCaretContainer","removeIeControlRect","handleBlockContainer","findBlockCaretContainer","VDirection","walk$3","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastRect","lastDist","findClosestHorizontalPosition","targetRect","getPositionsUntilPreviousLine","getPositionsUntilNextLine","getPositionsAbove","getPositionsBelow","getNodeClientRects","toArrayWithNode","customEventRootDelegates","beforeUnloadDelegate","walkUntil","isAboveFn","isBeflowFn","targetClientRect","findUntil$1","upUntil","Up","downUntil","Down","isAboveLine","lineNumber","aboveLineNumber","isLine","isLineNumber","isContentEditableFalse$8","findNode$1","distanceToRectLeft","distanceToRectRight","isInsideX","isInsideY","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","includeChildren","moveToRange","renderRangeCaretOpt","moveHorizontally","isBefore","isAfter","rangeIsInContainerBlock","isRangeInCaretContainerBlock","moveVertically","caretClientRect","linePositions","nextLinePositions","nextLineRect","dist1","dist2","caretPositions","isBelowFn","getClientRect","positionsUntil","closestNextLineRect","getLineEndPoint","moveToLineEndPoint","isContentEditableFalse$9","exitPreBlock","getVisualCaretPosition$1","hasForcedRootBlock","newBlock","textBlock","createTextBlock","moveH","moveToCeFalseHorizontally","getHorizontalRange","newRange","moveV","down","moveToCeFalseVertically","getVerticalRange","moveToLineEndPoint$1","isTarget","rangeBefore","insertElement","moveCaretToNewEmptyLine","rootBlockAttrs","getClosestTargetBlock","isAtLastLine","isAtFirstLine","isAtFirstOrLastLine","insertBr","insertBlock$1","insertEmptyLine","moveV$1","defaultPatterns","matchesEvent","match$1","moveH$1","moveV$2","moveToLineEndPoint$2","getClosestCell$1","getYAxisValue","isTargetCorner","corners","newCorner","oldCorner","oldDist","newDist","findClosestCorner","tds","deflate","getCorners","corner","getClosestCellAbove","getClosestCellBelow","isAtTableCellLine","lineInfo","startsWithWrapBreak","startsWithBrBreak","breakPos","hasNextBreak","isAtFirstTableCellLine","isAtLastTableCellLine","navigateHorizontally","_td","isCaretAtStartOrEndOfTable","getTable","renderBlock","navigateVertically","findClosestPositionInAboveCell","getClosestAbovePosition","findClosestPositionInBelowCell","getClosestBelowPosition","mover","moveH$2","moveV$3","moveToCaretPosition","firstNonWhiteSpaceNodeSibling","getParentBlock$2","hasParent$1","isListBlock","getContainerBlock","containerBlock","containerBlockParent","isFirstOrLastLi","isEmptyAnchor","emptyBlock","containerAndSiblingName","canSplitBlock","normalizeZwspOffset","getEditableRoot$1","editableRoot","setForcedBlockAttrs","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","insert$1","tmpRng","parentBlockName","newBlockName","isAfterLastNodeInContainer","createNewBlock","clonedNode","shouldKeepStyles","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","containerBlockName","shouldEndContainerOnEmptyBlock","isTableCell$5","wrapSelfAndSiblingsInDefaultBlock","hasFirstChild","includeZwspInRange","trimZwsp","trimLeadingLineBreaks","firstChilds","trimInlineElementsOnLeftSideOfBlock","addBrToBlockIfNeeded","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrBefore","insertBrAfter","hasBrAfter","isAnchorLink","isInsideAnchor","insertBrOutsideAnchor","insert$2","anchorLocation","readInlineAnchorLocation","isControlKey","hasRightSideContent","insertBrAtCaret","newLineAction","shouldBlockNewLine$1","_shiftKey","getNoNewLineSelector","shouldBlockNewLine","isBrMode","requiredState","inListBlock","isListItemParentBlock","inBlock","getParentBlockName","inPreBlock","shouldPutBrInPre$1","shouldPutBrInPre","inBrContext","getBrNewLineSelector","shouldInsertBr","hasShiftKey","canInsertIntoEditableRoot","rootEditable","getEditableRoot","match$2","predicates","insert$3","getAction$1","browser$4","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","insertInlineBoundarySpaceOrNbsp","checkPos","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","insertSpaceOrNbspAtSelection","locationToCaretPosition","setSelection$1","registerKeyboardOverrides","executeKeydownOverride","executeKeydownOverride$1","executeKeyupOverride","handleEnterKeyEvent","executeKeydownOverride$3","setup$h","keypressThrotter","setupIeInput","isComposing","setup$g","executeKeydownOverride$2","setup$f","NodeChange","lastPath","nativeRng","fakeRng","isSameElementPath","currentPath","isTextBlockNode","getAbsolutePosition","isContentEditableFalse$a","isContentEditableTrue$3","createGhost","clonedElm","boxSizing","removeElement","removeDragState","ghost","bindFakeDragEvents","pageDom","dragStartHandler","isLeftMouseButtonPressed","ceElm","elmPos","dragging","relX","relY","start$1","dragHandler","throttledPlaceCaretAt","targetPos","applyRelPos","bodyPosition","getBodyPosition","scrollPosition","getScrollPosition","mousePosition","iframePosition","inlineScroll","iframeScroll","getBodyScroll","getMousePosition","calc","overflowX","moveGhost","move$2","dropHandler","targetElement","dragElement","isValidDropTarget","targetClone_1","cloneElm","dragEndHandler","isContentEditableTrue$4","isContentEditableFalse$b","getContentEditableRoot$1","SelectionOverrides","fakeCaret","realSelectionId","elementSelectionAttr","isFakeSelectionTargetElement","setRange","getRange","isWithinCaretContainer","isRangeInCaretContainer","setElementSelection","afterNode","targetClone","origTargetClone","$realSelectionContainer","setupOffscreenSelection","nodeElm","selectElement","removeElementSelection","contentEditableRoot","hasBetterMouseTarget","targetBlock","hasNormalCaretPosition","fakeCaretInfo","fakeTargetNodeRects","getFakeCaretTargets","targetNodeRects","closestNodeRect","targetNodeRect","checkPosFn","lineRects","findLineNodeRects","caretInfo","closestFakeCaret","normalizeShortEndedElementSelection","realSelectionElement","outerText","realTarget","blockIeDrop","shouldBlockUnsupportedDrop","preventFileDrop","defaultPrevented","preventFileDropIfUIElement","editorRoot","eventNames","blockUnsupportedFileDrop","renderFocusCaret","setup$l","setup$m","DOM$4","getRootName","removeUndefined","mkParserSettings","initEditor","bindPendingEventDelegates","fireInit","storeNative","moveSelectionToFirstCaretPosition","execCallback","auto_focus","focusEditor","destroyed","autoFocus","preInit","rtcMode","browser_spellcheck","gecko_spellcheck","spellcheck","serializeRng","getAttributeApplyFunction","isSelectionAcrossElements","isGecko","isWebKit","mceInternalUrlPrefix","mceInternalDataType","setEditorCommandState","selectAll","disableBackspaceIntoATable","bodyHeight","contentStyles","allRng","allContentsSelected","selectionHtml","internalContent","escape","setMceInternalContent","getMceInternalContent","queryCommandSupported","Range","body_1","template","setAttributeNode","refreshContentEditable","Quirks","firePostRender","directionality","getDirectionality","protect","startContent","contentCssText_1","getStyleSheetLoader","loadContentCss","content_style","appendStyle","initContentBody","skipWrite","orgVisibility","iframeHTML","contentAreaContainer","uploader","imageScanner","blobUriStatuses","createStatus","hasBlobUri","toBlobInfo","mime","findFirst","cachedBlobInfo","removeByUri","BlobCache","resultUri","getResultUri","urlFilters","changeHandler","lastChangedLevel","fireIfChanged","UploadChangeHandler","aliveGuard","replaceString","replaceImageUrl","targetUrl","replacementUrl","replacementString","replaceUrlInUndoStack","uploadImages","scanForImages","imageInfos","imagesToRemove","filteredResult","uploadInfo","shouldReplaceBlobUris","replaceImageUriInView","uploadError","uploadUri","uploadImagesAuto","dataImgFilter","resultItem","replaceBlobUris","source_view","addFilter","EditorUpload","hex_colors","force_hex_style_colors","createParser","boolean_attributes","move_caret_before_on_enter_elements","non_empty_elements","short_ended_elements","text_inline_elements","whitespace_elements","mkSerializerSettings","annotator","_nodeChangeDispatcher","debounceLongpress","isEqualNode","preventSummaryToggle","filterDetails","setup$j","normalizeSelection$1","setup$k","setup$i","deleteCommand","forwardDeleteCommand","getPlaceholder","updatePlaceholder","isNonTypingKeyboardEvent","showPlaceholder","isTypingKeyboardEvent","isForcedRootBlockFalse","firstElementChild","isVisuallyEmpty","firePlaceholderToggle","firePreInit","editorCast","rtc","rtcEditor","tinymceEditor","defaultVars","_undoManager","_locks","_node","_similar","_rfl","_args","_details","_elm","getRawModel","makeRtcAdaptor","isRemote","setup$5","loadingRtc","setProgressState","DOM$5","createIframe","ifr","customAttrs","frameBorder","allowTransparency","createIframeElement","getIframeAttrs","isDomainRelaxed","domain","hostname","bodyUuid","domainRelaxUrl","relaxDomain","getDocType","getDocumentBaseUrl","documentBaseUrl","getURI","bodyId","getBodyId","bodyClass","getBodyClass","getIframeHtml","DOM$6","initPlugin","initializedPlugins","Plugin","pluginInstance","pluginInitError","trimLegacyPrefix","createThemeFalseResult","renderThemeUi","orgDisplay","renderFromLoadedTheme","iframeHeight","renderFromThemeFunc","renderThemeFalseIframe","renderThemeFalse","init$2","iconPackName","currentIcons","loadIcons","svgData","addIcon","initIcons","Theme","initTheme","initPlugins","renderInfo","uiApiFacade","augmentEditorUiApi","boxInfo","contentCss","getContentCss","contentCssFile","isContentCssSkinName","getContentCssUrls","appendContentCssFromSettings","hidden","init$1","DOM$7","hasSkipLoadPrefix","getIconsUrlMetaFromName","scriptLoader","themeUrl","getThemeUrl","loadTheme","languageCode","languageUrl","getLanguageUrl","url_1","languageLoadError","loadLanguage","defaultIconsUrl","customIconsUrl","getIconsUrl","getIconsUrlMetaFromUrl","urlMeta","iconsLoadError","getExternalPlugins","depPlugin","url_2","loadPlugins","legacyPropNames","getFontProp","legacyPropName","getProperty","getSpecifiedFontProp","getComputedFontProp","getFontSize","getFontFamily","findFirstCaretElement","mapRange","mapper","getCaretElement","fromFontSizeNumber","fontSizeNumber","getFontStyleValues","fontClasses","getFontSizeClasses","normalizeFontNames","each$f","map$3","inArray$2","EditorCommands","setupCommands","skip_focus","customCommand","addCommands","commandList","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","selectionBookmark","queryCommandEnabled","listParent","fontNameAction","fontSizeAction","lineHeightAction","processValue","insertAtCaret$1","editingHost","alignStates","Undo","Redo","fontNameQuery","fontSizeQuery","lineHeightQuery","internalContentEditableAttr","setContentEditable","toggleReadOnly","removeFakeSelection","hasUiFocus","hasEditorOrUiFocus","restoreFakeSelection","isReadOnly$1","registerFilters","nativeEvents","EventDispatcher","bindings","toggleEvent","isNative","nameIn","argsIn","beforeFire","wrappedCallback","currentName","bindingName","hi","getEventDispatcher","_eventDispatcher","toggleNativeEvent","Observable","dispatcherArgs","DOM$8","getEventTarget","eventRoot","isListening","isClickEvent","getAnchorHrefOpt","numChars","removeFromStart","processReadonlyEvents","bindEventDelegate","delegates","eventRootElm","editors","EditorObservable","_pendingNativeEvents","unbindAllNativeEvents","defaultModes","switchToMode","activeMode","availableModes","oldMode","activate","deactivate","editorReadOnly","fireSwitchMode","each$g","explode$3","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","hasModifier","isFunctionKey","matchShortcut","subpatterns","executeShortcutAction","desc","cmdFunc","normalizeCommandFunc","createShortcut","parseShortcut","charCode","each$h","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","isProtocolRelative","toAbsPath","urlMatch","userInfo","parseDataUri","uriComponents","pathname","setPath","pathMatch","toRelative","relativeUri","tu","uu","toRelPath","noHost","absoluteUri","defaultPort","breakPoint","normalizedBase","outPath","nb","normalizedPath","noProtoHost","DOM$9","extend$3","each$i","resolve$3","ie$1","Editor","bridge","loadedCSS","isNotDirty","documentBaseURL","baseDefaults","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","visual","hidden_input","getDefaultSettings","getEditorSettings","base_url","_setBaseUrl","baseURI","referrer_policy","language_load","editorCommands","cache_suffix","addAutocompleter","addContextToolbar","addSidebar","modeInstance","design","registerReadOnlyContentFilters","registerReadOnlySelectionBlockers","registerMode","getStyleSheetLoader$1","isInline$1","formElement","hasHiddenInput","formEventDelegate","resetContent","shouldPatchSubmit","_mceOldSubmit","triggerSave","isEncodingXml","save","shouldAddFormSubmitTrigger","shouldAddUnloadTrigger","_beforeUnload","set_dirty","skipFocus","bookmarkRng","contentEditableHost","getContentEditableHost","callbackLookup","getParamObject","is_removing","getContent$2","initialContent","oldState","urlconverter_callback","addVisual$1","fireRemove","restoreOriginalStyles","fireDetach","automatic","restoreForm","clearDomReferences","_scanForImages","DOM$a","explode$4","each$j","extend$4","instanceCounter","boundGlobalEvents","legacyEditors","globalEventDelegate","EditorManager","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","isQuirksMode","compatMode","majorVersion","minorVersion","releaseDate","i18n","tinyMCEPreInit","srcScript","currentScript","pluginBaseUrls","plugin_base_urls","pluginBaseUrl","invalidInlineTargets","createId","provideResults","initEditors","initCount","createEditor","editor_deselector","editor_selector","findTargets","isInvalidInlineTarget","addI18n","tasks","resultFns","extendClass","initializing","relativePosition","targetW","targetH","relChars","create$7","Rect","findBestRelativePosition","constrainRect","intersect","x1","y1","fixedSize","cx2","cy2","underflowX1","underflowY1","overflowX2","overflowY2","fromClientRect","Resource","loadErrMsg","runErrMsg","task","waiter","resolveCb","rejectCb","awaiter","each$k","extend$5","Class","_super","mixins","mixin","Mixins","dummy","Methods","Properties","Statics","Defaults","member","createMethod","localStorage","min$1","max$1","round$2","JSONUtils","hexCode","JSONP","XHR","ready","async","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","extend$6","JSONRequest","sendRPC","ecb","scb","xhrArgs","ty","method","removeItem","configurable","enumerable","publicApi","geom","LocalStorage","Color","hsvToRgb","toRgb","toHsv","rgb2hsv","TreeWalker","Serializer","Selection","isMac","tinyMCE","exportToWindowGlobal","exportToModuleLoaders"],"mappings":"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gBAAiBzC,IASlC6E,GAAWld,QAAQQ,KAAKC,MAAMC,QAAQ,6BAEtCkiG,GAAc,wBAgCdC,GAAa,aACbC,GAAgB,CAClB,CACEjiG,KAAMgiG,GACNl8F,KAAM,cACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,eACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,YACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,eACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,aACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,QACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,SACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,MACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,SACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,OACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,iBACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,SACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,WACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,cACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,YACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,aACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,cACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,OACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,YACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,YACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,QACN7F,MAAO,WAET,CACED,KAAMgiG,GACNl8F,KAAM,QACN7F,MAAO,YAGPiiG,GAhJJ,SAAqB/kD,QACP,IAARA,IACFA,EAAM,IAER,IAEsBx3C,EAFlBw8F,EAAgB9lF,GAAS+lF,QAAQL,IACjCM,EAAe1hG,EAASwhG,GAAiBjwF,KAAKC,MAAMgwF,GAAi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AaJ,GACjF,IAAIK,EAASppL,EAAQK,EACrB,GAAIhR,EAAM,CAER,GADA+5L,EAAU/5L,EAAK85L,GACXtgM,KAAK8a,UAAYylL,IAAYvgM,KAAK8a,SACpC,OAEF,GAAIylL,EAAS,CACX,IAAKL,EACH,IAAK1oL,EAAQ+oL,EAAQF,GAAY7oL,EAAOA,EAAQA,EAAM6oL,GACpD,IAAK7oL,EAAM6oL,GACT,OAAO7oL,EAIb,OAAO+oL,EAGT,IADAppL,EAAS3Q,EAAKmB,aACAwP,IAAWnX,KAAK8a,SAC5B,OAAO3D,IAIN6oL,EAnEW,GAmLhBQ,GAAa,SAAUnhM,GACzB,IAAI68D,EACJ,OAAO,SAAU11D,GAEf,OADA01D,EAASA,GAv8FK,SAAUl+D,EAAIZ,GAE9B,IADA,IAAIa,EAAI,GACCC,EAAI,EAAGC,EAAMH,EAAGI,OAAQF,EAAIC,EAAKD,IAAK,CAC7C,IAAI5E,EAAI0E,EAAGE,GACXD,EAAErE,OAAON,IAAM8D,EAAE9D,EAAG4E,GAEtB,OAAOD,EAi8FsBuhD,CAAYngD,EAAOpE,IAChC8E,eAAepG,GAAK6M,MAGlCi6L,GAAYD,GA/BD,CACb,KACA,KACA,KACA,KACA,KACA,OA0BE95G,GAAU85G,GArHD,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,YAwEEr7B,GAAW,SAAU3+J,GACvB,OAAOw/B,GAAUx/B,KAAUkgF,GAAQlgF,IAEjCk6L,GAAS,SAAUl6L,GACrB,OAAOw/B,GAAUx/B,IAAwB,OAAf7M,GAAK6M,IAE7Bm6L,GAAcH,GAnED,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,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","file":"js/mPanel.144.js","sourcesContent":["tinymce.IconManager.add('default', {\n  icons: {\n    'accessibility-check': '<svg width=\"24\" height=\"24\"><path d=\"M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'action-next': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z\"/></svg>',\n    'action-prev': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z\"/></svg>',\n    'align-center': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-justify': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-left': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'align-none': '<svg width=\"24\" height=\"24\"><path d=\"M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z\" fill-rule=\"evenodd\"/></svg>',\n    'align-right': '<svg width=\"24\" height=\"24\"><path d=\"M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-left': '<svg width=\"24\" height=\"24\"><path d=\"M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'arrow-right': '<svg width=\"24\" height=\"24\"><path d=\"M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z\" fill-rule=\"evenodd\"/></svg>',\n    'bold': '<svg width=\"24\" height=\"24\"><path d=\"M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z\" fill-rule=\"evenodd\"/></svg>',\n    'bookmark': '<svg width=\"24\" height=\"24\"><path d=\"M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z\" fill-rule=\"nonzero\"/></svg>',\n    'border-width': '<svg width=\"24\" height=\"24\"><path d=\"M5 14.8h14a1 1 0 010 2H5a1 1 0 010-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 110-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 01-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-2c0-.6.4-1 1-1z\" fill-rule=\"evenodd\"/></svg>',\n    'brightness': '<svg width=\"24\" height=\"24\"><path d=\"M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z\" fill-rule=\"evenodd\"/></svg>',\n    'browse': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z\" fill-rule=\"nonzero\"/></svg>',\n    'cancel': '<svg width=\"24\" height=\"24\"><path d=\"M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z\" fill-rule=\"nonzero\"/></svg>',\n    'change-case': '<svg width=\"24\" height=\"24\"><path d=\"M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z\" fill-rule=\"evenodd\"/></svg>',\n    'character-count': '<svg width=\"24\" height=\"24\"><path d=\"M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checklist': '<svg width=\"24\" height=\"24\"><path d=\"M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z\" fill-rule=\"evenodd\"/></svg>',\n    'checkmark': '<svg width=\"24\" height=\"24\"><path d=\"M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-down': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-left': '<svg width=\"10\" height=\"10\"><path d=\"M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-right': '<svg width=\"10\" height=\"10\"><path d=\"M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'chevron-up': '<svg width=\"10\" height=\"10\"><path d=\"M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z\" fill-rule=\"nonzero\"/></svg>',\n    'close': '<svg width=\"24\" height=\"24\"><path d=\"M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'code-sample': '<svg width=\"24\" height=\"26\"><path d=\"M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-levels': '<svg width=\"24\" height=\"24\"><path d=\"M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z\" fill-rule=\"evenodd\"/></svg>',\n    'color-picker': '<svg width=\"24\" height=\"24\"><path d=\"M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z\" fill-rule=\"nonzero\"/></svg>',\n    'color-swatch-remove-color': '<svg width=\"24\" height=\"24\"><path stroke=\"#000\" stroke-width=\"2\" d=\"M21 3L3 21\" fill-rule=\"evenodd\"/></svg>',\n    'color-swatch': '<svg width=\"24\" height=\"24\"><rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"1\" fill-rule=\"evenodd\"/></svg>',\n    'comment-add': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/><path d=\"M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z\"/></g></svg>',\n    'comment': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z\"/></svg>',\n    'contrast': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z\" fill-rule=\"evenodd\"/></svg>',\n    'copy': '<svg width=\"24\" height=\"24\"><path d=\"M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z\" fill-rule=\"nonzero\"/></svg>',\n    'crop': '<svg width=\"24\" height=\"24\"><path d=\"M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z\" fill-rule=\"evenodd\"/></svg>',\n    'cut-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z\"/></svg>',\n    'cut-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z\"/></svg>',\n    'cut': '<svg width=\"24\" height=\"24\"><path d=\"M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z\" fill-rule=\"evenodd\"/></svg>',\n    'document-properties': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'drag': '<svg width=\"24\" height=\"24\"><path d=\"M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z\" fill-rule=\"evenodd\"/></svg>',\n    'duplicate-column': '<svg width=\"24\" height=\"24\"><path d=\"M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z\"/></svg>',\n    'duplicate-row': '<svg width=\"24\" height=\"24\"><path d=\"M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z\"/></svg>',\n    'duplicate': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z\"/><path d=\"M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z\"/></g></svg>',\n    'edit-block': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z\"/></svg>',\n    'edit-image': '<svg width=\"24\" height=\"24\"><path d=\"M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'embed-page': '<svg width=\"24\" height=\"24\"><path d=\"M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z\" fill-rule=\"nonzero\"/></svg>',\n    'embed': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z\" fill-rule=\"nonzero\"/></svg>',\n    'emoji': '<svg width=\"24\" height=\"24\"><path d=\"M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z\" fill-rule=\"nonzero\"/></svg>',\n    'export': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z\"/><path d=\"M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z\"/><path d=\"M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z\"/></g></svg>',\n    'fill': '<svg width=\"24\" height=\"26\"><path d=\"M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-horizontally': '<svg width=\"24\" height=\"24\"><path d=\"M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z\" fill-rule=\"nonzero\"/></svg>',\n    'flip-vertically': '<svg width=\"24\" height=\"24\"><path d=\"M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z\" fill-rule=\"nonzero\"/></svg>',\n    'format-painter': '<svg width=\"24\" height=\"24\"><path d=\"M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z\" fill-rule=\"nonzero\"/></svg>',\n    'format': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z\"/></svg>',\n    'fullscreen': '<svg width=\"24\" height=\"24\"><path d=\"M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z\" fill-rule=\"nonzero\"/></svg>',\n    'gallery': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z\"/></svg>',\n    'gamma': '<svg width=\"24\" height=\"24\"><path d=\"M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z\" fill-rule=\"nonzero\"/></svg>',\n    'help': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z\"/><path d=\"M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z\" fill-rule=\"nonzero\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/></g></svg>',\n    'highlight-bg-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-highlight-bg-color__color\" d=\"M3 18h18v3H3z\"/><path fill-rule=\"nonzero\" d=\"M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6\"/></g></svg>',\n    'home': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/></svg>',\n    'horizontal-rule': '<svg width=\"24\" height=\"24\"><path d=\"M4 11h16v2H4z\" fill-rule=\"evenodd\"/></svg>',\n    'image-options': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'image': '<svg width=\"24\" height=\"24\"><path d=\"M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z\" fill-rule=\"nonzero\"/></svg>',\n    'indent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'info': '<svg width=\"24\" height=\"24\"><path d=\"M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-character': '<svg width=\"24\" height=\"24\"><path d=\"M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z\" fill-rule=\"evenodd\"/></svg>',\n    'insert-time': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z\"/><path d=\"M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z\"/></g></svg>',\n    'invert': '<svg width=\"24\" height=\"24\"><path d=\"M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z\" fill-rule=\"evenodd\"/></svg>',\n    'italic': '<svg width=\"24\" height=\"24\"><path d=\"M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z\" fill-rule=\"evenodd\"/></svg>',\n    'line-height': '<svg width=\"24\" height=\"24\"><path d=\"M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z\"/></svg>',\n    'line': '<svg width=\"24\" height=\"24\"><path d=\"M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z\" fill-rule=\"evenodd\"/></svg>',\n    'link': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z\" fill-rule=\"nonzero\"/></svg>',\n    'list-bull-circle': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z\" fill-rule=\"nonzero\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><circle cx=\"11\" cy=\"14\" r=\"3\"/><circle cx=\"11\" cy=\"24\" r=\"3\"/><circle cx=\"11\" cy=\"34\" r=\"3\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-bull-square': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path d=\"M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z\"/><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/></g></svg>',\n    'list-num-default-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-default': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z\"/></g></svg>',\n    'list-num-lower-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-greek': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-lower-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z\"/><path fill-rule=\"nonzero\" d=\"M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z\"/></g></svg>',\n    'list-num-lower-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z\"/><path fill-rule=\"nonzero\" d=\"M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z\"/></g></svg>',\n    'list-num-upper-alpha-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-alpha': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z\"/></g></svg>',\n    'list-num-upper-roman-rtl': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z\"/><path d=\"M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z\"/><path fill-rule=\"nonzero\" d=\"M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z\"/></g></svg>',\n    'list-num-upper-roman': '<svg width=\"48\" height=\"48\"><g fill-rule=\"evenodd\"><path opacity=\".2\" d=\"M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z\"/><path d=\"M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z\"/><path fill-rule=\"nonzero\" d=\"M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z\"/></g></svg>',\n    'lock': '<svg width=\"24\" height=\"24\"><path d=\"M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z\" fill-rule=\"evenodd\"/></svg>',\n    'ltr': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z\" fill-rule=\"evenodd\"/></svg>',\n    'more-drawer': '<svg width=\"24\" height=\"24\"><path d=\"M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z\" fill-rule=\"nonzero\"/></svg>',\n    'new-document': '<svg width=\"24\" height=\"24\"><path d=\"M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z\" fill-rule=\"nonzero\"/></svg>',\n    'new-tab': '<svg width=\"24\" height=\"24\"><path d=\"M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z\" fill-rule=\"evenodd\"/></svg>',\n    'non-breaking': '<svg width=\"24\" height=\"24\"><path d=\"M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'notice': '<svg width=\"24\" height=\"24\"><path d=\"M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list-rtl': '<svg width=\"24\" height=\"24\"><path d=\"M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'ordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'orientation': '<svg width=\"24\" height=\"24\"><path d=\"M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z\" fill-rule=\"nonzero\"/></svg>',\n    'outdent': '<svg width=\"24\" height=\"24\"><path d=\"M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'page-break': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z\"/></g></svg>',\n    'paragraph': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\"/></svg>',\n    'paste-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-row-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"evenodd\" d=\"M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z\"/></svg>',\n    'paste-text': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z\" fill-rule=\"nonzero\"/></svg>',\n    'paste': '<svg width=\"24\" height=\"24\"><path d=\"M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z\" fill-rule=\"nonzero\"/></svg>',\n    'permanent-pen': '<svg width=\"24\" height=\"24\"><path d=\"M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z\" fill-rule=\"nonzero\"/></svg>',\n    'plus': '<svg width=\"24\" height=\"24\"><path d=\"M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z\"/></svg>',\n    'preferences': '<svg width=\"24\" height=\"24\"><path d=\"M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z\" fill-rule=\"evenodd\"/></svg>',\n    'preview': '<svg width=\"24\" height=\"24\"><path d=\"M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z\" fill-rule=\"nonzero\"/></svg>',\n    'print': '<svg width=\"24\" height=\"24\"><path d=\"M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z\" fill-rule=\"nonzero\"/></svg>',\n    'quote': '<svg width=\"24\" height=\"24\"><path d=\"M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z\" fill-rule=\"nonzero\"/></svg>',\n    'redo': '<svg width=\"24\" height=\"24\"><path d=\"M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z\" fill-rule=\"nonzero\"/></svg>',\n    'reload': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z\"/></g></svg>',\n    'remove-formatting': '<svg width=\"24\" height=\"24\"><path d=\"M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z\" fill-rule=\"evenodd\"/></svg>',\n    'remove': '<svg width=\"24\" height=\"24\"><path d=\"M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z\" fill-rule=\"nonzero\"/></svg>',\n    'resize-handle': '<svg width=\"10\" height=\"10\"><g fill-rule=\"nonzero\"><path d=\"M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z\"/></g></svg>',\n    'resize': '<svg width=\"24\" height=\"24\"><path d=\"M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z\" fill-rule=\"evenodd\"/></svg>',\n    'restore-draft': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z\"/><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></g></svg>',\n    'rotate-left': '<svg width=\"24\" height=\"24\"><path d=\"M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z\" fill-rule=\"nonzero\"/></svg>',\n    'rotate-right': '<svg width=\"24\" height=\"24\"><path d=\"M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z\" fill-rule=\"nonzero\"/></svg>',\n    'rtl': '<svg width=\"24\" height=\"24\"><path d=\"M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z\" fill-rule=\"evenodd\"/></svg>',\n    'save': '<svg width=\"24\" height=\"24\"><path d=\"M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z\" fill-rule=\"nonzero\"/></svg>',\n    'search': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z\" fill-rule=\"nonzero\"/></svg>',\n    'select-all': '<svg width=\"24\" height=\"24\"><path d=\"M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z\" fill-rule=\"nonzero\"/></svg>',\n    'selected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z\"/></svg>',\n    'settings': '<svg width=\"24\" height=\"24\"><path d=\"M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z\" fill-rule=\"evenodd\"/></svg>',\n    'sharpen': '<svg width=\"24\" height=\"24\"><path d=\"M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'sourcecode': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z\"/></g></svg>',\n    'spell-check': '<svg width=\"24\" height=\"24\"><path d=\"M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z\" fill-rule=\"evenodd\"/></svg>',\n    'strike-through': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z\"/><path d=\"M5 11h14a1 1 0 010 2H5a1 1 0 010-2z\" fill-rule=\"nonzero\"/></g></svg>',\n    'subscript': '<svg width=\"24\" height=\"24\"><path d=\"M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z\" fill-rule=\"nonzero\"/></svg>',\n    'superscript': '<svg width=\"24\" height=\"24\"><path d=\"M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z\" fill-rule=\"nonzero\"/></svg>',\n    'table-cell-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z\"/></svg>',\n    'table-cell-select-all': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\" opacity=\".2\"/></g></svg>',\n    'table-cell-select-inner': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z\" opacity=\".2\"/><path d=\"M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z\"/></g></svg>',\n    'table-delete-column': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z\"/></svg>',\n    'table-delete-row': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z\"/></svg>',\n    'table-delete-table': '<svg width=\"24\" height=\"24\"><g fill-rule=\"nonzero\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z\"/><path d=\"M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z\"/></g></svg>',\n    'table-insert-column-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z\"/></svg>',\n    'table-insert-column-before': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z\"/></svg>',\n    'table-insert-row-above': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z\"/></svg>',\n    'table-insert-row-after': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z\"/></svg>',\n    'table-left-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z\"/></svg>',\n    'table-merge-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z\"/></svg>',\n    'table-row-properties': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z\"/></svg>',\n    'table-split-cells': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z\"/></svg>',\n    'table-top-header': '<svg width=\"24\" height=\"24\"><path d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z\"/></svg>',\n    'table': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z\"/></svg>',\n    'template': '<svg width=\"24\" height=\"24\"><path d=\"M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z\" fill-rule=\"nonzero\"/></svg>',\n    'temporary-placeholder': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path d=\"M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z\"/><circle cx=\"14\" cy=\"4\" r=\"1\"/><circle cx=\"12\" cy=\"2\" r=\"1\"/><circle cx=\"10\" cy=\"4\" r=\"1\"/></g></svg>',\n    'text-color': '<svg width=\"24\" height=\"24\"><g fill-rule=\"evenodd\"><path id=\"tox-icon-text-color__color\" d=\"M3 18h18v3H3z\"/><path d=\"M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z\"/></g></svg>',\n    'toc': '<svg width=\"24\" height=\"24\"><path d=\"M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'translate': '<svg width=\"24\" height=\"24\"><path d=\"M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z\" fill-rule=\"evenodd\"/></svg>',\n    'underline': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z\" fill-rule=\"evenodd\"/></svg>',\n    'undo': '<svg width=\"24\" height=\"24\"><path d=\"M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z\" fill-rule=\"nonzero\"/></svg>',\n    'unlink': '<svg width=\"24\" height=\"24\"><path d=\"M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z\" fill-rule=\"nonzero\"/></svg>',\n    'unlock': '<svg width=\"24\" height=\"24\"><path d=\"M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z\" fill-rule=\"evenodd\"/></svg>',\n    'unordered-list': '<svg width=\"24\" height=\"24\"><path d=\"M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z\" fill-rule=\"evenodd\"/></svg>',\n    'unselected': '<svg width=\"24\" height=\"24\"><path fill-rule=\"nonzero\" d=\"M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z\"/></svg>',\n    'upload': '<svg width=\"24\" height=\"24\"><path d=\"M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z\" fill-rule=\"nonzero\"/></svg>',\n    'user': '<svg width=\"24\" height=\"24\"><path d=\"M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z\" fill-rule=\"nonzero\"/></svg>',\n    'visualblocks': '<svg width=\"24\" height=\"24\"><path d=\"M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z\" fill-rule=\"evenodd\"/></svg>',\n    'visualchars': '<svg width=\"24\" height=\"24\"><path d=\"M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z\" fill-rule=\"evenodd\"/></svg>',\n    'warning': '<svg width=\"24\" height=\"24\"><path d=\"M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z\" fill-rule=\"evenodd\"/></svg>',\n    'zoom-in': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n    'zoom-out': '<svg width=\"24\" height=\"24\"><path d=\"M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z\" fill-rule=\"nonzero\"/></svg>',\n  }\n});","// Exports the \"default\" icons for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/icons/default')\n//   ES2015:\n//     import 'tinymce/icons/default'\nrequire('./icons.js');","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isNull = eq(null);\n    var isBoolean = isSimpleType('boolean');\n    var isFunction = isSimpleType('function');\n\n    var assumeExternalTargets = function (editor) {\n      var externalTargets = editor.getParam('link_assume_external_targets', false);\n      if (isBoolean(externalTargets) && externalTargets) {\n        return 1;\n      } else if (isString(externalTargets) && (externalTargets === 'http' || externalTargets === 'https')) {\n        return externalTargets;\n      }\n      return 0;\n    };\n    var hasContextToolbar = function (editor) {\n      return editor.getParam('link_context_toolbar', false, 'boolean');\n    };\n    var getLinkList = function (editor) {\n      return editor.getParam('link_list');\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target');\n    };\n    var getTargetList = function (editor) {\n      return editor.getParam('target_list', true);\n    };\n    var getRelList = function (editor) {\n      return editor.getParam('rel_list', [], 'array');\n    };\n    var getLinkClassList = function (editor) {\n      return editor.getParam('link_class_list', [], 'array');\n    };\n    var shouldShowLinkTitle = function (editor) {\n      return editor.getParam('link_title', true, 'boolean');\n    };\n    var allowUnsafeLinkTarget = function (editor) {\n      return editor.getParam('allow_unsafe_link_target', false, 'boolean');\n    };\n    var useQuickLink = function (editor) {\n      return editor.getParam('link_quicklink', false, 'boolean');\n    };\n    var getDefaultLinkProtocol = function (editor) {\n      return editor.getParam('link_default_protocol', 'http', 'string');\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getValue = function (item) {\n      return isString(item.value) ? item.value : '';\n    };\n    var getText = function (item) {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    var sanitizeList = function (list, extractValue) {\n      var out = [];\n      global$2.each(list, function (item) {\n        var text = getText(item);\n        if (item.menu !== undefined) {\n          var items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text: text,\n            items: items\n          });\n        } else {\n          var value = extractValue(item);\n          out.push({\n            text: text,\n            value: value\n          });\n        }\n      });\n      return out;\n    };\n    var sanitizeWith = function (extracter) {\n      if (extracter === void 0) {\n        extracter = getValue;\n      }\n      return function (list) {\n        return Optional.from(list).map(function (list) {\n          return sanitizeList(list, extracter);\n        });\n      };\n    };\n    var sanitize = function (list) {\n      return sanitizeWith(getValue)(list);\n    };\n    var createUi = function (name, label) {\n      return function (items) {\n        return {\n          name: name,\n          type: 'listbox',\n          label: label,\n          items: items\n        };\n      };\n    };\n    var ListOptions = {\n      sanitize: sanitize,\n      sanitizeWith: sanitizeWith,\n      createUi: createUi,\n      getValue: getValue\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName.toLowerCase() === 'a';\n    };\n    var isLink = function (elm) {\n      return isAnchor(elm) && !!getHref(elm);\n    };\n    var collectNodesInRange = function (rng, predicate) {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        var contents = rng.cloneContents();\n        var walker = new global$3(contents.firstChild, contents);\n        var elements = [];\n        var current = contents.firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    var hasProtocol = function (url) {\n      return /^\\w+:/i.test(url);\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var applyRelTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var rels = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rels) {\n        return global$2.trim(rels.sort().join(' '));\n      };\n      var addTargetRules = function (rels) {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rels) {\n        return rels.filter(function (val) {\n          return global$2.inArray(rules, val) === -1;\n        });\n      };\n      var newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var hasLinks = function (elements) {\n      return global$2.grep(elements, isLink).length > 0;\n    };\n    var hasLinksInSelection = function (rng) {\n      return collectNodesInRange(rng, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (editor) {\n      var inlineTextElements = editor.schema.getTextInlineElements();\n      var isElement = function (elm) {\n        return elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      };\n      var elements = collectNodesInRange(editor.selection.getRng(), isElement);\n      return elements.length === 0;\n    };\n    var isImageFigure = function (elm) {\n      return elm && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    };\n    var getLinkAttrs = function (data) {\n      return foldl([\n        'title',\n        'rel',\n        'class',\n        'target'\n      ], function (acc, key) {\n        data[key].each(function (value) {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    var handleExternalTargets = function (href, assumeExternalTargets) {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    var applyLinkOverrides = function (editor, linkAttrs) {\n      var newLinkAttrs = __assign({}, linkAttrs);\n      if (!(getRelList(editor).length > 0) && allowUnsafeLinkTarget(editor) === false) {\n        var newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    var updateLink = function (editor, anchorElm, text, linkAttrs) {\n      text.each(function (text) {\n        if (anchorElm.hasOwnProperty('innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      editor.selection.select(anchorElm);\n    };\n    var createLink = function (editor, selectedElm, text, linkAttrs) {\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(editor, selectedElm, linkAttrs);\n      } else {\n        text.fold(function () {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n        }, function (text) {\n          editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(text)));\n        });\n      }\n    };\n    var linkDomMutation = function (editor, attachState, data) {\n      var selectedElm = editor.selection.getNode();\n      var anchorElm = getAnchorElement(editor, selectedElm);\n      var linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      editor.undoManager.transact(function () {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        if (anchorElm) {\n          editor.focus();\n          updateLink(editor, anchorElm, data.text, linkAttrs);\n        } else {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }\n      });\n    };\n    var unlinkSelection = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var bookmark = selection.getBookmark();\n      var rng = selection.getRng().cloneRange();\n      var startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      var endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    var unlinkDomMutation = function (editor) {\n      editor.undoManager.transact(function () {\n        var node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    var unwrapOptions = function (data) {\n      var cls = data.class, href = data.href, rel = data.rel, target = data.target, text = data.text, title = data.title;\n      return filter({\n        class: cls.getOrNull(),\n        href: href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, function (v, _k) {\n        return isNull(v) === false;\n      });\n    };\n    var link = function (editor, attachState, data) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(data)) : linkDomMutation(editor, attachState, data);\n    };\n    var unlink = function (editor) {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var img = editor.dom.select('img', fig)[0];\n      if (img) {\n        var a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    var isListGroup = function (item) {\n      return hasNonNullableKey(item, 'items');\n    };\n    var findTextByValue = function (value, catalog) {\n      return findMap(catalog, function (item) {\n        if (isListGroup(item)) {\n          return findTextByValue(value, item.items);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var getDelta = function (persistentText, fieldName, catalog, data) {\n      var value = data[fieldName];\n      var hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(function (i) {\n        return {\n          url: {\n            value: i.value,\n            meta: {\n              text: hasPersistentText ? persistentText : i.text,\n              attach: noop\n            }\n          },\n          text: hasPersistentText ? persistentText : i.text\n        };\n      }) : Optional.none();\n    };\n    var findCatalog = function (catalogs, fieldName) {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    var init = function (initialData, linkCatalog) {\n      var persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      var getTitleFromUrlChange = function (url) {\n        return someIf(persistentData.title.length <= 0, Optional.from(url.meta.title).getOr(''));\n      };\n      var getTextFromUrlChange = function (url) {\n        return someIf(persistentData.text.length <= 0, Optional.from(url.meta.text).getOr(url.value));\n      };\n      var onUrlChange = function (data) {\n        var text = getTextFromUrlChange(data.url);\n        var title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some(__assign(__assign({}, text.map(function (text) {\n            return { text: text };\n          }).getOr({})), title.map(function (title) {\n            return { title: title };\n          }).getOr({})));\n        } else {\n          return Optional.none();\n        }\n      };\n      var onCatalogChange = function (data, change) {\n        var catalog = findCatalog(linkCatalog, change.name).getOr([]);\n        return getDelta(persistentData.text, change.name, catalog, data);\n      };\n      var onChange = function (getData, change) {\n        var name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), change);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange: onChange };\n    };\n    var DialogChanges = {\n      init: init,\n      getDelta: getDelta\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$4.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var tryEmailTransform = function (data) {\n      var url = data.href;\n      var suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: function (oldData) {\n          return __assign(__assign({}, oldData), { href: 'mailto:' + url });\n        }\n      }) : Optional.none();\n    };\n    var tryProtocolTransform = function (assumeExternalTargets, defaultLinkProtocol) {\n      return function (data) {\n        var url = data.href;\n        var suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n        return suggestProtocol ? Optional.some({\n          message: 'The URL you entered seems to be an external link. Do you want to add the required ' + defaultLinkProtocol + ':// prefix?',\n          preprocess: function (oldData) {\n            return __assign(__assign({}, oldData), { href: defaultLinkProtocol + '://' + url });\n          }\n        }) : Optional.none();\n      };\n    };\n    var preprocess = function (editor, data) {\n      return findMap([\n        tryEmailTransform,\n        tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n      ], function (f) {\n        return f(data);\n      }).fold(function () {\n        return global$5.resolve(data);\n      }, function (transform) {\n        return new global$5(function (callback) {\n          delayedConfirm(editor, transform.message, function (state) {\n            callback(state ? transform.preprocess(data) : data);\n          });\n        });\n      });\n    };\n    var DialogConfirms = { preprocess: preprocess };\n\n    var getAnchors = function (editor) {\n      var anchorNodes = editor.dom.select('a:not([href])');\n      var anchors = bind(anchorNodes, function (anchor) {\n        var id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    var AnchorListOptions = { getAnchors: getAnchors };\n\n    var getClasses = function (editor) {\n      var list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    var ClassListOptions = { getClasses: getClasses };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseJson = function (text) {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (err) {\n        return Optional.none();\n      }\n    };\n    var getLinks = function (editor) {\n      var extractor = function (item) {\n        return editor.convertURL(item.value || item.url, 'href');\n      };\n      var linkList = getLinkList(editor);\n      return new global$5(function (callback) {\n        if (isString(linkList)) {\n          global$6.send({\n            url: linkList,\n            success: function (text) {\n              return callback(parseJson(text));\n            },\n            error: function (_) {\n              return callback(Optional.none());\n            }\n          });\n        } else if (isFunction(linkList)) {\n          linkList(function (output) {\n            return callback(Optional.some(output));\n          });\n        } else {\n          callback(Optional.from(linkList));\n        }\n      }).then(function (optItems) {\n        return optItems.bind(ListOptions.sanitizeWith(extractor)).map(function (items) {\n          if (items.length > 0) {\n            var noneItem = [{\n                text: 'None',\n                value: ''\n              }];\n            return noneItem.concat(items);\n          } else {\n            return items;\n          }\n        });\n      });\n    };\n    var LinkListOptions = { getLinks: getLinks };\n\n    var getRels = function (editor, initialTarget) {\n      var list = getRelList(editor);\n      if (list.length > 0) {\n        var isTargetBlank_1 = initialTarget.is('_blank');\n        var enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        var safeRelExtractor = function (item) {\n          return applyRelTargetRules(ListOptions.getValue(item), isTargetBlank_1);\n        };\n        var sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    var RelOptions = { getRels: getRels };\n\n    var fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    var getTargets = function (editor) {\n      var list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(function () {\n          return Optional.some(fallbacks);\n        });\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    var TargetOptions = { getTargets: getTargets };\n\n    var nonEmptyAttr = function (dom, elem, name) {\n      var val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    var extractFromAnchor = function (editor, anchor) {\n      var dom = editor.dom;\n      var onlyText = isOnlyTextSelected(editor);\n      var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      var url = anchor ? Optional.some(dom.getAttrib(anchor, 'href')) : Optional.none();\n      var target = anchor ? Optional.from(dom.getAttrib(anchor, 'target')) : Optional.none();\n      var rel = nonEmptyAttr(dom, anchor, 'rel');\n      var linkClass = nonEmptyAttr(dom, anchor, 'class');\n      var title = nonEmptyAttr(dom, anchor, 'title');\n      return {\n        url: url,\n        text: text,\n        title: title,\n        target: target,\n        rel: rel,\n        linkClass: linkClass\n      };\n    };\n    var collect = function (editor, linkNode) {\n      return LinkListOptions.getLinks(editor).then(function (links) {\n        var anchor = extractFromAnchor(editor, linkNode);\n        return {\n          anchor: anchor,\n          catalogs: {\n            targets: TargetOptions.getTargets(editor),\n            rels: RelOptions.getRels(editor, anchor.target),\n            classes: ClassListOptions.getClasses(editor),\n            anchor: AnchorListOptions.getAnchors(editor),\n            link: links\n          },\n          optNode: Optional.from(linkNode),\n          flags: { titleEnabled: shouldShowLinkTitle(editor) }\n        };\n      });\n    };\n    var DialogInfo = { collect: collect };\n\n    var handleSubmit = function (editor, info) {\n      return function (api) {\n        var data = api.getData();\n        if (!data.url.value) {\n          unlink(editor);\n          api.close();\n          return;\n        }\n        var getChangedValue = function (key) {\n          return Optional.from(data[key]).filter(function (value) {\n            return !info.anchor[key].is(value);\n          });\n        };\n        var changedData = {\n          href: data.url.value,\n          text: getChangedValue('text'),\n          target: getChangedValue('target'),\n          rel: getChangedValue('rel'),\n          class: getChangedValue('linkClass'),\n          title: getChangedValue('title')\n        };\n        var attachState = {\n          href: data.url.value,\n          attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : function () {\n          }\n        };\n        DialogConfirms.preprocess(editor, changedData).then(function (pData) {\n          link(editor, attachState, pData);\n        });\n        api.close();\n      };\n    };\n    var collectData = function (editor) {\n      var anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    var getInitialData = function (info, defaultTarget) {\n      var anchor = info.anchor;\n      var url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    var makeDialog = function (settings, onSubmit, editor) {\n      var urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL'\n        }];\n      var displayText = settings.anchor.text.map(function () {\n        return {\n          name: 'text',\n          type: 'input',\n          label: 'Text to display'\n        };\n      }).toArray();\n      var titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      var defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      var initialData = getInitialData(settings, defaultTarget);\n      var catalogs = settings.catalogs;\n      var dialogDelta = DialogChanges.init(initialData, catalogs);\n      var body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body: body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onChange: function (api, _a) {\n          var name = _a.name;\n          dialogDelta.onChange(api.getData, { name: name }).each(function (newData) {\n            api.setData(newData);\n          });\n        },\n        onSubmit: onSubmit\n      };\n    };\n    var open = function (editor) {\n      var data = collectData(editor);\n      data.then(function (info) {\n        var onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(function (spec) {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    var appendClickRemove = function (link, evt) {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    var open$1 = function (url) {\n      var link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      var evt = document.createEvent('MouseEvents');\n      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      appendClickRemove(link, evt);\n    };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          open$1(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleState = function (editor, toggler) {\n      editor.on('NodeChange', toggler);\n      return function () {\n        return editor.off('NodeChange', toggler);\n      };\n    };\n    var toggleActiveState = function (editor) {\n      return function (api) {\n        return toggleState(editor, function () {\n          api.setActive(!editor.mode.isReadOnly() && getAnchorElement(editor, editor.selection.getNode()) !== null);\n        });\n      };\n    };\n    var toggleEnabledState = function (editor) {\n      return function (api) {\n        var updateState = function () {\n          return api.setDisabled(getAnchorElement(editor, editor.selection.getNode()) === null);\n        };\n        updateState();\n        return toggleState(editor, updateState);\n      };\n    };\n    var toggleUnlinkState = function (editor) {\n      return function (api) {\n        var hasLinks$1 = function (parents) {\n          return hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        };\n        var parents = editor.dom.getParents(editor.selection.getStart());\n        api.setDisabled(!hasLinks$1(parents));\n        return toggleState(editor, function (e) {\n          return api.setDisabled(!hasLinks$1(e.parents));\n        });\n      };\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', function () {\n        if (useQuickLink(editor)) {\n          editor.fire('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        } else {\n          openDialog(editor)();\n        }\n      });\n    };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', function () {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    var setupButtons = function (editor) {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onAction: openDialog(editor),\n        onSetup: toggleActiveState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupMenuItems = function (editor) {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: gotoSelectedLink(editor),\n        onSetup: toggleEnabledState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: function () {\n          return unlink(editor);\n        },\n        onSetup: toggleUnlinkState(editor)\n      });\n    };\n    var setupContextMenu = function (editor) {\n      var inLink = 'link unlink openlink';\n      var noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: function (element) {\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      var collapseSelectionToEnd = function (editor) {\n        editor.selection.collapse(false);\n      };\n      var onSetupLink = function (buttonApi) {\n        var node = editor.selection.getNode();\n        buttonApi.setDisabled(!getAnchorElement(editor, node));\n        return function () {\n        };\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleActiveState(editor)\n        },\n        label: 'Link',\n        predicate: function (node) {\n          return !!getAnchorElement(editor, node) && hasContextToolbar(editor);\n        },\n        initValue: function () {\n          var elm = getAnchorElement(editor);\n          return !!elm ? getHref(elm) : '';\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: function (buttonApi) {\n              var node = editor.selection.getNode();\n              buttonApi.setActive(!!getAnchorElement(editor, node));\n              return toggleActiveState(editor)(buttonApi);\n            },\n            onAction: function (formApi) {\n              var anchor = getAnchorElement(editor);\n              var value = formApi.getValue();\n              if (!anchor) {\n                var attachState = {\n                  href: value,\n                  attach: function () {\n                  }\n                };\n                var onlyText = isOnlyTextSelected(editor);\n                var text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)).filter(function (t) {\n                  return t.length > 0;\n                }).or(Optional.from(value)) : Optional.none();\n                link(editor, attachState, {\n                  href: value,\n                  text: text,\n                  title: Optional.none(),\n                  rel: Optional.none(),\n                  target: Optional.none(),\n                  class: Optional.none()\n                });\n                formApi.hide();\n              } else {\n                editor.undoManager.transact(function () {\n                  editor.dom.setAttrib(anchor, 'href', value);\n                  collapseSelectionToEnd(editor);\n                  formApi.hide();\n                });\n              }\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: function (formApi) {\n              gotoSelectedLink(editor)();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n\n    function Plugin () {\n      global.add('link', function (editor) {\n        setupButtons(editor);\n        setupMenuItems(editor);\n        setupContextMenu(editor);\n        setupContextToolbars(editor);\n        setupGotoLinks(editor);\n        register(editor);\n        setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (editor.hasPlugin('powerpaste', true)) {\n        if (typeof window.console !== 'undefined' && window.console.log) {\n          window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var value = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var repeat = function (s, count) {\n      return count <= 0 ? '' : new Array(count + 1).join(s);\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var getValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var getAllowHtmlDataUrls = function (editor) {\n      return editor.getParam('allow_html_data_urls', false, 'boolean');\n    };\n    var getPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false, 'boolean');\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter');\n    };\n    var getImagesReuseFilename = function (editor) {\n      return editor.getParam('images_reuse_filename');\n    };\n    var getForcedRootBlock = function (editor) {\n      return editor.getParam('forced_root_block');\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs');\n    };\n    var getTabSpaces = function (editor) {\n      return editor.getParam('paste_tab_spaces', 4, 'number');\n    };\n    var getAllowedImageFileTypes = function (editor) {\n      var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n      return global$5.explode(editor.getParam('images_file_types', defaultImageFileTypes, 'string'));\n    };\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var internalHtmlMime = function () {\n      return internalMimeType;\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$5.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$5.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag === true ? 'p' : rootTag, rootAttrs) : toBRs(text);\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var nbsp = '\\xA0';\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    function filter$1(content, items) {\n      global$5.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$a();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$5.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter$1(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return nbsp;\n      }\n      html = filter$1(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var getImageMimeType = function (ext) {\n      var mimeOverrides = {\n        jpg: 'jpeg',\n        jpe: 'jpeg',\n        jfi: 'jpeg',\n        jif: 'jpeg',\n        jfif: 'jpeg',\n        pjpeg: 'jpeg',\n        pjp: 'jpeg',\n        svg: 'svg+xml'\n      };\n      return global$5.hasOwn(mimeOverrides, ext) ? 'image/' + mimeOverrides[ext] : 'image/' + ext;\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found;\n      var patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$5.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$9(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$5.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$9('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$9('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var validStyles;\n      var retainStyleProperties = getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$5.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = filter$1(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          nbsp\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join(nbsp) : '';\n          }\n        ]\n      ]);\n      var validElements = getWordValidElements(editor);\n      var schema = global$a({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$5.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$8({ validate: getValidate(editor) }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n\n    var preProcess$1 = function (editor, html) {\n      var parser = global$7({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$5.each(nodes, function (node) {\n          node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$8({ validate: getValidate(editor) }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess$1(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = isWordContent(html);\n      var content = isWordHtml ? preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(html, {\n        merge: shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (editor, url) {\n      return isAbsoluteUrl(url) && exists(getAllowedImageFileTypes(editor), function (type) {\n        return endsWith(url, '.' + type);\n      });\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(editor, html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$5.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html, pasteAsText) {\n      if (pasteAsText || isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var isNewLineChar = function (c) {\n      return c === '\\n' || c === '\\r';\n    };\n    var isNewline = function (text, idx) {\n      return idx < text.length && idx >= 0 ? isNewLineChar(text[idx]) : false;\n    };\n    var normalizeWhitespace = function (editor, text) {\n      var tabSpace = repeat(' ', getTabSpaces(editor));\n      var normalizedText = text.replace(/\\t/g, tabSpace);\n      var result = foldl(normalizedText, function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === nbsp) {\n          if (acc.pcIsSpace || acc.str === '' || acc.str.length === normalizedText.length - 1 || isNewline(normalizedText, acc.str.length + 1)) {\n            return {\n              pcIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              pcIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            pcIsSpace: isNewLineChar(c),\n            str: acc.str + c\n          };\n        }\n      }, {\n        pcIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n\n    var doPaste = function (editor, content, internal, pasteAsText) {\n      var args = process(editor, content, internal);\n      if (args.cancelled === false) {\n        insertContent(editor, args.content, pasteAsText);\n      }\n    };\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : isMarked(html);\n      doPaste(editor, unmark(html), internal, false);\n    };\n    var pasteText = function (editor, text) {\n      var encodedText = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      var normalizedText = normalizeWhitespace(editor, encodedText);\n      var html = convert(normalizedText, getForcedRootBlock(editor), getForcedRootBlockAttrs(editor));\n      doPaste(editor, html, false, true);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      return getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return {\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        };\n      } else {\n        return {\n          type: null,\n          data: null\n        };\n      }\n    };\n    var isValidDataUriImage = function (editor, imgElm) {\n      var filter = getImagesDataImgFilter(editor);\n      return filter ? filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)(?:\\.[a-z0-9.]+)$/i);\n      return isNonNullable(m) ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var _a = parseDataUri(imageItem.uri), base64 = _a.data, type = _a.type;\n      var id = uniqueId();\n      var file = imageItem.blob;\n      var img = new Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0;\n        var existingBlobInfo = blobCache.getByData(base64, type);\n        if (!existingBlobInfo) {\n          var useFileName = getImagesReuseFilename(editor) && isNonNullable(file.name);\n          var name_1 = useFileName ? extractFilename(editor, file.name) : id;\n          var filename = useFileName ? file.name : undefined;\n          blobInfo = blobCache.create(id, file, base64, name_1, filename);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var isDataTransferItem = function (item) {\n      return isNonNullable(item.getAsFile);\n    };\n    var readFilesAsDataUris = function (items) {\n      return global$3.all(map(items, function (item) {\n        return new global$3(function (resolve) {\n          var blob = isDataTransferItem(item) ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      }));\n    };\n    var isImage = function (editor) {\n      var allowedExtensions = getAllowedImageFileTypes(editor);\n      return function (file) {\n        return startsWith(file.type, 'image/') && exists(allowedExtensions, function (extension) {\n          return getImageMimeType(extension) === file.type;\n        });\n      };\n    };\n    var getImagesFromDataTransfer = function (editor, dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      return filter(items.length > 0 ? items : files, isImage(editor));\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (getPasteDataImages(editor) && dataTransfer) {\n        var images = getImagesFromDataTransfer(editor, dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readFilesAsDataUris(images).then(function (fileResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(fileResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$4.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePressed = value();\n      var keyboardPastePlainTextState;\n      editor.on('keyup', keyboardPastePressed.clear);\n      editor.on('keydown', function (e) {\n        var removePasteBinOnKeyUp = function (e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        };\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$1.webkit && navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          keyboardPastePressed.set(true);\n          if (global$1.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(editor, clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = trimHtml(content);\n        pasteBin.remove();\n        var isPlainTextHtml = internal === false && isPlainText(content);\n        var isImage = isImageUrl(editor, content);\n        if (!content.length || isPlainTextHtml && !isImage) {\n          plainTextMode = true;\n        }\n        if (plainTextMode || isImage) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyboardPaste = keyboardPasteEvent.isSet() || keyboardPastePressed.isSet();\n        if (isKeyboardPaste) {\n          keyboardPasteEvent.clear();\n        }\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyboardPaste) {\n          e.preventDefault();\n        }\n        if (global$1.ie && (!isKeyboardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(editor, clipboardContent, isKeyboardPaste, plainTextMode, internal);\n        } else {\n          global$2.setEditorTimeout(editor, function () {\n            insertClipboardContent(editor, clipboardContent, isKeyboardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$1.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!getPasteDataImages(editor) && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attr('src');\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!getAllowHtmlDataUrls(editor) && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$1.ie && editor.inline ? document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (_e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      lastRngCell.set(editor.selection.getRng());\n      var pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$1.ie || global$1.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      var pasteBinClones = global$5.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      var pasteBinElm = pasteBinClones.shift();\n      global$5.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      var dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (var i = dirtyWrappers.length - 1; i >= 0; i--) {\n        var cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('PreInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var togglePlainTextPaste = function (editor, clipboard) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        firePastePlainTextToggle(editor, true);\n      }\n      editor.focus();\n    };\n\n    var register = function (editor, clipboard) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        togglePlainTextPaste(editor, clipboard);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$1.iOS === false && typeof (clipboardData === null || clipboardData === void 0 ? void 0 : clipboardData.setData) === 'function';\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        global$2.setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            if (global$1.browser.isChrome() || global$1.browser.isFirefox()) {\n              var rng_1 = editor.selection.getRng();\n              global$2.setEditorTimeout(editor, function () {\n                editor.selection.setRng(rng_1);\n                editor.execCommand('Delete');\n              }, 0);\n            } else {\n              editor.execCommand('Delete');\n            }\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n          });\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        var dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$2.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (_e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$5.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = filter$1(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = filter$1(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = getWebkitStyles(editor);\n      var webKitStyles;\n      if (shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$1.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$1.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n\n    var makeSetupHandler = function (editor, clipboard) {\n      return function (api) {\n        api.setActive(clipboard.pasteFormat.get() === 'text');\n        var pastePlainTextToggleHandler = function (e) {\n          return api.setActive(e.state);\n        };\n        editor.on('PastePlainTextToggle', pastePlainTextToggleHandler);\n        return function () {\n          return editor.off('PastePlainTextToggle', pastePlainTextToggleHandler);\n        };\n      };\n    };\n    var register$2 = function (editor, clipboard) {\n      editor.ui.registry.addToggleButton('pastetext', {\n        active: false,\n        icon: 'paste-text',\n        tooltip: 'Paste as text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n      editor.ui.registry.addToggleMenuItem('pastetext', {\n        text: 'Paste as text',\n        icon: 'paste-text',\n        onAction: function () {\n          return editor.execCommand('mceTogglePlainTextPaste');\n        },\n        onSetup: makeSetupHandler(editor, clipboard)\n      });\n    };\n\n    function Plugin () {\n      global.add('paste', function (editor) {\n        if (hasProPlugin(editor) === false) {\n          var draggingInternallyState = Cell(false);\n          var pasteFormat = Cell(isPasteAsTextEnabled(editor) ? 'text' : 'html');\n          var clipboard = Clipboard(editor, pasteFormat);\n          var quirks = setup$2(editor);\n          register$2(editor, clipboard);\n          register(editor, clipboard);\n          setup$1(editor);\n          register$1(editor);\n          setup(editor, clipboard, draggingInternallyState);\n          return get(clipboard, quirks);\n        }\n      });\n    }\n\n    Plugin();\n\n}());\n","// Exports the \"silver\" theme for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/themes/silver')\n//   ES2015:\n//     import 'tinymce/themes/silver'\nrequire('./theme.js');","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var noop = function () {\n    };\n    var noarg = function (f) {\n      return function () {\n        return f();\n      };\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n    var isArrayOf = function (value, pred) {\n      if (isArray(value)) {\n        for (var i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var range = function (num, f) {\n      var r = [];\n      for (var i = 0; i < num; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var chunk = function (array, size) {\n      var r = [];\n      for (var i = 0; i < array.length; i += size) {\n        var s = nativeSlice.call(array, i, i + size);\n        r.push(s);\n      }\n      return r;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var SimpleResultType;\n    (function (SimpleResultType) {\n      SimpleResultType[SimpleResultType['Error'] = 0] = 'Error';\n      SimpleResultType[SimpleResultType['Value'] = 1] = 'Value';\n    }(SimpleResultType || (SimpleResultType = {})));\n    var fold = function (res, onError, onValue) {\n      return res.stype === SimpleResultType.Error ? onError(res.serror) : onValue(res.svalue);\n    };\n    var partition$1 = function (results) {\n      var values = [];\n      var errors = [];\n      each(results, function (obj) {\n        fold(obj, function (err) {\n          return errors.push(err);\n        }, function (val) {\n          return values.push(val);\n        });\n      });\n      return {\n        values: values,\n        errors: errors\n      };\n    };\n    var mapError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return {\n          stype: SimpleResultType.Error,\n          serror: f(res.serror)\n        };\n      } else {\n        return res;\n      }\n    };\n    var map$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return {\n          stype: SimpleResultType.Value,\n          svalue: f(res.svalue)\n        };\n      } else {\n        return res;\n      }\n    };\n    var bind$1 = function (res, f) {\n      if (res.stype === SimpleResultType.Value) {\n        return f(res.svalue);\n      } else {\n        return res;\n      }\n    };\n    var bindError = function (res, f) {\n      if (res.stype === SimpleResultType.Error) {\n        return f(res.serror);\n      } else {\n        return res;\n      }\n    };\n    var svalue = function (v) {\n      return {\n        stype: SimpleResultType.Value,\n        svalue: v\n      };\n    };\n    var serror = function (e) {\n      return {\n        stype: SimpleResultType.Error,\n        serror: e\n      };\n    };\n    var toResult = function (res) {\n      return fold(res, Result.error, Result.value);\n    };\n    var fromResult = function (res) {\n      return res.fold(serror, svalue);\n    };\n    var SimpleResult = {\n      fromResult: fromResult,\n      toResult: toResult,\n      svalue: svalue,\n      partition: partition$1,\n      serror: serror,\n      bind: bind$1,\n      bindError: bindError,\n      map: map$1,\n      mapError: mapError,\n      fold: fold\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var find$1 = function (obj, pred) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        if (pred(x, i, obj)) {\n          return Optional.some(x);\n        }\n      }\n      return Optional.none();\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var deep = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$1.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep);\n    var merge = baseMerge(shallow);\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var adt = Adt.generate([\n      { strict: [] },\n      { defaultedThunk: ['fallbackThunk'] },\n      { asOption: [] },\n      { asDefaultedOptionThunk: ['fallbackThunk'] },\n      { mergeWithThunk: ['baseThunk'] }\n    ]);\n    var defaulted = function (fallback) {\n      return adt.defaultedThunk(constant(fallback));\n    };\n    var mergeWith = function (base) {\n      return adt.mergeWithThunk(constant(base));\n    };\n    var strict = adt.strict;\n    var asOption = adt.asOption;\n    var defaultedThunk = adt.defaultedThunk;\n    var asDefaultedOptionThunk = adt.asDefaultedOptionThunk;\n    var mergeWithThunk = adt.mergeWithThunk;\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var partition$2 = function (results) {\n      var errors = [];\n      var values = [];\n      each(results, function (result) {\n        result.fold(function (err) {\n          errors.push(err);\n        }, function (value) {\n          values.push(value);\n        });\n      });\n      return {\n        errors: errors,\n        values: values\n      };\n    };\n\n    var exclude = function (obj, fields) {\n      var r = {};\n      each$1(obj, function (v, k) {\n        if (!contains(fields, k)) {\n          r[k] = v;\n        }\n      });\n      return r;\n    };\n\n    var wrap = function (key, value) {\n      var _a;\n      return _a = {}, _a[key] = value, _a;\n    };\n    var wrapAll = function (keyvalues) {\n      var r = {};\n      each(keyvalues, function (kv) {\n        r[kv.key] = kv.value;\n      });\n      return r;\n    };\n\n    var exclude$1 = function (obj, fields) {\n      return exclude(obj, fields);\n    };\n    var wrap$1 = function (key, value) {\n      return wrap(key, value);\n    };\n    var wrapAll$1 = function (keyvalues) {\n      return wrapAll(keyvalues);\n    };\n    var mergeValues = function (values, base) {\n      return values.length === 0 ? Result.value(base) : Result.value(deepMerge(base, merge.apply(undefined, values)));\n    };\n    var mergeErrors = function (errors) {\n      return Result.error(flatten(errors));\n    };\n    var consolidate = function (objs, base) {\n      var partitions = partition$2(objs);\n      return partitions.errors.length > 0 ? mergeErrors(partitions.errors) : mergeValues(partitions.values, base);\n    };\n\n    var mergeValues$1 = function (values, base) {\n      return values.length > 0 ? SimpleResult.svalue(deepMerge(base, merge.apply(undefined, values))) : SimpleResult.svalue(base);\n    };\n    var mergeErrors$1 = function (errors) {\n      return compose(SimpleResult.serror, flatten)(errors);\n    };\n    var consolidateObj = function (objects, base) {\n      var partition = SimpleResult.partition(objects);\n      return partition.errors.length > 0 ? mergeErrors$1(partition.errors) : mergeValues$1(partition.values, base);\n    };\n    var consolidateArr = function (objects) {\n      var partitions = SimpleResult.partition(objects);\n      return partitions.errors.length > 0 ? mergeErrors$1(partitions.errors) : SimpleResult.svalue(partitions.values);\n    };\n    var ResultCombine = {\n      consolidateObj: consolidateObj,\n      consolidateArr: consolidateArr\n    };\n\n    var formatObj = function (input) {\n      return isObject(input) && keys(input).length > 100 ? ' removed due to size' : JSON.stringify(input, null, 2);\n    };\n    var formatErrors = function (errors) {\n      var es = errors.length > 10 ? errors.slice(0, 10).concat([{\n          path: [],\n          getErrorInfo: function () {\n            return '... (only showing first ten failures)';\n          }\n        }]) : errors;\n      return map(es, function (e) {\n        return 'Failed path: (' + e.path.join(' > ') + ')\\n' + e.getErrorInfo();\n      });\n    };\n\n    var nu = function (path, getErrorInfo) {\n      return SimpleResult.serror([{\n          path: path,\n          getErrorInfo: getErrorInfo\n        }]);\n    };\n    var missingStrict = function (path, key, obj) {\n      return nu(path, function () {\n        return 'Could not find valid *strict* value for \"' + key + '\" in ' + formatObj(obj);\n      });\n    };\n    var missingKey = function (path, key) {\n      return nu(path, function () {\n        return 'Choice schema did not contain choice key: \"' + key + '\"';\n      });\n    };\n    var missingBranch = function (path, branches, branch) {\n      return nu(path, function () {\n        return 'The chosen schema: \"' + branch + '\" did not exist in branches: ' + formatObj(branches);\n      });\n    };\n    var unsupportedFields = function (path, unsupported) {\n      return nu(path, function () {\n        return 'There are unsupported fields: [' + unsupported.join(', ') + '] specified';\n      });\n    };\n    var custom = function (path, err) {\n      return nu(path, function () {\n        return err;\n      });\n    };\n\n    var adt$1 = Adt.generate([\n      {\n        field: [\n          'key',\n          'okey',\n          'presence',\n          'prop'\n        ]\n      },\n      {\n        state: [\n          'okey',\n          'instantiator'\n        ]\n      }\n    ]);\n    var strictAccess = function (path, obj, key) {\n      return get$1(obj, key).fold(function () {\n        return missingStrict(path, key, obj);\n      }, SimpleResult.svalue);\n    };\n    var fallbackAccess = function (obj, key, fallbackThunk) {\n      var v = get$1(obj, key).fold(function () {\n        return fallbackThunk(obj);\n      }, identity);\n      return SimpleResult.svalue(v);\n    };\n    var optionAccess = function (obj, key) {\n      return SimpleResult.svalue(get$1(obj, key));\n    };\n    var optionDefaultedAccess = function (obj, key, fallback) {\n      var opt = get$1(obj, key).map(function (val) {\n        return val === true ? fallback(obj) : val;\n      });\n      return SimpleResult.svalue(opt);\n    };\n    var cExtractOne = function (path, obj, field, strength) {\n      return field.fold(function (key, okey, presence, prop) {\n        var bundle = function (av) {\n          var result = prop.extract(path.concat([key]), strength, av);\n          return SimpleResult.map(result, function (res) {\n            return wrap(okey, strength(res));\n          });\n        };\n        var bundleAsOption = function (optValue) {\n          return optValue.fold(function () {\n            var outcome = wrap(okey, strength(Optional.none()));\n            return SimpleResult.svalue(outcome);\n          }, function (ov) {\n            var result = prop.extract(path.concat([key]), strength, ov);\n            return SimpleResult.map(result, function (res) {\n              return wrap(okey, strength(Optional.some(res)));\n            });\n          });\n        };\n        return function () {\n          return presence.fold(function () {\n            return SimpleResult.bind(strictAccess(path, obj, key), bundle);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(fallbackAccess(obj, key, fallbackThunk), bundle);\n          }, function () {\n            return SimpleResult.bind(optionAccess(obj, key), bundleAsOption);\n          }, function (fallbackThunk) {\n            return SimpleResult.bind(optionDefaultedAccess(obj, key, fallbackThunk), bundleAsOption);\n          }, function (baseThunk) {\n            var base = baseThunk(obj);\n            var result = SimpleResult.map(fallbackAccess(obj, key, constant({})), function (v) {\n              return deepMerge(base, v);\n            });\n            return SimpleResult.bind(result, bundle);\n          });\n        }();\n      }, function (okey, instantiator) {\n        var state = instantiator(obj);\n        return SimpleResult.svalue(wrap(okey, strength(state)));\n      });\n    };\n    var cExtract = function (path, obj, fields, strength) {\n      var results = map(fields, function (field) {\n        return cExtractOne(path, obj, field, strength);\n      });\n      return ResultCombine.consolidateObj(results, {});\n    };\n    var valueThunk = function (getDelegate) {\n      var extract = function (path, strength, val) {\n        return getDelegate().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getDelegate().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var value$1 = function (validator) {\n      var extract = function (path, strength, val) {\n        return SimpleResult.bindError(validator(val, strength), function (err) {\n          return custom(path, err);\n        });\n      };\n      var toString = function () {\n        return 'val';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var getSetKeys = function (obj) {\n      return keys(filter$1(obj, function (value) {\n        return value !== undefined && value !== null;\n      }));\n    };\n    var objOfOnly = function (fields) {\n      var delegate = objOf(fields);\n      var fieldNames = foldr(fields, function (acc, f) {\n        return f.fold(function (key) {\n          return deepMerge(acc, wrap$1(key, true));\n        }, constant(acc));\n      }, {});\n      var extract = function (path, strength, o) {\n        var keys = isBoolean(o) ? [] : getSetKeys(o);\n        var extra = filter(keys, function (k) {\n          return !hasNonNullableKey(fieldNames, k);\n        });\n        return extra.length === 0 ? delegate.extract(path, strength, o) : unsupportedFields(path, extra);\n      };\n      return {\n        extract: extract,\n        toString: delegate.toString\n      };\n    };\n    var objOf = function (fields) {\n      var extract = function (path, strength, o) {\n        return cExtract(path, o, fields, strength);\n      };\n      var toString = function () {\n        var fieldStrings = map(fields, function (field) {\n          return field.fold(function (key, okey, presence, prop) {\n            return key + ' -> ' + prop.toString();\n          }, function (okey, _instantiator) {\n            return 'state(' + okey + ')';\n          });\n        });\n        return 'obj{\\n' + fieldStrings.join('\\n') + '}';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var arrOf = function (prop) {\n      var extract = function (path, strength, array) {\n        var results = map(array, function (a, i) {\n          return prop.extract(path.concat(['[' + i + ']']), strength, a);\n        });\n        return ResultCombine.consolidateArr(results);\n      };\n      var toString = function () {\n        return 'array(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var oneOf = function (props) {\n      var extract = function (path, strength, val) {\n        var errors = [];\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\n          var prop = props_1[_i];\n          var res = prop.extract(path, strength, val);\n          if (res.stype === SimpleResultType.Value) {\n            return res;\n          }\n          errors.push(res);\n        }\n        return ResultCombine.consolidateArr(errors);\n      };\n      var toString = function () {\n        return 'oneOf(' + map(props, function (prop) {\n          return prop.toString();\n        }).join(', ') + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var setOf = function (validator, prop) {\n      var validateKeys = function (path, keys) {\n        return arrOf(value$1(validator)).extract(path, identity, keys);\n      };\n      var extract = function (path, strength, o) {\n        var keys$1 = keys(o);\n        var validatedKeys = validateKeys(path, keys$1);\n        return SimpleResult.bind(validatedKeys, function (validKeys) {\n          var schema = map(validKeys, function (vk) {\n            return adt$1.field(vk, vk, strict(), prop);\n          });\n          return objOf(schema).extract(path, strength, o);\n        });\n      };\n      var toString = function () {\n        return 'setOf(' + prop.toString() + ')';\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var thunk = function (desc, processor) {\n      var getP = cached(function () {\n        return processor();\n      });\n      var extract = function (path, strength, val) {\n        return getP().extract(path, strength, val);\n      };\n      var toString = function () {\n        return getP().toString();\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n    var anyValue = constant(value$1(SimpleResult.svalue));\n    var arrOfObj = compose(arrOf, objOf);\n    var state = adt$1.state;\n    var field = adt$1.field;\n\n    var chooseFrom = function (path, strength, input, branches, ch) {\n      var fields = get$1(branches, ch);\n      return fields.fold(function () {\n        return missingBranch(path, branches, ch);\n      }, function (vp) {\n        return vp.extract(path.concat(['branch: ' + ch]), strength, input);\n      });\n    };\n    var choose = function (key, branches) {\n      var extract = function (path, strength, input) {\n        var choice = get$1(input, key);\n        return choice.fold(function () {\n          return missingKey(path, key);\n        }, function (chosen) {\n          return chooseFrom(path, strength, input, branches, chosen);\n        });\n      };\n      var toString = function () {\n        return 'chooseOn(' + key + '). Possible values: ' + keys(branches);\n      };\n      return {\n        extract: extract,\n        toString: toString\n      };\n    };\n\n    var _anyValue = value$1(SimpleResult.svalue);\n    var arrOfObj$1 = function (objFields) {\n      return arrOfObj(objFields);\n    };\n    var arrOfVal = function () {\n      return arrOf(_anyValue);\n    };\n    var valueThunkOf = valueThunk;\n    var valueOf = function (validator) {\n      return value$1(function (v) {\n        return validator(v).fold(SimpleResult.serror, SimpleResult.svalue);\n      });\n    };\n    var setOf$1 = function (validator, prop) {\n      return setOf(function (v) {\n        return SimpleResult.fromResult(validator(v));\n      }, prop);\n    };\n    var extract = function (label, prop, strength, obj) {\n      var res = prop.extract([label], strength, obj);\n      return SimpleResult.mapError(res, function (errs) {\n        return {\n          input: obj,\n          errors: errs\n        };\n      });\n    };\n    var asRaw = function (label, prop, obj) {\n      return SimpleResult.toResult(extract(label, prop, identity, obj));\n    };\n    var getOrDie = function (extraction) {\n      return extraction.fold(function (errInfo) {\n        throw new Error(formatError(errInfo));\n      }, identity);\n    };\n    var asRawOrDie = function (label, prop, obj) {\n      return getOrDie(asRaw(label, prop, obj));\n    };\n    var formatError = function (errInfo) {\n      return 'Errors: \\n' + formatErrors(errInfo.errors).join('\\n') + '\\n\\nInput object: ' + formatObj(errInfo.input);\n    };\n    var chooseProcessor = function (key, branches) {\n      return choose(key, branches);\n    };\n    var choose$1 = function (key, branches) {\n      return choose(key, map$2(branches, objOf));\n    };\n    var thunkOf = function (desc, schema) {\n      return thunk(desc, schema);\n    };\n    var anyValue$1 = constant(_anyValue);\n    var typedValue = function (validator, expectedType) {\n      return value$1(function (a) {\n        var actualType = typeof a;\n        return validator(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected type: ' + expectedType + ' but got: ' + actualType);\n      });\n    };\n    var number = typedValue(isNumber, 'number');\n    var string = typedValue(isString, 'string');\n    var boolean = typedValue(isBoolean, 'boolean');\n    var functionProcessor = typedValue(isFunction, 'function');\n    var isPostMessageable = function (val) {\n      var every = function (iter, callbackFn) {\n        var result = iter.next();\n        while (!result.done) {\n          if (!callbackFn(result.value)) {\n            return false;\n          }\n          result = iter.next();\n        }\n        return true;\n      };\n      if (Object(val) !== val) {\n        return true;\n      }\n      switch ({}.toString.call(val).slice(8, -1)) {\n      case 'Boolean':\n      case 'Number':\n      case 'String':\n      case 'Date':\n      case 'RegExp':\n      case 'Blob':\n      case 'FileList':\n      case 'ImageData':\n      case 'ImageBitmap':\n      case 'ArrayBuffer':\n        return true;\n      case 'Array':\n      case 'Object':\n        return Object.keys(val).every(function (prop) {\n          return isPostMessageable(val[prop]);\n        });\n      case 'Map':\n        return every(val.keys(), isPostMessageable) && every(val.values(), isPostMessageable);\n      case 'Set':\n        return every(val.keys(), isPostMessageable);\n      default:\n        return false;\n      }\n    };\n    var postMessageable = value$1(function (a) {\n      return isPostMessageable(a) ? SimpleResult.svalue(a) : SimpleResult.serror('Expected value to be acceptable for sending via postMessage');\n    });\n\n    var validateEnum = function (values) {\n      return valueOf(function (value) {\n        return contains(values, value) ? Result.value(value) : Result.error('Unsupported value: \"' + value + '\", choose one of \"' + values.join(', ') + '\".');\n      });\n    };\n    var strict$1 = function (key) {\n      return field(key, key, strict(), anyValue());\n    };\n    var strictOf = function (key, schema) {\n      return field(key, key, strict(), schema);\n    };\n    var strictNumber = function (key) {\n      return strictOf(key, number);\n    };\n    var strictString = function (key) {\n      return strictOf(key, string);\n    };\n    var strictStringEnum = function (key, values) {\n      return field(key, key, strict(), validateEnum(values));\n    };\n    var strictBoolean = function (key) {\n      return strictOf(key, boolean);\n    };\n    var strictFunction = function (key) {\n      return strictOf(key, functionProcessor);\n    };\n    var forbid = function (key, message) {\n      return field(key, key, asOption(), value$1(function (_v) {\n        return SimpleResult.serror('The field: ' + key + ' is forbidden. ' + message);\n      }));\n    };\n    var strictObjOf = function (key, objSchema) {\n      return field(key, key, strict(), objOf(objSchema));\n    };\n    var strictArrayOfObj = function (key, objFields) {\n      return field(key, key, strict(), arrOfObj(objFields));\n    };\n    var strictArrayOf = function (key, schema) {\n      return field(key, key, strict(), arrOf(schema));\n    };\n    var option = function (key) {\n      return field(key, key, asOption(), anyValue());\n    };\n    var optionOf = function (key, schema) {\n      return field(key, key, asOption(), schema);\n    };\n    var optionNumber = function (key) {\n      return optionOf(key, number);\n    };\n    var optionString = function (key) {\n      return optionOf(key, string);\n    };\n    var optionFunction = function (key) {\n      return optionOf(key, functionProcessor);\n    };\n    var optionArrayOf = function (key, schema) {\n      return optionOf(key, arrOf(schema));\n    };\n    var optionObjOf = function (key, objSchema) {\n      return optionOf(key, objOf(objSchema));\n    };\n    var optionObjOfOnly = function (key, objSchema) {\n      return optionOf(key, objOfOnly(objSchema));\n    };\n    var defaulted$1 = function (key, fallback) {\n      return field(key, key, defaulted(fallback), anyValue());\n    };\n    var defaultedOf = function (key, fallback, schema) {\n      return field(key, key, defaulted(fallback), schema);\n    };\n    var defaultedNumber = function (key, fallback) {\n      return defaultedOf(key, fallback, number);\n    };\n    var defaultedString = function (key, fallback) {\n      return defaultedOf(key, fallback, string);\n    };\n    var defaultedStringEnum = function (key, fallback, values) {\n      return defaultedOf(key, fallback, validateEnum(values));\n    };\n    var defaultedBoolean = function (key, fallback) {\n      return defaultedOf(key, fallback, boolean);\n    };\n    var defaultedFunction = function (key, fallback) {\n      return defaultedOf(key, fallback, functionProcessor);\n    };\n    var defaultedPostMsg = function (key, fallback) {\n      return defaultedOf(key, fallback, postMessageable);\n    };\n    var defaultedArrayOf = function (key, fallback, schema) {\n      return defaultedOf(key, fallback, arrOf(schema));\n    };\n    var defaultedObjOf = function (key, fallback, objSchema) {\n      return defaultedOf(key, fallback, objOf(objSchema));\n    };\n    var state$1 = function (okey, instantiator) {\n      return state(okey, instantiator);\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu$1(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu$1(0, 0);\n    };\n    var nu$1 = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu$1,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$2,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$3({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$3 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$3,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$1 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor(scope, transform, stop);\n      });\n    };\n\n    var isSource = function (component, simulatedEvent) {\n      return eq$1(component.element, simulatedEvent.event.target);\n    };\n\n    var nu$4 = function (parts) {\n      if (!hasNonNullableKey(parts, 'can') && !hasNonNullableKey(parts, 'abort') && !hasNonNullableKey(parts, 'run')) {\n        throw new Error('EventHandler defined by: ' + JSON.stringify(parts, null, 2) + ' does not have can, abort, or run!');\n      }\n      return asRawOrDie('Extracting event.handler', objOfOnly([\n        defaulted$1('can', always),\n        defaulted$1('abort', never),\n        defaulted$1('run', noop)\n      ]), parts);\n    };\n    var all$1 = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc && f(handler).apply(undefined, args);\n        }, true);\n      };\n    };\n    var any = function (handlers, f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return foldl(handlers, function (acc, handler) {\n          return acc || f(handler).apply(undefined, args);\n        }, false);\n      };\n    };\n    var read = function (handler) {\n      return isFunction(handler) ? {\n        can: constant(true),\n        abort: constant(false),\n        run: handler\n      } : handler;\n    };\n    var fuse = function (handlers) {\n      var can = all$1(handlers, function (handler) {\n        return handler.can;\n      });\n      var abort = any(handlers, function (handler) {\n        return handler.abort;\n      });\n      var run = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        each(handlers, function (handler) {\n          handler.run.apply(undefined, args);\n        });\n      };\n      return nu$4({\n        can: can,\n        abort: abort,\n        run: run\n      });\n    };\n\n    var constant$1 = constant;\n    var touchstart = constant$1('touchstart');\n    var touchmove = constant$1('touchmove');\n    var touchend = constant$1('touchend');\n    var touchcancel = constant$1('touchcancel');\n    var mousedown = constant$1('mousedown');\n    var mousemove = constant$1('mousemove');\n    var mouseout = constant$1('mouseout');\n    var mouseup = constant$1('mouseup');\n    var mouseover = constant$1('mouseover');\n    var focusin = constant$1('focusin');\n    var focusout = constant$1('focusout');\n    var keydown = constant$1('keydown');\n    var keyup = constant$1('keyup');\n    var input = constant$1('input');\n    var change = constant$1('change');\n    var click = constant$1('click');\n    var transitionend = constant$1('transitionend');\n    var selectstart = constant$1('selectstart');\n\n    var prefixName = function (name) {\n      return constant('alloy.' + name);\n    };\n    var alloy = { tap: prefixName('tap') };\n    var focus = prefixName('focus');\n    var postBlur = prefixName('blur.post');\n    var postPaste = prefixName('paste.post');\n    var receive = prefixName('receive');\n    var execute = prefixName('execute');\n    var focusItem = prefixName('focus.item');\n    var tap = alloy.tap;\n    var longpress = prefixName('longpress');\n    var sandboxClose = prefixName('sandbox.close');\n    var typeaheadCancel = prefixName('typeahead.cancel');\n    var systemInit = prefixName('system.init');\n    var documentTouchmove = prefixName('system.touchmove');\n    var documentTouchend = prefixName('system.touchend');\n    var windowScroll = prefixName('system.scroll');\n    var windowResize = prefixName('system.resize');\n    var attachedToDom = prefixName('system.attached');\n    var detachedFromDom = prefixName('system.detached');\n    var dismissRequested = prefixName('system.dismissRequested');\n    var repositionRequested = prefixName('system.repositionRequested');\n    var focusShifted = prefixName('focusmanager.shifted');\n    var slotVisibility = prefixName('slotcontainer.visibility');\n    var changeTab = prefixName('change.tab');\n    var dismissTab = prefixName('dismiss.tab');\n    var highlight = prefixName('highlight');\n    var dehighlight = prefixName('dehighlight');\n\n    var emit = function (component, event) {\n      dispatchWith(component, component.element, event, {});\n    };\n    var emitWith = function (component, event, properties) {\n      dispatchWith(component, component.element, event, properties);\n    };\n    var emitExecute = function (component) {\n      emit(component, execute());\n    };\n    var dispatch = function (component, target, event) {\n      dispatchWith(component, target, event, {});\n    };\n    var dispatchWith = function (component, target, event, properties) {\n      var data = __assign({ target: target }, properties);\n      component.getSystem().triggerEvent(event, target, data);\n    };\n    var dispatchEvent = function (component, target, event, simulatedEvent) {\n      component.getSystem().triggerEvent(event, target, simulatedEvent.event);\n    };\n\n    var derive = function (configs) {\n      return wrapAll$1(configs);\n    };\n    var abort = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ abort: predicate })\n      };\n    };\n    var can = function (name, predicate) {\n      return {\n        key: name,\n        value: nu$4({ can: predicate })\n      };\n    };\n    var preventDefault = function (name) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            simulatedEvent.event.prevent();\n          }\n        })\n      };\n    };\n    var run = function (name, handler) {\n      return {\n        key: name,\n        value: nu$4({ run: handler })\n      };\n    };\n    var runActionExtra = function (name, action, extra) {\n      return {\n        key: name,\n        value: nu$4({\n          run: function (component, simulatedEvent) {\n            action.apply(undefined, [\n              component,\n              simulatedEvent\n            ].concat(extra));\n          }\n        })\n      };\n    };\n    var runOnName = function (name) {\n      return function (handler) {\n        return run(name, handler);\n      };\n    };\n    var runOnSourceName = function (name) {\n      return function (handler) {\n        return {\n          key: name,\n          value: nu$4({\n            run: function (component, simulatedEvent) {\n              if (isSource(component, simulatedEvent)) {\n                handler(component, simulatedEvent);\n              }\n            }\n          })\n        };\n      };\n    };\n    var redirectToUid = function (name, uid) {\n      return run(name, function (component, simulatedEvent) {\n        component.getSystem().getByUid(uid).each(function (redirectee) {\n          dispatchEvent(redirectee, redirectee.element, name, simulatedEvent);\n        });\n      });\n    };\n    var redirectToPart = function (name, detail, partName) {\n      var uid = detail.partUids[partName];\n      return redirectToUid(name, uid);\n    };\n    var runWithTarget = function (name, f) {\n      return run(name, function (component, simulatedEvent) {\n        var ev = simulatedEvent.event;\n        var target = component.getSystem().getByDom(ev.target).fold(function () {\n          var closest$1 = closest(ev.target, function (el) {\n            return component.getSystem().getByDom(el).toOptional();\n          }, never);\n          return closest$1.getOr(component);\n        }, function (c) {\n          return c;\n        });\n        f(component, target, simulatedEvent);\n      });\n    };\n    var cutter = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.cut();\n      });\n    };\n    var stopper = function (name) {\n      return run(name, function (component, simulatedEvent) {\n        simulatedEvent.stop();\n      });\n    };\n    var runOnSource = function (name, f) {\n      return runOnSourceName(name)(f);\n    };\n    var runOnAttached = runOnSourceName(attachedToDom());\n    var runOnDetached = runOnSourceName(detachedFromDom());\n    var runOnInit = runOnSourceName(systemInit());\n    var runOnExecute = runOnName(execute());\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parentNode = function (element) {\n      return parent(element);\n    };\n    var offsetParent = function (element) {\n      return Optional.from(element.dom.offsetParent).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var appendAt = function (parent, element, index) {\n      child(parent, index).fold(function () {\n        append(parent, element);\n      }, function (v) {\n        before(v, element);\n      });\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$2 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n    var getOuter = function (element) {\n      var container = SugarElement.fromTag('div');\n      var clone = SugarElement.fromDom(element.dom.cloneNode(true));\n      append(container, clone);\n      return get$2(container);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set$1 = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$3 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$3(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n\n    var clone = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow$1 = function (original) {\n      return clone(original, false);\n    };\n\n    var getHtml = function (element) {\n      var clone = shallow$1(element);\n      return getOuter(clone);\n    };\n\n    var element = function (elem) {\n      return getHtml(elem);\n    };\n\n    var isRecursive = function (component, originator, target) {\n      return eq$1(originator, component.element) && !eq$1(originator, target);\n    };\n    var events = derive([can(focus(), function (component, simulatedEvent) {\n        var event = simulatedEvent.event;\n        var originator = event.originator;\n        var target = event.target;\n        if (isRecursive(component, originator, target)) {\n          console.warn(focus() + ' did not get interpreted by the desired target. ' + '\\nOriginator: ' + element(originator) + '\\nTarget: ' + element(target) + '\\nCheck the ' + focus() + ' event handlers');\n          return false;\n        } else {\n          return true;\n        }\n      })]);\n\n    var DefaultEvents = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events\n    });\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var prefix = constant('alloy-id-');\n    var idAttr = constant('data-alloy-id');\n\n    var prefix$1 = prefix();\n    var idAttr$1 = idAttr();\n    var write = function (label, elem) {\n      var id = generate$1(prefix$1 + label);\n      writeOnly(elem, id);\n      return id;\n    };\n    var writeOnly = function (elem, uid) {\n      Object.defineProperty(elem.dom, idAttr$1, {\n        value: uid,\n        writable: true\n      });\n    };\n    var read$1 = function (elem) {\n      var id = isElement(elem) ? elem.dom[idAttr$1] : null;\n      return Optional.from(id);\n    };\n    var generate$2 = function (prefix) {\n      return generate$1(prefix);\n    };\n\n    var make = identity;\n\n    var NoContextApi = function (getComp) {\n      var fail = function (event) {\n        return function () {\n          throw new Error('The component must be in a context to send: ' + event + (getComp ? '\\n' + element(getComp().element) + ' is not in context.' : ''));\n        };\n      };\n      return {\n        debugInfo: constant('fake'),\n        triggerEvent: fail('triggerEvent'),\n        triggerFocus: fail('triggerFocus'),\n        triggerEscape: fail('triggerEscape'),\n        build: fail('build'),\n        addToWorld: fail('addToWorld'),\n        removeFromWorld: fail('removeFromWorld'),\n        addToGui: fail('addToGui'),\n        removeFromGui: fail('removeFromGui'),\n        getByUid: fail('getByUid'),\n        getByDom: fail('getByDom'),\n        broadcast: fail('broadcast'),\n        broadcastOn: fail('broadcastOn'),\n        broadcastEvent: fail('broadcastEvent'),\n        isConnected: never\n      };\n    };\n    var singleton = NoContextApi();\n\n    var markAsBehaviourApi = function (f, apiName, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: apiName,\n          parameters: cleanParameters(parameters.slice(0, 1).concat(parameters.slice(3)))\n        };\n      };\n      return f;\n    };\n    var cleanParameters = function (parameters) {\n      return map(parameters, function (p) {\n        return endsWith(p, '/*') ? p.substring(0, p.length - '/*'.length) : p;\n      });\n    };\n    var markAsExtraApi = function (f, extraName) {\n      var delegate = f.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: extraName,\n          parameters: cleanParameters(parameters)\n        };\n      };\n      return f;\n    };\n    var markAsSketchApi = function (f, apiFunction) {\n      var delegate = apiFunction.toString();\n      var endIndex = delegate.indexOf(')') + 1;\n      var openBracketIndex = delegate.indexOf('(');\n      var parameters = delegate.substring(openBracketIndex + 1, endIndex - 1).split(/,\\s*/);\n      f.toFunctionAnnotation = function () {\n        return {\n          name: 'OVERRIDE',\n          parameters: cleanParameters(parameters.slice(1))\n        };\n      };\n      return f;\n    };\n\n    var premadeTag = generate$1('alloy-premade');\n    var premade = function (comp) {\n      return wrap$1(premadeTag, comp);\n    };\n    var getPremade = function (spec) {\n      return get$1(spec, premadeTag);\n    };\n    var makeApi = function (f) {\n      return markAsSketchApi(function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        return f.apply(void 0, __spreadArrays([\n          component.getApis(),\n          component\n        ], rest));\n      }, f);\n    };\n\n    var NoState = {\n      init: function () {\n        return nu$5({\n          readState: function () {\n            return 'No State required';\n          }\n        });\n      }\n    };\n    var nu$5 = function (spec) {\n      return spec;\n    };\n\n    var generateFrom = function (spec, all) {\n      var schema = map(all, function (a) {\n        return optionObjOf(a.name(), [\n          strict$1('config'),\n          defaulted$1('state', NoState)\n        ]);\n      });\n      var validated = asRaw('component.behaviours', objOf(schema), spec.behaviours).fold(function (errInfo) {\n        throw new Error(formatError(errInfo) + '\\nComplete spec:\\n' + JSON.stringify(spec, null, 2));\n      }, function (v) {\n        return v;\n      });\n      return {\n        list: all,\n        data: map$2(validated, function (optBlobThunk) {\n          var output = optBlobThunk.map(function (blob) {\n            return {\n              config: blob.config,\n              state: blob.state.init(blob.config)\n            };\n          });\n          return function () {\n            return output;\n          };\n        })\n      };\n    };\n    var getBehaviours = function (bData) {\n      return bData.list;\n    };\n    var getData = function (bData) {\n      return bData.data;\n    };\n\n    var byInnerKey = function (data, tuple) {\n      var r = {};\n      each$1(data, function (detail, key) {\n        each$1(detail, function (value, indexKey) {\n          var chain = get$1(r, indexKey).getOr([]);\n          r[indexKey] = chain.concat([tuple(key, value)]);\n        });\n      });\n      return r;\n    };\n\n    var nu$6 = function (s) {\n      return {\n        classes: s.classes !== undefined ? s.classes : [],\n        attributes: s.attributes !== undefined ? s.attributes : {},\n        styles: s.styles !== undefined ? s.styles : {}\n      };\n    };\n    var merge$1 = function (defnA, mod) {\n      return __assign(__assign({}, defnA), {\n        attributes: __assign(__assign({}, defnA.attributes), mod.attributes),\n        styles: __assign(__assign({}, defnA.styles), mod.styles),\n        classes: defnA.classes.concat(mod.classes)\n      });\n    };\n\n    var combine = function (info, baseMod, behaviours, base) {\n      var modsByBehaviour = __assign({}, baseMod);\n      each(behaviours, function (behaviour) {\n        modsByBehaviour[behaviour.name()] = behaviour.exhibit(info, base);\n      });\n      var byAspect = byInnerKey(modsByBehaviour, function (name, modification) {\n        return {\n          name: name,\n          modification: modification\n        };\n      });\n      var combineObjects = function (objects) {\n        return foldr(objects, function (b, a) {\n          return __assign(__assign({}, a.modification), b);\n        }, {});\n      };\n      var combinedClasses = foldr(byAspect.classes, function (b, a) {\n        return a.modification.concat(b);\n      }, []);\n      var combinedAttributes = combineObjects(byAspect.attributes);\n      var combinedStyles = combineObjects(byAspect.styles);\n      return nu$6({\n        classes: combinedClasses,\n        attributes: combinedAttributes,\n        styles: combinedStyles\n      });\n    };\n\n    var sortKeys = function (label, keyName, array, order) {\n      try {\n        var sorted = sort(array, function (a, b) {\n          var aKey = a[keyName];\n          var bKey = b[keyName];\n          var aIndex = order.indexOf(aKey);\n          var bIndex = order.indexOf(bKey);\n          if (aIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + aKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (bIndex === -1) {\n            throw new Error('The ordering for ' + label + ' does not have an entry for ' + bKey + '.\\nOrder specified: ' + JSON.stringify(order, null, 2));\n          }\n          if (aIndex < bIndex) {\n            return -1;\n          } else if (bIndex < aIndex) {\n            return 1;\n          } else {\n            return 0;\n          }\n        });\n        return Result.value(sorted);\n      } catch (err) {\n        return Result.error([err]);\n      }\n    };\n\n    var uncurried = function (handler, purpose) {\n      return {\n        handler: handler,\n        purpose: purpose\n      };\n    };\n    var curried = function (handler, purpose) {\n      return {\n        cHandler: handler,\n        purpose: purpose\n      };\n    };\n    var curryArgs = function (descHandler, extraArgs) {\n      return curried(curry.apply(undefined, [descHandler.handler].concat(extraArgs)), descHandler.purpose);\n    };\n    var getCurried = function (descHandler) {\n      return descHandler.cHandler;\n    };\n\n    var behaviourTuple = function (name, handler) {\n      return {\n        name: name,\n        handler: handler\n      };\n    };\n    var nameToHandlers = function (behaviours, info) {\n      var r = {};\n      each(behaviours, function (behaviour) {\n        r[behaviour.name()] = behaviour.handlers(info);\n      });\n      return r;\n    };\n    var groupByEvents = function (info, behaviours, base) {\n      var behaviourEvents = __assign(__assign({}, base), nameToHandlers(behaviours, info));\n      return byInnerKey(behaviourEvents, behaviourTuple);\n    };\n    var combine$1 = function (info, eventOrder, behaviours, base) {\n      var byEventName = groupByEvents(info, behaviours, base);\n      return combineGroups(byEventName, eventOrder);\n    };\n    var assemble = function (rawHandler) {\n      var handler = read(rawHandler);\n      return function (component, simulatedEvent) {\n        var rest = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n          rest[_i - 2] = arguments[_i];\n        }\n        var args = [\n          component,\n          simulatedEvent\n        ].concat(rest);\n        if (handler.abort.apply(undefined, args)) {\n          simulatedEvent.stop();\n        } else if (handler.can.apply(undefined, args)) {\n          handler.run.apply(undefined, args);\n        }\n      };\n    };\n    var missingOrderError = function (eventName, tuples) {\n      return Result.error(['The event (' + eventName + ') has more than one behaviour that listens to it.\\nWhen this occurs, you must ' + 'specify an event ordering for the behaviours in your spec (e.g. [ \"listing\", \"toggling\" ]).\\nThe behaviours that ' + 'can trigger it are: ' + JSON.stringify(map(tuples, function (c) {\n          return c.name;\n        }), null, 2)]);\n    };\n    var fuse$1 = function (tuples, eventOrder, eventName) {\n      var order = eventOrder[eventName];\n      if (!order) {\n        return missingOrderError(eventName, tuples);\n      } else {\n        return sortKeys('Event: ' + eventName, 'name', tuples, order).map(function (sortedTuples) {\n          var handlers = map(sortedTuples, function (tuple) {\n            return tuple.handler;\n          });\n          return fuse(handlers);\n        });\n      }\n    };\n    var combineGroups = function (byEventName, eventOrder) {\n      var r = mapToArray(byEventName, function (tuples, eventName) {\n        var combined = tuples.length === 1 ? Result.value(tuples[0].handler) : fuse$1(tuples, eventOrder, eventName);\n        return combined.map(function (handler) {\n          var assembled = assemble(handler);\n          var purpose = tuples.length > 1 ? filter(eventOrder[eventName], function (o) {\n            return exists(tuples, function (t) {\n              return t.name === o;\n            });\n          }).join(' > ') : tuples[0].name;\n          return wrap$1(eventName, uncurried(assembled, purpose));\n        });\n      });\n      return consolidate(r, {});\n    };\n\n    var baseBehaviour = 'alloy.base.behaviour';\n    var toInfo = function (spec) {\n      var _a;\n      return asRaw('custom.definition', objOf([\n        field('dom', 'dom', strict(), objOf([\n          strict$1('tag'),\n          defaulted$1('styles', {}),\n          defaulted$1('classes', []),\n          defaulted$1('attributes', {}),\n          option('value'),\n          option('innerHtml')\n        ])),\n        strict$1('components'),\n        strict$1('uid'),\n        defaulted$1('events', {}),\n        defaulted$1('apis', {}),\n        field('eventOrder', 'eventOrder', mergeWith((_a = {}, _a[execute()] = [\n          'disabling',\n          baseBehaviour,\n          'toggling',\n          'typeaheadevents'\n        ], _a[focus()] = [\n          baseBehaviour,\n          'focusing',\n          'keying'\n        ], _a[systemInit()] = [\n          baseBehaviour,\n          'disabling',\n          'toggling',\n          'representing'\n        ], _a[input()] = [\n          baseBehaviour,\n          'representing',\n          'streaming',\n          'invalidating'\n        ], _a[detachedFromDom()] = [\n          baseBehaviour,\n          'representing',\n          'item-events',\n          'tooltipping'\n        ], _a[mousedown()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[touchstart()] = [\n          'focusing',\n          baseBehaviour,\n          'item-type-events'\n        ], _a[mouseover()] = [\n          'item-type-events',\n          'tooltipping'\n        ], _a[receive()] = [\n          'receiving',\n          'reflecting',\n          'tooltipping'\n        ], _a)), anyValue$1()),\n        option('domModification')\n      ]), spec);\n    };\n    var toDefinition = function (detail) {\n      return __assign(__assign({}, detail.dom), {\n        uid: detail.uid,\n        domChildren: map(detail.components, function (comp) {\n          return comp.element;\n        })\n      });\n    };\n    var toModification = function (detail) {\n      return detail.domModification.fold(function () {\n        return nu$6({});\n      }, nu$6);\n    };\n    var toEvents = function (info) {\n      return info.events;\n    };\n\n    var read$2 = function (element, attr) {\n      var value = get$3(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read$2(element, attr);\n      var nu = old.concat([id]);\n      set$1(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read$2(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set$1(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$4 = function (element) {\n      return read$2(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$4(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n    var remove$5 = function (element, classes) {\n      each(classes, function (x) {\n        remove$4(element, x);\n      });\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported$1 = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getContentContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : SugarElement.fromDom(documentOrOwner(dos).dom.body);\n    };\n    var isInShadowRoot = function (e) {\n      return getShadowRoot(e).isSome();\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported$1() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n    var body = function () {\n      return getBody(SugarElement.fromDom(document));\n    };\n    var getBody = function (doc) {\n      var b = doc.dom.body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$2 = function (element, property, value) {\n      var dom = element.dom;\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var setOptions = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        v.fold(function () {\n          internalRemove(dom, k);\n        }, function (value) {\n          internalSet(dom, k, value);\n        });\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var isValidValue = function (tag, property, value) {\n      var element = SugarElement.fromTag(tag);\n      set$2(element, property, value);\n      var style = getRaw(element, property);\n      return style.isSome();\n    };\n    var remove$6 = function (element, property) {\n      var dom = element.dom;\n      internalRemove(dom, property);\n      if (getOpt(element, 'style').map(trim).is('')) {\n        remove$1(element, 'style');\n      }\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var get$6 = function (element) {\n      return element.dom.value;\n    };\n    var set$3 = function (element, value) {\n      if (value === undefined) {\n        throw new Error('Value.set was undefined');\n      }\n      element.dom.value = value;\n    };\n\n    var renderToDom = function (definition) {\n      var subject = SugarElement.fromTag(definition.tag);\n      setAll(subject, definition.attributes);\n      add$3(subject, definition.classes);\n      setAll$1(subject, definition.styles);\n      definition.innerHtml.each(function (html) {\n        return set(subject, html);\n      });\n      var children = definition.domChildren;\n      append$1(subject, children);\n      definition.value.each(function (value) {\n        set$3(subject, value);\n      });\n      if (!definition.uid) {\n        debugger;\n      }\n      writeOnly(subject, definition.uid);\n      return subject;\n    };\n\n    var getBehaviours$1 = function (spec) {\n      var behaviours = get$1(spec, 'behaviours').getOr({});\n      var keys$1 = filter(keys(behaviours), function (k) {\n        return behaviours[k] !== undefined;\n      });\n      return map(keys$1, function (k) {\n        return behaviours[k].me;\n      });\n    };\n    var generateFrom$1 = function (spec, all) {\n      return generateFrom(spec, all);\n    };\n    var generate$3 = function (spec) {\n      var all = getBehaviours$1(spec);\n      return generateFrom$1(spec, all);\n    };\n\n    var getDomDefinition = function (info, bList, bData) {\n      var definition = toDefinition(info);\n      var infoModification = toModification(info);\n      var baseModification = { 'alloy.base.modification': infoModification };\n      var modification = bList.length > 0 ? combine(bData, baseModification, bList, definition) : infoModification;\n      return merge$1(definition, modification);\n    };\n    var getEvents = function (info, bList, bData) {\n      var baseEvents = { 'alloy.base.behaviour': toEvents(info) };\n      return combine$1(bData, info.eventOrder, bList, baseEvents).getOrDie();\n    };\n    var build = function (spec) {\n      var getMe = function () {\n        return me;\n      };\n      var systemApi = Cell(singleton);\n      var info = getOrDie(toInfo(spec));\n      var bBlob = generate$3(spec);\n      var bList = getBehaviours(bBlob);\n      var bData = getData(bBlob);\n      var modDefinition = getDomDefinition(info, bList, bData);\n      var item = renderToDom(modDefinition);\n      var events = getEvents(info, bList, bData);\n      var subcomponents = Cell(info.components);\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(getMe));\n      };\n      var syncComponents = function () {\n        var children$1 = children(item);\n        var subs = bind(children$1, function (child) {\n          return systemApi.get().getByDom(child).fold(function () {\n            return [];\n          }, function (c) {\n            return [c];\n          });\n        });\n        subcomponents.set(subs);\n      };\n      var config = function (behaviour) {\n        var b = bData;\n        var f = isFunction(b[behaviour.name()]) ? b[behaviour.name()] : function () {\n          throw new Error('Could not find ' + behaviour.name() + ' in ' + JSON.stringify(spec, null, 2));\n        };\n        return f();\n      };\n      var hasConfigured = function (behaviour) {\n        return isFunction(bData[behaviour.name()]);\n      };\n      var getApis = function () {\n        return info.apis;\n      };\n      var readState = function (behaviourName) {\n        return bData[behaviourName]().map(function (b) {\n          return b.state.readState();\n        }).getOr('not enabled');\n      };\n      var me = {\n        getSystem: systemApi.get,\n        config: config,\n        hasConfigured: hasConfigured,\n        spec: spec,\n        readState: readState,\n        getApis: getApis,\n        connect: connect,\n        disconnect: disconnect,\n        element: item,\n        syncComponents: syncComponents,\n        components: subcomponents.get,\n        events: events\n      };\n      return me;\n    };\n\n    var buildSubcomponents = function (spec) {\n      var components = get$1(spec, 'components').getOr([]);\n      return map(components, build$1);\n    };\n    var buildFromSpec = function (userSpec) {\n      var _a = make(userSpec), specEvents = _a.events, spec = __rest(_a, ['events']);\n      var components = buildSubcomponents(spec);\n      var completeSpec = __assign(__assign({}, spec), {\n        events: __assign(__assign({}, DefaultEvents), specEvents),\n        components: components\n      });\n      return Result.value(build(completeSpec));\n    };\n    var text = function (textContent) {\n      var element = SugarElement.fromText(textContent);\n      return external({ element: element });\n    };\n    var external = function (spec) {\n      var extSpec = asRawOrDie('external.component', objOfOnly([\n        strict$1('element'),\n        option('uid')\n      ]), spec);\n      var systemApi = Cell(NoContextApi());\n      var connect = function (newApi) {\n        systemApi.set(newApi);\n      };\n      var disconnect = function () {\n        systemApi.set(NoContextApi(function () {\n          return me;\n        }));\n      };\n      extSpec.uid.each(function (uid) {\n        writeOnly(extSpec.element, uid);\n      });\n      var me = {\n        getSystem: systemApi.get,\n        config: Optional.none,\n        hasConfigured: never,\n        connect: connect,\n        disconnect: disconnect,\n        getApis: function () {\n          return {};\n        },\n        element: extSpec.element,\n        spec: spec,\n        readState: constant('No state'),\n        syncComponents: noop,\n        components: constant([]),\n        events: {}\n      };\n      return premade(me);\n    };\n    var uids = generate$2;\n    var build$1 = function (spec) {\n      return getPremade(spec).fold(function () {\n        var userSpecWithUid = spec.hasOwnProperty('uid') ? spec : __assign({ uid: uids('') }, spec);\n        return buildFromSpec(userSpecWithUid).getOrDie();\n      }, function (prebuilt) {\n        return prebuilt;\n      });\n    };\n    var premade$1 = premade;\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$7 = function (element) {\n      return api.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api.getOuter(element);\n    };\n    var setMax = function (element, value) {\n      var inclusions = [\n        'margin-top',\n        'border-top-width',\n        'padding-top',\n        'padding-bottom',\n        'border-bottom-width',\n        'margin-bottom'\n      ];\n      var absMax = api.max(element, value, inclusions);\n      set$2(element, 'max-height', absMax + 'px');\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var api$1 = Dimension('width', function (element) {\n      return element.dom.offsetWidth;\n    });\n    var set$4 = function (element, h) {\n      return api$1.set(element, h);\n    };\n    var get$8 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter$2 = function (element) {\n      return api$1.getOuter(element);\n    };\n    var setMax$1 = function (element, value) {\n      var inclusions = [\n        'margin-left',\n        'border-left-width',\n        'padding-left',\n        'padding-right',\n        'border-right-width',\n        'margin-right'\n      ];\n      var absMax = api$1.max(element, value, inclusions);\n      set$2(element, 'max-width', absMax + 'px');\n    };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: target,\n        x: x,\n        y: y,\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: raw\n      };\n    };\n    var fromRawEvent = function (rawEvent) {\n      var target = SugarElement.fromDom(getOriginalEventTarget(rawEvent).getOr(rawEvent.target));\n      var stop = function () {\n        return rawEvent.stopPropagation();\n      };\n      var prevent = function () {\n        return rawEvent.preventDefault();\n      };\n      var kill = compose(prevent, stop);\n      return mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (filter(rawEvent)) {\n          handler(fromRawEvent(rawEvent));\n        }\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom.addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$2 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var capture = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, true);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom.removeEventListener(event, handler, useCapture);\n    };\n\n    var get$9 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n\n    var get$a = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$9(SugarElement.fromDom(doc));\n      return get$a(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      var paths = walkUp(navigation, d);\n      return Optional.some(paths);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$1 = function (element) {\n      return owner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$3 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$9(doc);\n      var path = pathTo(element, Navigation);\n      return path.fold(curry(absolute, element), function (frames) {\n        var offset = viewport(element);\n        var r = foldr(frames, function (b, a) {\n          var loc = viewport(a);\n          return {\n            left: b.left + loc.left,\n            top: b.top + loc.top\n          };\n        }, {\n          left: 0,\n          top: 0\n        });\n        return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n      });\n    };\n\n    var pointed = function (point, width, height) {\n      return {\n        point: point,\n        width: width,\n        height: height\n      };\n    };\n    var rect = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      };\n    };\n    var bounds$1 = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var box = function (element) {\n      var xy = absolute(element);\n      var w = getOuter$2(element);\n      var h = getOuter$1(element);\n      return bounds$1(xy.left, xy.top, w, h);\n    };\n    var absolute$1 = function (element) {\n      var position = find$3(element);\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var win = function () {\n      return getBounds(window);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor$1 = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$1 = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, predicate, isRoot);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = SugarElement.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Optional.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope.dom);\n    };\n\n    var closest$2 = function (scope, predicate, isRoot) {\n      return closest$1(scope, predicate, isRoot).isSome();\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$3 = function (scope, selector, isRoot) {\n      var is$1 = function (element, selector) {\n        return is(element, selector);\n      };\n      return ClosestOrAncestor(is$1, ancestor$2, scope, selector, isRoot);\n    };\n\n    var find$4 = function (queryElem) {\n      var dependent = closest$1(queryElem, function (elem) {\n        if (!isElement(elem)) {\n          return false;\n        }\n        var id = get$3(elem, 'id');\n        return id !== undefined && id.indexOf('aria-owns') > -1;\n      });\n      return dependent.bind(function (dep) {\n        var id = get$3(dep, 'id');\n        var dos = getRootNode(dep);\n        return descendant$1(dos, '[aria-owns=\"' + id + '\"]');\n      });\n    };\n    var manager = function () {\n      var ariaId = generate$1('aria-owns');\n      var link = function (elem) {\n        set$1(elem, 'aria-owns', ariaId);\n      };\n      var unlink = function (elem) {\n        remove$1(elem, 'aria-owns');\n      };\n      return {\n        id: ariaId,\n        link: link,\n        unlink: unlink\n      };\n    };\n\n    var isAriaPartOf = function (component, queryElem) {\n      return find$4(queryElem).exists(function (owner) {\n        return isPartOf(component, owner);\n      });\n    };\n    var isPartOf = function (component, queryElem) {\n      return closest$2(queryElem, function (el) {\n        return eq$1(el, component.element);\n      }, never) || isAriaPartOf(component, queryElem);\n    };\n\n    var unknown$3 = 'unknown';\n    var EventConfiguration;\n    (function (EventConfiguration) {\n      EventConfiguration[EventConfiguration['STOP'] = 0] = 'STOP';\n      EventConfiguration[EventConfiguration['NORMAL'] = 1] = 'NORMAL';\n      EventConfiguration[EventConfiguration['LOGGING'] = 2] = 'LOGGING';\n    }(EventConfiguration || (EventConfiguration = {})));\n    var eventConfig = Cell({});\n    var makeEventLogger = function (eventName, initialTarget) {\n      var sequence = [];\n      var startTime = new Date().getTime();\n      return {\n        logEventCut: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'cut',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventStopped: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'stopped',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logNoParent: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'no-parent',\n            target: target,\n            purpose: purpose\n          });\n        },\n        logEventNoHandlers: function (_name, target) {\n          sequence.push({\n            outcome: 'no-handlers-left',\n            target: target\n          });\n        },\n        logEventResponse: function (_name, target, purpose) {\n          sequence.push({\n            outcome: 'response',\n            purpose: purpose,\n            target: target\n          });\n        },\n        write: function () {\n          var finishTime = new Date().getTime();\n          if (contains([\n              'mousemove',\n              'mouseover',\n              'mouseout',\n              systemInit()\n            ], eventName)) {\n            return;\n          }\n          console.log(eventName, {\n            event: eventName,\n            time: finishTime - startTime,\n            target: initialTarget.dom,\n            sequence: map(sequence, function (s) {\n              if (!contains([\n                  'cut',\n                  'stopped',\n                  'response'\n                ], s.outcome)) {\n                return s.outcome;\n              } else {\n                return '{' + s.purpose + '} ' + s.outcome + ' at (' + element(s.target) + ')';\n              }\n            })\n          });\n        }\n      };\n    };\n    var processEvent = function (eventName, initialTarget, f) {\n      var status = get$1(eventConfig.get(), eventName).orThunk(function () {\n        var patterns = keys(eventConfig.get());\n        return findMap(patterns, function (p) {\n          return eventName.indexOf(p) > -1 ? Optional.some(eventConfig.get()[p]) : Optional.none();\n        });\n      }).getOr(EventConfiguration.NORMAL);\n      switch (status) {\n      case EventConfiguration.NORMAL:\n        return f(noLogger());\n      case EventConfiguration.LOGGING: {\n          var logger = makeEventLogger(eventName, initialTarget);\n          var output = f(logger);\n          logger.write();\n          return output;\n        }\n      case EventConfiguration.STOP:\n        return true;\n      }\n    };\n    var path = [\n      'alloy/data/Fields',\n      'alloy/debugging/Debugging'\n    ];\n    var getTrace = function () {\n      var err = new Error();\n      if (err.stack !== undefined) {\n        var lines = err.stack.split('\\n');\n        return find(lines, function (line) {\n          return line.indexOf('alloy') > 0 && !exists(path, function (p) {\n            return line.indexOf(p) > -1;\n          });\n        }).getOr(unknown$3);\n      } else {\n        return unknown$3;\n      }\n    };\n    var ignoreEvent = {\n      logEventCut: noop,\n      logEventStopped: noop,\n      logNoParent: noop,\n      logEventNoHandlers: noop,\n      logEventResponse: noop,\n      write: noop\n    };\n    var monitorEvent = function (eventName, initialTarget, f) {\n      return processEvent(eventName, initialTarget, f);\n    };\n    var noLogger = constant(ignoreEvent);\n\n    var menuFields = constant([\n      strict$1('menu'),\n      strict$1('selectedMenu')\n    ]);\n    var itemFields = constant([\n      strict$1('item'),\n      strict$1('selectedItem')\n    ]);\n    var schema = constant(objOf(itemFields().concat(menuFields())));\n    var itemSchema = constant(objOf(itemFields()));\n\n    var _initSize = strictObjOf('initSize', [\n      strict$1('numColumns'),\n      strict$1('numRows')\n    ]);\n    var itemMarkers = function () {\n      return strictOf('markers', itemSchema());\n    };\n    var tieredMenuMarkers = function () {\n      return strictObjOf('markers', [strict$1('backgroundMenu')].concat(menuFields()).concat(itemFields()));\n    };\n    var markers = function (required) {\n      return strictObjOf('markers', map(required, strict$1));\n    };\n    var onPresenceHandler = function (label, fieldName, presence) {\n      var trace = getTrace();\n      return field(fieldName, fieldName, presence, valueOf(function (f) {\n        return Result.value(function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          return f.apply(undefined, args);\n        });\n      }));\n    };\n    var onHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, defaulted(noop));\n    };\n    var onKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, defaulted(Optional.none));\n    };\n    var onStrictHandler = function (fieldName) {\n      return onPresenceHandler('onHandler', fieldName, strict());\n    };\n    var onStrictKeyboardHandler = function (fieldName) {\n      return onPresenceHandler('onKeyboardHandler', fieldName, strict());\n    };\n    var output = function (name, value) {\n      return state$1(name, constant(value));\n    };\n    var snapshot = function (name) {\n      return state$1(name, identity);\n    };\n    var initSize = constant(_initSize);\n\n    var nu$7 = function (x, y, bubble, direction, boundsRestriction, label) {\n      return {\n        x: x,\n        y: y,\n        bubble: bubble,\n        direction: direction,\n        boundsRestriction: boundsRestriction,\n        label: label\n      };\n    };\n\n    var adt$2 = Adt.generate([\n      { southeast: [] },\n      { southwest: [] },\n      { northeast: [] },\n      { northwest: [] },\n      { south: [] },\n      { north: [] },\n      { east: [] },\n      { west: [] }\n    ]);\n    var cata = function (subject, southeast, southwest, northeast, northwest, south, north, east, west) {\n      return subject.fold(southeast, southwest, northeast, northwest, south, north, east, west);\n    };\n    var cataVertical = function (subject, south, middle, north) {\n      return subject.fold(south, south, north, north, south, north, middle, middle);\n    };\n    var cataHorizontal = function (subject, east, middle, west) {\n      return subject.fold(east, west, east, west, middle, middle, east, west);\n    };\n    var southeast = adt$2.southeast;\n    var southwest = adt$2.southwest;\n    var northeast = adt$2.northeast;\n    var northwest = adt$2.northwest;\n    var south = adt$2.south;\n    var north = adt$2.north;\n    var east = adt$2.east;\n    var west = adt$2.west;\n\n    var getRestriction = function (anchor, restriction) {\n      switch (restriction) {\n      case 1:\n        return anchor.x;\n      case 0:\n        return anchor.x + anchor.width;\n      case 2:\n        return anchor.y;\n      case 3:\n        return anchor.y + anchor.height;\n      }\n    };\n    var boundsRestriction = function (anchor, restrictions) {\n      return mapToObject([\n        'left',\n        'right',\n        'top',\n        'bottom'\n      ], function (dir) {\n        return get$1(restrictions, dir).map(function (restriction) {\n          return getRestriction(anchor, restriction);\n        });\n      });\n    };\n    var adjustBounds = function (bounds, boundsRestrictions, bubbleOffsets) {\n      var applyRestriction = function (dir, current) {\n        var bubbleOffset = dir === 'top' || dir === 'bottom' ? bubbleOffsets.top : bubbleOffsets.left;\n        return get$1(boundsRestrictions, dir).bind(identity).bind(function (restriction) {\n          if (dir === 'left' || dir === 'top') {\n            return restriction >= current ? Optional.some(restriction) : Optional.none();\n          } else {\n            return restriction <= current ? Optional.some(restriction) : Optional.none();\n          }\n        }).map(function (restriction) {\n          return restriction + bubbleOffset;\n        }).getOr(current);\n      };\n      var adjustedLeft = applyRestriction('left', bounds.x);\n      var adjustedTop = applyRestriction('top', bounds.y);\n      var adjustedRight = applyRestriction('right', bounds.right);\n      var adjustedBottom = applyRestriction('bottom', bounds.bottom);\n      return bounds$1(adjustedLeft, adjustedTop, adjustedRight - adjustedLeft, adjustedBottom - adjustedTop);\n    };\n\n    var eastX = function (anchor) {\n      return anchor.x;\n    };\n    var middleX = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var westX = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY = function (anchor, element) {\n      return anchor.y - element.height;\n    };\n    var southY = function (anchor) {\n      return anchor.y + anchor.height;\n    };\n    var centreY = function (anchor, element) {\n      return anchor.y + anchor.height / 2 - element.height / 2;\n    };\n    var eastEdgeX = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westEdgeX = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var southeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), southY(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 3\n      }), 'layout-se');\n    };\n    var southwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), southY(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 3\n      }), 'layout-sw');\n    };\n    var northeast$1 = function (anchor, element, bubbles) {\n      return nu$7(eastX(anchor), northY(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 2\n      }), 'layout-ne');\n    };\n    var northwest$1 = function (anchor, element, bubbles) {\n      return nu$7(westX(anchor, element), northY(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 2\n      }), 'layout-nw');\n    };\n    var north$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), northY(anchor, element), bubbles.north(), north(), boundsRestriction(anchor, { bottom: 2 }), 'layout-n');\n    };\n    var south$1 = function (anchor, element, bubbles) {\n      return nu$7(middleX(anchor, element), southY(anchor), bubbles.south(), south(), boundsRestriction(anchor, { top: 3 }), 'layout-s');\n    };\n    var east$1 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX(anchor), centreY(anchor, element), bubbles.east(), east(), boundsRestriction(anchor, { left: 0 }), 'layout-e');\n    };\n    var west$1 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX(anchor, element), centreY(anchor, element), bubbles.west(), west(), boundsRestriction(anchor, { right: 1 }), 'layout-w');\n    };\n    var all$2 = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var allRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1,\n        east$1,\n        west$1\n      ];\n    };\n    var aboveOrBelow = function () {\n      return [\n        northeast$1,\n        northwest$1,\n        southeast$1,\n        southwest$1,\n        north$1,\n        south$1\n      ];\n    };\n    var aboveOrBelowRtl = function () {\n      return [\n        northwest$1,\n        northeast$1,\n        southwest$1,\n        southeast$1,\n        north$1,\n        south$1\n      ];\n    };\n    var belowOrAbove = function () {\n      return [\n        southeast$1,\n        southwest$1,\n        northeast$1,\n        northwest$1,\n        south$1,\n        north$1\n      ];\n    };\n    var belowOrAboveRtl = function () {\n      return [\n        southwest$1,\n        southeast$1,\n        northwest$1,\n        northeast$1,\n        south$1,\n        north$1\n      ];\n    };\n\n    var chooseChannels = function (channels, message) {\n      return message.universal ? channels : filter(channels, function (ch) {\n        return contains(message.channels, ch);\n      });\n    };\n    var events$1 = function (receiveConfig) {\n      return derive([run(receive(), function (component, message) {\n          var channelMap = receiveConfig.channels;\n          var channels = keys(channelMap);\n          var receivingData = message;\n          var targetChannels = chooseChannels(channels, receivingData);\n          each(targetChannels, function (ch) {\n            var channelInfo = channelMap[ch];\n            var channelSchema = channelInfo.schema;\n            var data = asRawOrDie('channel[' + ch + '] data\\nReceiver: ' + element(component.element), channelSchema, receivingData.data);\n            channelInfo.onReceive(component, data);\n          });\n        })]);\n    };\n\n    var ActiveReceiving = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$1\n    });\n\n    var ReceivingSchema = [strictOf('channels', setOf$1(Result.value, objOfOnly([\n        onStrictHandler('onReceive'),\n        defaulted$1('schema', anyValue$1())\n      ])))];\n\n    var executeEvent = function (bConfig, bState, executor) {\n      return runOnExecute(function (component) {\n        executor(component, bConfig, bState);\n      });\n    };\n    var loadEvent = function (bConfig, bState, f) {\n      return runOnInit(function (component, _simulatedEvent) {\n        f(component, bConfig, bState);\n      });\n    };\n    var create = function (schema, name, active, apis, extra, state) {\n      var configSchema = objOfOnly(schema);\n      var schemaSchema = optionObjOf(name, [optionObjOfOnly('config', schema)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var createModes = function (modes, name, active, apis, extra, state) {\n      var configSchema = modes;\n      var schemaSchema = optionObjOf(name, [optionOf('config', modes)]);\n      return doCreate(configSchema, schemaSchema, name, active, apis, extra, state);\n    };\n    var wrapApi = function (bName, apiFunction, apiName) {\n      var f = function (component) {\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          rest[_i - 1] = arguments[_i];\n        }\n        var args = [component].concat(rest);\n        return component.config({ name: constant(bName) }).fold(function () {\n          throw new Error('We could not find any behaviour configuration for: ' + bName + '. Using API: ' + apiName);\n        }, function (info) {\n          var rest = Array.prototype.slice.call(args, 1);\n          return apiFunction.apply(undefined, [\n            component,\n            info.config,\n            info.state\n          ].concat(rest));\n        });\n      };\n      return markAsBehaviourApi(f, apiName, apiFunction);\n    };\n    var revokeBehaviour = function (name) {\n      return {\n        key: name,\n        value: undefined\n      };\n    };\n    var doCreate = function (configSchema, schemaSchema, name, active, apis, extra, state) {\n      var getConfig = function (info) {\n        return hasNonNullableKey(info, name) ? info[name]() : Optional.none();\n      };\n      var wrappedApis = map$2(apis, function (apiF, apiName) {\n        return wrapApi(name, apiF, apiName);\n      });\n      var wrappedExtra = map$2(extra, function (extraF, extraName) {\n        return markAsExtraApi(extraF, extraName);\n      });\n      var me = __assign(__assign(__assign({}, wrappedExtra), wrappedApis), {\n        revoke: curry(revokeBehaviour, name),\n        config: function (spec) {\n          var prepared = asRawOrDie(name + '-config', configSchema, spec);\n          return {\n            key: name,\n            value: {\n              config: prepared,\n              me: me,\n              configAsRaw: cached(function () {\n                return asRawOrDie(name + '-config', configSchema, spec);\n              }),\n              initialConfig: spec,\n              state: state\n            }\n          };\n        },\n        schema: function () {\n          return schemaSchema;\n        },\n        exhibit: function (info, base) {\n          return getConfig(info).bind(function (behaviourInfo) {\n            return get$1(active, 'exhibit').map(function (exhibitor) {\n              return exhibitor(base, behaviourInfo.config, behaviourInfo.state);\n            });\n          }).getOr(nu$6({}));\n        },\n        name: function () {\n          return name;\n        },\n        handlers: function (info) {\n          return getConfig(info).map(function (behaviourInfo) {\n            var getEvents = get$1(active, 'events').getOr(function () {\n              return {};\n            });\n            return getEvents(behaviourInfo.config, behaviourInfo.state);\n          }).getOr({});\n        }\n      });\n      return me;\n    };\n\n    var derive$1 = function (capabilities) {\n      return wrapAll$1(capabilities);\n    };\n    var simpleSchema = objOfOnly([\n      strict$1('fields'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var create$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, simpleSchema, data);\n      return create(value.fields, value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var modeSchema = objOfOnly([\n      strict$1('branchKey'),\n      strict$1('branches'),\n      strict$1('name'),\n      defaulted$1('active', {}),\n      defaulted$1('apis', {}),\n      defaulted$1('state', NoState),\n      defaulted$1('extra', {})\n    ]);\n    var createModes$1 = function (data) {\n      var value = asRawOrDie('Creating behaviour: ' + data.name, modeSchema, data);\n      return createModes(choose$1(value.branchKey, value.branches), value.name, value.active, value.apis, value.extra, value.state);\n    };\n    var revoke = constant(undefined);\n\n    var Receiving = create$1({\n      fields: ReceivingSchema,\n      name: 'receiving',\n      active: ActiveReceiving\n    });\n\n    var exhibit = function (base, posConfig) {\n      return nu$6({\n        classes: [],\n        styles: posConfig.useFixed() ? {} : { position: 'relative' }\n      });\n    };\n\n    var ActivePosition = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit\n    });\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus$1 = function (element) {\n      return element.dom.focus();\n    };\n    var blur = function (element) {\n      return element.dom.blur();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var preserve = function (f, container) {\n      var dos = getRootNode(container);\n      var refocus = active(dos).bind(function (focused) {\n        var hasFocus = function (elem) {\n          return eq$1(focused, elem);\n        };\n        return hasFocus(container) ? Optional.some(container) : descendant(container, hasFocus);\n      });\n      var result = f(container);\n      refocus.each(function (oldFocus) {\n        active(dos).filter(function (newFocus) {\n          return eq$1(newFocus, oldFocus);\n        }).fold(function () {\n          focus$1(oldFocus);\n        }, noop);\n      });\n      return result;\n    };\n\n    var NuPositionCss = function (position, left, top, right, bottom) {\n      return {\n        position: position,\n        left: left,\n        top: top,\n        right: right,\n        bottom: bottom\n      };\n    };\n    var applyPositionCss = function (element, position) {\n      var addPx = function (num) {\n        return num + 'px';\n      };\n      setOptions(element, {\n        position: Optional.some(position.position),\n        left: position.left.map(addPx),\n        top: position.top.map(addPx),\n        right: position.right.map(addPx),\n        bottom: position.bottom.map(addPx)\n      });\n    };\n\n    var adt$3 = Adt.generate([\n      { none: [] },\n      {\n        relative: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y',\n          'width',\n          'height'\n        ]\n      }\n    ]);\n    var positionWithDirection = function (posName, decision, x, y, width, height) {\n      var decisionX = decision.x - x;\n      var decisionY = decision.y - y;\n      var decisionWidth = decision.width;\n      var decisionHeight = decision.height;\n      var decisionRight = width - (decisionX + decisionWidth);\n      var decisionBottom = height - (decisionY + decisionHeight);\n      var left = Optional.some(decisionX);\n      var top = Optional.some(decisionY);\n      var right = Optional.some(decisionRight);\n      var bottom = Optional.some(decisionBottom);\n      var none = Optional.none();\n      return cata(decision.direction, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, none, none, right, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, left, none, none, bottom);\n      }, function () {\n        return NuPositionCss(posName, left, top, none, none);\n      }, function () {\n        return NuPositionCss(posName, none, top, right, none);\n      });\n    };\n    var reposition = function (origin, decision) {\n      return origin.fold(function () {\n        return NuPositionCss('absolute', Optional.some(decision.x), Optional.some(decision.y), Optional.none(), Optional.none());\n      }, function (x, y, width, height) {\n        return positionWithDirection('absolute', decision, x, y, width, height);\n      }, function (x, y, width, height) {\n        return positionWithDirection('fixed', decision, x, y, width, height);\n      });\n    };\n    var toBox = function (origin, element) {\n      var rel = curry(find$3, element);\n      var position = origin.fold(rel, rel, function () {\n        var scroll = get$9();\n        return find$3(element).translate(-scroll.left, -scroll.top);\n      });\n      var width = getOuter$2(element);\n      var height = getOuter$1(element);\n      return bounds$1(position.left, position.top, width, height);\n    };\n    var viewport$1 = function (origin, getBounds) {\n      return getBounds.fold(function () {\n        return origin.fold(win, win, bounds$1);\n      }, function (b) {\n        return origin.fold(b, b, function () {\n          var bounds = b();\n          var pos = translate(origin, bounds.x, bounds.y);\n          return bounds$1(pos.left, pos.top, bounds.width, bounds.height);\n        });\n      });\n    };\n    var translate = function (origin, x, y) {\n      var pos = SugarPosition(x, y);\n      var removeScroll = function () {\n        var outerScroll = get$9();\n        return pos.translate(-outerScroll.left, -outerScroll.top);\n      };\n      return origin.fold(constant(pos), constant(pos), removeScroll);\n    };\n    var cata$1 = function (subject, onNone, onRelative, onFixed) {\n      return subject.fold(onNone, onRelative, onFixed);\n    };\n    var none$1 = adt$3.none;\n    var relative = adt$3.relative;\n    var fixed = adt$3.fixed;\n\n    var anchor = function (anchorBox, origin) {\n      return {\n        anchorBox: anchorBox,\n        origin: origin\n      };\n    };\n    var box$1 = function (anchorBox, origin) {\n      return anchor(anchorBox, origin);\n    };\n\n    var cycleBy = function (value, delta, min, max) {\n      var r = value + delta;\n      if (r > max) {\n        return min;\n      } else if (r < min) {\n        return max;\n      } else {\n        return r;\n      }\n    };\n    var clamp = function (value, min, max) {\n      return Math.min(Math.max(value, min), max);\n    };\n\n    var adt$4 = Adt.generate([\n      { fit: ['reposition'] },\n      {\n        nofit: [\n          'reposition',\n          'deltaW',\n          'deltaH'\n        ]\n      }\n    ]);\n    var calcReposition = function (newX, newY, width, height, bounds) {\n      var boundsX = bounds.x;\n      var boundsY = bounds.y;\n      var boundsWidth = bounds.width;\n      var boundsHeight = bounds.height;\n      var xInBounds = newX >= boundsX;\n      var yInBounds = newY >= boundsY;\n      var originInBounds = xInBounds && yInBounds;\n      var xFit = newX + width <= boundsX + boundsWidth;\n      var yFit = newY + height <= boundsY + boundsHeight;\n      var sizeInBounds = xFit && yFit;\n      var deltaW = Math.abs(Math.min(width, xInBounds ? boundsX + boundsWidth - newX : boundsX - (newX + width)));\n      var deltaH = Math.abs(Math.min(height, yInBounds ? boundsY + boundsHeight - newY : boundsY - (newY + height)));\n      var maxX = Math.max(bounds.x, bounds.right - width);\n      var maxY = Math.max(bounds.y, bounds.bottom - height);\n      var limitX = clamp(newX, bounds.x, maxX);\n      var limitY = clamp(newY, bounds.y, maxY);\n      return {\n        originInBounds: originInBounds,\n        sizeInBounds: sizeInBounds,\n        limitX: limitX,\n        limitY: limitY,\n        deltaW: deltaW,\n        deltaH: deltaH\n      };\n    };\n    var attempt = function (candidate, width, height, bounds) {\n      var candidateX = candidate.x;\n      var candidateY = candidate.y;\n      var bubbleOffsets = candidate.bubble.offset;\n      var bubbleLeft = bubbleOffsets.left;\n      var bubbleTop = bubbleOffsets.top;\n      var adjustedBounds = adjustBounds(bounds, candidate.boundsRestriction, bubbleOffsets);\n      var boundsY = adjustedBounds.y;\n      var boundsBottom = adjustedBounds.bottom;\n      var boundsX = adjustedBounds.x;\n      var boundsRight = adjustedBounds.right;\n      var newX = candidateX + bubbleLeft;\n      var newY = candidateY + bubbleTop;\n      var _a = calcReposition(newX, newY, width, height, adjustedBounds), originInBounds = _a.originInBounds, sizeInBounds = _a.sizeInBounds, limitX = _a.limitX, limitY = _a.limitY, deltaW = _a.deltaW, deltaH = _a.deltaH;\n      var upAvailable = constant(limitY + deltaH - boundsY);\n      var downAvailable = constant(boundsBottom - limitY);\n      var maxHeight = cataVertical(candidate.direction, downAvailable, downAvailable, upAvailable);\n      var westAvailable = constant(limitX + deltaW - boundsX);\n      var eastAvailable = constant(boundsRight - limitX);\n      var maxWidth = cataHorizontal(candidate.direction, eastAvailable, eastAvailable, westAvailable);\n      var reposition = {\n        x: limitX,\n        y: limitY,\n        width: deltaW,\n        height: deltaH,\n        maxHeight: maxHeight,\n        maxWidth: maxWidth,\n        direction: candidate.direction,\n        classes: {\n          on: candidate.bubble.classesOn,\n          off: candidate.bubble.classesOff\n        },\n        label: candidate.label,\n        candidateYforTest: newY\n      };\n      return originInBounds && sizeInBounds ? adt$4.fit(reposition) : adt$4.nofit(reposition, deltaW, deltaH);\n    };\n    var attempts = function (candidates, anchorBox, elementBox, bubbles, bounds) {\n      var panelWidth = elementBox.width;\n      var panelHeight = elementBox.height;\n      var attemptBestFit = function (layout, reposition, deltaW, deltaH) {\n        var next = layout(anchorBox, elementBox, bubbles);\n        var attemptLayout = attempt(next, panelWidth, panelHeight, bounds);\n        return attemptLayout.fold(adt$4.fit, function (newReposition, newDeltaW, newDeltaH) {\n          var improved = newDeltaH > deltaH || newDeltaW > deltaW;\n          return improved ? adt$4.nofit(newReposition, newDeltaW, newDeltaH) : adt$4.nofit(reposition, deltaW, deltaH);\n        });\n      };\n      var abc = foldl(candidates, function (b, a) {\n        var bestNext = curry(attemptBestFit, a);\n        return b.fold(adt$4.fit, bestNext);\n      }, adt$4.nofit({\n        x: anchorBox.x,\n        y: anchorBox.y,\n        width: elementBox.width,\n        height: elementBox.height,\n        maxHeight: elementBox.height,\n        maxWidth: elementBox.width,\n        direction: southeast(),\n        classes: {\n          on: [],\n          off: []\n        },\n        label: 'none',\n        candidateYforTest: anchorBox.y\n      }, -1, -1));\n      return abc.fold(identity, identity);\n    };\n\n    var elementSize = function (p) {\n      return {\n        width: getOuter$2(p),\n        height: getOuter$1(p)\n      };\n    };\n    var layout = function (anchorBox, element, bubbles, options) {\n      remove$6(element, 'max-height');\n      remove$6(element, 'max-width');\n      var elementBox = elementSize(element);\n      return attempts(options.preference, anchorBox, elementBox, bubbles, options.bounds);\n    };\n    var setClasses = function (element, decision) {\n      var classInfo = decision.classes;\n      remove$5(element, classInfo.off);\n      add$3(element, classInfo.on);\n    };\n    var setHeight = function (element, decision, options) {\n      var maxHeightFunction = options.maxHeightFunction;\n      maxHeightFunction(element, decision.maxHeight);\n    };\n    var setWidth = function (element, decision, options) {\n      var maxWidthFunction = options.maxWidthFunction;\n      maxWidthFunction(element, decision.maxWidth);\n    };\n    var position = function (element, decision, options) {\n      applyPositionCss(element, reposition(options.origin, decision));\n    };\n\n    var setMaxHeight = function (element, maxHeight) {\n      setMax(element, Math.floor(maxHeight));\n    };\n    var anchored = constant(function (element, available) {\n      setMaxHeight(element, available);\n      setAll$1(element, {\n        'overflow-x': 'hidden',\n        'overflow-y': 'auto'\n      });\n    });\n    var expandable = constant(function (element, available) {\n      setMaxHeight(element, available);\n    });\n\n    var defaultOr = function (options, key, dephault) {\n      return options[key] === undefined ? dephault : options[key];\n    };\n    var simple = function (anchor, element, bubble, layouts, getBounds, overrideOptions) {\n      var maxHeightFunction = defaultOr(overrideOptions, 'maxHeightFunction', anchored());\n      var maxWidthFunction = defaultOr(overrideOptions, 'maxWidthFunction', noop);\n      var anchorBox = anchor.anchorBox;\n      var origin = anchor.origin;\n      var options = {\n        bounds: viewport$1(origin, getBounds),\n        origin: origin,\n        preference: layouts,\n        maxHeightFunction: maxHeightFunction,\n        maxWidthFunction: maxWidthFunction\n      };\n      go(anchorBox, element, bubble, options);\n    };\n    var go = function (anchorBox, element, bubble, options) {\n      var decision = layout(anchorBox, element, bubble, options);\n      position(element, decision, options);\n      setClasses(element, decision);\n      setHeight(element, decision, options);\n      setWidth(element, decision, options);\n    };\n\n    var allAlignments = [\n      'valignCentre',\n      'alignLeft',\n      'alignRight',\n      'alignCentre',\n      'top',\n      'bottom',\n      'left',\n      'right'\n    ];\n    var nu$8 = function (width, yoffset, classes) {\n      var getClasses = function (prop) {\n        return get$1(classes, prop).getOr([]);\n      };\n      var make = function (xDelta, yDelta, alignmentsOn) {\n        var alignmentsOff = difference(allAlignments, alignmentsOn);\n        return {\n          offset: SugarPosition(xDelta, yDelta),\n          classesOn: bind(alignmentsOn, getClasses),\n          classesOff: bind(alignmentsOff, getClasses)\n        };\n      };\n      return {\n        southeast: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        southwest: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        south: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        northeast: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        northwest: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        north: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        east: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        },\n        west: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerNorthwest: function () {\n          return make(-width, yoffset, [\n            'top',\n            'alignRight'\n          ]);\n        },\n        innerNortheast: function () {\n          return make(width, yoffset, [\n            'top',\n            'alignLeft'\n          ]);\n        },\n        innerNorth: function () {\n          return make(-width / 2, yoffset, [\n            'top',\n            'alignCentre'\n          ]);\n        },\n        innerSouthwest: function () {\n          return make(-width, -yoffset, [\n            'bottom',\n            'alignRight'\n          ]);\n        },\n        innerSoutheast: function () {\n          return make(width, -yoffset, [\n            'bottom',\n            'alignLeft'\n          ]);\n        },\n        innerSouth: function () {\n          return make(-width / 2, -yoffset, [\n            'bottom',\n            'alignCentre'\n          ]);\n        },\n        innerWest: function () {\n          return make(width, -yoffset / 2, [\n            'valignCentre',\n            'right'\n          ]);\n        },\n        innerEast: function () {\n          return make(-width, -yoffset / 2, [\n            'valignCentre',\n            'left'\n          ]);\n        }\n      };\n    };\n    var fallback = function () {\n      return nu$8(0, 0, {});\n    };\n\n    var nu$9 = function (x) {\n      return x;\n    };\n\n    var onDirection = function (isLtr, isRtl) {\n      return function (element) {\n        return getDirection(element) === 'rtl' ? isRtl : isLtr;\n      };\n    };\n    var getDirection = function (element) {\n      return get$5(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var AttributeValue;\n    (function (AttributeValue) {\n      AttributeValue['TopToBottom'] = 'toptobottom';\n      AttributeValue['BottomToTop'] = 'bottomtotop';\n    }(AttributeValue || (AttributeValue = {})));\n    var Attribute = 'data-alloy-vertical-dir';\n    var isBottomToTopDir = function (el) {\n      return closest$2(el, function (current) {\n        return isElement(current) && get$3(current, 'data-alloy-vertical-dir') === AttributeValue.BottomToTop;\n      });\n    };\n\n    var schema$1 = function () {\n      return optionObjOf('layouts', [\n        strict$1('onLtr'),\n        strict$1('onRtl'),\n        option('onBottomLtr'),\n        option('onBottomRtl')\n      ]);\n    };\n    var get$b = function (elem, info, defaultLtr, defaultRtl, defaultBottomLtr, defaultBottomRtl, dirElement) {\n      var isBottomToTop = dirElement.map(isBottomToTopDir).getOr(false);\n      var customLtr = info.layouts.map(function (ls) {\n        return ls.onLtr(elem);\n      });\n      var customRtl = info.layouts.map(function (ls) {\n        return ls.onRtl(elem);\n      });\n      var ltr = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomLtr.map(function (f) {\n          return f(elem);\n        });\n      }).or(customLtr).getOr(defaultBottomLtr) : customLtr.getOr(defaultLtr);\n      var rtl = isBottomToTop ? info.layouts.bind(function (ls) {\n        return ls.onBottomRtl.map(function (f) {\n          return f(elem);\n        });\n      }).or(customRtl).getOr(defaultBottomRtl) : customRtl.getOr(defaultRtl);\n      var f = onDirection(ltr, rtl);\n      return f(elem);\n    };\n\n    var placement = function (component, anchorInfo, origin) {\n      var hotspot = anchorInfo.hotspot;\n      var anchorBox = toBox(origin, hotspot.element);\n      var layouts = get$b(component.element, anchorInfo, belowOrAbove(), belowOrAboveRtl(), aboveOrBelow(), aboveOrBelowRtl(), Optional.some(anchorInfo.hotspot.element));\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble.getOr(fallback()),\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var HotspotAnchor = [\n      strict$1('hotspot'),\n      option('bubble'),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement)\n    ];\n\n    var placement$1 = function (component, anchorInfo, origin) {\n      var pos = translate(origin, anchorInfo.x, anchorInfo.y);\n      var anchorBox = bounds$1(pos.left, pos.top, anchorInfo.width, anchorInfo.height);\n      var layouts = get$b(component.element, anchorInfo, all$2(), allRtl(), all$2(), allRtl(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: anchorInfo.bubble,\n        overrides: anchorInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var MakeshiftAnchor = [\n      strict$1('x'),\n      strict$1('y'),\n      defaulted$1('height', 0),\n      defaulted$1('width', 0),\n      defaulted$1('bubble', fallback()),\n      defaulted$1('overrides', {}),\n      schema$1(),\n      output('placement', placement$1)\n    ];\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n\n    var create$2 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$2 };\n\n    var adt$5 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$2 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$5.before;\n    var on = adt$5.on;\n    var after$1 = adt$5.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$1,\n      cata: cata$2,\n      getStart: getStart\n    };\n\n    var adt$6 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$6.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$6.domRange;\n    var relative$1 = adt$6.relative;\n    var exact = adt$6.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative$1,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom);\n      }, function (e, o) {\n        rng.setStart(e.dom, o);\n      }, function (e) {\n        rng.setStartAfter(e.dom);\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom);\n      }, function (e, o) {\n        rng.setEnd(e.dom, o);\n      }, function (e) {\n        rng.setEndAfter(e.dom);\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Optional.some(rect).map(toRect) : Optional.none();\n    };\n\n    var adt$7 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(SugarElement.fromDom(range.startContainer), range.startOffset, SugarElement.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Optional.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Optional.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Optional.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$7.rtl(SugarElement.fromDom(rev.endContainer), rev.endOffset, SugarElement.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$7.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$7.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom, soffset);\n          rng.setEnd(finish.dom, foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom, foffset);\n          rng.setEnd(start.dom, soffset);\n          return rng;\n        }\n      });\n    };\n    var ltr = adt$7.ltr;\n    var rtl = adt$7.rtl;\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api$2 = NodeValue(isText, 'text');\n    var get$c = function (element) {\n      return api$2.get(element);\n    };\n    var getOption = function (element) {\n      return api$2.getOption(element);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(nbsp) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Optional.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Optional.none();\n      };\n      return descend(scope);\n    };\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom.createRange();\n      rng.setStart(start.dom, soffset);\n      rng.setEnd(finish.dom, foffset);\n      return rng;\n    };\n    var after$2 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq$1(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var getNativeSelection = function (win) {\n      return Optional.from(win.getSelection());\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Optional.some(SimRange.create(SugarElement.fromDom(firstRng.startContainer), firstRng.startOffset, SugarElement.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      if (selection.anchorNode === null || selection.focusNode === null) {\n        return readRange(selection);\n      } else {\n        var anchor = SugarElement.fromDom(selection.anchorNode);\n        var focus_1 = SugarElement.fromDom(selection.focusNode);\n        return after$2(anchor, selection.anchorOffset, focus_1, selection.focusOffset) ? Optional.some(SimRange.create(anchor, selection.anchorOffset, focus_1, selection.focusOffset)) : readRange(selection);\n      }\n    };\n    var getExact = function (win) {\n      return getNativeSelection(win).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n\n    var point = function (element, offset) {\n      return {\n        element: element,\n        offset: offset\n      };\n    };\n    var descendOnce = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0) {\n        return point(element, offset);\n      } else if (offset < children$1.length) {\n        return point(children$1[offset], 0);\n      } else {\n        var last = children$1[children$1.length - 1];\n        var len = isText(last) ? get$c(last).length : children(last).length;\n        return point(last, len);\n      }\n    };\n\n    var adt$8 = Adt.generate([\n      { screen: ['point'] },\n      {\n        absolute: [\n          'point',\n          'scrollLeft',\n          'scrollTop'\n        ]\n      }\n    ]);\n    var toFixed = function (pos) {\n      return pos.fold(identity, function (point, scrollLeft, scrollTop) {\n        return point.translate(-scrollLeft, -scrollTop);\n      });\n    };\n    var toAbsolute = function (pos) {\n      return pos.fold(identity, identity);\n    };\n    var sum = function (points) {\n      return foldl(points, function (b, a) {\n        return b.translate(a.left, a.top);\n      }, SugarPosition(0, 0));\n    };\n    var sumAsFixed = function (positions) {\n      var points = map(positions, toFixed);\n      return sum(points);\n    };\n    var sumAsAbsolute = function (positions) {\n      var points = map(positions, toAbsolute);\n      return sum(points);\n    };\n    var screen = adt$8.screen;\n    var absolute$2 = adt$8.absolute;\n\n    var getOffset = function (component, origin, anchorInfo) {\n      var win = defaultView(anchorInfo.root).dom;\n      var hasSameOwner = function (frame) {\n        var frameOwner = owner(frame);\n        var compOwner = owner(component.element);\n        return eq$1(frameOwner, compOwner);\n      };\n      return Optional.from(win.frameElement).map(SugarElement.fromDom).filter(hasSameOwner).map(absolute);\n    };\n    var getRootPoint = function (component, origin, anchorInfo) {\n      var doc = owner(component.element);\n      var outerScroll = get$9(doc);\n      var offset = getOffset(component, origin, anchorInfo).getOr(outerScroll);\n      return absolute$2(offset, outerScroll.left, outerScroll.top);\n    };\n\n    var capRect = function (left, top, width, height) {\n      var newLeft = left, newTop = top, newWidth = width, newHeight = height;\n      if (left < 0) {\n        newLeft = 0;\n        newWidth = width + left;\n      }\n      if (top < 0) {\n        newTop = 0;\n        newHeight = height + top;\n      }\n      var point = screen(SugarPosition(newLeft, newTop));\n      return Optional.some(pointed(point, newWidth, newHeight));\n    };\n    var calcNewAnchor = function (optBox, rootPoint, anchorInfo, origin, elem) {\n      return optBox.map(function (box) {\n        var points = [\n          rootPoint,\n          box.point\n        ];\n        var topLeft = cata$1(origin, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsAbsolute(points);\n        }, function () {\n          return sumAsFixed(points);\n        });\n        var anchorBox = rect(topLeft.left, topLeft.top, box.width, box.height);\n        var layoutsLtr = anchorInfo.showAbove ? aboveOrBelow() : belowOrAbove();\n        var layoutsRtl = anchorInfo.showAbove ? aboveOrBelowRtl() : belowOrAboveRtl();\n        var layouts = get$b(elem, anchorInfo, layoutsLtr, layoutsRtl, layoutsLtr, layoutsRtl, Optional.none());\n        return nu$9({\n          anchorBox: anchorBox,\n          bubble: anchorInfo.bubble.getOr(fallback()),\n          overrides: anchorInfo.overrides,\n          layouts: layouts,\n          placer: Optional.none()\n        });\n      });\n    };\n\n    var descendOnce$1 = function (element, offset) {\n      return isText(element) ? point(element, offset) : descendOnce(element, offset);\n    };\n    var getAnchorSelection = function (win, anchorInfo) {\n      var getSelection = anchorInfo.getSelection.getOrThunk(function () {\n        return function () {\n          return getExact(win);\n        };\n      });\n      return getSelection().map(function (sel) {\n        var modStart = descendOnce$1(sel.start, sel.soffset);\n        var modFinish = descendOnce$1(sel.finish, sel.foffset);\n        return SimSelection.range(modStart.element, modStart.offset, modFinish.element, modFinish.offset);\n      });\n    };\n    var placement$2 = function (component, anchorInfo, origin) {\n      var win = defaultView(anchorInfo.root).dom;\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      var selectionBox = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        var optRect = getFirstRect$1(win, SimSelection.exactFromRange(sel)).orThunk(function () {\n          var x = SugarElement.fromText(zeroWidth);\n          before(sel.start, x);\n          return getFirstRect$1(win, SimSelection.exact(x, 0, x, 1)).map(function (rect) {\n            remove(x);\n            return rect;\n          });\n        });\n        return optRect.bind(function (rawRect) {\n          return capRect(rawRect.left, rawRect.top, rawRect.width, rawRect.height);\n        });\n      });\n      var targetElement = getAnchorSelection(win, anchorInfo).bind(function (sel) {\n        return isElement(sel.start) ? Optional.some(sel.start) : parentNode(sel.start);\n      });\n      var elem = targetElement.getOr(component.element);\n      return calcNewAnchor(selectionBox, rootPoint, anchorInfo, origin, elem);\n    };\n    var SelectionAnchor = [\n      option('getSelection'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$2)\n    ];\n\n    var placement$3 = function (component, anchorInfo, origin) {\n      var rootPoint = getRootPoint(component, origin, anchorInfo);\n      return anchorInfo.node.bind(function (target) {\n        var rect = target.dom.getBoundingClientRect();\n        var nodeBox = capRect(rect.left, rect.top, rect.width, rect.height);\n        var elem = anchorInfo.node.getOr(component.element);\n        return calcNewAnchor(nodeBox, rootPoint, anchorInfo, origin, elem);\n      });\n    };\n    var NodeAnchor = [\n      strict$1('node'),\n      strict$1('root'),\n      option('bubble'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      defaulted$1('showAbove', false),\n      output('placement', placement$3)\n    ];\n\n    var eastX$1 = function (anchor) {\n      return anchor.x + anchor.width;\n    };\n    var westX$1 = function (anchor, element) {\n      return anchor.x - element.width;\n    };\n    var northY$1 = function (anchor, element) {\n      return anchor.y - element.height + anchor.height;\n    };\n    var southY$1 = function (anchor) {\n      return anchor.y;\n    };\n    var southeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), southY$1(anchor), bubbles.southeast(), southeast(), boundsRestriction(anchor, {\n        left: 0,\n        top: 2\n      }), 'link-layout-se');\n    };\n    var southwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), southY$1(anchor), bubbles.southwest(), southwest(), boundsRestriction(anchor, {\n        right: 1,\n        top: 2\n      }), 'link-layout-sw');\n    };\n    var northeast$2 = function (anchor, element, bubbles) {\n      return nu$7(eastX$1(anchor), northY$1(anchor, element), bubbles.northeast(), northeast(), boundsRestriction(anchor, {\n        left: 0,\n        bottom: 3\n      }), 'link-layout-ne');\n    };\n    var northwest$2 = function (anchor, element, bubbles) {\n      return nu$7(westX$1(anchor, element), northY$1(anchor, element), bubbles.northwest(), northwest(), boundsRestriction(anchor, {\n        right: 1,\n        bottom: 3\n      }), 'link-layout-nw');\n    };\n    var all$3 = function () {\n      return [\n        southeast$2,\n        southwest$2,\n        northeast$2,\n        northwest$2\n      ];\n    };\n    var allRtl$1 = function () {\n      return [\n        southwest$2,\n        southeast$2,\n        northwest$2,\n        northeast$2\n      ];\n    };\n\n    var placement$4 = function (component, submenuInfo, origin) {\n      var anchorBox = toBox(origin, submenuInfo.item.element);\n      var layouts = get$b(component.element, submenuInfo, all$3(), allRtl$1(), all$3(), allRtl$1(), Optional.none());\n      return Optional.some(nu$9({\n        anchorBox: anchorBox,\n        bubble: fallback(),\n        overrides: submenuInfo.overrides,\n        layouts: layouts,\n        placer: Optional.none()\n      }));\n    };\n    var SubmenuAnchor = [\n      strict$1('item'),\n      schema$1(),\n      defaulted$1('overrides', {}),\n      output('placement', placement$4)\n    ];\n\n    var AnchorSchema = choose$1('anchor', {\n      selection: SelectionAnchor,\n      node: NodeAnchor,\n      hotspot: HotspotAnchor,\n      submenu: SubmenuAnchor,\n      makeshift: MakeshiftAnchor\n    });\n\n    var getFixedOrigin = function () {\n      var html = document.documentElement;\n      return fixed(0, 0, html.clientWidth, html.clientHeight);\n    };\n    var getRelativeOrigin = function (component) {\n      var position = absolute(component.element);\n      var bounds = component.element.dom.getBoundingClientRect();\n      return relative(position.left, position.top, bounds.width, bounds.height);\n    };\n    var place = function (component, origin, anchoring, getBounds, placee) {\n      var anchor = box$1(anchoring.anchorBox, origin);\n      simple(anchor, placee.element, anchoring.bubble, anchoring.layouts, getBounds, anchoring.overrides);\n    };\n    var position$1 = function (component, posConfig, posState, anchor, placee) {\n      positionWithin(component, posConfig, posState, anchor, placee, Optional.none());\n    };\n    var positionWithin = function (component, posConfig, posState, anchor, placee, boxElement) {\n      var boundsBox = boxElement.map(box);\n      return positionWithinBounds(component, posConfig, posState, anchor, placee, boundsBox);\n    };\n    var positionWithinBounds = function (component, posConfig, posState, anchor, placee, bounds) {\n      var anchorage = asRawOrDie('positioning anchor.info', AnchorSchema, anchor);\n      preserve(function () {\n        set$2(placee.element, 'position', 'fixed');\n        var oldVisibility = getRaw(placee.element, 'visibility');\n        set$2(placee.element, 'visibility', 'hidden');\n        var origin = posConfig.useFixed() ? getFixedOrigin() : getRelativeOrigin(component);\n        var placer = anchorage.placement;\n        var getBounds = bounds.map(constant).or(posConfig.getBounds);\n        placer(component, anchorage, origin).each(function (anchoring) {\n          var doPlace = anchoring.placer.getOr(place);\n          doPlace(component, origin, anchoring, getBounds, placee);\n        });\n        oldVisibility.fold(function () {\n          remove$6(placee.element, 'visibility');\n        }, function (vis) {\n          set$2(placee.element, 'visibility', vis);\n        });\n        if (getRaw(placee.element, 'left').isNone() && getRaw(placee.element, 'top').isNone() && getRaw(placee.element, 'right').isNone() && getRaw(placee.element, 'bottom').isNone() && getRaw(placee.element, 'position').is('fixed')) {\n          remove$6(placee.element, 'position');\n        }\n      }, placee.element);\n    };\n    var getMode = function (component, pConfig, _pState) {\n      return pConfig.useFixed() ? 'fixed' : 'absolute';\n    };\n\n    var PositionApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        position: position$1,\n        positionWithin: positionWithin,\n        positionWithinBounds: positionWithinBounds,\n        getMode: getMode\n    });\n\n    var PositionSchema = [\n      defaulted$1('useFixed', never),\n      option('getBounds')\n    ];\n\n    var Positioning = create$1({\n      fields: PositionSchema,\n      name: 'positioning',\n      active: ActivePosition,\n      apis: PositionApis\n    });\n\n    var fireDetaching = function (component) {\n      emit(component, detachedFromDom());\n      var children = component.components();\n      each(children, fireDetaching);\n    };\n    var fireAttaching = function (component) {\n      var children = component.components();\n      each(children, fireAttaching);\n      emit(component, attachedToDom());\n    };\n    var attach = function (parent, child) {\n      append(parent.element, child.element);\n    };\n    var detachChildren = function (component) {\n      each(component.components(), function (childComp) {\n        return remove(childComp.element);\n      });\n      empty(component.element);\n      component.syncComponents();\n    };\n    var replaceChildren = function (component, newChildren) {\n      var subs = component.components();\n      detachChildren(component);\n      var deleted = difference(subs, newChildren);\n      each(deleted, function (comp) {\n        fireDetaching(comp);\n        component.getSystem().removeFromWorld(comp);\n      });\n      each(newChildren, function (childComp) {\n        if (!childComp.getSystem().isConnected()) {\n          component.getSystem().addToWorld(childComp);\n          attach(component, childComp);\n          if (inBody(component.element)) {\n            fireAttaching(childComp);\n          }\n        } else {\n          attach(component, childComp);\n        }\n        component.syncComponents();\n      });\n    };\n\n    var attach$1 = function (parent, child) {\n      attachWith(parent, child, append);\n    };\n    var attachWith = function (parent, child, insertion) {\n      parent.getSystem().addToWorld(child);\n      insertion(parent.element, child.element);\n      if (inBody(parent.element)) {\n        fireAttaching(child);\n      }\n      parent.syncComponents();\n    };\n    var doDetach = function (component) {\n      fireDetaching(component);\n      remove(component.element);\n      component.getSystem().removeFromWorld(component);\n    };\n    var detach = function (component) {\n      var parent$1 = parent(component.element).bind(function (p) {\n        return component.getSystem().getByDom(p).toOptional();\n      });\n      doDetach(component);\n      parent$1.each(function (p) {\n        p.syncComponents();\n      });\n    };\n    var detachChildren$1 = function (component) {\n      var subs = component.components();\n      each(subs, doDetach);\n      empty(component.element);\n      component.syncComponents();\n    };\n    var attachSystem = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, append);\n    };\n    var attachSystemAfter = function (element, guiSystem) {\n      attachSystemWith(element, guiSystem, after);\n    };\n    var attachSystemWith = function (element, guiSystem, inserter) {\n      inserter(element, guiSystem.element);\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireAttaching);\n      });\n    };\n    var detachSystem = function (guiSystem) {\n      var children$1 = children(guiSystem.element);\n      each(children$1, function (child) {\n        guiSystem.getByDom(child).each(fireDetaching);\n      });\n      remove(guiSystem.element);\n    };\n\n    var rebuild = function (sandbox, sConfig, sState, data) {\n      sState.get().each(function (_data) {\n        detachChildren$1(sandbox);\n      });\n      var point = sConfig.getAttachPoint(sandbox);\n      attach$1(point, sandbox);\n      var built = sandbox.getSystem().build(data);\n      attach$1(sandbox, built);\n      sState.set(built);\n      return built;\n    };\n    var open = function (sandbox, sConfig, sState, data) {\n      var newState = rebuild(sandbox, sConfig, sState, data);\n      sConfig.onOpen(sandbox, newState);\n      return newState;\n    };\n    var setContent = function (sandbox, sConfig, sState, data) {\n      return sState.get().map(function () {\n        return rebuild(sandbox, sConfig, sState, data);\n      });\n    };\n    var openWhileCloaked = function (sandbox, sConfig, sState, data, transaction) {\n      cloak(sandbox, sConfig);\n      open(sandbox, sConfig, sState, data);\n      transaction();\n      decloak(sandbox, sConfig);\n    };\n    var close = function (sandbox, sConfig, sState) {\n      sState.get().each(function (data) {\n        detachChildren$1(sandbox);\n        detach(sandbox);\n        sConfig.onClose(sandbox, data);\n        sState.clear();\n      });\n    };\n    var isOpen = function (_sandbox, _sConfig, sState) {\n      return sState.isOpen();\n    };\n    var isPartOf$1 = function (sandbox, sConfig, sState, queryElem) {\n      return isOpen(sandbox, sConfig, sState) && sState.get().exists(function (data) {\n        return sConfig.isPartOf(sandbox, data, queryElem);\n      });\n    };\n    var getState = function (_sandbox, _sConfig, sState) {\n      return sState.get();\n    };\n    var store = function (sandbox, cssKey, attr, newValue) {\n      getRaw(sandbox.element, cssKey).fold(function () {\n        remove$1(sandbox.element, attr);\n      }, function (v) {\n        set$1(sandbox.element, attr, v);\n      });\n      set$2(sandbox.element, cssKey, newValue);\n    };\n    var restore = function (sandbox, cssKey, attr) {\n      getOpt(sandbox.element, attr).fold(function () {\n        return remove$6(sandbox.element, cssKey);\n      }, function (oldValue) {\n        return set$2(sandbox.element, cssKey, oldValue);\n      });\n    };\n    var cloak = function (sandbox, sConfig, _sState) {\n      var sink = sConfig.getAttachPoint(sandbox);\n      set$2(sandbox.element, 'position', Positioning.getMode(sink));\n      store(sandbox, 'visibility', sConfig.cloakVisibilityAttr, 'hidden');\n    };\n    var hasPosition = function (element) {\n      return exists([\n        'top',\n        'left',\n        'right',\n        'bottom'\n      ], function (pos) {\n        return getRaw(element, pos).isSome();\n      });\n    };\n    var decloak = function (sandbox, sConfig, _sState) {\n      if (!hasPosition(sandbox.element)) {\n        remove$6(sandbox.element, 'position');\n      }\n      restore(sandbox, 'visibility', sConfig.cloakVisibilityAttr);\n    };\n\n    var SandboxApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        cloak: cloak,\n        decloak: decloak,\n        open: open,\n        openWhileCloaked: openWhileCloaked,\n        close: close,\n        isOpen: isOpen,\n        isPartOf: isPartOf$1,\n        getState: getState,\n        setContent: setContent\n    });\n\n    var events$2 = function (sandboxConfig, sandboxState) {\n      return derive([run(sandboxClose(), function (sandbox, _simulatedEvent) {\n          close(sandbox, sandboxConfig, sandboxState);\n        })]);\n    };\n\n    var ActiveSandbox = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$2\n    });\n\n    var SandboxSchema = [\n      onHandler('onOpen'),\n      onHandler('onClose'),\n      strict$1('isPartOf'),\n      strict$1('getAttachPoint'),\n      defaulted$1('cloakVisibilityAttr', 'data-precloak-visibility')\n    ];\n\n    var init = function () {\n      var contents = Cell(Optional.none());\n      var readState = constant('not-implemented');\n      var isOpen = function () {\n        return contents.get().isSome();\n      };\n      var set = function (comp) {\n        contents.set(Optional.some(comp));\n      };\n      var get = function () {\n        return contents.get();\n      };\n      var clear = function () {\n        contents.set(Optional.none());\n      };\n      return nu$5({\n        readState: readState,\n        isOpen: isOpen,\n        clear: clear,\n        set: set,\n        get: get\n      });\n    };\n\n    var SandboxState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init\n    });\n\n    var Sandboxing = create$1({\n      fields: SandboxSchema,\n      name: 'sandboxing',\n      active: ActiveSandbox,\n      apis: SandboxApis,\n      state: SandboxState\n    });\n\n    var dismissPopups = constant('dismiss.popups');\n    var repositionPopups = constant('reposition.popups');\n    var mouseReleased = constant('mouse.released');\n\n    var schema$2 = objOfOnly([\n      defaulted$1('isExtraPart', never),\n      optionObjOf('fireEventInstead', [defaulted$1('event', dismissRequested())])\n    ]);\n    var receivingChannel = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Dismissal', schema$2, rawSpec);\n      return _a = {}, _a[dismissPopups()] = {\n        schema: objOfOnly([strict$1('target')]),\n        onReceive: function (sandbox, data) {\n          if (Sandboxing.isOpen(sandbox)) {\n            var isPart = Sandboxing.isPartOf(sandbox, data.target) || detail.isExtraPart(sandbox, data.target);\n            if (!isPart) {\n              detail.fireEventInstead.fold(function () {\n                return Sandboxing.close(sandbox);\n              }, function (fe) {\n                return emit(sandbox, fe.event);\n              });\n            }\n          }\n        }\n      }, _a;\n    };\n\n    var schema$3 = objOfOnly([\n      optionObjOf('fireEventInstead', [defaulted$1('event', repositionRequested())]),\n      strictFunction('doReposition')\n    ]);\n    var receivingChannel$1 = function (rawSpec) {\n      var _a;\n      var detail = asRawOrDie('Reposition', schema$3, rawSpec);\n      return _a = {}, _a[repositionPopups()] = {\n        onReceive: function (sandbox) {\n          if (Sandboxing.isOpen(sandbox)) {\n            detail.fireEventInstead.fold(function () {\n              return detail.doReposition(sandbox);\n            }, function (fe) {\n              return emit(sandbox, fe.event);\n            });\n          }\n        }\n      }, _a;\n    };\n\n    var onLoad = function (component, repConfig, repState) {\n      repConfig.store.manager.onLoad(component, repConfig, repState);\n    };\n    var onUnload = function (component, repConfig, repState) {\n      repConfig.store.manager.onUnload(component, repConfig, repState);\n    };\n    var setValue = function (component, repConfig, repState, data) {\n      repConfig.store.manager.setValue(component, repConfig, repState, data);\n    };\n    var getValue = function (component, repConfig, repState) {\n      return repConfig.store.manager.getValue(component, repConfig, repState);\n    };\n    var getState$1 = function (component, repConfig, repState) {\n      return repState;\n    };\n\n    var RepresentApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad,\n        onUnload: onUnload,\n        setValue: setValue,\n        getValue: getValue,\n        getState: getState$1\n    });\n\n    var events$3 = function (repConfig, repState) {\n      var es = repConfig.resetOnDom ? [\n        runOnAttached(function (comp, _se) {\n          onLoad(comp, repConfig, repState);\n        }),\n        runOnDetached(function (comp, _se) {\n          onUnload(comp, repConfig, repState);\n        })\n      ] : [loadEvent(repConfig, repState, onLoad)];\n      return derive(es);\n    };\n\n    var ActiveRepresenting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$3\n    });\n\n    var memory = function () {\n      var data = Cell(null);\n      var readState = function () {\n        return {\n          mode: 'memory',\n          value: data.get()\n        };\n      };\n      var isNotSet = function () {\n        return data.get() === null;\n      };\n      var clear = function () {\n        data.set(null);\n      };\n      return nu$5({\n        set: data.set,\n        get: data.get,\n        isNotSet: isNotSet,\n        clear: clear,\n        readState: readState\n      });\n    };\n    var manual = function () {\n      var readState = function () {\n      };\n      return nu$5({ readState: readState });\n    };\n    var dataset = function () {\n      var dataByValue = Cell({});\n      var dataByText = Cell({});\n      var readState = function () {\n        return {\n          mode: 'dataset',\n          dataByValue: dataByValue.get(),\n          dataByText: dataByText.get()\n        };\n      };\n      var clear = function () {\n        dataByValue.set({});\n        dataByText.set({});\n      };\n      var lookup = function (itemString) {\n        return get$1(dataByValue.get(), itemString).orThunk(function () {\n          return get$1(dataByText.get(), itemString);\n        });\n      };\n      var update = function (items) {\n        var currentDataByValue = dataByValue.get();\n        var currentDataByText = dataByText.get();\n        var newDataByValue = {};\n        var newDataByText = {};\n        each(items, function (item) {\n          newDataByValue[item.value] = item;\n          get$1(item, 'meta').each(function (meta) {\n            get$1(meta, 'text').each(function (text) {\n              newDataByText[text] = item;\n            });\n          });\n        });\n        dataByValue.set(__assign(__assign({}, currentDataByValue), newDataByValue));\n        dataByText.set(__assign(__assign({}, currentDataByText), newDataByText));\n      };\n      return nu$5({\n        readState: readState,\n        lookup: lookup,\n        update: update,\n        clear: clear\n      });\n    };\n    var init$1 = function (spec) {\n      return spec.store.manager.state(spec);\n    };\n\n    var RepresentState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        memory: memory,\n        dataset: dataset,\n        manual: manual,\n        init: init$1\n    });\n\n    var setValue$1 = function (component, repConfig, repState, data) {\n      var store = repConfig.store;\n      repState.update([data]);\n      store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      var key = store.getDataKey(component);\n      return repState.lookup(key).fold(function () {\n        return store.getFallbackEntry(key);\n      }, function (data) {\n        return data;\n      });\n    };\n    var onLoad$1 = function (component, repConfig, repState) {\n      var store = repConfig.store;\n      store.initialValue.each(function (data) {\n        setValue$1(component, repConfig, repState, data);\n      });\n    };\n    var onUnload$1 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var DatasetStore = [\n      option('initialValue'),\n      strict$1('getFallbackEntry'),\n      strict$1('getDataKey'),\n      strict$1('setValue'),\n      output('manager', {\n        setValue: setValue$1,\n        getValue: getValue$1,\n        onLoad: onLoad$1,\n        onUnload: onUnload$1,\n        state: dataset\n      })\n    ];\n\n    var getValue$2 = function (component, repConfig, _repState) {\n      return repConfig.store.getValue(component);\n    };\n    var setValue$2 = function (component, repConfig, _repState, data) {\n      repConfig.store.setValue(component, data);\n      repConfig.onSetValue(component, data);\n    };\n    var onLoad$2 = function (component, repConfig, _repState) {\n      repConfig.store.initialValue.each(function (data) {\n        repConfig.store.setValue(component, data);\n      });\n    };\n    var ManualStore = [\n      strict$1('getValue'),\n      defaulted$1('setValue', noop),\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$2,\n        getValue: getValue$2,\n        onLoad: onLoad$2,\n        onUnload: noop,\n        state: NoState.init\n      })\n    ];\n\n    var setValue$3 = function (component, repConfig, repState, data) {\n      repState.set(data);\n      repConfig.onSetValue(component, data);\n    };\n    var getValue$3 = function (component, repConfig, repState) {\n      return repState.get();\n    };\n    var onLoad$3 = function (component, repConfig, repState) {\n      repConfig.store.initialValue.each(function (initVal) {\n        if (repState.isNotSet()) {\n          repState.set(initVal);\n        }\n      });\n    };\n    var onUnload$2 = function (component, repConfig, repState) {\n      repState.clear();\n    };\n    var MemoryStore = [\n      option('initialValue'),\n      output('manager', {\n        setValue: setValue$3,\n        getValue: getValue$3,\n        onLoad: onLoad$3,\n        onUnload: onUnload$2,\n        state: memory\n      })\n    ];\n\n    var RepresentSchema = [\n      defaultedOf('store', { mode: 'memory' }, choose$1('mode', {\n        memory: MemoryStore,\n        manual: ManualStore,\n        dataset: DatasetStore\n      })),\n      onHandler('onSetValue'),\n      defaulted$1('resetOnDom', false)\n    ];\n\n    var Representing = create$1({\n      fields: RepresentSchema,\n      name: 'representing',\n      active: ActiveRepresenting,\n      apis: RepresentApis,\n      extra: {\n        setValueFrom: function (component, source) {\n          var value = Representing.getValue(source);\n          Representing.setValue(component, value);\n        }\n      },\n      state: RepresentState\n    });\n\n    var field$1 = function (name, forbidden) {\n      return defaultedObjOf(name, {}, map(forbidden, function (f) {\n        return forbid(f.name(), 'Cannot configure ' + f.name() + ' for ' + name);\n      }).concat([state$1('dump', identity)]));\n    };\n    var get$d = function (data) {\n      return data.dump;\n    };\n    var augment = function (data, original) {\n      return __assign(__assign({}, data.dump), derive$1(original));\n    };\n    var SketchBehaviours = {\n      field: field$1,\n      augment: augment,\n      get: get$d\n    };\n\n    var _placeholder = 'placeholder';\n    var adt$9 = Adt.generate([\n      {\n        single: [\n          'required',\n          'valueThunk'\n        ]\n      },\n      {\n        multiple: [\n          'required',\n          'valueThunks'\n        ]\n      }\n    ]);\n    var isSubstituted = function (spec) {\n      return has(spec, 'uiType');\n    };\n    var subPlaceholder = function (owner, detail, compSpec, placeholders) {\n      if (owner.exists(function (o) {\n          return o !== compSpec.owner;\n        })) {\n        return adt$9.single(true, constant(compSpec));\n      }\n      return get$1(placeholders, compSpec.name).fold(function () {\n        throw new Error('Unknown placeholder component: ' + compSpec.name + '\\nKnown: [' + keys(placeholders) + ']\\nNamespace: ' + owner.getOr('none') + '\\nSpec: ' + JSON.stringify(compSpec, null, 2));\n      }, function (newSpec) {\n        return newSpec.replace();\n      });\n    };\n    var scan = function (owner, detail, compSpec, placeholders) {\n      if (isSubstituted(compSpec) && compSpec.uiType === _placeholder) {\n        return subPlaceholder(owner, detail, compSpec, placeholders);\n      } else {\n        return adt$9.single(false, constant(compSpec));\n      }\n    };\n    var substitute = function (owner, detail, compSpec, placeholders) {\n      var base = scan(owner, detail, compSpec, placeholders);\n      return base.fold(function (req, valueThunk) {\n        var value = isSubstituted(compSpec) ? valueThunk(detail, compSpec.config, compSpec.validated) : valueThunk(detail);\n        var childSpecs = get$1(value, 'components').getOr([]);\n        var substituted = bind(childSpecs, function (c) {\n          return substitute(owner, detail, c, placeholders);\n        });\n        return [__assign(__assign({}, value), { components: substituted })];\n      }, function (req, valuesThunk) {\n        if (isSubstituted(compSpec)) {\n          var values = valuesThunk(detail, compSpec.config, compSpec.validated);\n          var preprocessor = compSpec.validated.preprocess.getOr(identity);\n          return preprocessor(values);\n        } else {\n          return valuesThunk(detail);\n        }\n      });\n    };\n    var substituteAll = function (owner, detail, components, placeholders) {\n      return bind(components, function (c) {\n        return substitute(owner, detail, c, placeholders);\n      });\n    };\n    var oneReplace = function (label, replacements) {\n      var called = false;\n      var used = function () {\n        return called;\n      };\n      var replace = function () {\n        if (called) {\n          throw new Error('Trying to use the same placeholder more than once: ' + label);\n        }\n        called = true;\n        return replacements;\n      };\n      var required = function () {\n        return replacements.fold(function (req, _) {\n          return req;\n        }, function (req, _) {\n          return req;\n        });\n      };\n      return {\n        name: constant(label),\n        required: required,\n        used: used,\n        replace: replace\n      };\n    };\n    var substitutePlaces = function (owner, detail, components, placeholders) {\n      var ps = map$2(placeholders, function (ph, name) {\n        return oneReplace(name, ph);\n      });\n      var outcome = substituteAll(owner, detail, components, ps);\n      each$1(ps, function (p) {\n        if (p.used() === false && p.required()) {\n          throw new Error('Placeholder: ' + p.name() + ' was not found in components list\\nNamespace: ' + owner.getOr('none') + '\\nComponents: ' + JSON.stringify(detail.components, null, 2));\n        }\n      });\n      return outcome;\n    };\n    var single = adt$9.single;\n    var multiple = adt$9.multiple;\n    var placeholder = constant(_placeholder);\n\n    var adt$a = Adt.generate([\n      { required: ['data'] },\n      { external: ['data'] },\n      { optional: ['data'] },\n      { group: ['data'] }\n    ]);\n    var fFactory = defaulted$1('factory', { sketch: identity });\n    var fSchema = defaulted$1('schema', []);\n    var fName = strict$1('name');\n    var fPname = field('pname', 'pname', defaultedThunk(function (typeSpec) {\n      return '<alloy.' + generate$1(typeSpec.name) + '>';\n    }), anyValue$1());\n    var fGroupSchema = state$1('schema', function () {\n      return [option('preprocess')];\n    });\n    var fDefaults = defaulted$1('defaults', constant({}));\n    var fOverrides = defaulted$1('overrides', constant({}));\n    var requiredSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var externalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fDefaults,\n      fOverrides\n    ]);\n    var optionalSpec = objOf([\n      fFactory,\n      fSchema,\n      fName,\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var groupSpec = objOf([\n      fFactory,\n      fGroupSchema,\n      fName,\n      strict$1('unit'),\n      fPname,\n      fDefaults,\n      fOverrides\n    ]);\n    var asNamedPart = function (part) {\n      return part.fold(Optional.some, Optional.none, Optional.some, Optional.some);\n    };\n    var name$1 = function (part) {\n      var get = function (data) {\n        return data.name;\n      };\n      return part.fold(get, get, get, get);\n    };\n    var asCommon = function (part) {\n      return part.fold(identity, identity, identity, identity);\n    };\n    var convert = function (adtConstructor, partSchema) {\n      return function (spec) {\n        var data = asRawOrDie('Converting part type', partSchema, spec);\n        return adtConstructor(data);\n      };\n    };\n    var required = convert(adt$a.required, requiredSpec);\n    var external$1 = convert(adt$a.external, externalSpec);\n    var optional = convert(adt$a.optional, optionalSpec);\n    var group = convert(adt$a.group, groupSpec);\n    var original = constant('entirety');\n\n    var PartType = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        required: required,\n        external: external$1,\n        optional: optional,\n        group: group,\n        asNamedPart: asNamedPart,\n        name: name$1,\n        asCommon: asCommon,\n        original: original\n    });\n\n    var combine$2 = function (detail, data, partSpec, partValidated) {\n      return deepMerge(data.defaults(detail, partSpec, partValidated), partSpec, { uid: detail.partUids[data.name] }, data.overrides(detail, partSpec, partValidated));\n    };\n    var subs = function (owner, detail, parts) {\n      var internals = {};\n      var externals = {};\n      each(parts, function (part) {\n        part.fold(function (data) {\n          internals[data.pname] = single(true, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          var partSpec = detail.parts[data.name];\n          externals[data.name] = constant(data.factory.sketch(combine$2(detail, data, partSpec[original()]), partSpec));\n        }, function (data) {\n          internals[data.pname] = single(false, function (detail, partSpec, partValidated) {\n            return data.factory.sketch(combine$2(detail, data, partSpec, partValidated));\n          });\n        }, function (data) {\n          internals[data.pname] = multiple(true, function (detail, _partSpec, _partValidated) {\n            var units = detail[data.name];\n            return map(units, function (u) {\n              return data.factory.sketch(deepMerge(data.defaults(detail, u, _partValidated), u, data.overrides(detail, u)));\n            });\n          });\n        });\n      });\n      return {\n        internals: constant(internals),\n        externals: constant(externals)\n      };\n    };\n\n    var generate$4 = function (owner, parts) {\n      var r = {};\n      each(parts, function (part) {\n        asNamedPart(part).each(function (np) {\n          var g = doGenerateOne(owner, np.pname);\n          r[np.name] = function (config) {\n            var validated = asRawOrDie('Part: ' + np.name + ' in ' + owner, objOf(np.schema), config);\n            return __assign(__assign({}, g), {\n              config: config,\n              validated: validated\n            });\n          };\n        });\n      });\n      return r;\n    };\n    var doGenerateOne = function (owner, pname) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname\n      };\n    };\n    var generateOne = function (owner, pname, config) {\n      return {\n        uiType: placeholder(),\n        owner: owner,\n        name: pname,\n        config: config,\n        validated: {}\n      };\n    };\n    var schemas = function (parts) {\n      return bind(parts, function (part) {\n        return part.fold(Optional.none, Optional.some, Optional.none, Optional.none).map(function (data) {\n          return strictObjOf(data.name, data.schema.concat([snapshot(original())]));\n        }).toArray();\n      });\n    };\n    var names = function (parts) {\n      return map(parts, name$1);\n    };\n    var substitutes = function (owner, detail, parts) {\n      return subs(owner, detail, parts);\n    };\n    var components = function (owner, detail, internals) {\n      return substitutePlaces(Optional.some(owner), detail, detail.components, internals);\n    };\n    var getPart = function (component, detail, partKey) {\n      var uid = detail.partUids[partKey];\n      return component.getSystem().getByUid(uid).toOptional();\n    };\n    var getPartOrDie = function (component, detail, partKey) {\n      return getPart(component, detail, partKey).getOrDie('Could not find part: ' + partKey);\n    };\n    var getParts = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]));\n      });\n      return r;\n    };\n    var getAllParts = function (component, detail) {\n      var system = component.getSystem();\n      return map$2(detail.partUids, function (pUid, _k) {\n        return constant(system.getByUid(pUid));\n      });\n    };\n    var getAllPartNames = function (detail) {\n      return keys(detail.partUids);\n    };\n    var getPartsOrDie = function (component, detail, partKeys) {\n      var r = {};\n      var uids = detail.partUids;\n      var system = component.getSystem();\n      each(partKeys, function (pk) {\n        r[pk] = constant(system.getByUid(uids[pk]).getOrDie());\n      });\n      return r;\n    };\n    var defaultUids = function (baseUid, partTypes) {\n      var partNames = names(partTypes);\n      return wrapAll$1(map(partNames, function (pn) {\n        return {\n          key: pn,\n          value: baseUid + '-' + pn\n        };\n      }));\n    };\n    var defaultUidsSchema = function (partTypes) {\n      return field('partUids', 'partUids', mergeWithThunk(function (spec) {\n        return defaultUids(spec.uid, partTypes);\n      }), anyValue$1());\n    };\n\n    var AlloyParts = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        generate: generate$4,\n        generateOne: generateOne,\n        schemas: schemas,\n        names: names,\n        substitutes: substitutes,\n        components: components,\n        defaultUids: defaultUids,\n        defaultUidsSchema: defaultUidsSchema,\n        getAllParts: getAllParts,\n        getAllPartNames: getAllPartNames,\n        getPart: getPart,\n        getPartOrDie: getPartOrDie,\n        getParts: getParts,\n        getPartsOrDie: getPartsOrDie\n    });\n\n    var base = function (partSchemas, partUidsSchemas) {\n      var ps = partSchemas.length > 0 ? [strictObjOf('parts', partSchemas)] : [];\n      return ps.concat([\n        strict$1('uid'),\n        defaulted$1('dom', {}),\n        defaulted$1('components', []),\n        snapshot('originalSpec'),\n        defaulted$1('debug.sketcher', {})\n      ]).concat(partUidsSchemas);\n    };\n    var asRawOrDie$1 = function (label, schema, spec, partSchemas, partUidsSchemas) {\n      var baseS = base(partSchemas, partUidsSchemas);\n      return asRawOrDie(label + ' [SpecSchema]', objOfOnly(baseS.concat(schema)), spec);\n    };\n\n    var single$1 = function (owner, schema, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, [], []);\n      return factory(detail, specWithUid);\n    };\n    var composite = function (owner, schema, partTypes, factory, spec) {\n      var specWithUid = supplyUid(spec);\n      var partSchemas = schemas(partTypes);\n      var partUidsSchema = defaultUidsSchema(partTypes);\n      var detail = asRawOrDie$1(owner, schema, specWithUid, partSchemas, [partUidsSchema]);\n      var subs = substitutes(owner, detail, partTypes);\n      var components$1 = components(owner, detail, subs.internals());\n      return factory(detail, components$1, specWithUid, subs.externals());\n    };\n    var hasUid = function (spec) {\n      return has(spec, 'uid');\n    };\n    var supplyUid = function (spec) {\n      return hasUid(spec) ? spec : __assign(__assign({}, spec), { uid: generate$2('uid') });\n    };\n\n    function isSketchSpec(spec) {\n      return spec.uid !== undefined;\n    }\n    var singleSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var compositeSchema = objOfOnly([\n      strict$1('name'),\n      strict$1('factory'),\n      strict$1('configFields'),\n      strict$1('partFields'),\n      defaulted$1('apis', {}),\n      defaulted$1('extraApis', {})\n    ]);\n    var single$2 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, singleSchema, rawConfig);\n      var sketch = function (spec) {\n        return single$1(config.name, config.configFields, config.factory, spec);\n      };\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        configFields: config.configFields,\n        sketch: sketch\n      }, apis), extraApis);\n    };\n    var composite$1 = function (rawConfig) {\n      var config = asRawOrDie('Sketcher for ' + rawConfig.name, compositeSchema, rawConfig);\n      var sketch = function (spec) {\n        return composite(config.name, config.configFields, config.partFields, config.factory, spec);\n      };\n      var parts = generate$4(config.name, config.partFields);\n      var apis = map$2(config.apis, makeApi);\n      var extraApis = map$2(config.extraApis, function (f, k) {\n        return markAsExtraApi(f, k);\n      });\n      return __assign(__assign({\n        name: config.name,\n        partFields: config.partFields,\n        configFields: config.configFields,\n        sketch: sketch,\n        parts: parts\n      }, apis), extraApis);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var sequence = function (arr) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Optional.none();\n        }\n      }\n      return Optional.some(r);\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var mapFrom = function (a, f) {\n      return a !== undefined && a !== null ? Optional.some(f(a)) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var inside = function (target) {\n      return name(target) === 'input' && get$3(target, 'type') !== 'radio' || name(target) === 'textarea';\n    };\n\n    var getCurrent = function (component, composeConfig, _composeState) {\n      return composeConfig.find(component);\n    };\n\n    var ComposeApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCurrent: getCurrent\n    });\n\n    var ComposeSchema = [strict$1('find')];\n\n    var Composing = create$1({\n      fields: ComposeSchema,\n      name: 'composing',\n      apis: ComposeApis\n    });\n\n    var dehighlightAllExcept = function (component, hConfig, hState, skip) {\n      var highlighted = descendants(component.element, '.' + hConfig.highlightClass);\n      each(highlighted, function (h) {\n        if (!exists(skip, function (skipComp) {\n            return skipComp.element === h;\n          })) {\n          remove$4(h, hConfig.highlightClass);\n          component.getSystem().getByDom(h).each(function (target) {\n            hConfig.onDehighlight(component, target);\n            emit(target, dehighlight());\n          });\n        }\n      });\n    };\n    var dehighlightAll = function (component, hConfig, hState) {\n      return dehighlightAllExcept(component, hConfig, hState, []);\n    };\n    var dehighlight$1 = function (component, hConfig, hState, target) {\n      if (isHighlighted(component, hConfig, hState, target)) {\n        remove$4(target.element, hConfig.highlightClass);\n        hConfig.onDehighlight(component, target);\n        emit(target, dehighlight());\n      }\n    };\n    var highlight$1 = function (component, hConfig, hState, target) {\n      dehighlightAllExcept(component, hConfig, hState, [target]);\n      if (!isHighlighted(component, hConfig, hState, target)) {\n        add$2(target.element, hConfig.highlightClass);\n        hConfig.onHighlight(component, target);\n        emit(target, highlight());\n      }\n    };\n    var highlightFirst = function (component, hConfig, hState) {\n      getFirst(component, hConfig).each(function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightLast = function (component, hConfig, hState) {\n      getLast(component, hConfig).each(function (lastComp) {\n        highlight$1(component, hConfig, hState, lastComp);\n      });\n    };\n    var highlightAt = function (component, hConfig, hState, index) {\n      getByIndex(component, hConfig, hState, index).fold(function (err) {\n        throw new Error(err);\n      }, function (firstComp) {\n        highlight$1(component, hConfig, hState, firstComp);\n      });\n    };\n    var highlightBy = function (component, hConfig, hState, predicate) {\n      var candidates = getCandidates(component, hConfig);\n      var targetComp = find(candidates, predicate);\n      targetComp.each(function (c) {\n        highlight$1(component, hConfig, hState, c);\n      });\n    };\n    var isHighlighted = function (component, hConfig, hState, queryTarget) {\n      return has$2(queryTarget.element, hConfig.highlightClass);\n    };\n    var getHighlighted = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.highlightClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getByIndex = function (component, hConfig, hState, index) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return Optional.from(items[index]).fold(function () {\n        return Result.error('No element found with index ' + index);\n      }, component.getSystem().getByDom);\n    };\n    var getFirst = function (component, hConfig, _hState) {\n      return descendant$1(component.element, '.' + hConfig.itemClass).bind(function (e) {\n        return component.getSystem().getByDom(e).toOptional();\n      });\n    };\n    var getLast = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var last = items.length > 0 ? Optional.some(items[items.length - 1]) : Optional.none();\n      return last.bind(function (c) {\n        return component.getSystem().getByDom(c).toOptional();\n      });\n    };\n    var getDelta = function (component, hConfig, hState, delta) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      var current = findIndex(items, function (item) {\n        return has$2(item, hConfig.highlightClass);\n      });\n      return current.bind(function (selected) {\n        var dest = cycleBy(selected, delta, 0, items.length - 1);\n        return component.getSystem().getByDom(items[dest]).toOptional();\n      });\n    };\n    var getPrevious = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, -1);\n    };\n    var getNext = function (component, hConfig, hState) {\n      return getDelta(component, hConfig, hState, +1);\n    };\n    var getCandidates = function (component, hConfig, _hState) {\n      var items = descendants(component.element, '.' + hConfig.itemClass);\n      return cat(map(items, function (i) {\n        return component.getSystem().getByDom(i).toOptional();\n      }));\n    };\n\n    var HighlightApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        dehighlightAll: dehighlightAll,\n        dehighlight: dehighlight$1,\n        highlight: highlight$1,\n        highlightFirst: highlightFirst,\n        highlightLast: highlightLast,\n        highlightAt: highlightAt,\n        highlightBy: highlightBy,\n        isHighlighted: isHighlighted,\n        getHighlighted: getHighlighted,\n        getFirst: getFirst,\n        getLast: getLast,\n        getPrevious: getPrevious,\n        getNext: getNext,\n        getCandidates: getCandidates\n    });\n\n    var HighlightSchema = [\n      strict$1('highlightClass'),\n      strict$1('itemClass'),\n      onHandler('onHighlight'),\n      onHandler('onDehighlight')\n    ];\n\n    var Highlighting = create$1({\n      fields: HighlightSchema,\n      name: 'highlighting',\n      apis: HighlightApis\n    });\n\n    var BACKSPACE = [8];\n    var TAB = [9];\n    var ENTER = [13];\n    var ESCAPE = [27];\n    var SPACE = [32];\n    var LEFT = [37];\n    var UP = [38];\n    var RIGHT = [39];\n    var DOWN = [40];\n\n    var cyclePrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      var after = reverse(values.slice(index + 1));\n      return find(before.concat(after), predicate);\n    };\n    var tryPrev = function (values, index, predicate) {\n      var before = reverse(values.slice(0, index));\n      return find(before, predicate);\n    };\n    var cycleNext = function (values, index, predicate) {\n      var before = values.slice(0, index);\n      var after = values.slice(index + 1);\n      return find(after.concat(before), predicate);\n    };\n    var tryNext = function (values, index, predicate) {\n      var after = values.slice(index + 1);\n      return find(after, predicate);\n    };\n\n    var inSet = function (keys) {\n      return function (event) {\n        var raw = event.raw;\n        return contains(keys, raw.which);\n      };\n    };\n    var and = function (preds) {\n      return function (event) {\n        return forall(preds, function (pred) {\n          return pred(event);\n        });\n      };\n    };\n    var isShift = function (event) {\n      var raw = event.raw;\n      return raw.shiftKey === true;\n    };\n    var isControl = function (event) {\n      var raw = event.raw;\n      return raw.ctrlKey === true;\n    };\n    var isNotShift = not(isShift);\n\n    var rule = function (matches, action) {\n      return {\n        matches: matches,\n        classification: action\n      };\n    };\n    var choose$2 = function (transitions, event) {\n      var transition = find(transitions, function (t) {\n        return t.matches(event);\n      });\n      return transition.map(function (t) {\n        return t.classification;\n      });\n    };\n\n    var reportFocusShifting = function (component, prevFocus, newFocus) {\n      var noChange = prevFocus.exists(function (p) {\n        return newFocus.exists(function (n) {\n          return eq$1(n, p);\n        });\n      });\n      if (!noChange) {\n        emitWith(component, focusShifted(), {\n          prevFocus: prevFocus,\n          newFocus: newFocus\n        });\n      }\n    };\n    var dom = function () {\n      var get = function (component) {\n        return search(component.element);\n      };\n      var set = function (component, focusee) {\n        var prevFocus = get(component);\n        component.getSystem().triggerFocus(focusee, component.element);\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n    var highlights = function () {\n      var get = function (component) {\n        return Highlighting.getHighlighted(component).map(function (item) {\n          return item.element;\n        });\n      };\n      var set = function (component, element) {\n        var prevFocus = get(component);\n        component.getSystem().getByDom(element).fold(noop, function (item) {\n          Highlighting.highlight(component, item);\n        });\n        var newFocus = get(component);\n        reportFocusShifting(component, prevFocus, newFocus);\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var FocusInsideModes;\n    (function (FocusInsideModes) {\n      FocusInsideModes['OnFocusMode'] = 'onFocus';\n      FocusInsideModes['OnEnterOrSpaceMode'] = 'onEnterOrSpace';\n      FocusInsideModes['OnApiMode'] = 'onApi';\n    }(FocusInsideModes || (FocusInsideModes = {})));\n\n    var typical = function (infoSchema, stateInit, getKeydownRules, getKeyupRules, optFocusIn) {\n      var schema = function () {\n        return infoSchema.concat([\n          defaulted$1('focusManager', dom()),\n          defaultedOf('focusInside', 'onFocus', valueOf(function (val) {\n            return contains([\n              'onFocus',\n              'onEnterOrSpace',\n              'onApi'\n            ], val) ? Result.value(val) : Result.error('Invalid value for focusInside');\n          })),\n          output('handler', me),\n          output('state', stateInit),\n          output('sendFocusIn', optFocusIn)\n        ]);\n      };\n      var processKey = function (component, simulatedEvent, getRules, keyingConfig, keyingState) {\n        var rules = getRules(component, simulatedEvent, keyingConfig, keyingState);\n        return choose$2(rules, simulatedEvent.event).bind(function (rule) {\n          return rule(component, simulatedEvent, keyingConfig, keyingState);\n        });\n      };\n      var toEvents = function (keyingConfig, keyingState) {\n        var onFocusHandler = keyingConfig.focusInside !== FocusInsideModes.OnFocusMode ? Optional.none() : optFocusIn(keyingConfig).map(function (focusIn) {\n          return run(focus(), function (component, simulatedEvent) {\n            focusIn(component, keyingConfig, keyingState);\n            simulatedEvent.stop();\n          });\n        });\n        var tryGoInsideComponent = function (component, simulatedEvent) {\n          var isEnterOrSpace = inSet(SPACE.concat(ENTER))(simulatedEvent.event);\n          if (keyingConfig.focusInside === FocusInsideModes.OnEnterOrSpaceMode && isEnterOrSpace && isSource(component, simulatedEvent)) {\n            optFocusIn(keyingConfig).each(function (focusIn) {\n              focusIn(component, keyingConfig, keyingState);\n              simulatedEvent.stop();\n            });\n          }\n        };\n        var keyboardEvents = [\n          run(keydown(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeydownRules, keyingConfig, keyingState).fold(function () {\n              tryGoInsideComponent(component, simulatedEvent);\n            }, function (_) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(keyup(), function (component, simulatedEvent) {\n            processKey(component, simulatedEvent, getKeyupRules, keyingConfig, keyingState).each(function (_) {\n              simulatedEvent.stop();\n            });\n          })\n        ];\n        return derive(onFocusHandler.toArray().concat(keyboardEvents));\n      };\n      var me = {\n        schema: schema,\n        processKey: processKey,\n        toEvents: toEvents\n      };\n      return me;\n    };\n\n    var create$3 = function (cyclicField) {\n      var schema = [\n        option('onEscape'),\n        option('onEnter'),\n        defaulted$1('selector', '[data-alloy-tabstop=\"true\"]:not(:disabled)'),\n        defaulted$1('firstTabstop', 0),\n        defaulted$1('useTabstopAt', always),\n        option('visibilitySelector')\n      ].concat([cyclicField]);\n      var isVisible = function (tabbingConfig, element) {\n        var target = tabbingConfig.visibilitySelector.bind(function (sel) {\n          return closest$3(element, sel);\n        }).getOr(element);\n        return get$7(target) > 0;\n      };\n      var findInitial = function (component, tabbingConfig) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        var visibles = filter(tabstops, function (elem) {\n          return isVisible(tabbingConfig, elem);\n        });\n        return Optional.from(visibles[tabbingConfig.firstTabstop]);\n      };\n      var findCurrent = function (component, tabbingConfig) {\n        return tabbingConfig.focusManager.get(component).bind(function (elem) {\n          return closest$3(elem, tabbingConfig.selector);\n        });\n      };\n      var isTabstop = function (tabbingConfig, element) {\n        return isVisible(tabbingConfig, element) && tabbingConfig.useTabstopAt(element);\n      };\n      var focusIn = function (component, tabbingConfig, _tabbingState) {\n        findInitial(component, tabbingConfig).each(function (target) {\n          tabbingConfig.focusManager.set(component, target);\n        });\n      };\n      var goFromTabstop = function (component, tabstops, stopIndex, tabbingConfig, cycle) {\n        return cycle(tabstops, stopIndex, function (elem) {\n          return isTabstop(tabbingConfig, elem);\n        }).fold(function () {\n          return tabbingConfig.cyclic ? Optional.some(true) : Optional.none();\n        }, function (target) {\n          tabbingConfig.focusManager.set(component, target);\n          return Optional.some(true);\n        });\n      };\n      var go = function (component, _simulatedEvent, tabbingConfig, cycle) {\n        var tabstops = descendants(component.element, tabbingConfig.selector);\n        return findCurrent(component, tabbingConfig).bind(function (tabstop) {\n          var optStopIndex = findIndex(tabstops, curry(eq$1, tabstop));\n          return optStopIndex.bind(function (stopIndex) {\n            return goFromTabstop(component, tabstops, stopIndex, tabbingConfig, cycle);\n          });\n        });\n      };\n      var goBackwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cyclePrev : tryPrev;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var goForwards = function (component, simulatedEvent, tabbingConfig) {\n        var navigate = tabbingConfig.cyclic ? cycleNext : tryNext;\n        return go(component, simulatedEvent, tabbingConfig, navigate);\n      };\n      var execute = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEnter.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var exit = function (component, simulatedEvent, tabbingConfig) {\n        return tabbingConfig.onEscape.bind(function (f) {\n          return f(component, simulatedEvent);\n        });\n      };\n      var getKeydownRules = constant([\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), goBackwards),\n        rule(inSet(TAB), goForwards),\n        rule(inSet(ESCAPE), exit),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), execute)\n      ]);\n      var getKeyupRules = constant([]);\n      return typical(schema, NoState.init, getKeydownRules, getKeyupRules, function () {\n        return Optional.some(focusIn);\n      });\n    };\n\n    var AcyclicType = create$3(state$1('cyclic', never));\n\n    var CyclicType = create$3(state$1('cyclic', always));\n\n    var doDefaultExecute = function (component, _simulatedEvent, focused) {\n      dispatch(component, focused, execute());\n      return Optional.some(true);\n    };\n    var defaultExecute = function (component, simulatedEvent, focused) {\n      var isComplex = inside(focused) && inSet(SPACE)(simulatedEvent.event);\n      return isComplex ? Optional.none() : doDefaultExecute(component, simulatedEvent, focused);\n    };\n    var stopEventForFirefox = function (_component, _simulatedEvent) {\n      return Optional.some(true);\n    };\n\n    var schema$4 = [\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('useSpace', false),\n      defaulted$1('useEnter', true),\n      defaulted$1('useControlEnter', false),\n      defaulted$1('useDown', false)\n    ];\n    var execute$1 = function (component, simulatedEvent, executeConfig) {\n      return executeConfig.execute(component, simulatedEvent, component.element);\n    };\n    var getKeydownRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      var spaceExec = executeConfig.useSpace && !inside(component.element) ? SPACE : [];\n      var enterExec = executeConfig.useEnter ? ENTER : [];\n      var downExec = executeConfig.useDown ? DOWN : [];\n      var execKeys = spaceExec.concat(enterExec).concat(downExec);\n      return [rule(inSet(execKeys), execute$1)].concat(executeConfig.useControlEnter ? [rule(and([\n          isControl,\n          inSet(ENTER)\n        ]), execute$1)] : []);\n    };\n    var getKeyupRules = function (component, _simulatedEvent, executeConfig, _executeState) {\n      return executeConfig.useSpace && !inside(component.element) ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var ExecutionType = typical(schema$4, NoState.init, getKeydownRules, getKeyupRules, function () {\n      return Optional.none();\n    });\n\n    var flatgrid = function () {\n      var dimensions = Cell(Optional.none());\n      var setGridSize = function (numRows, numColumns) {\n        dimensions.set(Optional.some({\n          numRows: numRows,\n          numColumns: numColumns\n        }));\n      };\n      var getNumRows = function () {\n        return dimensions.get().map(function (d) {\n          return d.numRows;\n        });\n      };\n      var getNumColumns = function () {\n        return dimensions.get().map(function (d) {\n          return d.numColumns;\n        });\n      };\n      return nu$5({\n        readState: function () {\n          return dimensions.get().map(function (d) {\n            return {\n              numRows: String(d.numRows),\n              numColumns: String(d.numColumns)\n            };\n          }).getOr({\n            numRows: '?',\n            numColumns: '?'\n          });\n        },\n        setGridSize: setGridSize,\n        getNumRows: getNumRows,\n        getNumColumns: getNumColumns\n      });\n    };\n    var init$2 = function (spec) {\n      return spec.state(spec);\n    };\n\n    var KeyingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        flatgrid: flatgrid,\n        init: init$2\n    });\n\n    var useH = function (movement) {\n      return function (component, simulatedEvent, config, state) {\n        var move = movement(component.element);\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var west$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveLeft, moveRight);\n      return useH(movement);\n    };\n    var east$2 = function (moveLeft, moveRight) {\n      var movement = onDirection(moveRight, moveLeft);\n      return useH(movement);\n    };\n    var useV = function (move) {\n      return function (component, simulatedEvent, config, state) {\n        return use(move, component, simulatedEvent, config, state);\n      };\n    };\n    var use = function (move, component, simulatedEvent, config, state) {\n      var outcome = config.focusManager.get(component).bind(function (focused) {\n        return move(component.element, focused, config, state);\n      });\n      return outcome.map(function (newFocus) {\n        config.focusManager.set(component, newFocus);\n        return true;\n      });\n    };\n    var north$2 = useV;\n    var south$2 = useV;\n    var move = useV;\n\n    var isHidden = function (dom) {\n      return dom.offsetWidth <= 0 && dom.offsetHeight <= 0;\n    };\n    var isVisible = function (element) {\n      return !isHidden(element.dom);\n    };\n\n    var locate = function (candidates, predicate) {\n      return findIndex(candidates, predicate).map(function (index) {\n        return {\n          index: index,\n          candidates: candidates\n        };\n      });\n    };\n\n    var locateVisible = function (container, current, selector) {\n      var predicate = function (x) {\n        return eq$1(x, current);\n      };\n      var candidates = descendants(container, selector);\n      var visible = filter(candidates, isVisible);\n      return locate(visible, predicate);\n    };\n    var findIndex$1 = function (elements, target) {\n      return findIndex(elements, function (elem) {\n        return eq$1(target, elem);\n      });\n    };\n\n    var withGrid = function (values, index, numCols, f) {\n      var oldRow = Math.floor(index / numCols);\n      var oldColumn = index % numCols;\n      return f(oldRow, oldColumn).bind(function (address) {\n        var newIndex = address.row * numCols + address.column;\n        return newIndex >= 0 && newIndex < values.length ? Optional.some(values[newIndex]) : Optional.none();\n      });\n    };\n    var cycleHorizontal = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var onLastRow = oldRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - oldRow * numCols : numCols;\n        var newColumn = cycleBy(oldColumn, delta, 0, colsInRow - 1);\n        return Optional.some({\n          row: oldRow,\n          column: newColumn\n        });\n      });\n    };\n    var cycleVertical = function (values, index, numRows, numCols, delta) {\n      return withGrid(values, index, numCols, function (oldRow, oldColumn) {\n        var newRow = cycleBy(oldRow, delta, 0, numRows - 1);\n        var onLastRow = newRow === numRows - 1;\n        var colsInRow = onLastRow ? values.length - newRow * numCols : numCols;\n        var newCol = clamp(oldColumn, 0, colsInRow - 1);\n        return Optional.some({\n          row: newRow,\n          column: newCol\n        });\n      });\n    };\n    var cycleRight = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, +1);\n    };\n    var cycleLeft = function (values, index, numRows, numCols) {\n      return cycleHorizontal(values, index, numRows, numCols, -1);\n    };\n    var cycleUp = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, -1);\n    };\n    var cycleDown = function (values, index, numRows, numCols) {\n      return cycleVertical(values, index, numRows, numCols, +1);\n    };\n\n    var schema$5 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('captureTab', false),\n      initSize()\n    ];\n    var focusIn = function (component, gridConfig, _gridState) {\n      descendant$1(component.element, gridConfig.selector).each(function (first) {\n        gridConfig.focusManager.set(component, first);\n      });\n    };\n    var findCurrent = function (component, gridConfig) {\n      return gridConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, gridConfig.selector);\n      });\n    };\n    var execute$2 = function (component, simulatedEvent, gridConfig, _gridState) {\n      return findCurrent(component, gridConfig).bind(function (focused) {\n        return gridConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var doMove = function (cycle) {\n      return function (element, focused, gridConfig, gridState) {\n        return locateVisible(element, focused, gridConfig.selector).bind(function (identified) {\n          return cycle(identified.candidates, identified.index, gridState.getNumRows().getOr(gridConfig.initSize.numRows), gridState.getNumColumns().getOr(gridConfig.initSize.numColumns));\n        });\n      };\n    };\n    var handleTab = function (_component, _simulatedEvent, gridConfig) {\n      return gridConfig.captureTab ? Optional.some(true) : Optional.none();\n    };\n    var doEscape = function (component, simulatedEvent, gridConfig) {\n      return gridConfig.onEscape(component, simulatedEvent);\n    };\n    var moveLeft = doMove(cycleLeft);\n    var moveRight = doMove(cycleRight);\n    var moveNorth = doMove(cycleUp);\n    var moveSouth = doMove(cycleDown);\n    var getKeydownRules$1 = constant([\n      rule(inSet(LEFT), west$2(moveLeft, moveRight)),\n      rule(inSet(RIGHT), east$2(moveLeft, moveRight)),\n      rule(inSet(UP), north$2(moveNorth)),\n      rule(inSet(DOWN), south$2(moveSouth)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), handleTab),\n      rule(inSet(ESCAPE), doEscape),\n      rule(inSet(SPACE.concat(ENTER)), execute$2)\n    ]);\n    var getKeyupRules$1 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlatgridType = typical(schema$5, flatgrid, getKeydownRules$1, getKeyupRules$1, function () {\n      return Optional.some(focusIn);\n    });\n\n    var horizontal = function (container, selector, current, delta) {\n      var isDisabledButton = function (candidate) {\n        return name(candidate) === 'button' && get$3(candidate, 'disabled') === 'disabled';\n      };\n      var tryCycle = function (initial, index, candidates) {\n        var newIndex = cycleBy(index, delta, 0, candidates.length - 1);\n        if (newIndex === initial) {\n          return Optional.none();\n        } else {\n          return isDisabledButton(candidates[newIndex]) ? tryCycle(initial, newIndex, candidates) : Optional.from(candidates[newIndex]);\n        }\n      };\n      return locateVisible(container, current, selector).bind(function (identified) {\n        var index = identified.index;\n        var candidates = identified.candidates;\n        return tryCycle(index, index, candidates);\n      });\n    };\n\n    var schema$6 = [\n      strict$1('selector'),\n      defaulted$1('getInitial', Optional.none),\n      defaulted$1('execute', defaultExecute),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('executeOnMove', false),\n      defaulted$1('allowVertical', true)\n    ];\n    var findCurrent$1 = function (component, flowConfig) {\n      return flowConfig.focusManager.get(component).bind(function (elem) {\n        return closest$3(elem, flowConfig.selector);\n      });\n    };\n    var execute$3 = function (component, simulatedEvent, flowConfig) {\n      return findCurrent$1(component, flowConfig).bind(function (focused) {\n        return flowConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$1 = function (component, flowConfig, _state) {\n      flowConfig.getInitial(component).orThunk(function () {\n        return descendant$1(component.element, flowConfig.selector);\n      }).each(function (first) {\n        flowConfig.focusManager.set(component, first);\n      });\n    };\n    var moveLeft$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveRight$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var doMove$1 = function (movement) {\n      return function (component, simulatedEvent, flowConfig, flowState) {\n        return movement(component, simulatedEvent, flowConfig, flowState).bind(function () {\n          return flowConfig.executeOnMove ? execute$3(component, simulatedEvent, flowConfig) : Optional.some(true);\n        });\n      };\n    };\n    var doEscape$1 = function (component, simulatedEvent, flowConfig) {\n      return flowConfig.onEscape(component, simulatedEvent);\n    };\n    var getKeydownRules$2 = function (_component, _se, flowConfig, _flowState) {\n      var westMovers = LEFT.concat(flowConfig.allowVertical ? UP : []);\n      var eastMovers = RIGHT.concat(flowConfig.allowVertical ? DOWN : []);\n      return [\n        rule(inSet(westMovers), doMove$1(west$2(moveLeft$1, moveRight$1))),\n        rule(inSet(eastMovers), doMove$1(east$2(moveLeft$1, moveRight$1))),\n        rule(inSet(ENTER), execute$3),\n        rule(inSet(SPACE), execute$3),\n        rule(inSet(ESCAPE), doEscape$1)\n      ];\n    };\n    var getKeyupRules$2 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var FlowType = typical(schema$6, NoState.init, getKeydownRules$2, getKeyupRules$2, function () {\n      return Optional.some(focusIn$1);\n    });\n\n    var toCell = function (matrix, rowIndex, columnIndex) {\n      return Optional.from(matrix[rowIndex]).bind(function (row) {\n        return Optional.from(row[columnIndex]).map(function (cell) {\n          return {\n            rowIndex: rowIndex,\n            columnIndex: columnIndex,\n            cell: cell\n          };\n        });\n      });\n    };\n    var cycleHorizontal$1 = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = cycleBy(startCol, deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var cycleVertical$1 = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = cycleBy(startRow, deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var moveHorizontal = function (matrix, rowIndex, startCol, deltaCol) {\n      var row = matrix[rowIndex];\n      var colsInRow = row.length;\n      var newColIndex = clamp(startCol + deltaCol, 0, colsInRow - 1);\n      return toCell(matrix, rowIndex, newColIndex);\n    };\n    var moveVertical = function (matrix, colIndex, startRow, deltaRow) {\n      var nextRowIndex = clamp(startRow + deltaRow, 0, matrix.length - 1);\n      var colsInNextRow = matrix[nextRowIndex].length;\n      var nextColIndex = clamp(colIndex, 0, colsInNextRow - 1);\n      return toCell(matrix, nextRowIndex, nextColIndex);\n    };\n    var cycleRight$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, +1);\n    };\n    var cycleLeft$1 = function (matrix, startRow, startCol) {\n      return cycleHorizontal$1(matrix, startRow, startCol, -1);\n    };\n    var cycleUp$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, -1);\n    };\n    var cycleDown$1 = function (matrix, startRow, startCol) {\n      return cycleVertical$1(matrix, startCol, startRow, +1);\n    };\n    var moveLeft$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, -1);\n    };\n    var moveRight$2 = function (matrix, startRow, startCol) {\n      return moveHorizontal(matrix, startRow, startCol, +1);\n    };\n    var moveUp = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, -1);\n    };\n    var moveDown = function (matrix, startRow, startCol) {\n      return moveVertical(matrix, startCol, startRow, +1);\n    };\n\n    var schema$7 = [\n      strictObjOf('selectors', [\n        strict$1('row'),\n        strict$1('cell')\n      ]),\n      defaulted$1('cycles', true),\n      defaulted$1('previousSelector', Optional.none),\n      defaulted$1('execute', defaultExecute)\n    ];\n    var focusIn$2 = function (component, matrixConfig, _state) {\n      var focused = matrixConfig.previousSelector(component).orThunk(function () {\n        var selectors = matrixConfig.selectors;\n        return descendant$1(component.element, selectors.cell);\n      });\n      focused.each(function (cell) {\n        matrixConfig.focusManager.set(component, cell);\n      });\n    };\n    var execute$4 = function (component, simulatedEvent, matrixConfig) {\n      return search(component.element).bind(function (focused) {\n        return matrixConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var toMatrix = function (rows, matrixConfig) {\n      return map(rows, function (row) {\n        return descendants(row, matrixConfig.selectors.cell);\n      });\n    };\n    var doMove$2 = function (ifCycle, ifMove) {\n      return function (element, focused, matrixConfig) {\n        var move = matrixConfig.cycles ? ifCycle : ifMove;\n        return closest$3(focused, matrixConfig.selectors.row).bind(function (inRow) {\n          var cellsInRow = descendants(inRow, matrixConfig.selectors.cell);\n          return findIndex$1(cellsInRow, focused).bind(function (colIndex) {\n            var allRows = descendants(element, matrixConfig.selectors.row);\n            return findIndex$1(allRows, inRow).bind(function (rowIndex) {\n              var matrix = toMatrix(allRows, matrixConfig);\n              return move(matrix, rowIndex, colIndex).map(function (next) {\n                return next.cell;\n              });\n            });\n          });\n        });\n      };\n    };\n    var moveLeft$3 = doMove$2(cycleLeft$1, moveLeft$2);\n    var moveRight$3 = doMove$2(cycleRight$1, moveRight$2);\n    var moveNorth$1 = doMove$2(cycleUp$1, moveUp);\n    var moveSouth$1 = doMove$2(cycleDown$1, moveDown);\n    var getKeydownRules$3 = constant([\n      rule(inSet(LEFT), west$2(moveLeft$3, moveRight$3)),\n      rule(inSet(RIGHT), east$2(moveLeft$3, moveRight$3)),\n      rule(inSet(UP), north$2(moveNorth$1)),\n      rule(inSet(DOWN), south$2(moveSouth$1)),\n      rule(inSet(SPACE.concat(ENTER)), execute$4)\n    ]);\n    var getKeyupRules$3 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MatrixType = typical(schema$7, NoState.init, getKeydownRules$3, getKeyupRules$3, function () {\n      return Optional.some(focusIn$2);\n    });\n\n    var schema$8 = [\n      strict$1('selector'),\n      defaulted$1('execute', defaultExecute),\n      defaulted$1('moveOnTab', false)\n    ];\n    var execute$5 = function (component, simulatedEvent, menuConfig) {\n      return menuConfig.focusManager.get(component).bind(function (focused) {\n        return menuConfig.execute(component, simulatedEvent, focused);\n      });\n    };\n    var focusIn$3 = function (component, menuConfig, _state) {\n      descendant$1(component.element, menuConfig.selector).each(function (first) {\n        menuConfig.focusManager.set(component, first);\n      });\n    };\n    var moveUp$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, -1);\n    };\n    var moveDown$1 = function (element, focused, info) {\n      return horizontal(element, info.selector, focused, +1);\n    };\n    var fireShiftTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveUp$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var fireTab = function (component, simulatedEvent, menuConfig, menuState) {\n      return menuConfig.moveOnTab ? move(moveDown$1)(component, simulatedEvent, menuConfig, menuState) : Optional.none();\n    };\n    var getKeydownRules$4 = constant([\n      rule(inSet(UP), move(moveUp$1)),\n      rule(inSet(DOWN), move(moveDown$1)),\n      rule(and([\n        isShift,\n        inSet(TAB)\n      ]), fireShiftTab),\n      rule(and([\n        isNotShift,\n        inSet(TAB)\n      ]), fireTab),\n      rule(inSet(ENTER), execute$5),\n      rule(inSet(SPACE), execute$5)\n    ]);\n    var getKeyupRules$4 = constant([rule(inSet(SPACE), stopEventForFirefox)]);\n    var MenuType = typical(schema$8, NoState.init, getKeydownRules$4, getKeyupRules$4, function () {\n      return Optional.some(focusIn$3);\n    });\n\n    var schema$9 = [\n      onKeyboardHandler('onSpace'),\n      onKeyboardHandler('onEnter'),\n      onKeyboardHandler('onShiftEnter'),\n      onKeyboardHandler('onLeft'),\n      onKeyboardHandler('onRight'),\n      onKeyboardHandler('onTab'),\n      onKeyboardHandler('onShiftTab'),\n      onKeyboardHandler('onUp'),\n      onKeyboardHandler('onDown'),\n      onKeyboardHandler('onEscape'),\n      defaulted$1('stopSpaceKeyup', false),\n      option('focusIn')\n    ];\n    var getKeydownRules$5 = function (component, simulatedEvent, specialInfo) {\n      return [\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(and([\n          isNotShift,\n          inSet(ENTER)\n        ]), specialInfo.onEnter),\n        rule(and([\n          isShift,\n          inSet(ENTER)\n        ]), specialInfo.onShiftEnter),\n        rule(and([\n          isShift,\n          inSet(TAB)\n        ]), specialInfo.onShiftTab),\n        rule(and([\n          isNotShift,\n          inSet(TAB)\n        ]), specialInfo.onTab),\n        rule(inSet(UP), specialInfo.onUp),\n        rule(inSet(DOWN), specialInfo.onDown),\n        rule(inSet(LEFT), specialInfo.onLeft),\n        rule(inSet(RIGHT), specialInfo.onRight),\n        rule(inSet(SPACE), specialInfo.onSpace),\n        rule(inSet(ESCAPE), specialInfo.onEscape)\n      ];\n    };\n    var getKeyupRules$5 = function (component, simulatedEvent, specialInfo) {\n      return specialInfo.stopSpaceKeyup ? [rule(inSet(SPACE), stopEventForFirefox)] : [];\n    };\n    var SpecialType = typical(schema$9, NoState.init, getKeydownRules$5, getKeyupRules$5, function (specialInfo) {\n      return specialInfo.focusIn;\n    });\n\n    var acyclic = AcyclicType.schema();\n    var cyclic = CyclicType.schema();\n    var flow = FlowType.schema();\n    var flatgrid$1 = FlatgridType.schema();\n    var matrix = MatrixType.schema();\n    var execution = ExecutionType.schema();\n    var menu = MenuType.schema();\n    var special = SpecialType.schema();\n\n    var KeyboardBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        acyclic: acyclic,\n        cyclic: cyclic,\n        flow: flow,\n        flatgrid: flatgrid$1,\n        matrix: matrix,\n        execution: execution,\n        menu: menu,\n        special: special\n    });\n\n    var isFlatgridState = function (keyState) {\n      return hasNonNullableKey(keyState, 'setGridSize');\n    };\n    var Keying = createModes$1({\n      branchKey: 'mode',\n      branches: KeyboardBranches,\n      name: 'keying',\n      active: {\n        events: function (keyingConfig, keyingState) {\n          var handler = keyingConfig.handler;\n          return handler.toEvents(keyingConfig, keyingState);\n        }\n      },\n      apis: {\n        focusIn: function (component, keyConfig, keyState) {\n          keyConfig.sendFocusIn(keyConfig).fold(function () {\n            component.getSystem().triggerFocus(component.element, component.element);\n          }, function (sendFocusIn) {\n            sendFocusIn(component, keyConfig, keyState);\n          });\n        },\n        setGridSize: function (component, keyConfig, keyState, numRows, numColumns) {\n          if (!isFlatgridState(keyState)) {\n            console.error('Layout does not support setGridSize');\n          } else {\n            keyState.setGridSize(numRows, numColumns);\n          }\n        }\n      },\n      state: KeyingState\n    });\n\n    var set$5 = function (component, replaceConfig, replaceState, data) {\n      preserve(function () {\n        var newChildren = map(data, component.getSystem().build);\n        replaceChildren(component, newChildren);\n      }, component.element);\n    };\n    var insert = function (component, replaceConfig, insertion, childSpec) {\n      var child = component.getSystem().build(childSpec);\n      attachWith(component, child, insertion);\n    };\n    var append$2 = function (component, replaceConfig, replaceState, appendee) {\n      insert(component, replaceConfig, append, appendee);\n    };\n    var prepend$1 = function (component, replaceConfig, replaceState, prependee) {\n      insert(component, replaceConfig, prepend, prependee);\n    };\n    var remove$7 = function (component, replaceConfig, replaceState, removee) {\n      var children = contents(component);\n      var foundChild = find(children, function (child) {\n        return eq$1(removee.element, child.element);\n      });\n      foundChild.each(detach);\n    };\n    var contents = function (component, _replaceConfig) {\n      return component.components();\n    };\n    var replaceAt = function (component, replaceConfig, replaceState, replaceeIndex, replacer) {\n      var children = contents(component);\n      return Optional.from(children[replaceeIndex]).map(function (replacee) {\n        remove$7(component, replaceConfig, replaceState, replacee);\n        replacer.each(function (r) {\n          insert(component, replaceConfig, function (p, c) {\n            appendAt(p, c, replaceeIndex);\n          }, r);\n        });\n        return replacee;\n      });\n    };\n    var replaceBy = function (component, replaceConfig, replaceState, replaceePred, replacer) {\n      var children = contents(component);\n      return findIndex(children, replaceePred).bind(function (replaceeIndex) {\n        return replaceAt(component, replaceConfig, replaceState, replaceeIndex, replacer);\n      });\n    };\n\n    var ReplaceApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        append: append$2,\n        prepend: prepend$1,\n        remove: remove$7,\n        replaceAt: replaceAt,\n        replaceBy: replaceBy,\n        set: set$5,\n        contents: contents\n    });\n\n    var Replacing = create$1({\n      fields: [],\n      name: 'replacing',\n      apis: ReplaceApis\n    });\n\n    var events$4 = function (name, eventHandlers) {\n      var events = derive(eventHandlers);\n      return create$1({\n        fields: [strict$1('enabled')],\n        name: name,\n        active: { events: constant(events) }\n      });\n    };\n    var config = function (name, eventHandlers) {\n      var me = events$4(name, eventHandlers);\n      return {\n        key: name,\n        value: {\n          config: {},\n          me: me,\n          configAsRaw: constant({}),\n          initialConfig: {},\n          state: NoState\n        }\n      };\n    };\n\n    var focus$2 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        focus$1(component.element);\n        focusConfig.onFocus(component);\n      }\n    };\n    var blur$1 = function (component, focusConfig) {\n      if (!focusConfig.ignore) {\n        blur(component.element);\n      }\n    };\n    var isFocused = function (component) {\n      return hasFocus(component.element);\n    };\n\n    var FocusApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        focus: focus$2,\n        blur: blur$1,\n        isFocused: isFocused\n    });\n\n    var exhibit$1 = function (base, focusConfig) {\n      var mod = focusConfig.ignore ? {} : { attributes: { tabindex: '-1' } };\n      return nu$6(mod);\n    };\n    var events$5 = function (focusConfig) {\n      return derive([run(focus(), function (component, simulatedEvent) {\n          focus$2(component, focusConfig);\n          simulatedEvent.stop();\n        })].concat(focusConfig.stopMousedown ? [run(mousedown(), function (_, simulatedEvent) {\n          simulatedEvent.event.prevent();\n        })] : []));\n    };\n\n    var ActiveFocus = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$1,\n        events: events$5\n    });\n\n    var FocusSchema = [\n      onHandler('onFocus'),\n      defaulted$1('stopMousedown', false),\n      defaulted$1('ignore', false)\n    ];\n\n    var Focusing = create$1({\n      fields: FocusSchema,\n      name: 'focusing',\n      active: ActiveFocus,\n      apis: FocusApis\n    });\n\n    var SetupBehaviourCellState = function (initialState) {\n      var init = function () {\n        var cell = Cell(initialState);\n        var get = function () {\n          return cell.get();\n        };\n        var set = function (newState) {\n          return cell.set(newState);\n        };\n        var clear = function () {\n          return cell.set(initialState);\n        };\n        var readState = function () {\n          return cell.get();\n        };\n        return {\n          get: get,\n          set: set,\n          clear: clear,\n          readState: readState\n        };\n      };\n      return { init: init };\n    };\n\n    var updateAriaState = function (component, toggleConfig, toggleState) {\n      var ariaInfo = toggleConfig.aria;\n      ariaInfo.update(component, ariaInfo, toggleState.get());\n    };\n    var updateClass = function (component, toggleConfig, toggleState) {\n      toggleConfig.toggleClass.each(function (toggleClass) {\n        if (toggleState.get()) {\n          add$2(component.element, toggleClass);\n        } else {\n          remove$4(component.element, toggleClass);\n        }\n      });\n    };\n    var toggle = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, !toggleState.get());\n    };\n    var on$1 = function (component, toggleConfig, toggleState) {\n      toggleState.set(true);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var off = function (component, toggleConfig, toggleState) {\n      toggleState.set(false);\n      updateClass(component, toggleConfig, toggleState);\n      updateAriaState(component, toggleConfig, toggleState);\n    };\n    var set$6 = function (component, toggleConfig, toggleState, state) {\n      var action = state ? on$1 : off;\n      action(component, toggleConfig, toggleState);\n    };\n    var isOn = function (component, toggleConfig, toggleState) {\n      return toggleState.get();\n    };\n    var onLoad$4 = function (component, toggleConfig, toggleState) {\n      set$6(component, toggleConfig, toggleState, toggleConfig.selected);\n    };\n\n    var ToggleApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        onLoad: onLoad$4,\n        toggle: toggle,\n        isOn: isOn,\n        on: on$1,\n        off: off,\n        set: set$6\n    });\n\n    var exhibit$2 = function () {\n      return nu$6({});\n    };\n    var events$6 = function (toggleConfig, toggleState) {\n      var execute = executeEvent(toggleConfig, toggleState, toggle);\n      var load = loadEvent(toggleConfig, toggleState, onLoad$4);\n      return derive(flatten([\n        toggleConfig.toggleOnExecute ? [execute] : [],\n        [load]\n      ]));\n    };\n\n    var ActiveToggle = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$2,\n        events: events$6\n    });\n\n    var updatePressed = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-pressed', status);\n      if (ariaInfo.syncWithExpanded) {\n        updateExpanded(component, ariaInfo, status);\n      }\n    };\n    var updateSelected = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-selected', status);\n    };\n    var updateChecked = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-checked', status);\n    };\n    var updateExpanded = function (component, ariaInfo, status) {\n      set$1(component.element, 'aria-expanded', status);\n    };\n\n    var ToggleSchema = [\n      defaulted$1('selected', false),\n      option('toggleClass'),\n      defaulted$1('toggleOnExecute', true),\n      defaultedOf('aria', { mode: 'none' }, choose$1('mode', {\n        pressed: [\n          defaulted$1('syncWithExpanded', false),\n          output('update', updatePressed)\n        ],\n        checked: [output('update', updateChecked)],\n        expanded: [output('update', updateExpanded)],\n        selected: [output('update', updateSelected)],\n        none: [output('update', noop)]\n      }))\n    ];\n\n    var Toggling = create$1({\n      fields: ToggleSchema,\n      name: 'toggling',\n      active: ActiveToggle,\n      apis: ToggleApis,\n      state: SetupBehaviourCellState(false)\n    });\n\n    var pointerEvents = function () {\n      var onClick = function (component, simulatedEvent) {\n        simulatedEvent.stop();\n        emitExecute(component);\n      };\n      return [\n        run(click(), onClick),\n        run(tap(), onClick),\n        cutter(touchstart()),\n        cutter(mousedown())\n      ];\n    };\n    var events$7 = function (optAction) {\n      var executeHandler = function (action) {\n        return runOnExecute(function (component, simulatedEvent) {\n          action(component);\n          simulatedEvent.stop();\n        });\n      };\n      return derive(flatten([\n        optAction.map(executeHandler).toArray(),\n        pointerEvents()\n      ]));\n    };\n\n    var hoverEvent = 'alloy.item-hover';\n    var focusEvent = 'alloy.item-focus';\n    var onHover = function (item) {\n      if (search(item.element).isNone() || Focusing.isFocused(item)) {\n        if (!Focusing.isFocused(item)) {\n          Focusing.focus(item);\n        }\n        emitWith(item, hoverEvent, { item: item });\n      }\n    };\n    var onFocus = function (item) {\n      emitWith(item, focusEvent, { item: item });\n    };\n    var hover = constant(hoverEvent);\n    var focus$3 = constant(focusEvent);\n\n    var builder = function (detail) {\n      return {\n        dom: detail.dom,\n        domModification: __assign(__assign({}, detail.domModification), { attributes: __assign(__assign(__assign({ 'role': detail.toggling.isSome() ? 'menuitemcheckbox' : 'menuitem' }, detail.domModification.attributes), { 'aria-haspopup': detail.hasSubmenu }), detail.hasSubmenu ? { 'aria-expanded': false } : {}) }),\n        behaviours: SketchBehaviours.augment(detail.itemBehaviours, [\n          detail.toggling.fold(Toggling.revoke, function (tConfig) {\n            return Toggling.config(__assign({ aria: { mode: 'checked' } }, tConfig));\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            stopMousedown: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({ mode: 'execution' }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          config('item-type-events', __spreadArrays(pointerEvents(), [\n            run(mouseover(), onHover),\n            run(focusItem(), Focusing.focus)\n          ]))\n        ]),\n        components: detail.components,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var schema$a = [\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('hasSubmenu', false),\n      option('toggling'),\n      SketchBehaviours.field('itemBehaviours', [\n        Toggling,\n        Focusing,\n        Keying,\n        Representing\n      ]),\n      defaulted$1('ignoreFocus', false),\n      defaulted$1('domModification', {}),\n      output('builder', builder),\n      defaulted$1('eventOrder', {})\n    ];\n\n    var builder$1 = function (detail) {\n      return {\n        dom: detail.dom,\n        components: detail.components,\n        events: derive([stopper(focusItem())])\n      };\n    };\n    var schema$b = [\n      strict$1('dom'),\n      strict$1('components'),\n      output('builder', builder$1)\n    ];\n\n    var owner$2 = function () {\n      return 'item-widget';\n    };\n    var parts = constant([required({\n        name: 'widget',\n        overrides: function (detail) {\n          return {\n            behaviours: derive$1([Representing.config({\n                store: {\n                  mode: 'manual',\n                  getValue: function (_component) {\n                    return detail.data;\n                  },\n                  setValue: function () {\n                  }\n                }\n              })])\n          };\n        }\n      })]);\n\n    var builder$2 = function (detail) {\n      var subs = substitutes(owner$2(), detail, parts());\n      var components$1 = components(owner$2(), detail, subs.internals());\n      var focusWidget = function (component) {\n        return getPart(component, detail, 'widget').map(function (widget) {\n          Keying.focusIn(widget);\n          return widget;\n        });\n      };\n      var onHorizontalArrow = function (component, simulatedEvent) {\n        return inside(simulatedEvent.event.target) ? Optional.none() : function () {\n          if (detail.autofocus) {\n            simulatedEvent.setSource(component.element);\n            return Optional.none();\n          } else {\n            return Optional.none();\n          }\n        }();\n      };\n      return {\n        dom: detail.dom,\n        components: components$1,\n        domModification: detail.domModification,\n        events: derive([\n          runOnExecute(function (component, simulatedEvent) {\n            focusWidget(component).each(function (_widget) {\n              simulatedEvent.stop();\n            });\n          }),\n          run(mouseover(), onHover),\n          run(focusItem(), function (component, _simulatedEvent) {\n            if (detail.autofocus) {\n              focusWidget(component);\n            } else {\n              Focusing.focus(component);\n            }\n          })\n        ]),\n        behaviours: SketchBehaviours.augment(detail.widgetBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.data\n            }\n          }),\n          Focusing.config({\n            ignore: detail.ignoreFocus,\n            onFocus: function (component) {\n              onFocus(component);\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            focusIn: detail.autofocus ? function (component) {\n              focusWidget(component);\n            } : revoke(),\n            onLeft: onHorizontalArrow,\n            onRight: onHorizontalArrow,\n            onEscape: function (component, simulatedEvent) {\n              if (!Focusing.isFocused(component) && !detail.autofocus) {\n                Focusing.focus(component);\n                return Optional.some(true);\n              } else if (detail.autofocus) {\n                simulatedEvent.setSource(component.element);\n                return Optional.none();\n              } else {\n                return Optional.none();\n              }\n            }\n          })\n        ])\n      };\n    };\n    var schema$c = [\n      strict$1('uid'),\n      strict$1('data'),\n      strict$1('components'),\n      strict$1('dom'),\n      defaulted$1('autofocus', false),\n      defaulted$1('ignoreFocus', false),\n      SketchBehaviours.field('widgetBehaviours', [\n        Representing,\n        Focusing,\n        Keying\n      ]),\n      defaulted$1('domModification', {}),\n      defaultUidsSchema(parts()),\n      output('builder', builder$2)\n    ];\n\n    var itemSchema$1 = choose$1('type', {\n      widget: schema$c,\n      item: schema$a,\n      separator: schema$b\n    });\n    var configureGrid = function (detail, movementInfo) {\n      return {\n        mode: 'flatgrid',\n        selector: '.' + detail.markers.item,\n        initSize: {\n          numColumns: movementInfo.initSize.numColumns,\n          numRows: movementInfo.initSize.numRows\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMatrix = function (detail, movementInfo) {\n      return {\n        mode: 'matrix',\n        selectors: {\n          row: movementInfo.rowSelector,\n          cell: '.' + detail.markers.item\n        },\n        focusManager: detail.focusManager\n      };\n    };\n    var configureMenu = function (detail, movementInfo) {\n      return {\n        mode: 'menu',\n        selector: '.' + detail.markers.item,\n        moveOnTab: movementInfo.moveOnTab,\n        focusManager: detail.focusManager\n      };\n    };\n    var parts$1 = constant([group({\n        factory: {\n          sketch: function (spec) {\n            var itemInfo = asRawOrDie('menu.spec item', itemSchema$1, spec);\n            return itemInfo.builder(itemInfo);\n          }\n        },\n        name: 'items',\n        unit: 'item',\n        defaults: function (detail, u) {\n          return u.hasOwnProperty('uid') ? u : __assign(__assign({}, u), { uid: generate$2('item') });\n        },\n        overrides: function (detail, u) {\n          return {\n            type: u.type,\n            ignoreFocus: detail.fakeFocus,\n            domModification: { classes: [detail.markers.item] }\n          };\n        }\n      })]);\n    var schema$d = constant([\n      strict$1('value'),\n      strict$1('items'),\n      strict$1('dom'),\n      strict$1('components'),\n      defaulted$1('eventOrder', {}),\n      field$1('menuBehaviours', [\n        Highlighting,\n        Representing,\n        Composing,\n        Keying\n      ]),\n      defaultedOf('movement', {\n        mode: 'menu',\n        moveOnTab: true\n      }, choose$1('mode', {\n        grid: [\n          initSize(),\n          output('config', configureGrid)\n        ],\n        matrix: [\n          output('config', configureMatrix),\n          strict$1('rowSelector')\n        ],\n        menu: [\n          defaulted$1('moveOnTab', true),\n          output('config', configureMenu)\n        ]\n      })),\n      itemMarkers(),\n      defaulted$1('fakeFocus', false),\n      defaulted$1('focusManager', dom()),\n      onHandler('onHighlight')\n    ]);\n\n    var focus$4 = constant('alloy.menu-focus');\n\n    var make$1 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.menuBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedItem,\n            itemClass: detail.markers.item,\n            onHighlight: detail.onHighlight\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          }),\n          Composing.config({ find: Optional.some }),\n          Keying.config(detail.movement.config(detail, detail.movement))\n        ]),\n        events: derive([\n          run(focus$3(), function (menu, simulatedEvent) {\n            var event = simulatedEvent.event;\n            menu.getSystem().getByDom(event.target).each(function (item) {\n              Highlighting.highlight(menu, item);\n              simulatedEvent.stop();\n              emitWith(menu, focus$4(), {\n                menu: menu,\n                item: item\n              });\n            });\n          }),\n          run(hover(), function (menu, simulatedEvent) {\n            var item = simulatedEvent.event.item;\n            Highlighting.highlight(menu, item);\n          })\n        ]),\n        components: components,\n        eventOrder: detail.eventOrder,\n        domModification: { attributes: { role: 'menu' } }\n      };\n    };\n\n    var Menu = composite$1({\n      name: 'Menu',\n      configFields: schema$d(),\n      partFields: parts$1(),\n      factory: make$1\n    });\n\n    var transpose = function (obj) {\n      return tupleMap(obj, function (v, k) {\n        return {\n          k: v,\n          v: k\n        };\n      });\n    };\n    var trace = function (items, byItem, byMenu, finish) {\n      return get$1(byMenu, finish).bind(function (triggerItem) {\n        return get$1(items, triggerItem).bind(function (triggerMenu) {\n          var rest = trace(items, byItem, byMenu, triggerMenu);\n          return Optional.some([triggerMenu].concat(rest));\n        });\n      }).getOr([]);\n    };\n    var generate$5 = function (menus, expansions) {\n      var items = {};\n      each$1(menus, function (menuItems, menu) {\n        each(menuItems, function (item) {\n          items[item] = menu;\n        });\n      });\n      var byItem = expansions;\n      var byMenu = transpose(expansions);\n      var menuPaths = map$2(byMenu, function (_triggerItem, submenu) {\n        return [submenu].concat(trace(items, byItem, byMenu, submenu));\n      });\n      return map$2(items, function (menu) {\n        return get$1(menuPaths, menu).getOr([menu]);\n      });\n    };\n\n    var init$3 = function () {\n      var expansions = Cell({});\n      var menus = Cell({});\n      var paths = Cell({});\n      var primary = Cell(Optional.none());\n      var directory = Cell({});\n      var clear = function () {\n        expansions.set({});\n        menus.set({});\n        paths.set({});\n        primary.set(Optional.none());\n      };\n      var isClear = function () {\n        return primary.get().isNone();\n      };\n      var setMenuBuilt = function (menuName, built) {\n        var _a;\n        menus.set(__assign(__assign({}, menus.get()), (_a = {}, _a[menuName] = {\n          type: 'prepared',\n          menu: built\n        }, _a)));\n      };\n      var setContents = function (sPrimary, sMenus, sExpansions, dir) {\n        primary.set(Optional.some(sPrimary));\n        expansions.set(sExpansions);\n        menus.set(sMenus);\n        directory.set(dir);\n        var sPaths = generate$5(dir, sExpansions);\n        paths.set(sPaths);\n      };\n      var getTriggeringItem = function (menuValue) {\n        return find$1(expansions.get(), function (v, _k) {\n          return v === menuValue;\n        });\n      };\n      var getTriggerData = function (menuValue, getItemByValue, path) {\n        return getPreparedMenu(menuValue).bind(function (menu) {\n          return getTriggeringItem(menuValue).bind(function (triggeringItemValue) {\n            return getItemByValue(triggeringItemValue).map(function (triggeredItem) {\n              return {\n                triggeredMenu: menu,\n                triggeringItem: triggeredItem,\n                triggeringPath: path\n              };\n            });\n          });\n        });\n      };\n      var getTriggeringPath = function (itemValue, getItemByValue) {\n        var extraPath = filter(lookupItem(itemValue).toArray(), function (menuValue) {\n          return getPreparedMenu(menuValue).isSome();\n        });\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          var revPath = reverse(extraPath.concat(path));\n          var triggers = bind(revPath, function (menuValue, menuIndex) {\n            return getTriggerData(menuValue, getItemByValue, revPath.slice(0, menuIndex + 1)).fold(function () {\n              return primary.get().is(menuValue) ? [] : [Optional.none()];\n            }, function (data) {\n              return [Optional.some(data)];\n            });\n          });\n          return sequence(triggers);\n        });\n      };\n      var expand = function (itemValue) {\n        return get$1(expansions.get(), itemValue).map(function (menu) {\n          var current = get$1(paths.get(), itemValue).getOr([]);\n          return [menu].concat(current);\n        });\n      };\n      var collapse = function (itemValue) {\n        return get$1(paths.get(), itemValue).bind(function (path) {\n          return path.length > 1 ? Optional.some(path.slice(1)) : Optional.none();\n        });\n      };\n      var refresh = function (itemValue) {\n        return get$1(paths.get(), itemValue);\n      };\n      var getPreparedMenu = function (menuValue) {\n        return lookupMenu(menuValue).bind(extractPreparedMenu);\n      };\n      var lookupMenu = function (menuValue) {\n        return get$1(menus.get(), menuValue);\n      };\n      var lookupItem = function (itemValue) {\n        return get$1(expansions.get(), itemValue);\n      };\n      var otherMenus = function (path) {\n        var menuValues = directory.get();\n        return difference(keys(menuValues), path);\n      };\n      var getPrimary = function () {\n        return primary.get().bind(getPreparedMenu);\n      };\n      var getMenus = function () {\n        return menus.get();\n      };\n      return {\n        setMenuBuilt: setMenuBuilt,\n        setContents: setContents,\n        expand: expand,\n        refresh: refresh,\n        collapse: collapse,\n        lookupMenu: lookupMenu,\n        lookupItem: lookupItem,\n        otherMenus: otherMenus,\n        getPrimary: getPrimary,\n        getMenus: getMenus,\n        clear: clear,\n        isClear: isClear,\n        getTriggeringPath: getTriggeringPath\n      };\n    };\n    var extractPreparedMenu = function (prep) {\n      return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n    };\n    var LayeredState = {\n      init: init$3,\n      extractPreparedMenu: extractPreparedMenu\n    };\n\n    var make$2 = function (detail, _rawUiSpec) {\n      var submenuParentItems = Cell(Optional.none());\n      var buildMenus = function (container, primaryName, menus) {\n        return map$2(menus, function (spec, name) {\n          var makeSketch = function () {\n            return Menu.sketch(__assign(__assign({}, spec), {\n              value: name,\n              markers: detail.markers,\n              fakeFocus: detail.fakeFocus,\n              onHighlight: detail.onHighlight,\n              focusManager: detail.fakeFocus ? highlights() : dom()\n            }));\n          };\n          return name === primaryName ? {\n            type: 'prepared',\n            menu: container.getSystem().build(makeSketch())\n          } : {\n            type: 'notbuilt',\n            nbMenu: makeSketch\n          };\n        });\n      };\n      var layeredState = LayeredState.init();\n      var setup = function (container) {\n        var componentMap = buildMenus(container, detail.data.primary, detail.data.menus);\n        var directory = toDirectory();\n        layeredState.setContents(detail.data.primary, componentMap, detail.data.expansions, directory);\n        return layeredState.getPrimary();\n      };\n      var getItemValue = function (item) {\n        return Representing.getValue(item).value;\n      };\n      var getItemByValue = function (_container, menus, itemValue) {\n        return findMap(menus, function (menu) {\n          if (!menu.getSystem().isConnected()) {\n            return Optional.none();\n          }\n          var candidates = Highlighting.getCandidates(menu);\n          return find(candidates, function (c) {\n            return getItemValue(c) === itemValue;\n          });\n        });\n      };\n      var toDirectory = function (_container) {\n        return map$2(detail.data.menus, function (data, _menuName) {\n          return bind(data.items, function (item) {\n            return item.type === 'separator' ? [] : [item.data.value];\n          });\n        });\n      };\n      var setActiveMenu = function (container, menu) {\n        Highlighting.highlight(container, menu);\n        Highlighting.getHighlighted(menu).orThunk(function () {\n          return Highlighting.getFirst(menu);\n        }).each(function (item) {\n          dispatch(container, item.element, focusItem());\n        });\n      };\n      var getMenus = function (state, menuValues) {\n        return cat(map(menuValues, function (mv) {\n          return state.lookupMenu(mv).bind(function (prep) {\n            return prep.type === 'prepared' ? Optional.some(prep.menu) : Optional.none();\n          });\n        }));\n      };\n      var closeOthers = function (container, state, path) {\n        var others = getMenus(state, state.otherMenus(path));\n        each(others, function (o) {\n          remove$5(o.element, [detail.markers.backgroundMenu]);\n          if (!detail.stayInDom) {\n            Replacing.remove(container, o);\n          }\n        });\n      };\n      var getSubmenuParents = function (container) {\n        return submenuParentItems.get().getOrThunk(function () {\n          var r = {};\n          var items = descendants(container.element, '.' + detail.markers.item);\n          var parentItems = filter(items, function (i) {\n            return get$3(i, 'aria-haspopup') === 'true';\n          });\n          each(parentItems, function (i) {\n            container.getSystem().getByDom(i).each(function (itemComp) {\n              var key = getItemValue(itemComp);\n              r[key] = itemComp;\n            });\n          });\n          submenuParentItems.set(Optional.some(r));\n          return r;\n        });\n      };\n      var updateAriaExpansions = function (container, path) {\n        var parentItems = getSubmenuParents(container);\n        each$1(parentItems, function (v, k) {\n          var expanded = contains(path, k);\n          set$1(v.element, 'aria-expanded', expanded);\n        });\n      };\n      var updateMenuPath = function (container, state, path) {\n        return Optional.from(path[0]).bind(function (latestMenuName) {\n          return state.lookupMenu(latestMenuName).bind(function (menuPrep) {\n            if (menuPrep.type === 'notbuilt') {\n              return Optional.none();\n            } else {\n              var activeMenu = menuPrep.menu;\n              var rest = getMenus(state, path.slice(1));\n              each(rest, function (r) {\n                add$2(r.element, detail.markers.backgroundMenu);\n              });\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              remove$5(activeMenu.element, [detail.markers.backgroundMenu]);\n              setActiveMenu(container, activeMenu);\n              closeOthers(container, state, path);\n              return Optional.some(activeMenu);\n            }\n          });\n        });\n      };\n      var ExpandHighlightDecision;\n      (function (ExpandHighlightDecision) {\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightSubmenu'] = 0] = 'HighlightSubmenu';\n        ExpandHighlightDecision[ExpandHighlightDecision['HighlightParent'] = 1] = 'HighlightParent';\n      }(ExpandHighlightDecision || (ExpandHighlightDecision = {})));\n      var buildIfRequired = function (container, menuName, menuPrep) {\n        if (menuPrep.type === 'notbuilt') {\n          var menu = container.getSystem().build(menuPrep.nbMenu());\n          layeredState.setMenuBuilt(menuName, menu);\n          return menu;\n        } else {\n          return menuPrep.menu;\n        }\n      };\n      var expandRight = function (container, item, decision) {\n        if (decision === void 0) {\n          decision = ExpandHighlightDecision.HighlightSubmenu;\n        }\n        var value = getItemValue(item);\n        return layeredState.expand(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return Optional.from(path[0]).bind(function (menuName) {\n            return layeredState.lookupMenu(menuName).bind(function (activeMenuPrep) {\n              var activeMenu = buildIfRequired(container, menuName, activeMenuPrep);\n              if (!inBody(activeMenu.element)) {\n                Replacing.append(container, premade$1(activeMenu));\n              }\n              detail.onOpenSubmenu(container, item, activeMenu, reverse(path));\n              if (decision === ExpandHighlightDecision.HighlightSubmenu) {\n                Highlighting.highlightFirst(activeMenu);\n                return updateMenuPath(container, layeredState, path);\n              } else {\n                Highlighting.dehighlightAll(activeMenu);\n                return Optional.some(item);\n              }\n            });\n          });\n        });\n      };\n      var collapseLeft = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.collapse(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path).map(function (activeMenu) {\n            detail.onCollapseMenu(container, item, activeMenu);\n            return activeMenu;\n          });\n        });\n      };\n      var updateView = function (container, item) {\n        var value = getItemValue(item);\n        return layeredState.refresh(value).bind(function (path) {\n          updateAriaExpansions(container, path);\n          return updateMenuPath(container, layeredState, path);\n        });\n      };\n      var onRight = function (container, item) {\n        return inside(item.element) ? Optional.none() : expandRight(container, item, ExpandHighlightDecision.HighlightSubmenu);\n      };\n      var onLeft = function (container, item) {\n        return inside(item.element) ? Optional.none() : collapseLeft(container, item);\n      };\n      var onEscape = function (container, item) {\n        return collapseLeft(container, item).orThunk(function () {\n          return detail.onEscape(container, item).map(function () {\n            return container;\n          });\n        });\n      };\n      var keyOnItem = function (f) {\n        return function (container, simulatedEvent) {\n          return closest$3(simulatedEvent.getSource(), '.' + detail.markers.item).bind(function (target) {\n            return container.getSystem().getByDom(target).toOptional().bind(function (item) {\n              return f(container, item).map(function () {\n                return true;\n              });\n            });\n          });\n        };\n      };\n      var events = derive([\n        run(focus$4(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          layeredState.lookupItem(getItemValue(item)).each(function () {\n            var menu = simulatedEvent.event.menu;\n            Highlighting.highlight(sandbox, menu);\n            var value = getItemValue(simulatedEvent.event.item);\n            layeredState.refresh(value).each(function (path) {\n              return closeOthers(sandbox, layeredState, path);\n            });\n          });\n        }),\n        runOnExecute(function (component, simulatedEvent) {\n          var target = simulatedEvent.event.target;\n          component.getSystem().getByDom(target).each(function (item) {\n            var itemValue = getItemValue(item);\n            if (itemValue.indexOf('collapse-item') === 0) {\n              collapseLeft(component, item);\n            }\n            expandRight(component, item, ExpandHighlightDecision.HighlightSubmenu).fold(function () {\n              detail.onExecute(component, item);\n            }, function () {\n            });\n          });\n        }),\n        runOnAttached(function (container, _simulatedEvent) {\n          setup(container).each(function (primary) {\n            Replacing.append(container, premade$1(primary));\n            detail.onOpenMenu(container, primary);\n            if (detail.highlightImmediately) {\n              setActiveMenu(container, primary);\n            }\n          });\n        })\n      ].concat(detail.navigateOnHover ? [run(hover(), function (sandbox, simulatedEvent) {\n          var item = simulatedEvent.event.item;\n          updateView(sandbox, item);\n          expandRight(sandbox, item, ExpandHighlightDecision.HighlightParent);\n          detail.onHover(sandbox, item);\n        })] : []));\n      var getActiveItem = function (container) {\n        return Highlighting.getHighlighted(container).bind(Highlighting.getHighlighted);\n      };\n      var collapseMenuApi = function (container) {\n        getActiveItem(container).each(function (currentItem) {\n          collapseLeft(container, currentItem);\n        });\n      };\n      var highlightPrimary = function (container) {\n        layeredState.getPrimary().each(function (primary) {\n          setActiveMenu(container, primary);\n        });\n      };\n      var extractMenuFromContainer = function (container) {\n        return Optional.from(container.components()[0]).filter(function (comp) {\n          return get$3(comp.element, 'role') === 'menu';\n        });\n      };\n      var repositionMenus = function (container) {\n        var maybeActivePrimary = layeredState.getPrimary().bind(function (primary) {\n          return getActiveItem(container).bind(function (currentItem) {\n            var itemValue = getItemValue(currentItem);\n            var allMenus = values(layeredState.getMenus());\n            var preparedMenus = cat(map(allMenus, LayeredState.extractPreparedMenu));\n            return layeredState.getTriggeringPath(itemValue, function (v) {\n              return getItemByValue(container, preparedMenus, v);\n            });\n          }).map(function (triggeringPath) {\n            return {\n              primary: primary,\n              triggeringPath: triggeringPath\n            };\n          });\n        });\n        maybeActivePrimary.fold(function () {\n          extractMenuFromContainer(container).each(function (primaryMenu) {\n            detail.onRepositionMenu(container, primaryMenu, []);\n          });\n        }, function (_a) {\n          var primary = _a.primary, triggeringPath = _a.triggeringPath;\n          detail.onRepositionMenu(container, primary, triggeringPath);\n        });\n      };\n      var apis = {\n        collapseMenu: collapseMenuApi,\n        highlightPrimary: highlightPrimary,\n        repositionMenus: repositionMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        markers: detail.markers,\n        behaviours: augment(detail.tmenuBehaviours, [\n          Keying.config({\n            mode: 'special',\n            onRight: keyOnItem(onRight),\n            onLeft: keyOnItem(onLeft),\n            onEscape: keyOnItem(onEscape),\n            focusIn: function (container, _keyInfo) {\n              layeredState.getPrimary().each(function (primary) {\n                dispatch(container, primary.element, focusItem());\n              });\n            }\n          }),\n          Highlighting.config({\n            highlightClass: detail.markers.selectedMenu,\n            itemClass: detail.markers.menu\n          }),\n          Composing.config({\n            find: function (container) {\n              return Highlighting.getHighlighted(container);\n            }\n          }),\n          Replacing.config({})\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis,\n        events: events\n      };\n    };\n    var collapseItem = constant('collapse-item');\n\n    var tieredData = function (primary, menus, expansions) {\n      return {\n        primary: primary,\n        menus: menus,\n        expansions: expansions\n      };\n    };\n    var singleData = function (name, menu) {\n      return {\n        primary: name,\n        menus: wrap$1(name, menu),\n        expansions: {}\n      };\n    };\n    var collapseItem$1 = function (text) {\n      return {\n        value: generate$1(collapseItem()),\n        meta: { text: text }\n      };\n    };\n    var tieredMenu = single$2({\n      name: 'TieredMenu',\n      configFields: [\n        onStrictKeyboardHandler('onExecute'),\n        onStrictKeyboardHandler('onEscape'),\n        onStrictHandler('onOpenMenu'),\n        onStrictHandler('onOpenSubmenu'),\n        onHandler('onRepositionMenu'),\n        onHandler('onCollapseMenu'),\n        defaulted$1('highlightImmediately', true),\n        strictObjOf('data', [\n          strict$1('primary'),\n          strict$1('menus'),\n          strict$1('expansions')\n        ]),\n        defaulted$1('fakeFocus', false),\n        onHandler('onHighlight'),\n        onHandler('onHover'),\n        tieredMenuMarkers(),\n        strict$1('dom'),\n        defaulted$1('navigateOnHover', true),\n        defaulted$1('stayInDom', false),\n        field$1('tmenuBehaviours', [\n          Keying,\n          Highlighting,\n          Composing,\n          Replacing\n        ]),\n        defaulted$1('eventOrder', {})\n      ],\n      apis: {\n        collapseMenu: function (apis, tmenu) {\n          apis.collapseMenu(tmenu);\n        },\n        highlightPrimary: function (apis, tmenu) {\n          apis.highlightPrimary(tmenu);\n        },\n        repositionMenus: function (apis, tmenu) {\n          apis.repositionMenus(tmenu);\n        }\n      },\n      factory: make$2,\n      extraApis: {\n        tieredData: tieredData,\n        singleData: singleData,\n        collapseItem: collapseItem$1\n      }\n    });\n\n    var makeMenu = function (detail, menuSandbox, anchor, menuSpec, getBounds) {\n      var lazySink = function () {\n        return detail.lazySink(menuSandbox);\n      };\n      var layouts = menuSpec.type === 'horizontal' ? {\n        layouts: {\n          onLtr: function () {\n            return belowOrAbove();\n          },\n          onRtl: function () {\n            return belowOrAboveRtl();\n          }\n        }\n      } : {};\n      var isFirstTierSubmenu = function (triggeringPaths) {\n        return triggeringPaths.length === 2;\n      };\n      var getSubmenuLayouts = function (triggeringPaths) {\n        return isFirstTierSubmenu(triggeringPaths) ? layouts : {};\n      };\n      return tieredMenu.sketch({\n        dom: { tag: 'div' },\n        data: menuSpec.data,\n        markers: menuSpec.menu.markers,\n        highlightImmediately: menuSpec.menu.highlightImmediately,\n        onEscape: function () {\n          Sandboxing.close(menuSandbox);\n          detail.onEscape.map(function (handler) {\n            return handler(menuSandbox);\n          });\n          return Optional.some(true);\n        },\n        onExecute: function () {\n          return Optional.some(true);\n        },\n        onOpenMenu: function (tmenu, menu) {\n          Positioning.positionWithinBounds(lazySink().getOrDie(), anchor, menu, getBounds());\n        },\n        onOpenSubmenu: function (tmenu, item, submenu, triggeringPaths) {\n          var sink = lazySink().getOrDie();\n          Positioning.position(sink, __assign({\n            anchor: 'submenu',\n            item: item\n          }, getSubmenuLayouts(triggeringPaths)), submenu);\n        },\n        onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n          var sink = lazySink().getOrDie();\n          Positioning.positionWithinBounds(sink, anchor, primaryMenu, getBounds());\n          each(submenuTriggers, function (st) {\n            var submenuLayouts = getSubmenuLayouts(st.triggeringPath);\n            Positioning.position(sink, __assign({\n              anchor: 'submenu',\n              item: st.triggeringItem\n            }, submenuLayouts), st.triggeredMenu);\n          });\n        }\n      });\n    };\n    var factory = function (detail, spec) {\n      var isPartOfRelated = function (sandbox, queryElem) {\n        var related = detail.getRelated(sandbox);\n        return related.exists(function (rel) {\n          return isPartOf(rel, queryElem);\n        });\n      };\n      var setContent = function (sandbox, thing) {\n        Sandboxing.setContent(sandbox, thing);\n      };\n      var showAt = function (sandbox, anchor, thing) {\n        showWithin(sandbox, anchor, thing, Optional.none());\n      };\n      var showWithin = function (sandbox, anchor, thing, boxElement) {\n        showWithinBounds(sandbox, anchor, thing, function () {\n          return boxElement.map(function (elem) {\n            return box(elem);\n          });\n        });\n      };\n      var showWithinBounds = function (sandbox, anchor, thing, getBounds) {\n        var sink = detail.lazySink(sandbox).getOrDie();\n        Sandboxing.openWhileCloaked(sandbox, thing, function () {\n          return Positioning.positionWithinBounds(sink, anchor, sandbox, getBounds());\n        });\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'position',\n          anchor: anchor,\n          getBounds: getBounds\n        }));\n      };\n      var showMenuAt = function (sandbox, anchor, menuSpec) {\n        showMenuWithinBounds(sandbox, anchor, menuSpec, function () {\n          return Optional.none();\n        });\n      };\n      var showMenuWithinBounds = function (sandbox, anchor, menuSpec, getBounds) {\n        var menu = makeMenu(detail, sandbox, anchor, menuSpec, getBounds);\n        Sandboxing.open(sandbox, menu);\n        Representing.setValue(sandbox, Optional.some({\n          mode: 'menu',\n          menu: menu\n        }));\n      };\n      var hide = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.setValue(sandbox, Optional.none());\n          Sandboxing.close(sandbox);\n        }\n      };\n      var getContent = function (sandbox) {\n        return Sandboxing.getState(sandbox);\n      };\n      var reposition = function (sandbox) {\n        if (Sandboxing.isOpen(sandbox)) {\n          Representing.getValue(sandbox).each(function (state) {\n            switch (state.mode) {\n            case 'menu':\n              Sandboxing.getState(sandbox).each(function (tmenu) {\n                tieredMenu.repositionMenus(tmenu);\n              });\n              break;\n            case 'position':\n              var sink = detail.lazySink(sandbox).getOrDie();\n              Positioning.positionWithinBounds(sink, state.anchor, sandbox, state.getBounds());\n              break;\n            }\n          });\n        }\n      };\n      var apis = {\n        setContent: setContent,\n        showAt: showAt,\n        showWithin: showWithin,\n        showWithinBounds: showWithinBounds,\n        showMenuAt: showMenuAt,\n        showMenuWithinBounds: showMenuWithinBounds,\n        hide: hide,\n        getContent: getContent,\n        reposition: reposition,\n        isOpen: Sandboxing.isOpen\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.inlineBehaviours, [\n          Sandboxing.config({\n            isPartOf: function (sandbox, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOfRelated(sandbox, queryElem);\n            },\n            getAttachPoint: function (sandbox) {\n              return detail.lazySink(sandbox).getOrDie();\n            },\n            onOpen: function (sandbox) {\n              detail.onShow(sandbox);\n            },\n            onClose: function (sandbox) {\n              detail.onHide(sandbox);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: Optional.none()\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: spec.isExtraPart }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1(__assign(__assign({}, detail.fireRepositionEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})), { doReposition: reposition })))\n          })\n        ]),\n        eventOrder: detail.eventOrder,\n        apis: apis\n      };\n    };\n    var InlineView = single$2({\n      name: 'InlineView',\n      configFields: [\n        strict$1('lazySink'),\n        onHandler('onShow'),\n        onHandler('onHide'),\n        optionFunction('onEscape'),\n        field$1('inlineBehaviours', [\n          Sandboxing,\n          Representing,\n          Receiving\n        ]),\n        optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n        optionObjOf('fireRepositionEventInstead', [defaulted$1('event', repositionRequested())]),\n        defaulted$1('getRelated', Optional.none),\n        defaulted$1('isExtraPart', never),\n        defaulted$1('eventOrder', Optional.none)\n      ],\n      factory: factory,\n      apis: {\n        showAt: function (apis, component, anchor, thing) {\n          apis.showAt(component, anchor, thing);\n        },\n        showWithin: function (apis, component, anchor, thing, boxElement) {\n          apis.showWithin(component, anchor, thing, boxElement);\n        },\n        showWithinBounds: function (apis, component, anchor, thing, bounds) {\n          apis.showWithinBounds(component, anchor, thing, bounds);\n        },\n        showMenuAt: function (apis, component, anchor, menuSpec) {\n          apis.showMenuAt(component, anchor, menuSpec);\n        },\n        showMenuWithinBounds: function (apis, component, anchor, menuSpec, bounds) {\n          apis.showMenuWithinBounds(component, anchor, menuSpec, bounds);\n        },\n        hide: function (apis, component) {\n          apis.hide(component);\n        },\n        isOpen: function (apis, component) {\n          return apis.isOpen(component);\n        },\n        getContent: function (apis, component) {\n          return apis.getContent(component);\n        },\n        setContent: function (apis, component, thing) {\n          apis.setContent(component, thing);\n        },\n        reposition: function (apis, component) {\n          apis.reposition(component);\n        }\n      }\n    });\n\n    var westEdgeX$1 = function (anchor) {\n      return anchor.x;\n    };\n    var middleX$1 = function (anchor, element) {\n      return anchor.x + anchor.width / 2 - element.width / 2;\n    };\n    var eastEdgeX$1 = function (anchor, element) {\n      return anchor.x + anchor.width - element.width;\n    };\n    var northY$2 = function (anchor) {\n      return anchor.y;\n    };\n    var southY$2 = function (anchor, element) {\n      return anchor.y + anchor.height - element.height;\n    };\n    var southeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), southY$2(anchor, element), bubbles.innerSoutheast(), northwest(), boundsRestriction(anchor, {\n        right: 0,\n        bottom: 3\n      }), 'layout-inner-se');\n    };\n    var southwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), southY$2(anchor, element), bubbles.innerSouthwest(), northeast(), boundsRestriction(anchor, {\n        left: 1,\n        bottom: 3\n      }), 'layout-inner-sw');\n    };\n    var northeast$3 = function (anchor, element, bubbles) {\n      return nu$7(eastEdgeX$1(anchor, element), northY$2(anchor), bubbles.innerNortheast(), southwest(), boundsRestriction(anchor, {\n        right: 0,\n        top: 2\n      }), 'layout-inner-ne');\n    };\n    var northwest$3 = function (anchor, element, bubbles) {\n      return nu$7(westEdgeX$1(anchor), northY$2(anchor), bubbles.innerNorthwest(), southeast(), boundsRestriction(anchor, {\n        left: 1,\n        top: 2\n      }), 'layout-inner-nw');\n    };\n    var north$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), northY$2(anchor), bubbles.innerNorth(), south(), boundsRestriction(anchor, { top: 2 }), 'layout-inner-n');\n    };\n    var south$3 = function (anchor, element, bubbles) {\n      return nu$7(middleX$1(anchor, element), southY$2(anchor, element), bubbles.innerSouth(), north(), boundsRestriction(anchor, { bottom: 3 }), 'layout-inner-s');\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var factory$1 = function (detail) {\n      var events = events$7(detail.action);\n      var tag = detail.dom.tag;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var getModAttributes = function () {\n        if (tag === 'button') {\n          var type = lookupAttr('type').getOr('button');\n          var roleAttrs = lookupAttr('role').map(function (role) {\n            return { role: role };\n          }).getOr({});\n          return __assign({ type: type }, roleAttrs);\n        } else {\n          var role = lookupAttr('role').getOr('button');\n          return { role: role };\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events,\n        behaviours: SketchBehaviours.augment(detail.buttonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          })\n        ]),\n        domModification: { attributes: getModAttributes() },\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Button = single$2({\n      name: 'Button',\n      factory: factory$1,\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('dom'),\n        defaulted$1('components', []),\n        SketchBehaviours.field('buttonBehaviours', [\n          Focusing,\n          Keying\n        ]),\n        option('action'),\n        option('role'),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var record = function (spec) {\n      var uid = isSketchSpec(spec) && hasNonNullableKey(spec, 'uid') ? spec.uid : generate$2('memento');\n      var get = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).getOrDie();\n      };\n      var getOpt = function (anyInSystem) {\n        return anyInSystem.getSystem().getByUid(uid).toOptional();\n      };\n      var asSpec = function () {\n        return __assign(__assign({}, spec), { uid: uid });\n      };\n      return {\n        get: get,\n        getOpt: getOpt,\n        asSpec: asSpec\n      };\n    };\n\n    var defaultIcon = function (icons) {\n      return Optional.from(icons()['temporary-placeholder']).getOr('!not found!');\n    };\n    var get$e = function (name, icons) {\n      return Optional.from(icons()[name.toLowerCase()]).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getOr = function (name, icons, fallback) {\n      return Optional.from(icons()[name.toLowerCase()]).or(fallback).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n    var getFirst$1 = function (names, icons) {\n      return findMap(names, function (name) {\n        return Optional.from(icons()[name.toLowerCase()]);\n      }).getOrThunk(function () {\n        return defaultIcon(icons);\n      });\n    };\n\n    var notificationIconMap = {\n      success: 'checkmark',\n      error: 'warning',\n      err: 'error',\n      warning: 'warning',\n      warn: 'warning',\n      info: 'info'\n    };\n    var factory$2 = function (detail) {\n      var memBannerText = record({\n        dom: {\n          tag: 'p',\n          innerHtml: detail.translationProvider(detail.text)\n        },\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var renderPercentBar = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-bar'],\n            attributes: { style: 'width: ' + percent + '%' }\n          }\n        };\n      };\n      var renderPercentText = function (percent) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-text'],\n            innerHtml: percent + '%'\n          }\n        };\n      };\n      var memBannerProgress = record({\n        dom: {\n          tag: 'div',\n          classes: detail.progress ? [\n            'tox-progress-bar',\n            'tox-progress-indicator'\n          ] : ['tox-progress-bar']\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-bar-container']\n            },\n            components: [renderPercentBar(0)]\n          },\n          renderPercentText(0)\n        ],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      var updateProgress = function (comp, percent) {\n        if (comp.getSystem().isConnected()) {\n          memBannerProgress.getOpt(comp).each(function (progress) {\n            Replacing.set(progress, [\n              {\n                dom: {\n                  tag: 'div',\n                  classes: ['tox-bar-container']\n                },\n                components: [renderPercentBar(percent)]\n              },\n              renderPercentText(percent)\n            ]);\n          });\n        }\n      };\n      var updateText = function (comp, text$1) {\n        if (comp.getSystem().isConnected()) {\n          var banner = memBannerText.get(comp);\n          Replacing.set(banner, [text(text$1)]);\n        }\n      };\n      var apis = {\n        updateProgress: updateProgress,\n        updateText: updateText\n      };\n      var iconChoices = flatten([\n        detail.icon.toArray(),\n        detail.level.toArray(),\n        detail.level.bind(function (level) {\n          return Optional.from(notificationIconMap[level]);\n        }).toArray()\n      ]);\n      var memButton = record(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-notification__dismiss',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', detail.iconProvider),\n              attributes: { 'aria-label': detail.translationProvider('Close') }\n            }\n          }],\n        action: function (comp) {\n          detail.onAction(comp);\n        }\n      }));\n      var components = [\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__icon'],\n            innerHtml: getFirst$1(iconChoices, detail.iconProvider)\n          }\n        },\n        {\n          dom: {\n            tag: 'div',\n            classes: ['tox-notification__body']\n          },\n          components: [memBannerText.asSpec()],\n          behaviours: derive$1([Replacing.config({})])\n        }\n      ];\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: detail.level.map(function (level) {\n            return [\n              'tox-notification',\n              'tox-notification--in',\n              'tox-notification--' + level\n            ];\n          }).getOr([\n            'tox-notification',\n            'tox-notification--in'\n          ])\n        },\n        behaviours: derive$1([\n          Focusing.config({}),\n          config('notification-events', [run(focusin(), function (comp) {\n              memButton.getOpt(comp).each(Focusing.focus);\n            })])\n        ]),\n        components: components.concat(detail.progress ? [memBannerProgress.asSpec()] : []).concat(!detail.closeButton ? [] : [memButton.asSpec()]),\n        apis: apis\n      };\n    };\n    var Notification = single$2({\n      name: 'Notification',\n      factory: factory$2,\n      configFields: [\n        option('level'),\n        strict$1('progress'),\n        strict$1('icon'),\n        strict$1('onAction'),\n        strict$1('text'),\n        strict$1('iconProvider'),\n        strict$1('translationProvider'),\n        defaultedBoolean('closeButton', true)\n      ],\n      apis: {\n        updateProgress: function (apis, comp, percent) {\n          apis.updateProgress(comp, percent);\n        },\n        updateText: function (apis, comp, text) {\n          apis.updateText(comp, text);\n        }\n      }\n    });\n\n    function NotificationManagerImpl (editor, extras, uiMothership) {\n      var backstage = extras.backstage;\n      var getLayoutDirection = function (rel) {\n        switch (rel) {\n        case 'bc-bc':\n          return south$3;\n        case 'tc-tc':\n          return north$3;\n        case 'tc-bc':\n          return north$1;\n        case 'bc-tc':\n        default:\n          return south$1;\n        }\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          return notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          head(notifications).each(function (firstItem) {\n            return firstItem.moveRel(null, 'banner');\n          });\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (settings, closeCallback) {\n        var hideCloseButton = !settings.closeButton && settings.timeout && (settings.timeout > 0 || settings.timeout < 0);\n        var close = function () {\n          closeCallback();\n          InlineView.hide(notificationWrapper);\n        };\n        var notification = build$1(Notification.sketch({\n          text: settings.text,\n          level: contains([\n            'success',\n            'error',\n            'warning',\n            'warn',\n            'info'\n          ], settings.type) ? settings.type : undefined,\n          progress: settings.progressBar === true,\n          icon: Optional.from(settings.icon),\n          closeButton: !hideCloseButton,\n          onAction: close,\n          iconProvider: backstage.shared.providers.icons,\n          translationProvider: backstage.shared.providers.translate\n        }));\n        var notificationWrapper = build$1(InlineView.sketch(__assign({\n          dom: {\n            tag: 'div',\n            classes: ['tox-notifications-container']\n          },\n          lazySink: extras.backstage.shared.getSink,\n          fireDismissalEventInstead: {}\n        }, backstage.shared.header.isPositionedAtTop() ? {} : { fireRepositionEventInstead: {} })));\n        uiMothership.add(notificationWrapper);\n        if (settings.timeout > 0) {\n          global$2.setTimeout(function () {\n            close();\n          }, settings.timeout);\n        }\n        return {\n          close: close,\n          moveTo: function (x, y) {\n            InlineView.showAt(notificationWrapper, {\n              anchor: 'makeshift',\n              x: x,\n              y: y\n            }, premade$1(notification));\n          },\n          moveRel: function (element, rel) {\n            if (rel !== 'banner') {\n              var layoutDirection_1 = getLayoutDirection(rel);\n              var nodeAnchor = {\n                anchor: 'node',\n                root: body(),\n                node: Optional.some(SugarElement.fromDom(element)),\n                layouts: {\n                  onRtl: function () {\n                    return [layoutDirection_1];\n                  },\n                  onLtr: function () {\n                    return [layoutDirection_1];\n                  }\n                }\n              };\n              InlineView.showAt(notificationWrapper, nodeAnchor, premade$1(notification));\n            } else {\n              InlineView.showAt(notificationWrapper, extras.backstage.shared.anchors.banner(), premade$1(notification));\n            }\n          },\n          text: function (nuText) {\n            Notification.updateText(notification, nuText);\n          },\n          settings: settings,\n          getEl: function () {\n            return notification.element.dom;\n          },\n          progressBar: {\n            value: function (percent) {\n              Notification.updateProgress(notification, percent);\n            }\n          }\n        };\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.settings;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TextSeeker');\n\n    var isBoundary = function (dom, node) {\n      return dom.isBlock(node) || contains([\n        'BR',\n        'IMG',\n        'HR',\n        'INPUT'\n      ], node.nodeName) || dom.getContentEditable(node) === 'false';\n    };\n    var repeatLeft = function (dom, node, offset, process, rootNode) {\n      var search = global$3(dom, function (node) {\n        return isBoundary(dom, node);\n      });\n      return Optional.from(search.backwards(node, offset, process, rootNode));\n    };\n\n    var autocompleteSelector = '[data-mce-autocompleter]';\n    var create$4 = function (editor, range) {\n      return detect$4(SugarElement.fromDom(editor.selection.getNode())).getOrThunk(function () {\n        var wrapper = SugarElement.fromHtml('<span data-mce-autocompleter=\"1\" data-mce-bogus=\"1\"></span>', editor.getDoc());\n        append(wrapper, SugarElement.fromDom(range.extractContents()));\n        range.insertNode(wrapper.dom);\n        parent(wrapper).each(function (elm) {\n          return elm.dom.normalize();\n        });\n        last$1(wrapper).map(function (last) {\n          editor.selection.setCursorLocation(last.dom, getEnd(last));\n        });\n        return wrapper;\n      });\n    };\n    var detect$4 = function (elm) {\n      return closest$3(elm, autocompleteSelector);\n    };\n\n    var isValidTextRange = function (rng) {\n      return rng.collapsed && rng.startContainer.nodeType === 3;\n    };\n    var getText = function (rng) {\n      return rng.toString().replace(/\\u00A0/g, ' ').replace(/\\uFEFF/g, '');\n    };\n    var isWhitespace = function (chr) {\n      return chr !== '' && ' \\xA0\\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n\n    var stripTriggerChar = function (text, triggerCh) {\n      return text.substring(triggerCh.length);\n    };\n    var findChar = function (text, index, ch) {\n      var i;\n      for (i = index - 1; i >= 0; i--) {\n        var char = text.charAt(i);\n        if (isWhitespace(char)) {\n          return Optional.none();\n        }\n        if (char === ch) {\n          break;\n        }\n      }\n      return Optional.some(i);\n    };\n    var findStart = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      if (!isValidTextRange(initRange)) {\n        return Optional.none();\n      }\n      var findTriggerChIndex = function (element, offset, text) {\n        return findChar(text, offset, ch).getOr(offset);\n      };\n      var root = dom.getParent(initRange.startContainer, dom.isBlock) || dom.getRoot();\n      return repeatLeft(dom, initRange.startContainer, initRange.startOffset, findTriggerChIndex, root).bind(function (spot) {\n        var range = initRange.cloneRange();\n        range.setStart(spot.container, spot.offset);\n        range.setEnd(initRange.endContainer, initRange.endOffset);\n        if (range.collapsed) {\n          return Optional.none();\n        }\n        var text = getText(range);\n        var triggerCharIndex = text.lastIndexOf(ch);\n        if (triggerCharIndex !== 0 || stripTriggerChar(text, ch).length < minChars) {\n          return Optional.none();\n        } else {\n          return Optional.some({\n            text: stripTriggerChar(text, ch),\n            range: range,\n            triggerChar: ch\n          });\n        }\n      });\n    };\n    var getContext = function (dom, initRange, ch, minChars) {\n      if (minChars === void 0) {\n        minChars = 0;\n      }\n      return detect$4(SugarElement.fromDom(initRange.startContainer)).fold(function () {\n        return findStart(dom, initRange, ch, minChars);\n      }, function (elm) {\n        var range = dom.createRng();\n        range.selectNode(elm.dom);\n        var text = getText(range);\n        return Optional.some({\n          range: range,\n          text: stripTriggerChar(text, ch),\n          triggerChar: ch\n        });\n      });\n    };\n\n    var setup = function (api, editor) {\n      editor.on('keypress compositionend', api.onKeypress.throttle);\n      editor.on('remove', api.onKeypress.cancel);\n      var redirectKeyToItem = function (item, e) {\n        emitWith(item, keydown(), { raw: e });\n      };\n      editor.on('keydown', function (e) {\n        var getItem = function () {\n          return api.getView().bind(Highlighting.getHighlighted);\n        };\n        if (e.which === 8) {\n          api.onKeypress.throttle(e);\n        }\n        if (api.isActive()) {\n          if (e.which === 27) {\n            api.cancelIfNecessary();\n          }\n          if (api.isMenuOpen()) {\n            if (e.which === 13) {\n              getItem().each(emitExecute);\n              e.preventDefault();\n            } else if (e.which === 40) {\n              getItem().fold(function () {\n                api.getView().each(Highlighting.highlightFirst);\n              }, function (item) {\n                redirectKeyToItem(item, e);\n              });\n              e.preventDefault();\n              e.stopImmediatePropagation();\n            } else if (e.which === 37 || e.which === 38 || e.which === 39) {\n              getItem().each(function (item) {\n                redirectKeyToItem(item, e);\n                e.preventDefault();\n                e.stopImmediatePropagation();\n              });\n            }\n          } else {\n            if (e.which === 13 || e.which === 38 || e.which === 40) {\n              api.cancelIfNecessary();\n            }\n          }\n        }\n      });\n      editor.on('NodeChange', function (e) {\n        if (api.isActive() && !api.isProcessingAction() && detect$4(SugarElement.fromDom(e.element)).isNone()) {\n          api.cancelIfNecessary();\n        }\n      });\n    };\n    var AutocompleterEditorEvents = { setup: setup };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var point$1 = function (container, offset) {\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n\n    var isText$1 = function (node) {\n      return node.nodeType === TEXT;\n    };\n    var isElement$1 = function (node) {\n      return node.nodeType === ELEMENT;\n    };\n    var toLast = function (node) {\n      if (isText$1(node)) {\n        return point$1(node, node.data.length);\n      } else {\n        var children = node.childNodes;\n        return children.length > 0 ? toLast(children[children.length - 1]) : point$1(node, children.length);\n      }\n    };\n    var toLeaf = function (node, offset) {\n      var children = node.childNodes;\n      if (children.length > 0 && offset < children.length) {\n        return toLeaf(children[offset], 0);\n      } else if (children.length > 0 && isElement$1(node) && children.length === offset) {\n        return toLast(children[children.length - 1]);\n      } else {\n        return point$1(node, offset);\n      }\n    };\n\n    var isPreviousCharContent = function (dom, leaf) {\n      return repeatLeft(dom, leaf.container, leaf.offset, function (element, offset) {\n        return offset === 0 ? -1 : offset;\n      }, dom.getRoot()).filter(function (spot) {\n        var char = spot.container.data.charAt(spot.offset - 1);\n        return !isWhitespace(char);\n      }).isSome();\n    };\n    var isStartOfWord = function (dom) {\n      return function (rng) {\n        var leaf = toLeaf(rng.startContainer, rng.startOffset);\n        return !isPreviousCharContent(dom, leaf);\n      };\n    };\n    var getTriggerContext = function (dom, initRange, database) {\n      return findMap(database.triggerChars, function (ch) {\n        return getContext(dom, initRange, ch);\n      });\n    };\n    var lookup = function (editor, getDatabase) {\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      return getTriggerContext(editor.dom, rng, database).bind(function (context) {\n        return lookupWithContext(editor, getDatabase, context);\n      });\n    };\n    var lookupWithContext = function (editor, getDatabase, context, fetchOptions) {\n      if (fetchOptions === void 0) {\n        fetchOptions = {};\n      }\n      var database = getDatabase();\n      var rng = editor.selection.getRng();\n      var startText = rng.startContainer.nodeValue;\n      var autocompleters = filter(database.lookupByChar(context.triggerChar), function (autocompleter) {\n        return context.text.length >= autocompleter.minChars && autocompleter.matches.getOrThunk(function () {\n          return isStartOfWord(editor.dom);\n        })(context.range, startText, context.text);\n      });\n      if (autocompleters.length === 0) {\n        return Optional.none();\n      }\n      var lookupData = global$4.all(map(autocompleters, function (ac) {\n        var fetchResult = ac.fetch(context.text, ac.maxResults, fetchOptions);\n        return fetchResult.then(function (results) {\n          return {\n            matchText: context.text,\n            items: results,\n            columns: ac.columns,\n            onAction: ac.onAction,\n            highlightOn: ac.highlightOn\n          };\n        });\n      }));\n      return Optional.some({\n        lookupData: lookupData,\n        context: context\n      });\n    };\n\n    var separatorMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('text')\n    ]);\n    var createSeparatorMenuItem = function (spec) {\n      return asRaw('separatormenuitem', separatorMenuItemSchema, spec);\n    };\n\n    var autocompleterItemSchema = objOf([\n      defaulted$1('type', 'autocompleteitem'),\n      defaulted$1('active', false),\n      defaulted$1('disabled', false),\n      defaulted$1('meta', {}),\n      strictString('value'),\n      optionString('text'),\n      optionString('icon')\n    ]);\n    var autocompleterSchema = objOf([\n      strictString('type'),\n      strictString('ch'),\n      defaultedNumber('minChars', 1),\n      defaulted$1('columns', 1),\n      defaultedNumber('maxResults', 10),\n      optionFunction('matches'),\n      strictFunction('fetch'),\n      strictFunction('onAction'),\n      defaultedArrayOf('highlightOn', [], string)\n    ]);\n    var createSeparatorItem = function (spec) {\n      return asRaw('Autocompleter.Separator', separatorMenuItemSchema, spec);\n    };\n    var createAutocompleterItem = function (spec) {\n      return asRaw('Autocompleter.Item', autocompleterItemSchema, spec);\n    };\n    var createAutocompleter = function (spec) {\n      return asRaw('Autocompleter', autocompleterSchema, spec);\n    };\n\n    var baseToolbarButtonFields = [\n      defaultedBoolean('disabled', false),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n    var toolbarButtonSchema = objOf([\n      strictString('type'),\n      strictFunction('onAction')\n    ].concat(baseToolbarButtonFields));\n    var createToolbarButton = function (spec) {\n      return asRaw('toolbarbutton', toolbarButtonSchema, spec);\n    };\n\n    var baseToolbarToggleButtonFields = [defaultedBoolean('active', false)].concat(baseToolbarButtonFields);\n    var toggleButtonSchema = objOf(baseToolbarToggleButtonFields.concat([\n      strictString('type'),\n      strictFunction('onAction')\n    ]));\n    var createToggleButton = function (spec) {\n      return asRaw('ToggleButton', toggleButtonSchema, spec);\n    };\n\n    var contextBarFields = [\n      defaultedFunction('predicate', function () {\n        return false;\n      }),\n      defaultedStringEnum('scope', 'node', [\n        'node',\n        'editor'\n      ]),\n      defaultedStringEnum('position', 'selection', [\n        'node',\n        'selection',\n        'line'\n      ])\n    ];\n\n    var contextButtonFields = baseToolbarButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var contextToggleButtonFields = baseToolbarToggleButtonFields.concat([\n      defaulted$1('type', 'contextformbutton'),\n      defaulted$1('primary', false),\n      strictFunction('onAction'),\n      state$1('original', identity)\n    ]);\n    var launchButtonFields = baseToolbarButtonFields.concat([defaulted$1('type', 'contextformbutton')]);\n    var launchToggleButtonFields = baseToolbarToggleButtonFields.concat([defaulted$1('type', 'contextformtogglebutton')]);\n    var toggleOrNormal = choose$1('type', {\n      contextformbutton: contextButtonFields,\n      contextformtogglebutton: contextToggleButtonFields\n    });\n    var contextFormSchema = objOf([\n      defaulted$1('type', 'contextform'),\n      defaultedFunction('initValue', function () {\n        return '';\n      }),\n      optionString('label'),\n      strictArrayOf('commands', toggleOrNormal),\n      optionOf('launch', choose$1('type', {\n        contextformbutton: launchButtonFields,\n        contextformtogglebutton: launchToggleButtonFields\n      }))\n    ].concat(contextBarFields));\n    var createContextForm = function (spec) {\n      return asRaw('ContextForm', contextFormSchema, spec);\n    };\n\n    var contextToolbarSchema = objOf([\n      defaulted$1('type', 'contexttoolbar'),\n      strictString('items')\n    ].concat(contextBarFields));\n    var createContextToolbar = function (spec) {\n      return asRaw('ContextToolbar', contextToolbarSchema, spec);\n    };\n\n    var stringArray = function (a) {\n      var all = {};\n      each(a, function (key) {\n        all[key] = {};\n      });\n      return keys(all);\n    };\n\n    var register = function (editor) {\n      var popups = editor.ui.registry.getAll().popups;\n      var dataset = map$2(popups, function (popup) {\n        return createAutocompleter(popup).fold(function (err) {\n          throw new Error(formatError(err));\n        }, function (x) {\n          return x;\n        });\n      });\n      var triggerChars = stringArray(mapToArray(dataset, function (v) {\n        return v.ch;\n      }));\n      var datasetValues = values(dataset);\n      var lookupByChar = function (ch) {\n        return filter(datasetValues, function (dv) {\n          return dv.ch === ch;\n        });\n      };\n      return {\n        dataset: dataset,\n        triggerChars: triggerChars,\n        lookupByChar: lookupByChar\n      };\n    };\n\n    var ItemResponse;\n    (function (ItemResponse) {\n      ItemResponse[ItemResponse['CLOSE_ON_EXECUTE'] = 0] = 'CLOSE_ON_EXECUTE';\n      ItemResponse[ItemResponse['BUBBLE_TO_SANDBOX'] = 1] = 'BUBBLE_TO_SANDBOX';\n    }(ItemResponse || (ItemResponse = {})));\n    var ItemResponse$1 = ItemResponse;\n\n    var navClass = 'tox-menu-nav__js';\n    var selectableClass = 'tox-collection__item';\n    var colorClass = 'tox-swatch';\n    var presetClasses = {\n      normal: navClass,\n      color: colorClass\n    };\n    var tickedClass = 'tox-collection__item--enabled';\n    var groupHeadingClass = 'tox-collection__group-heading';\n    var iconClass = 'tox-collection__item-icon';\n    var textClass = 'tox-collection__item-label';\n    var accessoryClass = 'tox-collection__item-accessory';\n    var caretClass = 'tox-collection__item-caret';\n    var checkmarkClass = 'tox-collection__item-checkmark';\n    var activeClass = 'tox-collection__item--active';\n    var iconClassRtl = 'tox-collection__item-icon-rtl';\n    var containerClass = 'tox-collection__item-container';\n    var containerColumnClass = 'tox-collection__item-container--column';\n    var containerRowClass = 'tox-collection__item-container--row';\n    var containerAlignRightClass = 'tox-collection__item-container--align-right';\n    var containerAlignLeftClass = 'tox-collection__item-container--align-left';\n    var containerValignTopClass = 'tox-collection__item-container--valign-top';\n    var containerValignMiddleClass = 'tox-collection__item-container--valign-middle';\n    var containerValignBottomClass = 'tox-collection__item-container--valign-bottom';\n    var classForPreset = function (presets) {\n      return get$1(presetClasses, presets).getOr(navClass);\n    };\n\n    var forMenu = function (presets) {\n      if (presets === 'color') {\n        return 'tox-swatches';\n      } else {\n        return 'tox-menu';\n      }\n    };\n    var classes = function (presets) {\n      return {\n        backgroundMenu: 'tox-background-menu',\n        selectedMenu: 'tox-selected-menu',\n        selectedItem: 'tox-collection__item--active',\n        hasIcons: 'tox-menu--has-icons',\n        menu: forMenu(presets),\n        tieredMenu: 'tox-tiered-menu'\n      };\n    };\n\n    var markers$1 = function (presets) {\n      var menuClasses = classes(presets);\n      return {\n        backgroundMenu: menuClasses.backgroundMenu,\n        selectedMenu: menuClasses.selectedMenu,\n        menu: menuClasses.menu,\n        selectedItem: menuClasses.selectedItem,\n        item: classForPreset(presets)\n      };\n    };\n    var dom$1 = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      return {\n        tag: 'div',\n        classes: flatten([\n          [\n            menuClasses.menu,\n            'tox-menu-' + columns + '-column'\n          ],\n          hasIcons ? [menuClasses.hasIcons] : []\n        ])\n      };\n    };\n    var components$1 = [Menu.parts.items({})];\n    var part = function (hasIcons, columns, presets) {\n      var menuClasses = classes(presets);\n      var d = {\n        tag: 'div',\n        classes: flatten([[menuClasses.tieredMenu]])\n      };\n      return {\n        dom: d,\n        markers: markers$1(presets)\n      };\n    };\n\n    var chunk$1 = function (rowDom, numColumns) {\n      return function (items) {\n        var chunks = chunk(items, numColumns);\n        return map(chunks, function (c) {\n          return {\n            dom: rowDom,\n            components: c\n          };\n        });\n      };\n    };\n    var forSwatch = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-swatches-menu'\n          ]\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-swatches']\n            },\n            components: [Menu.parts.items({\n                preprocess: columns !== 'auto' ? chunk$1({\n                  tag: 'div',\n                  classes: ['tox-swatches__row']\n                }, columns) : identity\n              })]\n          }]\n      };\n    };\n    var forToolbar = function (columns) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection',\n            'tox-collection--toolbar',\n            'tox-collection--toolbar-lg'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: chunk$1({\n              tag: 'div',\n              classes: ['tox-collection__group']\n            }, columns)\n          })]\n      };\n    };\n    var preprocessCollection = function (items, isSeparator) {\n      var allSplits = [];\n      var currentSplit = [];\n      each(items, function (item, i) {\n        if (isSeparator(item, i)) {\n          if (currentSplit.length > 0) {\n            allSplits.push(currentSplit);\n          }\n          currentSplit = [];\n          if (has(item.dom, 'innerHtml')) {\n            currentSplit.push(item);\n          }\n        } else {\n          currentSplit.push(item);\n        }\n      });\n      if (currentSplit.length > 0) {\n        allSplits.push(currentSplit);\n      }\n      return map(allSplits, function (s) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-collection__group']\n          },\n          components: s\n        };\n      });\n    };\n    var forCollection = function (columns, initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-menu',\n            'tox-collection'\n          ].concat(columns === 1 ? ['tox-collection--list'] : ['tox-collection--grid'])\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              if (columns !== 'auto' && columns > 1) {\n                return chunk$1({\n                  tag: 'div',\n                  classes: ['tox-collection__group']\n                }, columns)(items);\n              } else {\n                return preprocessCollection(items, function (_item, i) {\n                  return initItems[i].type === 'separator';\n                });\n              }\n            }\n          })]\n      };\n    };\n    var forHorizontalCollection = function (initItems, _hasIcons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-collection',\n            'tox-collection--horizontal'\n          ]\n        },\n        components: [Menu.parts.items({\n            preprocess: function (items) {\n              return preprocessCollection(items, function (_item, i) {\n                return initItems[i].type === 'separator';\n              });\n            }\n          })]\n      };\n    };\n\n    var menuHasIcons = function (xs) {\n      return exists(xs, function (item) {\n        return 'icon' in item && item.icon !== undefined;\n      });\n    };\n    var handleError = function (error) {\n      console.error(formatError(error));\n      console.log(error);\n      return Optional.none();\n    };\n    var createHorizontalPartialMenuWithAlloyItems = function (value, _hasIcons, items, _columns, _presets) {\n      var structure = forHorizontalCollection(items);\n      return {\n        value: value,\n        dom: structure.dom,\n        components: structure.components,\n        items: items\n      };\n    };\n    var createPartialMenuWithAlloyItems = function (value, hasIcons, items, columns, presets) {\n      if (presets === 'color') {\n        var structure = forSwatch(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 'auto') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal' && columns === 1) {\n        var structure = forCollection(1, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'normal') {\n        var structure = forCollection(columns, items);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      if (presets === 'listpreview' && columns !== 'auto') {\n        var structure = forToolbar(columns);\n        return {\n          value: value,\n          dom: structure.dom,\n          components: structure.components,\n          items: items\n        };\n      }\n      return {\n        value: value,\n        dom: dom$1(hasIcons, columns, presets),\n        components: components$1,\n        items: items\n      };\n    };\n\n    var cardImageFields = [\n      strictString('type'),\n      strictString('src'),\n      optionString('alt'),\n      defaultedArrayOf('classes', [], string)\n    ];\n    var cardImageSchema = objOf(cardImageFields);\n\n    var cardTextFields = [\n      strictString('type'),\n      strictString('text'),\n      optionString('name'),\n      defaultedArrayOf('classes', ['tox-collection__item-label'], string)\n    ];\n    var cardTextSchema = objOf(cardTextFields);\n\n    var itemSchema$2 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        cardimage: cardImageSchema,\n        cardtext: cardTextSchema,\n        cardcontainer: cardContainerSchema\n      });\n    });\n    var cardContainerSchema = objOf([\n      strictString('type'),\n      defaultedString('direction', 'horizontal'),\n      defaultedString('align', 'left'),\n      defaultedString('valign', 'middle'),\n      strictArrayOf('items', itemSchema$2)\n    ]);\n\n    var commonMenuItemFields = [\n      defaultedBoolean('disabled', false),\n      optionString('text'),\n      optionString('shortcut'),\n      field('value', 'value', defaultedThunk(function () {\n        return generate$1('menuitem-value');\n      }), anyValue$1()),\n      defaulted$1('meta', {})\n    ];\n\n    var cardMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('label'),\n      strictArrayOf('items', itemSchema$2),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop)\n    ].concat(commonMenuItemFields));\n    var createCardMenuItem = function (spec) {\n      return asRaw('cardmenuitem', cardMenuItemSchema, spec);\n    };\n\n    var choiceMenuItemSchema = objOf([\n      strictString('type'),\n      defaultedBoolean('active', false),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createChoiceMenuItem = function (spec) {\n      return asRaw('choicemenuitem', choiceMenuItemSchema, spec);\n    };\n\n    var fancyTypes = [\n      'inserttable',\n      'colorswatch'\n    ];\n    var fancyMenuItemSchema = objOf([\n      strictString('type'),\n      strictStringEnum('fancytype', fancyTypes),\n      defaultedFunction('onAction', noop)\n    ]);\n    var createFancyMenuItem = function (spec) {\n      return asRaw('fancymenuitem', fancyMenuItemSchema, spec);\n    };\n\n    var menuItemSchema = objOf([\n      strictString('type'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedFunction('onAction', noop),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createMenuItem = function (spec) {\n      return asRaw('menuitem', menuItemSchema, spec);\n    };\n\n    var nestedMenuItemSchema = objOf([\n      strictString('type'),\n      strictFunction('getSubmenuItems'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      optionString('icon')\n    ].concat(commonMenuItemFields));\n    var createNestedMenuItem = function (spec) {\n      return asRaw('nestedmenuitem', nestedMenuItemSchema, spec);\n    };\n\n    var toggleMenuItemSchema = objOf([\n      strictString('type'),\n      optionString('icon'),\n      defaultedBoolean('active', false),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      strictFunction('onAction')\n    ].concat(commonMenuItemFields));\n    var createToggleMenuItem = function (spec) {\n      return asRaw('togglemenuitem', toggleMenuItemSchema, spec);\n    };\n\n    var detectSize = function (comp, margin, selectorClass) {\n      var descendants$1 = descendants(comp.element, '.' + selectorClass);\n      if (descendants$1.length > 0) {\n        var columnLength = findIndex(descendants$1, function (c) {\n          var thisTop = c.dom.getBoundingClientRect().top;\n          var cTop = descendants$1[0].dom.getBoundingClientRect().top;\n          return Math.abs(thisTop - cTop) > margin;\n        }).getOr(descendants$1.length);\n        return Optional.some({\n          numColumns: columnLength,\n          numRows: Math.ceil(descendants$1.length / columnLength)\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var namedEvents = function (name, handlers) {\n      return derive$1([config(name, handlers)]);\n    };\n    var unnamedEvents = function (handlers) {\n      return namedEvents(generate$1('unnamed-events'), handlers);\n    };\n    var SimpleBehaviours = {\n      namedEvents: namedEvents,\n      unnamedEvents: unnamedEvents\n    };\n\n    var TooltippingSchema = [\n      strict$1('lazySink'),\n      strict$1('tooltipDom'),\n      defaulted$1('exclusive', true),\n      defaulted$1('tooltipComponents', []),\n      defaulted$1('delay', 300),\n      defaultedStringEnum('mode', 'normal', [\n        'normal',\n        'follow-highlight'\n      ]),\n      defaulted$1('anchor', function (comp) {\n        return {\n          anchor: 'hotspot',\n          hotspot: comp,\n          layouts: {\n            onLtr: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ]),\n            onRtl: constant([\n              south$1,\n              north$1,\n              southeast$1,\n              northeast$1,\n              southwest$1,\n              northwest$1\n            ])\n          }\n        };\n      }),\n      onHandler('onHide'),\n      onHandler('onShow')\n    ];\n\n    var init$4 = function () {\n      var timer = Cell(Optional.none());\n      var popup = Cell(Optional.none());\n      var getTooltip = function () {\n        return popup.get();\n      };\n      var setTooltip = function (comp) {\n        popup.set(Optional.some(comp));\n      };\n      var clearTooltip = function () {\n        popup.set(Optional.none());\n      };\n      var clearTimer = function () {\n        timer.get().each(function (t) {\n          clearTimeout(t);\n        });\n      };\n      var resetTimer = function (f, delay) {\n        clearTimer();\n        timer.set(Optional.some(setTimeout(function () {\n          f();\n        }, delay)));\n      };\n      var isShowing = function () {\n        return popup.get().isSome();\n      };\n      var readState = constant('not-implemented');\n      return nu$5({\n        getTooltip: getTooltip,\n        isShowing: isShowing,\n        setTooltip: setTooltip,\n        clearTooltip: clearTooltip,\n        clearTimer: clearTimer,\n        resetTimer: resetTimer,\n        readState: readState\n      });\n    };\n\n    var TooltippingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$4\n    });\n\n    var ExclusivityChannel = generate$1('tooltip.exclusive');\n    var ShowTooltipEvent = generate$1('tooltip.show');\n    var HideTooltipEvent = generate$1('tooltip.hide');\n\n    var hideAllExclusive = function (component, _tConfig, _tState) {\n      component.getSystem().broadcastOn([ExclusivityChannel], {});\n    };\n    var setComponents = function (component, tConfig, tState, specs) {\n      tState.getTooltip().each(function (tooltip) {\n        if (tooltip.getSystem().isConnected()) {\n          Replacing.set(tooltip, specs);\n        }\n      });\n    };\n\n    var TooltippingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        hideAllExclusive: hideAllExclusive,\n        setComponents: setComponents\n    });\n\n    var events$8 = function (tooltipConfig, state) {\n      var hide = function (comp) {\n        state.getTooltip().each(function (p) {\n          detach(p);\n          tooltipConfig.onHide(comp, p);\n          state.clearTooltip();\n        });\n        state.clearTimer();\n      };\n      var show = function (comp) {\n        if (!state.isShowing()) {\n          hideAllExclusive(comp);\n          var sink = tooltipConfig.lazySink(comp).getOrDie();\n          var popup = comp.getSystem().build({\n            dom: tooltipConfig.tooltipDom,\n            components: tooltipConfig.tooltipComponents,\n            events: derive(tooltipConfig.mode === 'normal' ? [\n              run(mouseover(), function (_) {\n                emit(comp, ShowTooltipEvent);\n              }),\n              run(mouseout(), function (_) {\n                emit(comp, HideTooltipEvent);\n              })\n            ] : []),\n            behaviours: derive$1([Replacing.config({})])\n          });\n          state.setTooltip(popup);\n          attach$1(sink, popup);\n          tooltipConfig.onShow(comp, popup);\n          Positioning.position(sink, tooltipConfig.anchor(comp), popup);\n        }\n      };\n      return derive(flatten([\n        [\n          run(ShowTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              show(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(HideTooltipEvent, function (comp) {\n            state.resetTimer(function () {\n              hide(comp);\n            }, tooltipConfig.delay);\n          }),\n          run(receive(), function (comp, message) {\n            var receivingData = message;\n            if (!receivingData.universal) {\n              if (contains(receivingData.channels, ExclusivityChannel)) {\n                hide(comp);\n              }\n            }\n          }),\n          runOnDetached(function (comp) {\n            hide(comp);\n          })\n        ],\n        tooltipConfig.mode === 'normal' ? [\n          run(focusin(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(postBlur(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          }),\n          run(mouseover(), function (comp) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(mouseout(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ] : [\n          run(highlight(), function (comp, _se) {\n            emit(comp, ShowTooltipEvent);\n          }),\n          run(dehighlight(), function (comp) {\n            emit(comp, HideTooltipEvent);\n          })\n        ]\n      ]));\n    };\n\n    var ActiveTooltipping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$8\n    });\n\n    var Tooltipping = create$1({\n      fields: TooltippingSchema,\n      name: 'tooltipping',\n      active: ActiveTooltipping,\n      state: TooltippingState,\n      apis: TooltippingApis\n    });\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var nativeDisabled = [\n      'input',\n      'button',\n      'textarea',\n      'select'\n    ];\n    var onLoad$5 = function (component, disableConfig, disableState) {\n      var f = disableConfig.disabled() ? disable : enable;\n      f(component, disableConfig);\n    };\n    var hasNative = function (component, config) {\n      return config.useNative === true && contains(nativeDisabled, name(component.element));\n    };\n    var nativeIsDisabled = function (component) {\n      return has$1(component.element, 'disabled');\n    };\n    var nativeDisable = function (component) {\n      set$1(component.element, 'disabled', 'disabled');\n    };\n    var nativeEnable = function (component) {\n      remove$1(component.element, 'disabled');\n    };\n    var ariaIsDisabled = function (component) {\n      return get$3(component.element, 'aria-disabled') === 'true';\n    };\n    var ariaDisable = function (component) {\n      set$1(component.element, 'aria-disabled', 'true');\n    };\n    var ariaEnable = function (component) {\n      set$1(component.element, 'aria-disabled', 'false');\n    };\n    var disable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        add$2(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeDisable : ariaDisable;\n      f(component);\n      disableConfig.onDisabled(component);\n    };\n    var enable = function (component, disableConfig, _disableState) {\n      disableConfig.disableClass.each(function (disableClass) {\n        remove$4(component.element, disableClass);\n      });\n      var f = hasNative(component, disableConfig) ? nativeEnable : ariaEnable;\n      f(component);\n      disableConfig.onEnabled(component);\n    };\n    var isDisabled = function (component, disableConfig) {\n      return hasNative(component, disableConfig) ? nativeIsDisabled(component) : ariaIsDisabled(component);\n    };\n    var set$7 = function (component, disableConfig, disableState, disabled) {\n      var f = disabled ? disable : enable;\n      f(component, disableConfig);\n    };\n\n    var DisableApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        enable: enable,\n        disable: disable,\n        isDisabled: isDisabled,\n        onLoad: onLoad$5,\n        set: set$7\n    });\n\n    var exhibit$3 = function (base, disableConfig) {\n      return nu$6({ classes: disableConfig.disabled() ? disableConfig.disableClass.toArray() : [] });\n    };\n    var events$9 = function (disableConfig, disableState) {\n      return derive([\n        abort(execute(), function (component, _simulatedEvent) {\n          return isDisabled(component, disableConfig);\n        }),\n        loadEvent(disableConfig, disableState, onLoad$5)\n      ]);\n    };\n\n    var ActiveDisable = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$3,\n        events: events$9\n    });\n\n    var DisableSchema = [\n      defaultedFunction('disabled', never),\n      defaulted$1('useNative', true),\n      option('disableClass'),\n      onHandler('onDisabled'),\n      onHandler('onEnabled')\n    ];\n\n    var Disabling = create$1({\n      fields: DisableSchema,\n      name: 'disabling',\n      active: ActiveDisable,\n      apis: DisableApis\n    });\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getSkinUrl = function (editor) {\n      var skin = editor.getParam('skin');\n      var skinUrl = editor.getParam('skin_url');\n      if (skin !== false) {\n        var skinName = skin ? skin : 'oxide';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$7.baseURL + '/skins/ui/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.getParam('skin') === false;\n    };\n    var getHeightSetting = function (editor) {\n      return editor.getParam('height', Math.max(editor.getElement().offsetHeight, 200));\n    };\n    var getWidthSetting = function (editor) {\n      return editor.getParam('width', global$5.DOM.getStyle(editor.getElement(), 'width'));\n    };\n    var getMinWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('min_width')).filter(isNumber);\n    };\n    var getMinHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('min_height')).filter(isNumber);\n    };\n    var getMaxWidthSetting = function (editor) {\n      return Optional.from(editor.getParam('max_width')).filter(isNumber);\n    };\n    var getMaxHeightSetting = function (editor) {\n      return Optional.from(editor.getParam('max_height')).filter(isNumber);\n    };\n    var getUserStyleFormats = function (editor) {\n      return Optional.from(editor.getParam('style_formats')).filter(isArray);\n    };\n    var isMergeStyleFormats = function (editor) {\n      return editor.getParam('style_formats_merge', false, 'boolean');\n    };\n    var getLineHeightFormats = function (editor) {\n      return editor.getParam('lineheight_formats', '1 1.1 1.2 1.3 1.4 1.5 2', 'string').split(' ');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var isMenubarEnabled = function (editor) {\n      return editor.getParam('menubar', true, 'boolean') !== false;\n    };\n    var isToolbarEnabled = function (editor) {\n      var toolbar = editor.getParam('toolbar', true);\n      var isToolbarTrue = toolbar === true;\n      var isToolbarString = isString(toolbar);\n      var isToolbarObjectArray = isArray(toolbar) && toolbar.length > 0;\n      return !isMultipleToolbars(editor) && (isToolbarObjectArray || isToolbarString || isToolbarTrue);\n    };\n    var getMultipleToolbarsSetting = function (editor) {\n      var toolbars = range(9, function (num) {\n        return editor.getParam('toolbar' + (num + 1), false, 'string');\n      });\n      var toolbarArray = filter(toolbars, function (toolbar) {\n        return typeof toolbar === 'string';\n      });\n      return toolbarArray.length > 0 ? Optional.some(toolbarArray) : Optional.none();\n    };\n    var isMultipleToolbars = function (editor) {\n      return getMultipleToolbarsSetting(editor).fold(function () {\n        var toolbar = editor.getParam('toolbar', [], 'string[]');\n        return toolbar.length > 0;\n      }, function () {\n        return true;\n      });\n    };\n    var ToolbarMode;\n    (function (ToolbarMode) {\n      ToolbarMode['default'] = 'wrap';\n      ToolbarMode['floating'] = 'floating';\n      ToolbarMode['sliding'] = 'sliding';\n      ToolbarMode['scrolling'] = 'scrolling';\n    }(ToolbarMode || (ToolbarMode = {})));\n    var getToolbarMode = function (editor) {\n      return editor.getParam('toolbar_mode', '', 'string');\n    };\n    var ToolbarLocation;\n    (function (ToolbarLocation) {\n      ToolbarLocation['auto'] = 'auto';\n      ToolbarLocation['top'] = 'top';\n      ToolbarLocation['bottom'] = 'bottom';\n    }(ToolbarLocation || (ToolbarLocation = {})));\n    var getToolbarGroups = function (editor) {\n      return editor.getParam('toolbar_groups', {}, 'object');\n    };\n    var getToolbarLocation = function (editor) {\n      return editor.getParam('toolbar_location', ToolbarLocation.auto, 'string');\n    };\n    var isToolbarLocationBottom = function (editor) {\n      return getToolbarLocation(editor) === ToolbarLocation.bottom;\n    };\n    var fixedContainerSelector = function (editor) {\n      return editor.getParam('fixed_toolbar_container', '', 'string');\n    };\n    var isToolbarPersist = function (editor) {\n      return editor.getParam('toolbar_persist', false, 'boolean');\n    };\n    var fixedContainerElement = function (editor) {\n      var selector = fixedContainerSelector(editor);\n      return selector.length > 0 && editor.inline ? descendant$1(body(), selector) : Optional.none();\n    };\n    var useFixedContainer = function (editor) {\n      return editor.inline && fixedContainerElement(editor).isSome();\n    };\n    var getUiContainer = function (editor) {\n      var fixedContainer = fixedContainerElement(editor);\n      return fixedContainer.getOrThunk(function () {\n        return getContentContainer(getRootNode(SugarElement.fromDom(editor.getElement())));\n      });\n    };\n    var isDistractionFree = function (editor) {\n      return editor.inline && !isMenubarEnabled(editor) && !isToolbarEnabled(editor) && !isMultipleToolbars(editor);\n    };\n    var isStickyToolbar = function (editor) {\n      var isStickyToolbar = editor.getParam('toolbar_sticky', false, 'boolean');\n      return (isStickyToolbar || editor.inline) && !useFixedContainer(editor) && !isDistractionFree(editor);\n    };\n    var isDraggableModal = function (editor) {\n      return editor.getParam('draggable_modal', false, 'boolean');\n    };\n    var getMenus = function (editor) {\n      var menu = editor.getParam('menu');\n      if (menu) {\n        return map$2(menu, function (menu) {\n          return __assign(__assign({}, menu), { items: menu.items });\n        });\n      } else {\n        return {};\n      }\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var getToolbar = function (editor) {\n      return editor.getParam('toolbar', true);\n    };\n    var getFilePickerCallback = function (editor) {\n      return editor.getParam('file_picker_callback');\n    };\n    var getFilePickerTypes = function (editor) {\n      return editor.getParam('file_picker_types');\n    };\n    var getFileBrowserCallbackTypes = function (editor) {\n      return editor.getParam('file_browser_callback_types');\n    };\n    var noTypeaheadUrls = function (editor) {\n      return editor.getParam('typeahead_urls') === false;\n    };\n    var getAnchorTop = function (editor) {\n      return editor.getParam('anchor_top', '#top');\n    };\n    var getAnchorBottom = function (editor) {\n      return editor.getParam('anchor_bottom', '#bottom');\n    };\n    var getFilePickerValidatorHandler = function (editor) {\n      var handler = editor.getParam('file_picker_validator_handler', undefined, 'function');\n      if (handler === undefined) {\n        return editor.getParam('filepicker_validator_handler', undefined, 'function');\n      } else {\n        return handler;\n      }\n    };\n\n    var ReadOnlyChannel = 'silver.readonly';\n    var ReadOnlyDataSchema = objOf([strictBoolean('readonly')]);\n    var broadcastReadonly = function (uiComponents, readonly) {\n      var outerContainer = uiComponents.outerContainer;\n      var target = outerContainer.element;\n      if (readonly) {\n        uiComponents.mothership.broadcastOn([dismissPopups()], { target: target });\n        uiComponents.uiMothership.broadcastOn([dismissPopups()], { target: target });\n      }\n      uiComponents.mothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n      uiComponents.uiMothership.broadcastOn([ReadOnlyChannel], { readonly: readonly });\n    };\n    var setupReadonlyModeSwitch = function (editor, uiComponents) {\n      editor.on('init', function () {\n        if (editor.mode.isReadOnly()) {\n          broadcastReadonly(uiComponents, true);\n        }\n      });\n      editor.on('SwitchMode', function () {\n        return broadcastReadonly(uiComponents, editor.mode.isReadOnly());\n      });\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n    };\n    var receivingConfig = function () {\n      var _a;\n      return Receiving.config({\n        channels: (_a = {}, _a[ReadOnlyChannel] = {\n          schema: ReadOnlyDataSchema,\n          onReceive: function (comp, data) {\n            Disabling.set(comp, data.readonly);\n          }\n        }, _a)\n      });\n    };\n\n    var item = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-collection__item--state-disabled'\n      });\n    };\n    var button = function (disabled) {\n      return Disabling.config({ disabled: disabled });\n    };\n    var splitButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled'\n      });\n    };\n    var toolbarButton = function (disabled) {\n      return Disabling.config({\n        disabled: disabled,\n        disableClass: 'tox-tbtn--disabled',\n        useNative: false\n      });\n    };\n    var DisablingConfigs = {\n      item: item,\n      button: button,\n      splitButton: splitButton,\n      toolbarButton: toolbarButton\n    };\n\n    var runWithApi = function (info, comp) {\n      var api = info.getApi(comp);\n      return function (f) {\n        f(api);\n      };\n    };\n    var onControlAttached = function (info, editorOffCell) {\n      return runOnAttached(function (comp) {\n        var run = runWithApi(info, comp);\n        run(function (api) {\n          var onDestroy = info.onSetup(api);\n          if (onDestroy !== null && onDestroy !== undefined) {\n            editorOffCell.set(onDestroy);\n          }\n        });\n      });\n    };\n    var onControlDetached = function (getApi, editorOffCell) {\n      return runOnDetached(function (comp) {\n        return runWithApi(getApi, comp)(editorOffCell.get());\n      });\n    };\n\n    var _a;\n    var onMenuItemExecute = function (info, itemResponse) {\n      return runOnExecute(function (comp, simulatedEvent) {\n        runWithApi(info, comp)(info.onAction);\n        if (!info.triggersSubmenu && itemResponse === ItemResponse$1.CLOSE_ON_EXECUTE) {\n          emit(comp, sandboxClose());\n          simulatedEvent.stop();\n        }\n      });\n    };\n    var menuItemEventOrder = (_a = {}, _a[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'item-events'\n    ], _a);\n\n    var componentRenderPipeline = function (xs) {\n      return bind(xs, function (o) {\n        return o.toArray();\n      });\n    };\n    var renderCommonItem = function (spec, structure, itemResponse, providersbackstage) {\n      var editorOffCell = Cell(noop);\n      return {\n        type: 'item',\n        dom: structure.dom,\n        components: componentRenderPipeline(structure.optComponents),\n        data: spec.data,\n        eventOrder: menuItemEventOrder,\n        hasSubmenu: spec.triggersSubmenu,\n        itemBehaviours: derive$1([\n          config('item-events', [\n            onMenuItemExecute(spec, itemResponse),\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          DisablingConfigs.item(function () {\n            return spec.disabled || providersbackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Replacing.config({})\n        ].concat(spec.itemBehaviours))\n      };\n    };\n    var buildData = function (source) {\n      return {\n        value: source.value,\n        meta: __assign({ text: source.text.getOr('') }, source.meta)\n      };\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var convertText = function (source) {\n      var mac = {\n        alt: '&#x2325;',\n        ctrl: '&#x2303;',\n        shift: '&#x21E7;',\n        meta: '&#x2318;',\n        access: '&#x2303;&#x2325;'\n      };\n      var other = {\n        meta: 'Ctrl',\n        access: 'Shift+Alt'\n      };\n      var replace = global$8.mac ? mac : other;\n      var shortcut = source.split('+');\n      var updated = map(shortcut, function (segment) {\n        var search = segment.toLowerCase().trim();\n        return has(replace, search) ? replace[search] : segment;\n      });\n      return global$8.mac ? updated.join('') : updated.join('+');\n    };\n\n    var renderIcon = function (iconHtml) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [iconClass],\n          innerHtml: iconHtml\n        }\n      };\n    };\n    var renderText = function (text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [text(global$6.translate(text$1))]\n      };\n    };\n    var renderHtml = function (html, classes) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: classes,\n          innerHtml: html\n        }\n      };\n    };\n    var renderStyledText = function (style, text$1) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [textClass]\n        },\n        components: [{\n            dom: {\n              tag: style.tag,\n              styles: style.styles\n            },\n            components: [text(global$6.translate(text$1))]\n          }]\n      };\n    };\n    var renderShortcut = function (shortcut) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [accessoryClass],\n          innerHtml: convertText(shortcut)\n        }\n      };\n    };\n    var renderCheckmark = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [checkmarkClass],\n          innerHtml: get$e('checkmark', icons)\n        }\n      };\n    };\n    var renderSubmenuCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-right', icons)\n        }\n      };\n    };\n    var renderDownwardsCaret = function (icons) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [caretClass],\n          innerHtml: get$e('chevron-down', icons)\n        }\n      };\n    };\n    var renderContainer = function (container, components) {\n      var directionClass = container.direction === 'vertical' ? containerColumnClass : containerRowClass;\n      var alignClass = container.align === 'left' ? containerAlignLeftClass : containerAlignRightClass;\n      var getValignClass = function () {\n        switch (container.valign) {\n        case 'top':\n          return containerValignTopClass;\n        case 'middle':\n          return containerValignMiddleClass;\n        case 'bottom':\n          return containerValignBottomClass;\n        }\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            containerClass,\n            directionClass,\n            alignClass,\n            getValignClass()\n          ]\n        },\n        components: components\n      };\n    };\n    var renderImage = function (src, classes, alt) {\n      return {\n        dom: {\n          tag: 'img',\n          classes: classes,\n          attributes: {\n            src: src,\n            alt: alt.getOr('')\n          }\n        }\n      };\n    };\n\n    var renderColorStructure = function (itemText, itemValue, iconSvg, providerBackstage) {\n      var colorPickerCommand = 'custom';\n      var removeColorCommand = 'remove';\n      var getDom = function () {\n        var common = colorClass;\n        var icon = iconSvg.getOr('');\n        var attributes = itemText.map(function (text) {\n          return { title: providerBackstage.translate(text) };\n        }).getOr({});\n        var baseDom = {\n          tag: 'div',\n          attributes: attributes,\n          classes: [common]\n        };\n        if (itemValue === colorPickerCommand) {\n          return __assign(__assign({}, baseDom), {\n            tag: 'button',\n            classes: __spreadArrays(baseDom.classes, ['tox-swatches__picker-btn']),\n            innerHtml: icon\n          });\n        } else if (itemValue === removeColorCommand) {\n          return __assign(__assign({}, baseDom), {\n            classes: __spreadArrays(baseDom.classes, ['tox-swatch--remove']),\n            innerHtml: icon\n          });\n        } else {\n          return __assign(__assign({}, baseDom), {\n            attributes: __assign(__assign({}, baseDom.attributes), { 'data-mce-color': itemValue }),\n            styles: { 'background-color': itemValue }\n          });\n        }\n      };\n      return {\n        dom: getDom(),\n        optComponents: []\n      };\n    };\n    var renderItemDomStructure = function (rtlClass, ariaLabel) {\n      var domTitle = ariaLabel.map(function (label) {\n        return { attributes: { title: global$6.translate(label) } };\n      }).getOr({});\n      return __assign({\n        tag: 'div',\n        classes: [\n          navClass,\n          selectableClass\n        ].concat(rtlClass ? [iconClassRtl] : [])\n      }, domTitle);\n    };\n    var renderNormalItemStructure = function (info, icon, renderIcons, textRender, rtlClass) {\n      var leftIcon = renderIcons ? icon.or(Optional.some('')).map(renderIcon) : Optional.none();\n      var checkmark = info.checkMark;\n      var content = info.htmlContent.fold(function () {\n        return info.textContent.map(textRender);\n      }, function (html) {\n        return Optional.some(renderHtml(html, [textClass]));\n      });\n      var menuItem = {\n        dom: renderItemDomStructure(rtlClass, info.ariaLabel),\n        optComponents: [\n          leftIcon,\n          content,\n          info.shortcutContent.map(renderShortcut),\n          checkmark,\n          info.caret\n        ]\n      };\n      return menuItem;\n    };\n    var rtlIcon = [\n      'list-num-default',\n      'list-num-lower-alpha',\n      'list-num-lower-greek',\n      'list-num-lower-roman',\n      'list-num-upper-alpha',\n      'list-num-upper-roman'\n    ];\n    var rtlTransform = [\n      'list-bull-circle',\n      'list-bull-default',\n      'list-bull-square'\n    ];\n    var renderItemStructure = function (info, providersBackstage, renderIcons, fallbackIcon) {\n      if (fallbackIcon === void 0) {\n        fallbackIcon = Optional.none();\n      }\n      var getIconName = function (iconName) {\n        return iconName.map(function (name) {\n          return global$6.isRtl() && contains(rtlIcon, name) ? name + '-rtl' : name;\n        });\n      };\n      var needRtlClass = global$6.isRtl() && info.iconContent.exists(function (name) {\n        return contains(rtlTransform, name);\n      });\n      var icon = getIconName(info.iconContent).map(function (iconName) {\n        return getOr(iconName, providersBackstage.icons, fallbackIcon);\n      });\n      var textRender = Optional.from(info.meta).fold(function () {\n        return renderText;\n      }, function (meta) {\n        return has(meta, 'style') ? curry(renderStyledText, meta.style) : renderText;\n      });\n      if (info.presets === 'color') {\n        return renderColorStructure(info.ariaLabel, info.value, icon, providersBackstage);\n      } else {\n        return renderNormalItemStructure(info, icon, renderIcons, textRender, needRtlClass);\n      }\n    };\n\n    var tooltipBehaviour = function (meta, sharedBackstage) {\n      return get$1(meta, 'tooltipWorker').map(function (tooltipWorker) {\n        return [Tooltipping.config({\n            lazySink: sharedBackstage.getSink,\n            tooltipDom: {\n              tag: 'div',\n              classes: ['tox-tooltip-worker-container']\n            },\n            tooltipComponents: [],\n            anchor: function (comp) {\n              return {\n                anchor: 'submenu',\n                item: comp,\n                overrides: { maxHeightFunction: expandable }\n              };\n            },\n            mode: 'follow-highlight',\n            onShow: function (component, _tooltip) {\n              tooltipWorker(function (elm) {\n                Tooltipping.setComponents(component, [external({ element: SugarElement.fromDom(elm) })]);\n              });\n            }\n          })];\n      }).getOr([]);\n    };\n    var escapeRegExp = function (text) {\n      return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    };\n    var encodeText = function (text) {\n      return global$5.DOM.encode(text);\n    };\n    var replaceText = function (text, matchText) {\n      var translated = global$6.translate(text);\n      var encoded = encodeText(translated);\n      if (matchText.length > 0) {\n        var escapedMatchRegex = new RegExp(escapeRegExp(matchText), 'gi');\n        return encoded.replace(escapedMatchRegex, function (match) {\n          return '<span class=\"tox-autocompleter-highlight\">' + match + '</span>';\n        });\n      } else {\n        return encoded;\n      }\n    };\n    var renderAutocompleteItem = function (spec, matchText, useText, presets, onItemValueHandler, itemResponse, sharedBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: Optional.none(),\n        htmlContent: useText ? spec.text.map(function (text) {\n          return replaceText(text, matchText);\n        }) : Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: Optional.none(),\n        checkMark: Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, sharedBackstage.providers, renderIcons, spec.icon);\n      return renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: function () {\n          return {};\n        },\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value, spec.meta);\n        },\n        onSetup: function () {\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: tooltipBehaviour(spec.meta, sharedBackstage)\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var renderChoiceItem = function (spec, useText, presets, onItemValueHandler, isSelected, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: presets,\n        textContent: useText ? spec.text : Optional.none(),\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        iconContent: spec.icon,\n        shortcutContent: useText ? spec.shortcut : Optional.none(),\n        checkMark: useText ? Optional.some(renderCheckmark(providersBackstage.icons)) : Optional.none(),\n        caret: Optional.none(),\n        value: spec.value\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: function (_api) {\n          return onItemValueHandler(spec.value);\n        },\n        onSetup: function (api) {\n          api.setActive(isSelected);\n          return function () {\n          };\n        },\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var parts$2 = generate$4(owner$2(), parts());\n\n    var hexColour = function (value) {\n      return { value: value };\n    };\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    var longformRegex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n    var isHexString = function (hex) {\n      return shorthandRegex.test(hex) || longformRegex.test(hex);\n    };\n    var getLongForm = function (hex) {\n      var hexString = hex.value.replace(shorthandRegex, function (m, r, g, b) {\n        return r + r + g + g + b + b;\n      });\n      return { value: hexString };\n    };\n    var extractValues = function (hex) {\n      var longForm = getLongForm(hex);\n      var splitForm = longformRegex.exec(longForm.value);\n      return splitForm === null ? [\n        'FFFFFF',\n        'FF',\n        'FF',\n        'FF'\n      ] : splitForm;\n    };\n    var toHex = function (component) {\n      var hex = component.toString(16);\n      return hex.length === 1 ? '0' + hex : hex;\n    };\n    var fromRgba = function (rgbaColour) {\n      var value = toHex(rgbaColour.red) + toHex(rgbaColour.green) + toHex(rgbaColour.blue);\n      return hexColour(value);\n    };\n\n    var min = Math.min;\n    var max = Math.max;\n    var round = Math.round;\n    var rgbRegex = /^rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/;\n    var rgbaRegex = /^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*(\\d?(?:\\.\\d+)?)\\)/;\n    var rgbaColour = function (red, green, blue, alpha) {\n      return {\n        red: red,\n        green: green,\n        blue: blue,\n        alpha: alpha\n      };\n    };\n    var isRgbaComponent = function (value) {\n      var num = parseInt(value, 10);\n      return num.toString() === value && num >= 0 && num <= 255;\n    };\n    var fromHsv = function (hsv) {\n      var r;\n      var g;\n      var b;\n      var hue = (hsv.hue || 0) % 360;\n      var saturation = hsv.saturation / 100;\n      var brightness = hsv.value / 100;\n      saturation = max(0, min(saturation, 1));\n      brightness = max(0, min(brightness, 1));\n      if (saturation === 0) {\n        r = g = b = round(255 * brightness);\n        return rgbaColour(r, g, b, 1);\n      }\n      var side = hue / 60;\n      var chroma = brightness * saturation;\n      var x = chroma * (1 - Math.abs(side % 2 - 1));\n      var match = brightness - chroma;\n      switch (Math.floor(side)) {\n      case 0:\n        r = chroma;\n        g = x;\n        b = 0;\n        break;\n      case 1:\n        r = x;\n        g = chroma;\n        b = 0;\n        break;\n      case 2:\n        r = 0;\n        g = chroma;\n        b = x;\n        break;\n      case 3:\n        r = 0;\n        g = x;\n        b = chroma;\n        break;\n      case 4:\n        r = x;\n        g = 0;\n        b = chroma;\n        break;\n      case 5:\n        r = chroma;\n        g = 0;\n        b = x;\n        break;\n      default:\n        r = g = b = 0;\n      }\n      r = round(255 * (r + match));\n      g = round(255 * (g + match));\n      b = round(255 * (b + match));\n      return rgbaColour(r, g, b, 1);\n    };\n    var fromHex = function (hexColour) {\n      var result = extractValues(hexColour);\n      var red = parseInt(result[1], 16);\n      var green = parseInt(result[2], 16);\n      var blue = parseInt(result[3], 16);\n      return rgbaColour(red, green, blue, 1);\n    };\n    var fromStringValues = function (red, green, blue, alpha) {\n      var r = parseInt(red, 10);\n      var g = parseInt(green, 10);\n      var b = parseInt(blue, 10);\n      var a = parseFloat(alpha);\n      return rgbaColour(r, g, b, a);\n    };\n    var fromString = function (rgbaString) {\n      if (rgbaString === 'transparent') {\n        return Optional.some(rgbaColour(0, 0, 0, 0));\n      }\n      var rgbMatch = rgbRegex.exec(rgbaString);\n      if (rgbMatch !== null) {\n        return Optional.some(fromStringValues(rgbMatch[1], rgbMatch[2], rgbMatch[3], '1'));\n      }\n      var rgbaMatch = rgbaRegex.exec(rgbaString);\n      if (rgbaMatch !== null) {\n        return Optional.some(fromStringValues(rgbaMatch[1], rgbaMatch[2], rgbaMatch[3], rgbaMatch[4]));\n      }\n      return Optional.none();\n    };\n    var toString = function (rgba) {\n      return 'rgba(' + rgba.red + ',' + rgba.green + ',' + rgba.blue + ',' + rgba.alpha + ')';\n    };\n    var red = rgbaColour(255, 0, 0, 1);\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireSkinLoadError = function (editor, error) {\n      return editor.fire('SkinLoadError', error);\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireResizeContent = function (editor, e) {\n      return editor.fire('ResizeContent', e);\n    };\n    var fireScrollContent = function (editor, e) {\n      return editor.fire('ScrollContent', e);\n    };\n    var fireTextColorChange = function (editor, data) {\n      return editor.fire('TextColorChange', data);\n    };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var storageName = 'tinymce-custom-colors';\n    function ColorCache (max) {\n      if (max === void 0) {\n        max = 10;\n      }\n      var storageString = global$9.getItem(storageName);\n      var localstorage = isString(storageString) ? JSON.parse(storageString) : [];\n      var prune = function (list) {\n        var diff = max - list.length;\n        return diff < 0 ? list.slice(0, max) : list;\n      };\n      var cache = prune(localstorage);\n      var add = function (key) {\n        indexOf(cache, key).each(remove);\n        cache.unshift(key);\n        if (cache.length > max) {\n          cache.pop();\n        }\n        global$9.setItem(storageName, JSON.stringify(cache));\n      };\n      var remove = function (idx) {\n        cache.splice(idx, 1);\n      };\n      var state = function () {\n        return cache.slice(0);\n      };\n      return {\n        add: add,\n        state: state\n      };\n    }\n\n    var choiceItem = 'choiceitem';\n    var defaultColors = [\n      {\n        type: choiceItem,\n        text: 'Light Green',\n        value: '#BFEDD2'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Yellow',\n        value: '#FBEEB8'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Red',\n        value: '#F8CAC6'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Purple',\n        value: '#ECCAFA'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Blue',\n        value: '#C2E0F4'\n      },\n      {\n        type: choiceItem,\n        text: 'Green',\n        value: '#2DC26B'\n      },\n      {\n        type: choiceItem,\n        text: 'Yellow',\n        value: '#F1C40F'\n      },\n      {\n        type: choiceItem,\n        text: 'Red',\n        value: '#E03E2D'\n      },\n      {\n        type: choiceItem,\n        text: 'Purple',\n        value: '#B96AD9'\n      },\n      {\n        type: choiceItem,\n        text: 'Blue',\n        value: '#3598DB'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Turquoise',\n        value: '#169179'\n      },\n      {\n        type: choiceItem,\n        text: 'Orange',\n        value: '#E67E23'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Red',\n        value: '#BA372A'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Purple',\n        value: '#843FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Blue',\n        value: '#236FA1'\n      },\n      {\n        type: choiceItem,\n        text: 'Light Gray',\n        value: '#ECF0F1'\n      },\n      {\n        type: choiceItem,\n        text: 'Medium Gray',\n        value: '#CED4D9'\n      },\n      {\n        type: choiceItem,\n        text: 'Gray',\n        value: '#95A5A6'\n      },\n      {\n        type: choiceItem,\n        text: 'Dark Gray',\n        value: '#7E8C8D'\n      },\n      {\n        type: choiceItem,\n        text: 'Navy Blue',\n        value: '#34495E'\n      },\n      {\n        type: choiceItem,\n        text: 'Black',\n        value: '#000000'\n      },\n      {\n        type: choiceItem,\n        text: 'White',\n        value: '#ffffff'\n      }\n    ];\n    var colorCache = ColorCache(10);\n    var mapColors = function (colorMap) {\n      var colors = [];\n      var canvas = document.createElement('canvas');\n      canvas.height = 1;\n      canvas.width = 1;\n      var ctx = canvas.getContext('2d');\n      var byteAsHex = function (colorByte, alphaByte) {\n        var bg = 255;\n        var alpha = alphaByte / 255;\n        var colorByteWithWhiteBg = Math.round(colorByte * alpha + bg * (1 - alpha));\n        return ('0' + colorByteWithWhiteBg.toString(16)).slice(-2).toUpperCase();\n      };\n      var asHexColor = function (color) {\n        if (/^[0-9A-Fa-f]{6}$/.test(color)) {\n          return '#' + color.toUpperCase();\n        }\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n        var rgba = ctx.getImageData(0, 0, 1, 1).data;\n        var r = rgba[0], g = rgba[1], b = rgba[2], a = rgba[3];\n        return '#' + byteAsHex(r, a) + byteAsHex(g, a) + byteAsHex(b, a);\n      };\n      for (var i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          value: asHexColor(colorMap[i]),\n          type: 'choiceitem'\n        });\n      }\n      return colors;\n    };\n    var getColorCols = function (editor, defaultCols) {\n      return editor.getParam('color_cols', defaultCols, 'number');\n    };\n    var hasCustomColors = function (editor) {\n      return editor.getParam('custom_colors') !== false;\n    };\n    var getColorMap = function (editor) {\n      return editor.getParam('color_map');\n    };\n    var getColors = function (editor) {\n      var unmapped = getColorMap(editor);\n      return unmapped !== undefined ? mapColors(unmapped) : defaultColors;\n    };\n    var getCurrentColors = function () {\n      return map(colorCache.state(), function (color) {\n        return {\n          type: choiceItem,\n          text: color,\n          value: color\n        };\n      });\n    };\n    var addColor = function (color) {\n      colorCache.add(color);\n    };\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var registerCommands = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        removeFormat(editor, format);\n      });\n    };\n    var calcCols = function (colors) {\n      return Math.max(5, Math.ceil(Math.sqrt(colors)));\n    };\n    var getColorCols$1 = function (editor) {\n      var colors = getColors(editor);\n      var defaultCols = calcCols(colors.length);\n      return getColorCols(editor, defaultCols);\n    };\n    var getAdditionalColors = function (hasCustom) {\n      var type = 'choiceitem';\n      var remove = {\n        type: type,\n        text: 'Remove color',\n        icon: 'color-swatch-remove-color',\n        value: 'remove'\n      };\n      var custom = {\n        type: type,\n        text: 'Custom color',\n        icon: 'color-picker',\n        value: 'custom'\n      };\n      return hasCustom ? [\n        remove,\n        custom\n      ] : [remove];\n    };\n    var applyColor = function (editor, format, value, onChoice) {\n      if (value === 'custom') {\n        var dialog = colorPickerDialog(editor);\n        dialog(function (colorOpt) {\n          colorOpt.each(function (color) {\n            addColor(color);\n            editor.execCommand('mceApplyTextcolor', format, color);\n            onChoice(color);\n          });\n        }, '#000000');\n      } else if (value === 'remove') {\n        onChoice('');\n        editor.execCommand('mceRemoveTextcolor', format);\n      } else {\n        onChoice(value);\n        editor.execCommand('mceApplyTextcolor', format, value);\n      }\n    };\n    var getColors$1 = function (colors, hasCustom) {\n      return colors.concat(getCurrentColors().concat(getAdditionalColors(hasCustom)));\n    };\n    var getFetch = function (colors, hasCustom) {\n      return function (callback) {\n        callback(getColors$1(colors, hasCustom));\n      };\n    };\n    var setIconColor = function (splitButtonApi, name, newColor) {\n      var setIconFillAndStroke = function (pathId, color) {\n        splitButtonApi.setIconFill(pathId, color);\n        splitButtonApi.setIconStroke(pathId, color);\n      };\n      var id = name === 'forecolor' ? 'tox-icon-text-color__color' : 'tox-icon-highlight-bg-color__color';\n      setIconFillAndStroke(id, newColor);\n    };\n    var registerTextColorButton = function (editor, name, format, tooltip, lastColor) {\n      editor.ui.registry.addSplitButton(name, {\n        tooltip: tooltip,\n        presets: 'color',\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        select: function (value) {\n          var optCurrentRgb = Optional.from(getCurrentColor(editor, format));\n          return optCurrentRgb.bind(function (currentRgb) {\n            return fromString(currentRgb).map(function (rgba) {\n              var currentHex = fromRgba(rgba).value;\n              return contains$1(value.toLowerCase(), currentHex);\n            });\n          }).getOr(false);\n        },\n        columns: getColorCols$1(editor),\n        fetch: getFetch(getColors(editor), hasCustomColors(editor)),\n        onAction: function (_splitButtonApi) {\n          if (lastColor.get() !== null) {\n            applyColor(editor, format, lastColor.get(), function () {\n            });\n          }\n        },\n        onItemAction: function (_splitButtonApi, value) {\n          applyColor(editor, format, value, function (newColor) {\n            lastColor.set(newColor);\n            fireTextColorChange(editor, {\n              name: name,\n              color: newColor\n            });\n          });\n        },\n        onSetup: function (splitButtonApi) {\n          if (lastColor.get() !== null) {\n            setIconColor(splitButtonApi, name, lastColor.get());\n          }\n          var handler = function (e) {\n            if (e.name === name) {\n              setIconColor(splitButtonApi, e.name, e.color);\n            }\n          };\n          editor.on('TextColorChange', handler);\n          return function () {\n            editor.off('TextColorChange', handler);\n          };\n        }\n      });\n    };\n    var registerTextColorMenuItem = function (editor, name, format, text) {\n      editor.ui.registry.addNestedMenuItem(name, {\n        text: text,\n        icon: name === 'forecolor' ? 'text-color' : 'highlight-bg-color',\n        getSubmenuItems: function () {\n          return [{\n              type: 'fancymenuitem',\n              fancytype: 'colorswatch',\n              onAction: function (data) {\n                applyColor(editor, format, data.value, noop);\n              }\n            }];\n        }\n      });\n    };\n    var colorPickerDialog = function (editor) {\n      return function (callback, value) {\n        var getOnSubmit = function (callback) {\n          return function (api) {\n            var data = api.getData();\n            callback(Optional.from(data.colorpicker));\n            api.close();\n          };\n        };\n        var onAction = function (api, details) {\n          if (details.name === 'hex-valid') {\n            if (details.value) {\n              api.enable('ok');\n            } else {\n              api.disable('ok');\n            }\n          }\n        };\n        var initialData = { colorpicker: value };\n        var submit = getOnSubmit(callback);\n        editor.windowManager.open({\n          title: 'Color Picker',\n          size: 'normal',\n          body: {\n            type: 'panel',\n            items: [{\n                type: 'colorpicker',\n                name: 'colorpicker',\n                label: 'Color'\n              }]\n          },\n          buttons: [\n            {\n              type: 'cancel',\n              name: 'cancel',\n              text: 'Cancel'\n            },\n            {\n              type: 'submit',\n              name: 'save',\n              text: 'Save',\n              primary: true\n            }\n          ],\n          initialData: initialData,\n          onAction: onAction,\n          onSubmit: submit,\n          onClose: function () {\n          },\n          onCancel: function () {\n            callback(Optional.none());\n          }\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      registerCommands(editor);\n      var lastForeColor = Cell(null);\n      var lastBackColor = Cell(null);\n      registerTextColorButton(editor, 'forecolor', 'forecolor', 'Text color', lastForeColor);\n      registerTextColorButton(editor, 'backcolor', 'hilitecolor', 'Background color', lastBackColor);\n      registerTextColorMenuItem(editor, 'forecolor', 'forecolor', 'Text color');\n      registerTextColorMenuItem(editor, 'backcolor', 'hilitecolor', 'Background color');\n    };\n\n    var createPartialChoiceMenu = function (value, items, onItemValueHandler, columns, presets, itemResponse, select, providersBackstage) {\n      var hasIcons = menuHasIcons(items);\n      var presetItemTypes = presets !== 'color' ? 'normal' : 'color';\n      var alloyItems = createChoiceItems(items, onItemValueHandler, columns, presetItemTypes, itemResponse, select, providersBackstage);\n      return createPartialMenuWithAlloyItems(value, hasIcons, alloyItems, columns, presets);\n    };\n    var createChoiceItems = function (items, onItemValueHandler, columns, itemPresets, itemResponse, select, providersBackstage) {\n      return cat(map(items, function (item) {\n        if (item.type === 'choiceitem') {\n          return createChoiceMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(renderChoiceItem(d, columns === 1, itemPresets, onItemValueHandler, select(item.value), itemResponse, providersBackstage, menuHasIcons(items)));\n          });\n        } else {\n          return Optional.none();\n        }\n      }));\n    };\n\n    var deriveMenuMovement = function (columns, presets) {\n      var menuMarkers = markers$1(presets);\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: true\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'grid',\n          selector: '.' + menuMarkers.item,\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        var rowClass = presets === 'color' ? 'tox-swatches__row' : 'tox-collection__group';\n        return {\n          mode: 'matrix',\n          rowSelector: '.' + rowClass\n        };\n      }\n    };\n    var deriveCollectionMovement = function (columns, presets) {\n      if (columns === 1) {\n        return {\n          mode: 'menu',\n          moveOnTab: false,\n          selector: '.tox-collection__item'\n        };\n      } else if (columns === 'auto') {\n        return {\n          mode: 'flatgrid',\n          selector: '.' + 'tox-collection__item',\n          initSize: {\n            numColumns: 1,\n            numRows: 1\n          }\n        };\n      } else {\n        return {\n          mode: 'matrix',\n          selectors: {\n            row: presets === 'color' ? '.tox-swatches__row' : '.tox-collection__group',\n            cell: presets === 'color' ? '.' + colorClass : '.' + selectableClass\n          }\n        };\n      }\n    };\n\n    function renderColorSwatchItem(spec, backstage) {\n      var items = getColors$1(backstage.colorinput.getColors(), backstage.colorinput.hasCustomColors());\n      var columns = backstage.colorinput.getColorCols();\n      var presets = 'color';\n      var menuSpec = createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n        spec.onAction({ value: value });\n      }, columns, presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n        return false;\n      }, backstage.shared.providers);\n      var widgetSpec = __assign(__assign({}, menuSpec), {\n        markers: markers$1(presets),\n        movement: deriveMenuMovement(columns, presets)\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget(Menu.sketch(widgetSpec))]\n      };\n    }\n\n    var cellOverEvent = generate$1('cell-over');\n    var cellExecuteEvent = generate$1('cell-execute');\n    var makeCell = function (row, col, labelId) {\n      var _a;\n      var emitCellOver = function (c) {\n        return emitWith(c, cellOverEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var emitExecute = function (c) {\n        return emitWith(c, cellExecuteEvent, {\n          row: row,\n          col: col\n        });\n      };\n      var onClick = function (c, se) {\n        se.stop();\n        emitExecute(c);\n      };\n      return build$1({\n        dom: {\n          tag: 'div',\n          attributes: (_a = { role: 'button' }, _a['aria-labelledby'] = labelId, _a)\n        },\n        behaviours: derive$1([\n          config('insert-table-picker-cell', [\n            run(mouseover(), Focusing.focus),\n            run(execute(), emitExecute),\n            run(click(), onClick),\n            run(tap(), onClick)\n          ]),\n          Toggling.config({\n            toggleClass: 'tox-insert-table-picker__selected',\n            toggleOnExecute: false\n          }),\n          Focusing.config({ onFocus: emitCellOver })\n        ])\n      });\n    };\n    var makeCells = function (labelId, numRows, numCols) {\n      var cells = [];\n      for (var i = 0; i < numRows; i++) {\n        var row = [];\n        for (var j = 0; j < numCols; j++) {\n          row.push(makeCell(i, j, labelId));\n        }\n        cells.push(row);\n      }\n      return cells;\n    };\n    var selectCells = function (cells, selectedRow, selectedColumn, numRows, numColumns) {\n      for (var i = 0; i < numRows; i++) {\n        for (var j = 0; j < numColumns; j++) {\n          Toggling.set(cells[i][j], i <= selectedRow && j <= selectedColumn);\n        }\n      }\n    };\n    var makeComponents = function (cells) {\n      return bind(cells, function (cellRow) {\n        return map(cellRow, premade$1);\n      });\n    };\n    var makeLabelText = function (row, col) {\n      return text(col + 1 + 'x' + (row + 1));\n    };\n    var renderInsertTableMenuItem = function (spec) {\n      var numRows = 10;\n      var numColumns = 10;\n      var sizeLabelId = generate$1('size-label');\n      var cells = makeCells(sizeLabelId, numRows, numColumns);\n      var memLabel = record({\n        dom: {\n          tag: 'span',\n          classes: ['tox-insert-table-picker__label'],\n          attributes: { id: sizeLabelId }\n        },\n        components: [text('0x0')],\n        behaviours: derive$1([Replacing.config({})])\n      });\n      return {\n        type: 'widget',\n        data: { value: generate$1('widget-id') },\n        dom: {\n          tag: 'div',\n          classes: ['tox-fancymenuitem']\n        },\n        autofocus: true,\n        components: [parts$2.widget({\n            dom: {\n              tag: 'div',\n              classes: ['tox-insert-table-picker']\n            },\n            components: makeComponents(cells).concat(memLabel.asSpec()),\n            behaviours: derive$1([\n              config('insert-table-picker', [\n                runWithTarget(cellOverEvent, function (c, t, e) {\n                  var row = e.event.row;\n                  var col = e.event.col;\n                  selectCells(cells, row, col, numRows, numColumns);\n                  Replacing.set(memLabel.get(c), [makeLabelText(row, col)]);\n                }),\n                runWithTarget(cellExecuteEvent, function (c, _, e) {\n                  spec.onAction({\n                    numRows: e.event.row + 1,\n                    numColumns: e.event.col + 1\n                  });\n                  emit(c, sandboxClose());\n                })\n              ]),\n              Keying.config({\n                initSize: {\n                  numRows: numRows,\n                  numColumns: numColumns\n                },\n                mode: 'flatgrid',\n                selector: '[role=\"button\"]'\n              })\n            ])\n          })]\n      };\n    };\n\n    var fancyMenuItems = {\n      inserttable: renderInsertTableMenuItem,\n      colorswatch: renderColorSwatchItem\n    };\n    var valueOpt = function (obj, key) {\n      return Object.prototype.hasOwnProperty.call(obj, key) ? Optional.some(obj[key]) : Optional.none();\n    };\n    var renderFancyMenuItem = function (spec, backstage) {\n      return valueOpt(fancyMenuItems, spec.fancytype).map(function (render) {\n        return render(spec, backstage);\n      });\n    };\n\n    var renderNestedItem = function (spec, itemResponse, providersBackstage, renderIcons, downwardsCaret) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      if (downwardsCaret === void 0) {\n        downwardsCaret = false;\n      }\n      var caret = downwardsCaret ? renderDownwardsCaret(providersBackstage.icons) : renderSubmenuCaret(providersBackstage.icons);\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.some(caret),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: noop,\n        onSetup: spec.onSetup,\n        triggersSubmenu: true,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderNormalItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        presets: 'normal',\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        caret: Optional.none(),\n        checkMark: Optional.none(),\n        shortcutContent: spec.shortcut\n      }, providersBackstage, renderIcons);\n      return renderCommonItem({\n        data: buildData(spec),\n        getApi: getApi,\n        disabled: spec.disabled,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage);\n    };\n\n    var renderSeparatorItem = function (spec) {\n      var innerHtml = spec.text.fold(function () {\n        return {};\n      }, function (text) {\n        return { innerHtml: text };\n      });\n      return {\n        type: 'separator',\n        dom: __assign({\n          tag: 'div',\n          classes: [\n            selectableClass,\n            groupHeadingClass\n          ]\n        }, innerHtml),\n        components: []\n      };\n    };\n\n    var renderToggleMenuItem = function (spec, itemResponse, providersBackstage, renderIcons) {\n      if (renderIcons === void 0) {\n        renderIcons = true;\n      }\n      var getApi = function (component) {\n        return {\n          setActive: function (state) {\n            Toggling.set(component, state);\n          },\n          isActive: function () {\n            return Toggling.isOn(component);\n          },\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(component, state);\n          }\n        };\n      };\n      var structure = renderItemStructure({\n        iconContent: spec.icon,\n        textContent: spec.text,\n        htmlContent: Optional.none(),\n        ariaLabel: spec.text,\n        checkMark: Optional.some(renderCheckmark(providersBackstage.icons)),\n        caret: Optional.none(),\n        shortcutContent: spec.shortcut,\n        presets: 'normal',\n        meta: spec.meta\n      }, providersBackstage, renderIcons);\n      return deepMerge(renderCommonItem({\n        data: buildData(spec),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: []\n      }, structure, itemResponse, providersBackstage), {\n        toggling: {\n          toggleClass: tickedClass,\n          toggleOnExecute: false,\n          selected: spec.active\n        }\n      });\n    };\n\n    var render = function (items, extras) {\n      return map(items, function (item) {\n        switch (item.type) {\n        case 'cardcontainer':\n          return renderContainer(item, render(item.items, extras));\n        case 'cardimage':\n          return renderImage(item.src, item.classes, item.alt);\n        case 'cardtext':\n          var shouldHighlight = item.name.exists(function (name) {\n            return contains(extras.cardText.highlightOn, name);\n          });\n          var matchText = shouldHighlight ? Optional.from(extras.cardText.matchText).getOr('') : '';\n          return renderHtml(replaceText(item.text, matchText), item.classes);\n        }\n      });\n    };\n    var renderCardMenuItem = function (spec, itemResponse, sharedBackstage, extras) {\n      var getApi = function (component) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(component);\n          },\n          setDisabled: function (state) {\n            Disabling.set(component, state);\n            each(descendants(component.element, '*'), function (elm) {\n              component.getSystem().getByDom(elm).each(function (comp) {\n                if (comp.hasConfigured(Disabling)) {\n                  Disabling.set(comp, state);\n                }\n              });\n            });\n          }\n        };\n      };\n      var structure = {\n        dom: renderItemDomStructure(false, spec.label),\n        optComponents: [Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [\n                containerClass,\n                containerRowClass\n              ]\n            },\n            components: render(spec.items, extras)\n          })]\n      };\n      return renderCommonItem({\n        data: buildData(__assign({ text: Optional.none() }, spec)),\n        disabled: spec.disabled,\n        getApi: getApi,\n        onAction: spec.onAction,\n        onSetup: spec.onSetup,\n        triggersSubmenu: false,\n        itemBehaviours: Optional.from(extras.itemBehaviours).getOr([])\n      }, structure, itemResponse, sharedBackstage.providers);\n    };\n\n    var autocomplete = renderAutocompleteItem;\n    var separator = renderSeparatorItem;\n    var normal = renderNormalItem;\n    var nested = renderNestedItem;\n    var toggle$1 = renderToggleMenuItem;\n    var fancy = renderFancyMenuItem;\n    var card = renderCardMenuItem;\n\n    var FocusMode;\n    (function (FocusMode) {\n      FocusMode[FocusMode['ContentFocus'] = 0] = 'ContentFocus';\n      FocusMode[FocusMode['UiFocus'] = 1] = 'UiFocus';\n    }(FocusMode || (FocusMode = {})));\n    var createMenuItemFromBridge = function (item, itemResponse, backstage, menuHasIcons, isHorizontalMenu) {\n      var providersBackstage = backstage.shared.providers;\n      var parseForHorizontalMenu = function (menuitem) {\n        return !isHorizontalMenu ? menuitem : __assign(__assign({}, menuitem), {\n          shortcut: Optional.none(),\n          icon: menuitem.text.isSome() ? Optional.none() : menuitem.icon\n        });\n      };\n      switch (item.type) {\n      case 'menuitem':\n        return createMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(normal(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'nestedmenuitem':\n        return createNestedMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(nested(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons, isHorizontalMenu));\n        });\n      case 'togglemenuitem':\n        return createToggleMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(toggle$1(parseForHorizontalMenu(d), itemResponse, providersBackstage, menuHasIcons));\n        });\n      case 'separator':\n        return createSeparatorMenuItem(item).fold(handleError, function (d) {\n          return Optional.some(separator(d));\n        });\n      case 'fancymenuitem':\n        return createFancyMenuItem(item).fold(handleError, function (d) {\n          return fancy(parseForHorizontalMenu(d), backstage);\n        });\n      default: {\n          console.error('Unknown item in general menu', item);\n          return Optional.none();\n        }\n      }\n    };\n    var createAutocompleteItems = function (items, matchText, onItemValueHandler, columns, itemResponse, sharedBackstage, highlightOn) {\n      var renderText = columns === 1;\n      var renderIcons = !renderText || menuHasIcons(items);\n      return cat(map(items, function (item) {\n        switch (item.type) {\n        case 'separator':\n          return createSeparatorItem(item).fold(handleError, function (d) {\n            return Optional.some(separator(d));\n          });\n        case 'cardmenuitem':\n          return createCardMenuItem(item).fold(handleError, function (d) {\n            return Optional.some(card(__assign(__assign({}, d), {\n              onAction: function (api) {\n                d.onAction(api);\n                onItemValueHandler(d.value, d.meta);\n              }\n            }), itemResponse, sharedBackstage, {\n              itemBehaviours: tooltipBehaviour(d.meta, sharedBackstage),\n              cardText: {\n                matchText: matchText,\n                highlightOn: highlightOn\n              }\n            }));\n          });\n        case 'autocompleteitem':\n        default:\n          return createAutocompleterItem(item).fold(handleError, function (d) {\n            return Optional.some(autocomplete(d, matchText, renderText, 'normal', onItemValueHandler, itemResponse, sharedBackstage, renderIcons));\n          });\n        }\n      }));\n    };\n    var createPartialMenu = function (value, items, itemResponse, backstage, isHorizontalMenu) {\n      var hasIcons = menuHasIcons(items);\n      var alloyItems = cat(map(items, function (item) {\n        var itemHasIcon = function (i) {\n          return isHorizontalMenu ? !i.hasOwnProperty('text') : hasIcons;\n        };\n        var createItem = function (i) {\n          return createMenuItemFromBridge(i, itemResponse, backstage, itemHasIcon(i), isHorizontalMenu);\n        };\n        if (item.type === 'nestedmenuitem' && item.getSubmenuItems().length <= 0) {\n          return createItem(__assign(__assign({}, item), { disabled: true }));\n        } else {\n          return createItem(item);\n        }\n      }));\n      var createPartial = isHorizontalMenu ? createHorizontalPartialMenuWithAlloyItems : createPartialMenuWithAlloyItems;\n      return createPartial(value, hasIcons, alloyItems, 1, 'normal');\n    };\n    var createTieredDataFrom = function (partialMenu) {\n      return tieredMenu.singleData(partialMenu.value, partialMenu);\n    };\n    var createMenuFrom = function (partialMenu, columns, focusMode, presets) {\n      var focusManager = focusMode === FocusMode.ContentFocus ? highlights() : dom();\n      var movement = deriveMenuMovement(columns, presets);\n      var menuMarkers = markers$1(presets);\n      return {\n        dom: partialMenu.dom,\n        components: partialMenu.components,\n        items: partialMenu.items,\n        value: partialMenu.value,\n        markers: {\n          selectedItem: menuMarkers.selectedItem,\n          item: menuMarkers.item\n        },\n        movement: movement,\n        fakeFocus: focusMode === FocusMode.ContentFocus,\n        focusManager: focusManager,\n        menuBehaviours: SimpleBehaviours.unnamedEvents(columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n            detectSize(comp, 4, menuMarkers.item).each(function (_a) {\n              var numColumns = _a.numColumns, numRows = _a.numRows;\n              Keying.setGridSize(comp, numRows, numColumns);\n            });\n          })])\n      };\n    };\n\n    var register$2 = function (editor, sharedBackstage) {\n      var activeAutocompleter = Cell(Optional.none());\n      var processingAction = Cell(false);\n      var autocompleter = build$1(InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-autocompleter']\n        },\n        components: [],\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissAutocompleter', [run(dismissRequested(), function () {\n              return cancelIfNecessary();\n            })])]),\n        lazySink: sharedBackstage.getSink\n      }));\n      var isMenuOpen = function () {\n        return InlineView.isOpen(autocompleter);\n      };\n      var isActive = function () {\n        return activeAutocompleter.get().isSome();\n      };\n      var hideIfNecessary = function () {\n        if (isActive()) {\n          InlineView.hide(autocompleter);\n        }\n      };\n      var cancelIfNecessary = function () {\n        if (isActive()) {\n          var lastElement = activeAutocompleter.get().map(function (ac) {\n            return ac.element;\n          });\n          detect$4(lastElement.getOr(SugarElement.fromDom(editor.selection.getNode()))).each(unwrap);\n          hideIfNecessary();\n          activeAutocompleter.set(Optional.none());\n          processingAction.set(false);\n        }\n      };\n      var getAutocompleters = cached(function () {\n        return register(editor);\n      });\n      var getCombinedItems = function (triggerChar, matches) {\n        var columns = findMap(matches, function (m) {\n          return Optional.from(m.columns);\n        }).getOr(1);\n        return bind(matches, function (match) {\n          var choices = match.items;\n          return createAutocompleteItems(choices, match.matchText, function (itemValue, itemMeta) {\n            var nr = editor.selection.getRng();\n            getContext(editor.dom, nr, triggerChar).fold(function () {\n              return console.error('Lost context. Cursor probably moved');\n            }, function (_a) {\n              var range = _a.range;\n              var autocompleterApi = {\n                hide: function () {\n                  cancelIfNecessary();\n                },\n                reload: function (fetchOptions) {\n                  hideIfNecessary();\n                  load(fetchOptions);\n                }\n              };\n              processingAction.set(true);\n              match.onAction(autocompleterApi, range, itemValue, itemMeta);\n              processingAction.set(false);\n            });\n          }, columns, ItemResponse$1.BUBBLE_TO_SANDBOX, sharedBackstage, match.highlightOn);\n        });\n      };\n      var commenceIfNecessary = function (context) {\n        if (!isActive()) {\n          var wrapper = create$4(editor, context.range);\n          activeAutocompleter.set(Optional.some({\n            triggerChar: context.triggerChar,\n            element: wrapper,\n            matchLength: context.text.length\n          }));\n          processingAction.set(false);\n        }\n      };\n      var display = function (ac, context, lookupData, items) {\n        ac.matchLength = context.text.length;\n        var columns = findMap(lookupData, function (ld) {\n          return Optional.from(ld.columns);\n        }).getOr(1);\n        InlineView.showAt(autocompleter, {\n          anchor: 'node',\n          root: SugarElement.fromDom(editor.getBody()),\n          node: Optional.from(ac.element)\n        }, Menu.sketch(createMenuFrom(createPartialMenuWithAlloyItems('autocompleter-value', true, items, columns, 'normal'), columns, FocusMode.ContentFocus, 'normal')));\n        InlineView.getContent(autocompleter).each(Highlighting.highlightFirst);\n      };\n      var doLookup = function (fetchOptions) {\n        return activeAutocompleter.get().map(function (ac) {\n          return getContext(editor.dom, editor.selection.getRng(), ac.triggerChar).bind(function (newContext) {\n            return lookupWithContext(editor, getAutocompleters, newContext, fetchOptions);\n          });\n        }).getOrThunk(function () {\n          return lookup(editor, getAutocompleters);\n        });\n      };\n      var load = function (fetchOptions) {\n        doLookup(fetchOptions).fold(cancelIfNecessary, function (lookupInfo) {\n          commenceIfNecessary(lookupInfo.context);\n          lookupInfo.lookupData.then(function (lookupData) {\n            activeAutocompleter.get().map(function (ac) {\n              var context = lookupInfo.context;\n              if (ac.triggerChar === context.triggerChar) {\n                var combinedItems = getCombinedItems(context.triggerChar, lookupData);\n                if (combinedItems.length > 0) {\n                  display(ac, context, lookupData, combinedItems);\n                } else if (context.text.length - ac.matchLength >= 10) {\n                  cancelIfNecessary();\n                } else {\n                  hideIfNecessary();\n                }\n              }\n            });\n          });\n        });\n      };\n      var onKeypress = last$2(function (e) {\n        if (e.which === 27) {\n          return;\n        }\n        load();\n      }, 50);\n      var autocompleterUiApi = {\n        onKeypress: onKeypress,\n        cancelIfNecessary: cancelIfNecessary,\n        isMenuOpen: isMenuOpen,\n        isActive: isActive,\n        isProcessingAction: processingAction.get,\n        getView: function () {\n          return InlineView.getContent(autocompleter);\n        }\n      };\n      if (editor.hasPlugin('rtc') === false) {\n        AutocompleterEditorEvents.setup(autocompleterUiApi, editor);\n      }\n    };\n    var Autocompleter = { register: register$2 };\n\n    var filter$2 = always;\n    var bind$3 = function (element, event, handler) {\n      return bind$2(element, event, filter$2, handler);\n    };\n    var capture$1 = function (element, event, handler) {\n      return capture(element, event, filter$2, handler);\n    };\n    var fromRawEvent$1 = fromRawEvent;\n\n    var closest$4 = function (scope, selector, isRoot) {\n      return closest$3(scope, selector, isRoot).isSome();\n    };\n\n    function DelayedFunction (fun, delay) {\n      var ref = null;\n      var schedule = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        ref = setTimeout(function () {\n          fun.apply(null, args);\n          ref = null;\n        }, delay);\n      };\n      var cancel = function () {\n        if (ref !== null) {\n          clearTimeout(ref);\n          ref = null;\n        }\n      };\n      return {\n        cancel: cancel,\n        schedule: schedule\n      };\n    }\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      var raw = event.raw;\n      if (raw.touches === undefined || raw.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(raw.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var monitor = function (settings) {\n      var startData = Cell(Optional.none());\n      var longpressFired = Cell(false);\n      var longpress$1 = DelayedFunction(function (event) {\n        settings.triggerEvent(longpress(), event);\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      var handleTouchstart = function (event) {\n        getTouch(event).each(function (touch) {\n          longpress$1.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: event.target\n          };\n          longpress$1.schedule(event);\n          longpressFired.set(false);\n          startData.set(Optional.some(data));\n        });\n        return Optional.none();\n      };\n      var handleTouchmove = function (event) {\n        longpress$1.cancel();\n        getTouch(event).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Optional.none());\n            }\n          });\n        });\n        return Optional.none();\n      };\n      var handleTouchend = function (event) {\n        longpress$1.cancel();\n        var isSame = function (data) {\n          return eq$1(data.target, event.target);\n        };\n        return startData.get().filter(isSame).map(function (_data) {\n          if (longpressFired.get()) {\n            event.prevent();\n            return false;\n          } else {\n            return settings.triggerEvent(tap(), event);\n          }\n        });\n      };\n      var handlers = wrapAll$1([\n        {\n          key: touchstart(),\n          value: handleTouchstart\n        },\n        {\n          key: touchmove(),\n          value: handleTouchmove\n        },\n        {\n          key: touchend(),\n          value: handleTouchend\n        }\n      ]);\n      var fireIfReady = function (event, type) {\n        return get$1(handlers, type).bind(function (handler) {\n          return handler(event);\n        });\n      };\n      return { fireIfReady: fireIfReady };\n    };\n\n    var isDangerous = function (event) {\n      var keyEv = event.raw;\n      return keyEv.which === BACKSPACE[0] && !contains([\n        'input',\n        'textarea'\n      ], name(event.target)) && !closest$4(event.target, '[contenteditable=\"true\"]');\n    };\n    var isFirefox = function () {\n      return detect$3().browser.isFirefox();\n    };\n    var settingsSchema = objOfOnly([\n      strictFunction('triggerEvent'),\n      defaulted$1('stopBackspace', true)\n    ]);\n    var bindFocus = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'focus', handler);\n      } else {\n        return bind$3(container, 'focusin', handler);\n      }\n    };\n    var bindBlur = function (container, handler) {\n      if (isFirefox()) {\n        return capture$1(container, 'blur', handler);\n      } else {\n        return bind$3(container, 'focusout', handler);\n      }\n    };\n    var setup$1 = function (container, rawSettings) {\n      var settings = asRawOrDie('Getting GUI events settings', settingsSchema, rawSettings);\n      var pointerEvents = [\n        'touchstart',\n        'touchmove',\n        'touchend',\n        'touchcancel',\n        'gesturestart',\n        'mousedown',\n        'mouseup',\n        'mouseover',\n        'mousemove',\n        'mouseout',\n        'click'\n      ];\n      var tapEvent = monitor(settings);\n      var simpleEvents = map(pointerEvents.concat([\n        'selectstart',\n        'input',\n        'contextmenu',\n        'change',\n        'transitionend',\n        'drag',\n        'dragstart',\n        'dragend',\n        'dragenter',\n        'dragleave',\n        'dragover',\n        'drop',\n        'keyup'\n      ]), function (type) {\n        return bind$3(container, type, function (event) {\n          tapEvent.fireIfReady(event, type).each(function (tapStopped) {\n            if (tapStopped) {\n              event.kill();\n            }\n          });\n          var stopped = settings.triggerEvent(type, event);\n          if (stopped) {\n            event.kill();\n          }\n        });\n      });\n      var pasteTimeout = Cell(Optional.none());\n      var onPaste = bind$3(container, 'paste', function (event) {\n        tapEvent.fireIfReady(event, 'paste').each(function (tapStopped) {\n          if (tapStopped) {\n            event.kill();\n          }\n        });\n        var stopped = settings.triggerEvent('paste', event);\n        if (stopped) {\n          event.kill();\n        }\n        pasteTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postPaste(), event);\n        }, 0)));\n      });\n      var onKeydown = bind$3(container, 'keydown', function (event) {\n        var stopped = settings.triggerEvent('keydown', event);\n        if (stopped) {\n          event.kill();\n        } else if (settings.stopBackspace === true && isDangerous(event)) {\n          event.prevent();\n        }\n      });\n      var onFocusIn = bindFocus(container, function (event) {\n        var stopped = settings.triggerEvent('focusin', event);\n        if (stopped) {\n          event.kill();\n        }\n      });\n      var focusoutTimeout = Cell(Optional.none());\n      var onFocusOut = bindBlur(container, function (event) {\n        var stopped = settings.triggerEvent('focusout', event);\n        if (stopped) {\n          event.kill();\n        }\n        focusoutTimeout.set(Optional.some(setTimeout(function () {\n          settings.triggerEvent(postBlur(), event);\n        }, 0)));\n      });\n      var unbind = function () {\n        each(simpleEvents, function (e) {\n          e.unbind();\n        });\n        onKeydown.unbind();\n        onFocusIn.unbind();\n        onFocusOut.unbind();\n        onPaste.unbind();\n        pasteTimeout.get().each(clearTimeout);\n        focusoutTimeout.get().each(clearTimeout);\n      };\n      return { unbind: unbind };\n    };\n\n    var derive$2 = function (rawEvent, rawTarget) {\n      var source = get$1(rawEvent, 'target').getOr(rawTarget);\n      return Cell(source);\n    };\n\n    var fromSource = function (event, source) {\n      var stopper = Cell(false);\n      var cutter = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      var cut = function () {\n        cutter.set(true);\n      };\n      return {\n        stop: stop,\n        cut: cut,\n        isStopped: stopper.get,\n        isCut: cutter.get,\n        event: event,\n        setSource: source.set,\n        getSource: source.get\n      };\n    };\n    var fromExternal = function (event) {\n      var stopper = Cell(false);\n      var stop = function () {\n        stopper.set(true);\n      };\n      return {\n        stop: stop,\n        cut: noop,\n        isStopped: stopper.get,\n        isCut: never,\n        event: event,\n        setSource: die('Cannot set source of a broadcasted event'),\n        getSource: die('Cannot get source of a broadcasted event')\n      };\n    };\n\n    var adt$b = Adt.generate([\n      { stopped: [] },\n      { resume: ['element'] },\n      { complete: [] }\n    ]);\n    var doTriggerHandler = function (lookup, eventType, rawEvent, target, source, logger) {\n      var handler = lookup(eventType, target);\n      var simulatedEvent = fromSource(rawEvent, source);\n      return handler.fold(function () {\n        logger.logEventNoHandlers(eventType, target);\n        return adt$b.complete();\n      }, function (handlerInfo) {\n        var descHandler = handlerInfo.descHandler;\n        var eventHandler = getCurried(descHandler);\n        eventHandler(simulatedEvent);\n        if (simulatedEvent.isStopped()) {\n          logger.logEventStopped(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.stopped();\n        } else if (simulatedEvent.isCut()) {\n          logger.logEventCut(eventType, handlerInfo.element, descHandler.purpose);\n          return adt$b.complete();\n        } else {\n          return parent(handlerInfo.element).fold(function () {\n            logger.logNoParent(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.complete();\n          }, function (parent) {\n            logger.logEventResponse(eventType, handlerInfo.element, descHandler.purpose);\n            return adt$b.resume(parent);\n          });\n        }\n      });\n    };\n    var doTriggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, source, logger) {\n      return doTriggerHandler(lookup, eventType, rawEvent, rawTarget, source, logger).fold(function () {\n        return true;\n      }, function (parent) {\n        return doTriggerOnUntilStopped(lookup, eventType, rawEvent, parent, source, logger);\n      }, function () {\n        return false;\n      });\n    };\n    var triggerHandler = function (lookup, eventType, rawEvent, target, logger) {\n      var source = derive$2(rawEvent, target);\n      return doTriggerHandler(lookup, eventType, rawEvent, target, source, logger);\n    };\n    var broadcast = function (listeners, rawEvent, _logger) {\n      var simulatedEvent = fromExternal(rawEvent);\n      each(listeners, function (listener) {\n        var descHandler = listener.descHandler;\n        var handler = getCurried(descHandler);\n        handler(simulatedEvent);\n      });\n      return simulatedEvent.isStopped();\n    };\n    var triggerUntilStopped = function (lookup, eventType, rawEvent, logger) {\n      return triggerOnUntilStopped(lookup, eventType, rawEvent, rawEvent.target, logger);\n    };\n    var triggerOnUntilStopped = function (lookup, eventType, rawEvent, rawTarget, logger) {\n      var source = derive$2(rawEvent, rawTarget);\n      return doTriggerOnUntilStopped(lookup, eventType, rawEvent, rawTarget, source, logger);\n    };\n\n    var eventHandler = function (element, descHandler) {\n      return {\n        element: element,\n        descHandler: descHandler\n      };\n    };\n    var broadcastHandler = function (id, handler) {\n      return {\n        id: id,\n        descHandler: handler\n      };\n    };\n    function EventRegistry () {\n      var registry = {};\n      var registerId = function (extraArgs, id, events) {\n        each$1(events, function (v, k) {\n          var handlers = registry[k] !== undefined ? registry[k] : {};\n          handlers[id] = curryArgs(v, extraArgs);\n          registry[k] = handlers;\n        });\n      };\n      var findHandler = function (handlers, elem) {\n        return read$1(elem).fold(function () {\n          return Optional.none();\n        }, function (id) {\n          return handlers.bind(function (h) {\n            return get$1(h, id);\n          }).map(function (descHandler) {\n            return eventHandler(elem, descHandler);\n          });\n        });\n      };\n      var filterByType = function (type) {\n        return get$1(registry, type).map(function (handlers) {\n          return mapToArray(handlers, function (f, id) {\n            return broadcastHandler(id, f);\n          });\n        }).getOr([]);\n      };\n      var find = function (isAboveRoot, type, target) {\n        var handlers = get$1(registry, type);\n        return closest(target, function (elem) {\n          return findHandler(handlers, elem);\n        }, isAboveRoot);\n      };\n      var unregisterId = function (id) {\n        each$1(registry, function (handlersById, _eventName) {\n          if (handlersById.hasOwnProperty(id)) {\n            delete handlersById[id];\n          }\n        });\n      };\n      return {\n        registerId: registerId,\n        unregisterId: unregisterId,\n        filterByType: filterByType,\n        find: find\n      };\n    }\n\n    function Registry () {\n      var events = EventRegistry();\n      var components = {};\n      var readOrTag = function (component) {\n        var elem = component.element;\n        return read$1(elem).fold(function () {\n          return write('uid-', component.element);\n        }, function (uid) {\n          return uid;\n        });\n      };\n      var failOnDuplicate = function (component, tagId) {\n        var conflict = components[tagId];\n        if (conflict === component) {\n          unregister(component);\n        } else {\n          throw new Error('The tagId \"' + tagId + '\" is already used by: ' + element(conflict.element) + '\\nCannot use it for: ' + element(component.element) + '\\n' + 'The conflicting element is' + (inBody(conflict.element) ? ' ' : ' not ') + 'already in the DOM');\n        }\n      };\n      var register = function (component) {\n        var tagId = readOrTag(component);\n        if (hasNonNullableKey(components, tagId)) {\n          failOnDuplicate(component, tagId);\n        }\n        var extraArgs = [component];\n        events.registerId(extraArgs, tagId, component.events);\n        components[tagId] = component;\n      };\n      var unregister = function (component) {\n        read$1(component.element).each(function (tagId) {\n          delete components[tagId];\n          events.unregisterId(tagId);\n        });\n      };\n      var filter = function (type) {\n        return events.filterByType(type);\n      };\n      var find = function (isAboveRoot, type, target) {\n        return events.find(isAboveRoot, type, target);\n      };\n      var getById = function (id) {\n        return get$1(components, id);\n      };\n      return {\n        find: find,\n        filter: filter,\n        register: register,\n        unregister: unregister,\n        getById: getById\n      };\n    }\n\n    var factory$3 = function (detail) {\n      var _a = detail.dom, attributes = _a.attributes, domWithoutAttributes = __rest(_a, ['attributes']);\n      return {\n        uid: detail.uid,\n        dom: __assign({\n          tag: 'div',\n          attributes: __assign({ role: 'presentation' }, attributes)\n        }, domWithoutAttributes),\n        components: detail.components,\n        behaviours: get$d(detail.containerBehaviours),\n        events: detail.events,\n        domModification: detail.domModification,\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Container = single$2({\n      name: 'Container',\n      factory: factory$3,\n      configFields: [\n        defaulted$1('components', []),\n        field$1('containerBehaviours', []),\n        defaulted$1('events', {}),\n        defaulted$1('domModification', {}),\n        defaulted$1('eventOrder', {})\n      ]\n    });\n\n    var takeover = function (root) {\n      var isAboveRoot = function (el) {\n        return parent(root.element).fold(function () {\n          return true;\n        }, function (parent) {\n          return eq$1(el, parent);\n        });\n      };\n      var registry = Registry();\n      var lookup = function (eventName, target) {\n        return registry.find(isAboveRoot, eventName, target);\n      };\n      var domEvents = setup$1(root.element, {\n        triggerEvent: function (eventName, event) {\n          return monitorEvent(eventName, event.target, function (logger) {\n            return triggerUntilStopped(lookup, eventName, event, logger);\n          });\n        }\n      });\n      var systemApi = {\n        debugInfo: constant('real'),\n        triggerEvent: function (eventName, target, data) {\n          monitorEvent(eventName, target, function (logger) {\n            return triggerOnUntilStopped(lookup, eventName, data, target, logger);\n          });\n        },\n        triggerFocus: function (target, originator) {\n          read$1(target).fold(function () {\n            focus$1(target);\n          }, function (_alloyId) {\n            monitorEvent(focus(), target, function (logger) {\n              triggerHandler(lookup, focus(), {\n                originator: originator,\n                kill: noop,\n                prevent: noop,\n                target: target\n              }, target, logger);\n              return false;\n            });\n          });\n        },\n        triggerEscape: function (comp, simulatedEvent) {\n          systemApi.triggerEvent('keydown', comp.element, simulatedEvent.event);\n        },\n        getByUid: function (uid) {\n          return getByUid(uid);\n        },\n        getByDom: function (elem) {\n          return getByDom(elem);\n        },\n        build: build$1,\n        addToGui: function (c) {\n          add(c);\n        },\n        removeFromGui: function (c) {\n          remove$1(c);\n        },\n        addToWorld: function (c) {\n          addToWorld(c);\n        },\n        removeFromWorld: function (c) {\n          removeFromWorld(c);\n        },\n        broadcast: function (message) {\n          broadcast$1(message);\n        },\n        broadcastOn: function (channels, message) {\n          broadcastOn(channels, message);\n        },\n        broadcastEvent: function (eventName, event) {\n          broadcastEvent(eventName, event);\n        },\n        isConnected: always\n      };\n      var addToWorld = function (component) {\n        component.connect(systemApi);\n        if (!isText(component.element)) {\n          registry.register(component);\n          each(component.components(), addToWorld);\n          systemApi.triggerEvent(systemInit(), component.element, { target: component.element });\n        }\n      };\n      var removeFromWorld = function (component) {\n        if (!isText(component.element)) {\n          each(component.components(), removeFromWorld);\n          registry.unregister(component);\n        }\n        component.disconnect();\n      };\n      var add = function (component) {\n        attach$1(root, component);\n      };\n      var remove$1 = function (component) {\n        detach(component);\n      };\n      var destroy = function () {\n        domEvents.unbind();\n        remove(root.element);\n      };\n      var broadcastData = function (data) {\n        var receivers = registry.filter(receive());\n        each(receivers, function (receiver) {\n          var descHandler = receiver.descHandler;\n          var handler = getCurried(descHandler);\n          handler(data);\n        });\n      };\n      var broadcast$1 = function (message) {\n        broadcastData({\n          universal: true,\n          data: message\n        });\n      };\n      var broadcastOn = function (channels, message) {\n        broadcastData({\n          universal: false,\n          channels: channels,\n          data: message\n        });\n      };\n      var broadcastEvent = function (eventName, event) {\n        var listeners = registry.filter(eventName);\n        return broadcast(listeners, event);\n      };\n      var getByUid = function (uid) {\n        return registry.getById(uid).fold(function () {\n          return Result.error(new Error('Could not find component with uid: \"' + uid + '\" in system.'));\n        }, Result.value);\n      };\n      var getByDom = function (elem) {\n        var uid = read$1(elem).getOr('not found');\n        return getByUid(uid);\n      };\n      addToWorld(root);\n      return {\n        root: root,\n        element: root.element,\n        destroy: destroy,\n        add: add,\n        remove: remove$1,\n        getByUid: getByUid,\n        getByDom: getByDom,\n        addToWorld: addToWorld,\n        removeFromWorld: removeFromWorld,\n        broadcast: broadcast$1,\n        broadcastOn: broadcastOn,\n        broadcastEvent: broadcastEvent\n      };\n    };\n\n    var renderBar = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-bar',\n            'tox-form__controls-h-stack'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var schema$e = constant([\n      defaulted$1('prefix', 'form-field'),\n      field$1('fieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var parts$3 = constant([\n      optional({\n        schema: [strict$1('dom')],\n        name: 'label'\n      }),\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      required({\n        factory: {\n          sketch: function (spec) {\n            var excludeFactory = exclude$1(spec, ['factory']);\n            return spec.factory.sketch(excludeFactory);\n          }\n        },\n        schema: [strict$1('factory')],\n        name: 'field'\n      })\n    ]);\n\n    var factory$4 = function (detail, components, _spec, _externals) {\n      var behaviours = augment(detail.fieldBehaviours, [\n        Composing.config({\n          find: function (container) {\n            return getPart(container, detail, 'field');\n          }\n        }),\n        Representing.config({\n          store: {\n            mode: 'manual',\n            getValue: function (field) {\n              return Composing.getCurrent(field).bind(Representing.getValue);\n            },\n            setValue: function (field, value) {\n              Composing.getCurrent(field).each(function (current) {\n                Representing.setValue(current, value);\n              });\n            }\n          }\n        })\n      ]);\n      var events = derive([runOnAttached(function (component, _simulatedEvent) {\n          var ps = getParts(component, detail, [\n            'label',\n            'field',\n            'aria-descriptor'\n          ]);\n          ps.field().each(function (field) {\n            var id = generate$1(detail.prefix);\n            ps.label().each(function (label) {\n              set$1(label.element, 'for', id);\n              set$1(field.element, 'id', id);\n            });\n            ps['aria-descriptor']().each(function (descriptor) {\n              var descriptorId = generate$1(detail.prefix);\n              set$1(descriptor.element, 'id', descriptorId);\n              set$1(field.element, 'aria-describedby', descriptorId);\n            });\n          });\n        })]);\n      var apis = {\n        getField: function (container) {\n          return getPart(container, detail, 'field');\n        },\n        getLabel: function (container) {\n          return getPart(container, detail, 'label');\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: behaviours,\n        events: events,\n        apis: apis\n      };\n    };\n    var FormField = composite$1({\n      name: 'FormField',\n      configFields: schema$e(),\n      partFields: parts$3(),\n      factory: factory$4,\n      apis: {\n        getField: function (apis, comp) {\n          return apis.getField(comp);\n        },\n        getLabel: function (apis, comp) {\n          return apis.getLabel(comp);\n        }\n      }\n    });\n\n    var exhibit$4 = function (base, tabConfig) {\n      return nu$6({\n        attributes: wrapAll$1([{\n            key: tabConfig.tabAttr,\n            value: 'true'\n          }])\n      });\n    };\n\n    var ActiveTabstopping = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$4\n    });\n\n    var TabstopSchema = [defaulted$1('tabAttr', 'data-alloy-tabstop')];\n\n    var Tabstopping = create$1({\n      fields: TabstopSchema,\n      name: 'tabstopping',\n      active: ActiveTabstopping\n    });\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var renderFormFieldWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      var spec = renderFormFieldSpecWith(pLabel, pField, extraClasses, extraBehaviours);\n      return FormField.sketch(spec);\n    };\n    var renderFormField = function (pLabel, pField) {\n      return renderFormFieldWith(pLabel, pField, [], []);\n    };\n    var renderFormFieldSpecWith = function (pLabel, pField, extraClasses, extraBehaviours) {\n      return {\n        dom: renderFormFieldDomWith(extraClasses),\n        components: pLabel.toArray().concat([pField]),\n        fieldBehaviours: derive$1(extraBehaviours)\n      };\n    };\n    var renderFormFieldDom = function () {\n      return renderFormFieldDomWith([]);\n    };\n    var renderFormFieldDomWith = function (extraClasses) {\n      return {\n        tag: 'div',\n        classes: ['tox-form__group'].concat(extraClasses)\n      };\n    };\n    var renderLabel = function (label, providersBackstage) {\n      return FormField.parts.label({\n        dom: {\n          tag: 'label',\n          classes: ['tox-label'],\n          innerHtml: providersBackstage.translate(label)\n        }\n      });\n    };\n\n    var formChangeEvent = generate$1('form-component-change');\n    var formCloseEvent = generate$1('form-close');\n    var formCancelEvent = generate$1('form-cancel');\n    var formActionEvent = generate$1('form-action');\n    var formSubmitEvent = generate$1('form-submit');\n    var formBlockEvent = generate$1('form-block');\n    var formUnblockEvent = generate$1('form-unblock');\n    var formTabChangeEvent = generate$1('form-tabchange');\n    var formResizeEvent = generate$1('form-resize');\n\n    var renderCollection = function (spec, providersBackstage) {\n      var _a;\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var runOnItem = function (f) {\n        return function (comp, se) {\n          closest$3(se.event.target, '[data-collection-item-value]').each(function (target) {\n            f(comp, se, target, get$3(target, 'data-collection-item-value'));\n          });\n        };\n      };\n      var setContents = function (comp, items) {\n        var htmlLines = map(items, function (item) {\n          var itemText = global$6.translate(item.text);\n          var textContent = spec.columns === 1 ? '<div class=\"tox-collection__item-label\">' + itemText + '</div>' : '';\n          var iconContent = '<div class=\"tox-collection__item-icon\">' + item.icon + '</div>';\n          var mapItemName = {\n            '_': ' ',\n            ' - ': ' ',\n            '-': ' '\n          };\n          var ariaLabel = itemText.replace(/\\_| \\- |\\-/g, function (match) {\n            return mapItemName[match];\n          });\n          var disabledClass = providersBackstage.isDisabled() ? ' tox-collection__item--state-disabled' : '';\n          return '<div class=\"tox-collection__item' + disabledClass + '\" tabindex=\"-1\" data-collection-item-value=\"' + global$a.encodeAllRaw(item.value) + '\" title=\"' + ariaLabel + '\" aria-label=\"' + ariaLabel + '\">' + iconContent + textContent + '</div>';\n        });\n        var chunks = spec.columns !== 'auto' && spec.columns > 1 ? chunk(htmlLines, spec.columns) : [htmlLines];\n        var html = map(chunks, function (ch) {\n          return '<div class=\"tox-collection__group\">' + ch.join('') + '</div>';\n        });\n        set(comp.element, html.join(''));\n      };\n      var onClick = runOnItem(function (comp, se, tgt, itemValue) {\n        se.stop();\n        if (!providersBackstage.isDisabled()) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }\n      });\n      var collectionEvents = [\n        run(mouseover(), runOnItem(function (comp, se, tgt) {\n          focus$1(tgt);\n        })),\n        run(click(), onClick),\n        run(tap(), onClick),\n        run(focusin(), runOnItem(function (comp, se, tgt) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n          add$2(tgt, activeClass);\n        })),\n        run(focusout(), runOnItem(function (comp) {\n          descendant$1(comp.element, '.' + activeClass).each(function (currentActive) {\n            remove$4(currentActive, activeClass);\n          });\n        })),\n        runOnExecute(runOnItem(function (comp, se, tgt, itemValue) {\n          emitWith(comp, formActionEvent, {\n            name: spec.name,\n            value: itemValue\n          });\n        }))\n      ];\n      var iterCollectionItems = function (comp, applyAttributes) {\n        return map(descendants(comp.element, '.tox-collection__item'), applyAttributes);\n      };\n      var pField = FormField.parts.field({\n        dom: {\n          tag: 'div',\n          classes: ['tox-collection'].concat(spec.columns !== 1 ? ['tox-collection--grid'] : ['tox-collection--list'])\n        },\n        components: [],\n        factory: { sketch: identity },\n        behaviours: derive$1([\n          Disabling.config({\n            disabled: providersBackstage.isDisabled,\n            onDisabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                add$2(childElm, 'tox-collection__item--state-disabled');\n                set$1(childElm, 'aria-disabled', true);\n              });\n            },\n            onEnabled: function (comp) {\n              iterCollectionItems(comp, function (childElm) {\n                remove$4(childElm, 'tox-collection__item--state-disabled');\n                remove$1(childElm, 'aria-disabled');\n              });\n            }\n          }),\n          receivingConfig(),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: []\n            },\n            onSetValue: function (comp, items) {\n              setContents(comp, items);\n              if (spec.columns === 'auto') {\n                detectSize(comp, 5, 'tox-collection__item').each(function (_a) {\n                  var numRows = _a.numRows, numColumns = _a.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              }\n              emit(comp, formResizeEvent);\n            }\n          }),\n          Tabstopping.config({}),\n          Keying.config(deriveCollectionMovement(spec.columns, 'normal')),\n          config('collection-events', collectionEvents)\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'collection-events'\n        ], _a)\n      });\n      var extraClasses = ['tox-form__group--collection'];\n      return renderFormFieldWith(pLabel, pField, extraClasses, []);\n    };\n\n    var schema$f = constant([\n      option('data'),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('tag', 'input'),\n      defaulted$1('inputClasses', []),\n      onHandler('onSetValue'),\n      defaulted$1('styles', {}),\n      defaulted$1('eventOrder', {}),\n      field$1('inputBehaviours', [\n        Representing,\n        Focusing\n      ]),\n      defaulted$1('selectOnFocus', true)\n    ]);\n    var focusBehaviours = function (detail) {\n      return derive$1([Focusing.config({\n          onFocus: !detail.selectOnFocus ? noop : function (component) {\n            var input = component.element;\n            var value = get$6(input);\n            input.dom.setSelectionRange(0, value.length);\n          }\n        })]);\n    };\n    var behaviours = function (detail) {\n      return __assign(__assign({}, focusBehaviours(detail)), augment(detail.inputBehaviours, [Representing.config({\n          store: __assign(__assign({ mode: 'manual' }, detail.data.map(function (data) {\n            return { initialValue: data };\n          }).getOr({})), {\n            getValue: function (input) {\n              return get$6(input.element);\n            },\n            setValue: function (input, data) {\n              var current = get$6(input.element);\n              if (current !== data) {\n                set$3(input.element, data);\n              }\n            }\n          }),\n          onSetValue: detail.onSetValue\n        })]));\n    };\n    var dom$2 = function (detail) {\n      return {\n        tag: detail.tag,\n        attributes: __assign({ type: 'text' }, detail.inputAttributes),\n        styles: detail.inputStyles,\n        classes: detail.inputClasses\n      };\n    };\n\n    var factory$5 = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: dom$2(detail),\n        components: [],\n        behaviours: behaviours(detail),\n        eventOrder: detail.eventOrder\n      };\n    };\n    var Input = single$2({\n      name: 'Input',\n      configFields: schema$f(),\n      factory: factory$5\n    });\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu$a = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$a(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$a(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$a,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make$3 = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make$3(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make$3(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make$3(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make$3(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$b = function (baseFn) {\n      return make$3(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make$3(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$b,\n      pure: pure$1\n    };\n\n    var ariaElements = [\n      'input',\n      'textarea'\n    ];\n    var isAriaElement = function (elem) {\n      var name$1 = name(elem);\n      return contains(ariaElements, name$1);\n    };\n    var markValid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      remove$4(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', false);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, notifyInfo.validHtml);\n        });\n        notifyInfo.onValid(component);\n      });\n    };\n    var markInvalid = function (component, invalidConfig, invalidState, text) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      add$2(elem, invalidConfig.invalidClass);\n      invalidConfig.notify.each(function (notifyInfo) {\n        if (isAriaElement(component.element)) {\n          set$1(component.element, 'aria-invalid', true);\n        }\n        notifyInfo.getContainer(component).each(function (container) {\n          set(container, text);\n        });\n        notifyInfo.onInvalid(component, text);\n      });\n    };\n    var query = function (component, invalidConfig, _invalidState) {\n      return invalidConfig.validator.fold(function () {\n        return Future.pure(Result.value(true));\n      }, function (validatorInfo) {\n        return validatorInfo.validate(component);\n      });\n    };\n    var run$1 = function (component, invalidConfig, invalidState) {\n      invalidConfig.notify.each(function (notifyInfo) {\n        notifyInfo.onValidate(component);\n      });\n      return query(component, invalidConfig).map(function (valid) {\n        if (component.getSystem().isConnected()) {\n          return valid.fold(function (err) {\n            markInvalid(component, invalidConfig, invalidState, err);\n            return Result.error(err);\n          }, function (v) {\n            markValid(component, invalidConfig);\n            return Result.value(v);\n          });\n        } else {\n          return Result.error('No longer in system');\n        }\n      });\n    };\n    var isInvalid = function (component, invalidConfig) {\n      var elem = invalidConfig.getRoot(component).getOr(component.element);\n      return has$2(elem, invalidConfig.invalidClass);\n    };\n\n    var InvalidateApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        markValid: markValid,\n        markInvalid: markInvalid,\n        query: query,\n        run: run$1,\n        isInvalid: isInvalid\n    });\n\n    var events$a = function (invalidConfig, invalidState) {\n      return invalidConfig.validator.map(function (validatorInfo) {\n        return derive([run(validatorInfo.onEvent, function (component) {\n            run$1(component, invalidConfig, invalidState).get(identity);\n          })].concat(validatorInfo.validateOnLoad ? [runOnAttached(function (component) {\n            run$1(component, invalidConfig, invalidState).get(noop);\n          })] : []));\n      }).getOr({});\n    };\n\n    var ActiveInvalidate = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$a\n    });\n\n    var InvalidateSchema = [\n      strict$1('invalidClass'),\n      defaulted$1('getRoot', Optional.none),\n      optionObjOf('notify', [\n        defaulted$1('aria', 'alert'),\n        defaulted$1('getContainer', Optional.none),\n        defaulted$1('validHtml', ''),\n        onHandler('onValid'),\n        onHandler('onInvalid'),\n        onHandler('onValidate')\n      ]),\n      optionObjOf('validator', [\n        strict$1('validate'),\n        defaulted$1('onEvent', 'input'),\n        defaulted$1('validateOnLoad', true)\n      ])\n    ];\n\n    var Invalidating = create$1({\n      fields: InvalidateSchema,\n      name: 'invalidating',\n      active: ActiveInvalidate,\n      apis: InvalidateApis,\n      extra: {\n        validation: function (validator) {\n          return function (component) {\n            var v = Representing.getValue(component);\n            return Future.pure(validator(v));\n          };\n        }\n      }\n    });\n\n    var getCoupled = function (component, coupleConfig, coupleState, name) {\n      return coupleState.getOrCreate(component, coupleConfig, name);\n    };\n\n    var CouplingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getCoupled: getCoupled\n    });\n\n    var CouplingSchema = [strictOf('others', setOf$1(Result.value, anyValue$1()))];\n\n    var init$5 = function () {\n      var coupled = {};\n      var getOrCreate = function (component, coupleConfig, name) {\n        var available = keys(coupleConfig.others);\n        if (!available) {\n          throw new Error('Cannot find coupled component: ' + name + '. Known coupled components: ' + JSON.stringify(available, null, 2));\n        } else {\n          return get$1(coupled, name).getOrThunk(function () {\n            var builder = get$1(coupleConfig.others, name).getOrDie('No information found for coupled component: ' + name);\n            var spec = builder(component);\n            var built = component.getSystem().build(spec);\n            coupled[name] = built;\n            return built;\n          });\n        }\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        getOrCreate: getOrCreate\n      });\n    };\n\n    var CouplingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$5\n    });\n\n    var Coupling = create$1({\n      fields: CouplingSchema,\n      name: 'coupling',\n      apis: CouplingApis,\n      state: CouplingState\n    });\n\n    var suffix = constant('sink');\n    var partType = constant(optional({\n      name: suffix(),\n      overrides: constant({\n        dom: { tag: 'div' },\n        behaviours: derive$1([Positioning.config({ useFixed: always })]),\n        events: derive([\n          cutter(keydown()),\n          cutter(mousedown()),\n          cutter(click())\n        ])\n      })\n    }));\n\n    var HighlightOnOpen;\n    (function (HighlightOnOpen) {\n      HighlightOnOpen[HighlightOnOpen['HighlightFirst'] = 0] = 'HighlightFirst';\n      HighlightOnOpen[HighlightOnOpen['HighlightNone'] = 1] = 'HighlightNone';\n    }(HighlightOnOpen || (HighlightOnOpen = {})));\n    var getAnchor = function (detail, component) {\n      var hotspot = detail.getHotspot(component).getOr(component);\n      var anchor = 'hotspot';\n      var overrides = detail.getAnchorOverrides();\n      return detail.layouts.fold(function () {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides\n        };\n      }, function (layouts) {\n        return {\n          anchor: anchor,\n          hotspot: hotspot,\n          overrides: overrides,\n          layouts: layouts\n        };\n      });\n    };\n    var fetch = function (detail, mapFetch, component) {\n      var fetcher = detail.fetch;\n      return fetcher(component).map(mapFetch);\n    };\n    var openF = function (detail, mapFetch, anchor, component, sandbox, externals, highlightOnOpen) {\n      var futureData = fetch(detail, mapFetch, component);\n      var getLazySink = getSink(component, detail);\n      return futureData.map(function (tdata) {\n        return tdata.bind(function (data) {\n          return Optional.from(tieredMenu.sketch(__assign(__assign({}, externals.menu()), {\n            uid: generate$2(''),\n            data: data,\n            highlightImmediately: highlightOnOpen === HighlightOnOpen.HighlightFirst,\n            onOpenMenu: function (tmenu, menu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, menu);\n              Sandboxing.decloak(sandbox);\n            },\n            onOpenSubmenu: function (tmenu, item, submenu) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, {\n                anchor: 'submenu',\n                item: item\n              }, submenu);\n              Sandboxing.decloak(sandbox);\n            },\n            onRepositionMenu: function (tmenu, primaryMenu, submenuTriggers) {\n              var sink = getLazySink().getOrDie();\n              Positioning.position(sink, anchor, primaryMenu);\n              each(submenuTriggers, function (st) {\n                Positioning.position(sink, {\n                  anchor: 'submenu',\n                  item: st.triggeringItem\n                }, st.triggeredMenu);\n              });\n            },\n            onEscape: function () {\n              Focusing.focus(component);\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n          })));\n        });\n      });\n    };\n    var open$1 = function (detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen) {\n      var anchor = getAnchor(detail, hotspot);\n      var processed = openF(detail, mapFetch, anchor, hotspot, sandbox, externals, highlightOnOpen);\n      return processed.map(function (tdata) {\n        tdata.fold(function () {\n          if (Sandboxing.isOpen(sandbox)) {\n            Sandboxing.close(sandbox);\n          }\n        }, function (data) {\n          Sandboxing.cloak(sandbox);\n          Sandboxing.open(sandbox, data);\n          onOpenSync(sandbox);\n        });\n        return sandbox;\n      });\n    };\n    var close$1 = function (detail, mapFetch, component, sandbox, _externals, _onOpenSync, _highlightOnOpen) {\n      Sandboxing.close(sandbox);\n      return Future.pure(sandbox);\n    };\n    var togglePopup = function (detail, mapFetch, hotspot, externals, onOpenSync, highlightOnOpen) {\n      var sandbox = Coupling.getCoupled(hotspot, 'sandbox');\n      var showing = Sandboxing.isOpen(sandbox);\n      var action = showing ? close$1 : open$1;\n      return action(detail, mapFetch, hotspot, sandbox, externals, onOpenSync, highlightOnOpen);\n    };\n    var matchWidth = function (hotspot, container, useMinWidth) {\n      var menu = Composing.getCurrent(container).getOr(container);\n      var buttonWidth = get$8(hotspot.element);\n      if (useMinWidth) {\n        set$2(menu.element, 'min-width', buttonWidth + 'px');\n      } else {\n        set$4(menu.element, buttonWidth);\n      }\n    };\n    var getSink = function (anyInSystem, sinkDetail) {\n      return anyInSystem.getSystem().getByUid(sinkDetail.uid + '-' + suffix()).map(function (internalSink) {\n        return function () {\n          return Result.value(internalSink);\n        };\n      }).getOrThunk(function () {\n        return sinkDetail.lazySink.fold(function () {\n          return function () {\n            return Result.error(new Error('No internal sink is specified, nor could an external sink be found'));\n          };\n        }, function (lazySinkFn) {\n          return function () {\n            return lazySinkFn(anyInSystem);\n          };\n        });\n      });\n    };\n    var doRepositionMenus = function (sandbox) {\n      Sandboxing.getState(sandbox).each(function (tmenu) {\n        tieredMenu.repositionMenus(tmenu);\n      });\n    };\n    var makeSandbox = function (detail, hotspot, extras) {\n      var ariaOwner = manager();\n      var onOpen = function (component, menu) {\n        var anchor = getAnchor(detail, hotspot);\n        ariaOwner.link(hotspot.element);\n        if (detail.matchWidth) {\n          matchWidth(anchor.hotspot, menu, detail.useMinWidth);\n        }\n        detail.onOpen(anchor, component, menu);\n        if (extras !== undefined && extras.onOpen !== undefined) {\n          extras.onOpen(component, menu);\n        }\n      };\n      var onClose = function (component, menu) {\n        ariaOwner.unlink(hotspot.element);\n        if (extras !== undefined && extras.onClose !== undefined) {\n          extras.onClose(component, menu);\n        }\n      };\n      var lazySink = getSink(hotspot, detail);\n      return {\n        dom: {\n          tag: 'div',\n          classes: detail.sandboxClasses,\n          attributes: {\n            id: ariaOwner.id,\n            role: 'listbox'\n          }\n        },\n        behaviours: SketchBehaviours.augment(detail.sandboxBehaviours, [\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: hotspot\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(hotspot, queryElem);\n            },\n            getAttachPoint: function () {\n              return lazySink().getOrDie();\n            }\n          }),\n          Composing.config({\n            find: function (sandbox) {\n              return Sandboxing.getState(sandbox).bind(function (menu) {\n                return Composing.getCurrent(menu);\n              });\n            }\n          }),\n          Receiving.config({ channels: __assign(__assign({}, receivingChannel({ isExtraPart: never })), receivingChannel$1({ doReposition: doRepositionMenus })) })\n        ])\n      };\n    };\n    var repositionMenus = function (comp) {\n      var sandbox = Coupling.getCoupled(comp, 'sandbox');\n      doRepositionMenus(sandbox);\n    };\n\n    var sandboxFields = function () {\n      return [\n        defaulted$1('sandboxClasses', []),\n        SketchBehaviours.field('sandboxBehaviours', [\n          Composing,\n          Receiving,\n          Sandboxing,\n          Representing\n        ])\n      ];\n    };\n\n    var schema$g = constant([\n      strict$1('dom'),\n      strict$1('fetch'),\n      onHandler('onOpen'),\n      onKeyboardHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      field$1('dropdownBehaviours', [\n        Toggling,\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      strict$1('toggleClass'),\n      defaulted$1('eventOrder', {}),\n      option('lazySink'),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      option('role')\n    ].concat(sandboxFields()));\n    var parts$4 = constant([\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return { onExecute: detail.onExecute };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$6 = function (detail, components, _spec, externals) {\n      var _a;\n      var lookupAttr = function (attr) {\n        return get$1(detail.dom, 'attributes').bind(function (attrs) {\n          return get$1(attrs, attr);\n        });\n      };\n      var switchToMenu = function (sandbox) {\n        Sandboxing.getState(sandbox).each(function (tmenu) {\n          tieredMenu.highlightPrimary(tmenu);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var apis = {\n        expand: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightNone).get(noop);\n          }\n        },\n        open: function (comp) {\n          if (!Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        isOpen: Toggling.isOn,\n        close: function (comp) {\n          if (Toggling.isOn(comp)) {\n            togglePopup(detail, function (x) {\n              return x;\n            }, comp, externals, noop, HighlightOnOpen.HighlightFirst).get(noop);\n          }\n        },\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      var triggerExecute = function (comp, _se) {\n        emitExecute(comp);\n        return Optional.some(true);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.dropdownBehaviours, [\n          Toggling.config({\n            toggleClass: detail.toggleClass,\n            aria: { mode: 'expanded' }\n          }),\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                return makeSandbox(detail, hotspot, {\n                  onOpen: function () {\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(hotspot);\n                  }\n                });\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: triggerExecute,\n            onEnter: triggerExecute,\n            onDown: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                var sandbox = Coupling.getCoupled(comp, 'sandbox');\n                switchToMenu(sandbox);\n              } else {\n                Dropdown.open(comp);\n              }\n              return Optional.some(true);\n            },\n            onEscape: function (comp, _se) {\n              if (Dropdown.isOpen(comp)) {\n                Dropdown.close(comp);\n                return Optional.some(true);\n              } else {\n                return Optional.none();\n              }\n            }\n          }),\n          Focusing.config({})\n        ]),\n        events: events$7(Optional.some(action)),\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        apis: apis,\n        domModification: {\n          attributes: __assign(__assign({ 'aria-haspopup': 'true' }, detail.role.fold(function () {\n            return {};\n          }, function (role) {\n            return { role: role };\n          })), detail.dom.tag === 'button' ? { type: lookupAttr('type').getOr('button') } : {})\n        }\n      };\n    };\n    var Dropdown = composite$1({\n      name: 'Dropdown',\n      configFields: schema$g(),\n      partFields: parts$4(),\n      factory: factory$6,\n      apis: {\n        open: function (apis, comp) {\n          return apis.open(comp);\n        },\n        expand: function (apis, comp) {\n          return apis.expand(comp);\n        },\n        close: function (apis, comp) {\n          return apis.close(comp);\n        },\n        isOpen: function (apis, comp) {\n          return apis.isOpen(comp);\n        },\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var exhibit$5 = function () {\n      return nu$6({\n        styles: {\n          '-webkit-user-select': 'none',\n          'user-select': 'none',\n          '-ms-user-select': 'none',\n          '-moz-user-select': '-moz-none'\n        },\n        attributes: { unselectable: 'on' }\n      });\n    };\n    var events$b = function () {\n      return derive([abort(selectstart(), always)]);\n    };\n\n    var ActiveUnselecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$b,\n        exhibit: exhibit$5\n    });\n\n    var Unselecting = create$1({\n      fields: [],\n      name: 'unselecting',\n      active: ActiveUnselecting\n    });\n\n    var renderPanelButton = function (spec, sharedBackstage) {\n      return Dropdown.sketch({\n        dom: spec.dom,\n        components: spec.components,\n        toggleClass: 'mce-active',\n        dropdownBehaviours: derive$1([\n          DisablingConfigs.button(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          Unselecting.config({}),\n          Tabstopping.config({})\n        ]),\n        layouts: spec.layouts,\n        sandboxClasses: ['tox-dialog__popups'],\n        lazySink: sharedBackstage.getSink,\n        fetch: function (comp) {\n          return Future.nu(function (callback) {\n            return spec.fetch(callback);\n          }).map(function (items) {\n            return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n              spec.onItemAction(comp, value);\n            }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, function () {\n              return false;\n            }, sharedBackstage.providers), { movement: deriveMenuMovement(spec.columns, spec.presets) })));\n          });\n        },\n        parts: { menu: part(false, 1, spec.presets) }\n      });\n    };\n\n    var colorInputChangeEvent = generate$1('color-input-change');\n    var colorSwatchChangeEvent = generate$1('color-swatch-change');\n    var colorPickerCancelEvent = generate$1('color-picker-cancel');\n    var renderColorInput = function (spec, sharedBackstage, colorInputBackstage) {\n      var pField = FormField.parts.field({\n        factory: Input,\n        inputClasses: ['tox-textfield'],\n        onSetValue: function (c) {\n          return Invalidating.run(c).get(function () {\n          });\n        },\n        inputBehaviours: derive$1([\n          Disabling.config({ disabled: sharedBackstage.providers.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Invalidating.config({\n            invalidClass: 'tox-textbox-field-invalid',\n            getRoot: function (comp) {\n              return parent(comp.element);\n            },\n            notify: {\n              onValid: function (comp) {\n                var val = Representing.getValue(comp);\n                emitWith(comp, colorInputChangeEvent, { color: val });\n              }\n            },\n            validator: {\n              validateOnLoad: false,\n              validate: function (input) {\n                var inputValue = Representing.getValue(input);\n                if (inputValue.length === 0) {\n                  return Future.pure(Result.value(true));\n                } else {\n                  var span = SugarElement.fromTag('span');\n                  set$2(span, 'background-color', inputValue);\n                  var res = getRaw(span, 'background-color').fold(function () {\n                    return Result.error('blah');\n                  }, function (_) {\n                    return Result.value(inputValue);\n                  });\n                  return Future.pure(res);\n                }\n              }\n            }\n          })\n        ]),\n        selectOnFocus: false\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, sharedBackstage.providers);\n      });\n      var emitSwatchChange = function (colorBit, value) {\n        emitWith(colorBit, colorSwatchChangeEvent, { value: value });\n      };\n      var onItemAction = function (comp, value) {\n        memColorButton.getOpt(comp).each(function (colorBit) {\n          if (value === 'custom') {\n            colorInputBackstage.colorPicker(function (valueOpt) {\n              valueOpt.fold(function () {\n                return emit(colorBit, colorPickerCancelEvent);\n              }, function (value) {\n                emitSwatchChange(colorBit, value);\n                addColor(value);\n              });\n            }, '#ffffff');\n          } else if (value === 'remove') {\n            emitSwatchChange(colorBit, '');\n          } else {\n            emitSwatchChange(colorBit, value);\n          }\n        });\n      };\n      var memColorButton = record(renderPanelButton({\n        dom: {\n          tag: 'span',\n          attributes: { 'aria-label': sharedBackstage.providers.translate('Color swatch') }\n        },\n        layouts: {\n          onRtl: function () {\n            return [\n              southwest$1,\n              southeast$1,\n              south$1\n            ];\n          },\n          onLtr: function () {\n            return [\n              southeast$1,\n              southwest$1,\n              south$1\n            ];\n          }\n        },\n        components: [],\n        fetch: getFetch(colorInputBackstage.getColors(), colorInputBackstage.hasCustomColors()),\n        columns: colorInputBackstage.getColorCols(),\n        presets: 'color',\n        onItemAction: onItemAction\n      }, sharedBackstage));\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: pLabel.toArray().concat([{\n            dom: {\n              tag: 'div',\n              classes: ['tox-color-input']\n            },\n            components: [\n              pField,\n              memColorButton.asSpec()\n            ]\n          }]),\n        fieldBehaviours: derive$1([config('form-field-events', [\n            run(colorInputChangeEvent, function (comp, se) {\n              memColorButton.getOpt(comp).each(function (colorButton) {\n                set$2(colorButton.element, 'background-color', se.event.color);\n              });\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            }),\n            run(colorSwatchChangeEvent, function (comp, se) {\n              FormField.getField(comp).each(function (field) {\n                Representing.setValue(field, se.event.value);\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            }),\n            run(colorPickerCancelEvent, function (comp, _se) {\n              FormField.getField(comp).each(function (_field) {\n                Composing.getCurrent(comp).each(Focusing.focus);\n              });\n            })\n          ])])\n      });\n    };\n\n    var hsvColour = function (hue, saturation, value) {\n      return {\n        hue: hue,\n        saturation: saturation,\n        value: value\n      };\n    };\n    var fromRgb = function (rgbaColour) {\n      var h = 0;\n      var s = 0;\n      var v = 0;\n      var r = rgbaColour.red / 255;\n      var g = rgbaColour.green / 255;\n      var b = rgbaColour.blue / 255;\n      var minRGB = Math.min(r, Math.min(g, b));\n      var maxRGB = Math.max(r, Math.max(g, b));\n      if (minRGB === maxRGB) {\n        v = minRGB;\n        return hsvColour(0, 0, v * 100);\n      }\n      var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n      h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n      h = 60 * (h - d / (maxRGB - minRGB));\n      s = (maxRGB - minRGB) / maxRGB;\n      v = maxRGB;\n      return hsvColour(Math.round(h), Math.round(s * 100), Math.round(v * 100));\n    };\n\n    var calcHex = function (value) {\n      var hue = (100 - value) / 100 * 360;\n      var hsv = hsvColour(hue, 100, 100);\n      var rgb = fromHsv(hsv);\n      return fromRgba(rgb);\n    };\n\n    var fieldsUpdate = generate$1('rgb-hex-update');\n    var sliderUpdate = generate$1('slider-update');\n    var paletteUpdate = generate$1('palette-update');\n\n    var labelPart = optional({\n      schema: [strict$1('dom')],\n      name: 'label'\n    });\n    var edgePart = function (name) {\n      return optional({\n        name: '' + name + '-edge',\n        overrides: function (detail) {\n          var action = detail.model.manager.edgeActions[name];\n          return action.fold(function () {\n            return {};\n          }, function (a) {\n            return {\n              events: derive([\n                runActionExtra(touchstart(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousedown(), function (comp, se, d) {\n                  return a(comp, d);\n                }, [detail]),\n                runActionExtra(mousemove(), function (comp, se, det) {\n                  if (det.mouseIsDown.get()) {\n                    a(comp, det);\n                  }\n                }, [detail])\n              ])\n            };\n          });\n        }\n      });\n    };\n    var tlEdgePart = edgePart('top-left');\n    var tedgePart = edgePart('top');\n    var trEdgePart = edgePart('top-right');\n    var redgePart = edgePart('right');\n    var brEdgePart = edgePart('bottom-right');\n    var bedgePart = edgePart('bottom');\n    var blEdgePart = edgePart('bottom-left');\n    var ledgePart = edgePart('left');\n    var thumbPart = required({\n      name: 'thumb',\n      defaults: constant({ dom: { styles: { position: 'absolute' } } }),\n      overrides: function (detail) {\n        return {\n          events: derive([\n            redirectToPart(touchstart(), detail, 'spectrum'),\n            redirectToPart(touchmove(), detail, 'spectrum'),\n            redirectToPart(touchend(), detail, 'spectrum'),\n            redirectToPart(mousedown(), detail, 'spectrum'),\n            redirectToPart(mousemove(), detail, 'spectrum'),\n            redirectToPart(mouseup(), detail, 'spectrum')\n          ])\n        };\n      }\n    });\n    var spectrumPart = required({\n      schema: [state$1('mouseIsDown', function () {\n          return Cell(false);\n        })],\n      name: 'spectrum',\n      overrides: function (detail) {\n        var modelDetail = detail.model;\n        var model = modelDetail.manager;\n        var setValueFrom = function (component, simulatedEvent) {\n          return model.getValueFromEvent(simulatedEvent).map(function (value) {\n            return model.setValueFrom(component, detail, value);\n          });\n        };\n        return {\n          behaviours: derive$1([\n            Keying.config({\n              mode: 'special',\n              onLeft: function (spectrum) {\n                return model.onLeft(spectrum, detail);\n              },\n              onRight: function (spectrum) {\n                return model.onRight(spectrum, detail);\n              },\n              onUp: function (spectrum) {\n                return model.onUp(spectrum, detail);\n              },\n              onDown: function (spectrum) {\n                return model.onDown(spectrum, detail);\n              }\n            }),\n            Focusing.config({})\n          ]),\n          events: derive([\n            run(touchstart(), setValueFrom),\n            run(touchmove(), setValueFrom),\n            run(mousedown(), setValueFrom),\n            run(mousemove(), function (spectrum, se) {\n              if (detail.mouseIsDown.get()) {\n                setValueFrom(spectrum, se);\n              }\n            })\n          ])\n        };\n      }\n    });\n    var SliderParts = [\n      labelPart,\n      ledgePart,\n      redgePart,\n      tedgePart,\n      bedgePart,\n      tlEdgePart,\n      trEdgePart,\n      blEdgePart,\n      brEdgePart,\n      thumbPart,\n      spectrumPart\n    ];\n\n    var _sliderChangeEvent = 'slider.change.value';\n    var sliderChangeEvent = constant(_sliderChangeEvent);\n    var isTouchEvent = function (evt) {\n      return evt.type.indexOf('touch') !== -1;\n    };\n    var getEventSource = function (simulatedEvent) {\n      var evt = simulatedEvent.event.raw;\n      if (isTouchEvent(evt)) {\n        var touchEvent = evt;\n        return touchEvent.touches !== undefined && touchEvent.touches.length === 1 ? Optional.some(touchEvent.touches[0]).map(function (t) {\n          return SugarPosition(t.clientX, t.clientY);\n        }) : Optional.none();\n      } else {\n        var mouseEvent = evt;\n        return mouseEvent.clientX !== undefined ? Optional.some(mouseEvent).map(function (me) {\n          return SugarPosition(me.clientX, me.clientY);\n        }) : Optional.none();\n      }\n    };\n\n    var t = 'top', r$1 = 'right', b = 'bottom', l = 'left';\n    var minX = function (detail) {\n      return detail.model.minX;\n    };\n    var minY = function (detail) {\n      return detail.model.minY;\n    };\n    var min1X = function (detail) {\n      return detail.model.minX - 1;\n    };\n    var min1Y = function (detail) {\n      return detail.model.minY - 1;\n    };\n    var maxX = function (detail) {\n      return detail.model.maxX;\n    };\n    var maxY = function (detail) {\n      return detail.model.maxY;\n    };\n    var max1X = function (detail) {\n      return detail.model.maxX + 1;\n    };\n    var max1Y = function (detail) {\n      return detail.model.maxY + 1;\n    };\n    var range$2 = function (detail, max, min) {\n      return max(detail) - min(detail);\n    };\n    var xRange = function (detail) {\n      return range$2(detail, maxX, minX);\n    };\n    var yRange = function (detail) {\n      return range$2(detail, maxY, minY);\n    };\n    var halfX = function (detail) {\n      return xRange(detail) / 2;\n    };\n    var halfY = function (detail) {\n      return yRange(detail) / 2;\n    };\n    var step = function (detail) {\n      return detail.stepSize;\n    };\n    var snap = function (detail) {\n      return detail.snapToGrid;\n    };\n    var snapStart = function (detail) {\n      return detail.snapStart;\n    };\n    var rounded = function (detail) {\n      return detail.rounded;\n    };\n    var hasEdge = function (detail, edgeName) {\n      return detail[edgeName + '-edge'] !== undefined;\n    };\n    var hasLEdge = function (detail) {\n      return hasEdge(detail, l);\n    };\n    var hasREdge = function (detail) {\n      return hasEdge(detail, r$1);\n    };\n    var hasTEdge = function (detail) {\n      return hasEdge(detail, t);\n    };\n    var hasBEdge = function (detail) {\n      return hasEdge(detail, b);\n    };\n    var currentValue = function (detail) {\n      return detail.model.value.get();\n    };\n\n    var xValue = function (x) {\n      return { x: x };\n    };\n    var yValue = function (y) {\n      return { y: y };\n    };\n    var xyValue = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireSliderChange = function (component, value) {\n      emitWith(component, sliderChangeEvent(), { value: value });\n    };\n    var setToTLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), min1Y(detail)));\n    };\n    var setToTEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(min1Y(detail)));\n    };\n    var setToTEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), min1Y(detail)));\n    };\n    var setToTREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), min1Y(detail)));\n    };\n    var setToREdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(max1X(detail)));\n    };\n    var setToREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), halfY(detail)));\n    };\n    var setToBREdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(max1X(detail), max1Y(detail)));\n    };\n    var setToBEdge = function (edge, detail) {\n      fireSliderChange(edge, yValue(max1Y(detail)));\n    };\n    var setToBEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(halfX(detail), max1Y(detail)));\n    };\n    var setToBLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), max1Y(detail)));\n    };\n    var setToLEdge = function (edge, detail) {\n      fireSliderChange(edge, xValue(min1X(detail)));\n    };\n    var setToLEdgeXY = function (edge, detail) {\n      fireSliderChange(edge, xyValue(min1X(detail), halfY(detail)));\n    };\n\n    var reduceBy = function (value, min, max, step) {\n      if (value < min) {\n        return value;\n      } else if (value > max) {\n        return max;\n      } else if (value === min) {\n        return min - 1;\n      } else {\n        return Math.max(min, value - step);\n      }\n    };\n    var increaseBy = function (value, min, max, step) {\n      if (value > max) {\n        return value;\n      } else if (value < min) {\n        return min;\n      } else if (value === max) {\n        return max + 1;\n      } else {\n        return Math.min(max, value + step);\n      }\n    };\n    var capValue = function (value, min, max) {\n      return Math.max(min, Math.min(max, value));\n    };\n    var snapValueOf = function (value, min, max, step, snapStart) {\n      return snapStart.fold(function () {\n        var initValue = value - min;\n        var extraValue = Math.round(initValue / step) * step;\n        return capValue(min + extraValue, min - 1, max + 1);\n      }, function (start) {\n        var remainder = (value - start) % step;\n        var adjustment = Math.round(remainder / step);\n        var rawSteps = Math.floor((value - start) / step);\n        var maxSteps = Math.floor((max - start) / step);\n        var numSteps = Math.min(maxSteps, rawSteps + adjustment);\n        var r = start + numSteps * step;\n        return Math.max(start, r);\n      });\n    };\n    var findOffsetOf = function (value, min, max) {\n      return Math.min(max, Math.max(value, min)) - min;\n    };\n    var findValueOf = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, step = args.step, snap = args.snap, snapStart = args.snapStart, rounded = args.rounded, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, minBound = args.minBound, maxBound = args.maxBound, screenRange = args.screenRange;\n      var capMin = hasMinEdge ? min - 1 : min;\n      var capMax = hasMaxEdge ? max + 1 : max;\n      if (value < minBound) {\n        return capMin;\n      } else if (value > maxBound) {\n        return capMax;\n      } else {\n        var offset = findOffsetOf(value, minBound, maxBound);\n        var newValue = capValue(offset / screenRange * range + min, capMin, capMax);\n        if (snap && newValue >= min && newValue <= max) {\n          return snapValueOf(newValue, min, max, step, snapStart);\n        } else if (rounded) {\n          return Math.round(newValue);\n        } else {\n          return newValue;\n        }\n      }\n    };\n    var findOffsetOfValue = function (args) {\n      var min = args.min, max = args.max, range = args.range, value = args.value, hasMinEdge = args.hasMinEdge, hasMaxEdge = args.hasMaxEdge, maxBound = args.maxBound, maxOffset = args.maxOffset, centerMinEdge = args.centerMinEdge, centerMaxEdge = args.centerMaxEdge;\n      if (value < min) {\n        return hasMinEdge ? 0 : centerMinEdge;\n      } else if (value > max) {\n        return hasMaxEdge ? maxBound : centerMaxEdge;\n      } else {\n        return (value - min) / range * maxOffset;\n      }\n    };\n\n    var top = 'top', right = 'right', bottom = 'bottom', left = 'left', width = 'width', height = 'height';\n    var getBounds$1 = function (component) {\n      return component.element.dom.getBoundingClientRect();\n    };\n    var getBoundsProperty = function (bounds, property) {\n      return bounds[property];\n    };\n    var getMinXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, left);\n    };\n    var getMaxXBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, right);\n    };\n    var getMinYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, top);\n    };\n    var getMaxYBounds = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, bottom);\n    };\n    var getXScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, width);\n    };\n    var getYScreenRange = function (component) {\n      var bounds = getBounds$1(component);\n      return getBoundsProperty(bounds, height);\n    };\n    var getCenterOffsetOf = function (componentMinEdge, componentMaxEdge, spectrumMinEdge) {\n      return (componentMinEdge + componentMaxEdge) / 2 - spectrumMinEdge;\n    };\n    var getXCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, left);\n      var componentMaxEdge = getBoundsProperty(componentBounds, right);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, left);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n    var getYCenterOffSetOf = function (component, spectrum) {\n      var componentBounds = getBounds$1(component);\n      var spectrumBounds = getBounds$1(spectrum);\n      var componentMinEdge = getBoundsProperty(componentBounds, top);\n      var componentMaxEdge = getBoundsProperty(componentBounds, bottom);\n      var spectrumMinEdge = getBoundsProperty(spectrumBounds, top);\n      return getCenterOffsetOf(componentMinEdge, componentMaxEdge, spectrumMinEdge);\n    };\n\n    var fireSliderChange$1 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue = function (x) {\n      return { x: x };\n    };\n    var findValueOfOffset = function (spectrum, detail, left) {\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: left,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        maxBound: getMaxXBounds(spectrum),\n        screenRange: getXScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value);\n      var sliderVal = sliderValue(xValue);\n      fireSliderChange$1(spectrum, sliderVal);\n      return xValue;\n    };\n    var setToMin = function (spectrum, detail) {\n      var min = minX(detail);\n      fireSliderChange$1(spectrum, sliderValue(min));\n    };\n    var setToMax = function (spectrum, detail) {\n      var max = maxX(detail);\n      fireSliderChange$1(spectrum, sliderValue(max));\n    };\n    var moveBy = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      fireSliderChange$1(spectrum, sliderValue(xValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.left;\n      });\n    };\n    var findOffsetOfValue$1 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getXScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getXCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minX(detail),\n        max: maxX(detail),\n        range: xRange(detail),\n        value: value,\n        hasMinEdge: hasLEdge(detail),\n        hasMaxEdge: hasREdge(detail),\n        minBound: getMinXBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxXBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$1(spectrum, detail, value, minEdge, maxEdge);\n      return getMinXBounds(spectrum) - getMinXBounds(slider) + offset;\n    };\n    var setPositionFromValue = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var thumbRadius = get$8(thumb.element) / 2;\n      set$2(thumb.element, 'left', pos - thumbRadius + 'px');\n    };\n    var onLeft = handleMovement(-1);\n    var onRight = handleMovement(1);\n    var onUp = Optional.none;\n    var onDown = Optional.none;\n    var edgeActions = {\n      'top-left': Optional.none(),\n      'top': Optional.none(),\n      'top-right': Optional.none(),\n      'right': Optional.some(setToREdge),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.none(),\n      'bottom-left': Optional.none(),\n      'left': Optional.some(setToLEdge)\n    };\n\n    var HorizontalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom,\n        setToMin: setToMin,\n        setToMax: setToMax,\n        findValueOfOffset: findValueOfOffset,\n        getValueFromEvent: getValueFromEvent,\n        findPositionOfValue: findPositionOfValue,\n        setPositionFromValue: setPositionFromValue,\n        onLeft: onLeft,\n        onRight: onRight,\n        onUp: onUp,\n        onDown: onDown,\n        edgeActions: edgeActions\n    });\n\n    var fireSliderChange$2 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$1 = function (y) {\n      return { y: y };\n    };\n    var findValueOfOffset$1 = function (spectrum, detail, top) {\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: top,\n        step: step(detail),\n        snap: snap(detail),\n        snapStart: snapStart(detail),\n        rounded: rounded(detail),\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        maxBound: getMaxYBounds(spectrum),\n        screenRange: getYScreenRange(spectrum)\n      };\n      return findValueOf(args);\n    };\n    var setValueFrom$1 = function (spectrum, detail, value) {\n      var yValue = findValueOfOffset$1(spectrum, detail, value);\n      var sliderVal = sliderValue$1(yValue);\n      fireSliderChange$2(spectrum, sliderVal);\n      return yValue;\n    };\n    var setToMin$1 = function (spectrum, detail) {\n      var min = minY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(min));\n    };\n    var setToMax$1 = function (spectrum, detail) {\n      var max = maxY(detail);\n      fireSliderChange$2(spectrum, sliderValue$1(max));\n    };\n    var moveBy$1 = function (direction, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var yValue = f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$2(spectrum, sliderValue$1(yValue));\n      return Optional.some(yValue);\n    };\n    var handleMovement$1 = function (direction) {\n      return function (spectrum, detail) {\n        return moveBy$1(direction, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var getValueFromEvent$1 = function (simulatedEvent) {\n      var pos = getEventSource(simulatedEvent);\n      return pos.map(function (p) {\n        return p.top;\n      });\n    };\n    var findOffsetOfValue$2 = function (spectrum, detail, value, minEdge, maxEdge) {\n      var minOffset = 0;\n      var maxOffset = getYScreenRange(spectrum);\n      var centerMinEdge = minEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(minOffset);\n      var centerMaxEdge = maxEdge.bind(function (edge) {\n        return Optional.some(getYCenterOffSetOf(edge, spectrum));\n      }).getOr(maxOffset);\n      var args = {\n        min: minY(detail),\n        max: maxY(detail),\n        range: yRange(detail),\n        value: value,\n        hasMinEdge: hasTEdge(detail),\n        hasMaxEdge: hasBEdge(detail),\n        minBound: getMinYBounds(spectrum),\n        minOffset: minOffset,\n        maxBound: getMaxYBounds(spectrum),\n        maxOffset: maxOffset,\n        centerMinEdge: centerMinEdge,\n        centerMaxEdge: centerMaxEdge\n      };\n      return findOffsetOfValue(args);\n    };\n    var findPositionOfValue$1 = function (slider, spectrum, value, minEdge, maxEdge, detail) {\n      var offset = findOffsetOfValue$2(spectrum, detail, value, minEdge, maxEdge);\n      return getMinYBounds(spectrum) - getMinYBounds(slider) + offset;\n    };\n    var setPositionFromValue$1 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var pos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'top', pos - thumbRadius + 'px');\n    };\n    var onLeft$1 = Optional.none;\n    var onRight$1 = Optional.none;\n    var onUp$1 = handleMovement$1(-1);\n    var onDown$1 = handleMovement$1(1);\n    var edgeActions$1 = {\n      'top-left': Optional.none(),\n      'top': Optional.some(setToTEdge),\n      'top-right': Optional.none(),\n      'right': Optional.none(),\n      'bottom-right': Optional.none(),\n      'bottom': Optional.some(setToBEdge),\n      'bottom-left': Optional.none(),\n      'left': Optional.none()\n    };\n\n    var VerticalModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$1,\n        setToMin: setToMin$1,\n        setToMax: setToMax$1,\n        findValueOfOffset: findValueOfOffset$1,\n        getValueFromEvent: getValueFromEvent$1,\n        findPositionOfValue: findPositionOfValue$1,\n        setPositionFromValue: setPositionFromValue$1,\n        onLeft: onLeft$1,\n        onRight: onRight$1,\n        onUp: onUp$1,\n        onDown: onDown$1,\n        edgeActions: edgeActions$1\n    });\n\n    var fireSliderChange$3 = function (spectrum, value) {\n      emitWith(spectrum, sliderChangeEvent(), { value: value });\n    };\n    var sliderValue$2 = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var setValueFrom$2 = function (spectrum, detail, value) {\n      var xValue = findValueOfOffset(spectrum, detail, value.left);\n      var yValue = findValueOfOffset$1(spectrum, detail, value.top);\n      var val = sliderValue$2(xValue, yValue);\n      fireSliderChange$3(spectrum, val);\n      return val;\n    };\n    var moveBy$2 = function (direction, isVerticalMovement, spectrum, detail) {\n      var f = direction > 0 ? increaseBy : reduceBy;\n      var xValue = isVerticalMovement ? currentValue(detail).x : f(currentValue(detail).x, minX(detail), maxX(detail), step(detail));\n      var yValue = !isVerticalMovement ? currentValue(detail).y : f(currentValue(detail).y, minY(detail), maxY(detail), step(detail));\n      fireSliderChange$3(spectrum, sliderValue$2(xValue, yValue));\n      return Optional.some(xValue);\n    };\n    var handleMovement$2 = function (direction, isVerticalMovement) {\n      return function (spectrum, detail) {\n        return moveBy$2(direction, isVerticalMovement, spectrum, detail).map(function () {\n          return true;\n        });\n      };\n    };\n    var setToMin$2 = function (spectrum, detail) {\n      var mX = minX(detail);\n      var mY = minY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var setToMax$2 = function (spectrum, detail) {\n      var mX = maxX(detail);\n      var mY = maxY(detail);\n      fireSliderChange$3(spectrum, sliderValue$2(mX, mY));\n    };\n    var getValueFromEvent$2 = function (simulatedEvent) {\n      return getEventSource(simulatedEvent);\n    };\n    var setPositionFromValue$2 = function (slider, thumb, detail, edges) {\n      var value = currentValue(detail);\n      var xPos = findPositionOfValue(slider, edges.getSpectrum(slider), value.x, edges.getLeftEdge(slider), edges.getRightEdge(slider), detail);\n      var yPos = findPositionOfValue$1(slider, edges.getSpectrum(slider), value.y, edges.getTopEdge(slider), edges.getBottomEdge(slider), detail);\n      var thumbXRadius = get$8(thumb.element) / 2;\n      var thumbYRadius = get$7(thumb.element) / 2;\n      set$2(thumb.element, 'left', xPos - thumbXRadius + 'px');\n      set$2(thumb.element, 'top', yPos - thumbYRadius + 'px');\n    };\n    var onLeft$2 = handleMovement$2(-1, false);\n    var onRight$2 = handleMovement$2(1, false);\n    var onUp$2 = handleMovement$2(-1, true);\n    var onDown$2 = handleMovement$2(1, true);\n    var edgeActions$2 = {\n      'top-left': Optional.some(setToTLEdgeXY),\n      'top': Optional.some(setToTEdgeXY),\n      'top-right': Optional.some(setToTREdgeXY),\n      'right': Optional.some(setToREdgeXY),\n      'bottom-right': Optional.some(setToBREdgeXY),\n      'bottom': Optional.some(setToBEdgeXY),\n      'bottom-left': Optional.some(setToBLEdgeXY),\n      'left': Optional.some(setToLEdgeXY)\n    };\n\n    var TwoDModel = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setValueFrom: setValueFrom$2,\n        setToMin: setToMin$2,\n        setToMax: setToMax$2,\n        getValueFromEvent: getValueFromEvent$2,\n        setPositionFromValue: setPositionFromValue$2,\n        onLeft: onLeft$2,\n        onRight: onRight$2,\n        onUp: onUp$2,\n        onDown: onDown$2,\n        edgeActions: edgeActions$2\n    });\n\n    var SliderSchema = [\n      defaulted$1('stepSize', 1),\n      defaulted$1('onChange', noop),\n      defaulted$1('onChoose', noop),\n      defaulted$1('onInit', noop),\n      defaulted$1('onDragStart', noop),\n      defaulted$1('onDragEnd', noop),\n      defaulted$1('snapToGrid', false),\n      defaulted$1('rounded', true),\n      option('snapStart'),\n      strictOf('model', choose$1('mode', {\n        x: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minX);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', HorizontalModel)\n        ],\n        y: [\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell(spec.mode.minY);\n          }),\n          strict$1('getInitialValue'),\n          output('manager', VerticalModel)\n        ],\n        xy: [\n          defaulted$1('minX', 0),\n          defaulted$1('maxX', 100),\n          defaulted$1('minY', 0),\n          defaulted$1('maxY', 100),\n          state$1('value', function (spec) {\n            return Cell({\n              x: spec.mode.minX,\n              y: spec.mode.minY\n            });\n          }),\n          strict$1('getInitialValue'),\n          output('manager', TwoDModel)\n        ]\n      })),\n      field$1('sliderBehaviours', [\n        Keying,\n        Representing\n      ]),\n      state$1('mouseIsDown', function () {\n        return Cell(false);\n      })\n    ];\n\n    var sketch = function (detail, components, _spec, _externals) {\n      var _a;\n      var getThumb = function (component) {\n        return getPartOrDie(component, detail, 'thumb');\n      };\n      var getSpectrum = function (component) {\n        return getPartOrDie(component, detail, 'spectrum');\n      };\n      var getLeftEdge = function (component) {\n        return getPart(component, detail, 'left-edge');\n      };\n      var getRightEdge = function (component) {\n        return getPart(component, detail, 'right-edge');\n      };\n      var getTopEdge = function (component) {\n        return getPart(component, detail, 'top-edge');\n      };\n      var getBottomEdge = function (component) {\n        return getPart(component, detail, 'bottom-edge');\n      };\n      var modelDetail = detail.model;\n      var model = modelDetail.manager;\n      var refresh = function (slider, thumb) {\n        model.setPositionFromValue(slider, thumb, detail, {\n          getLeftEdge: getLeftEdge,\n          getRightEdge: getRightEdge,\n          getTopEdge: getTopEdge,\n          getBottomEdge: getBottomEdge,\n          getSpectrum: getSpectrum\n        });\n      };\n      var changeValue = function (slider, newValue) {\n        modelDetail.value.set(newValue);\n        var thumb = getThumb(slider);\n        refresh(slider, thumb);\n        detail.onChange(slider, thumb, newValue);\n        return Optional.some(true);\n      };\n      var resetToMin = function (slider) {\n        model.setToMin(slider, detail);\n      };\n      var resetToMax = function (slider) {\n        model.setToMax(slider, detail);\n      };\n      var choose = function (slider) {\n        var fireOnChoose = function () {\n          getPart(slider, detail, 'thumb').each(function (thumb) {\n            var value = modelDetail.value.get();\n            detail.onChoose(slider, thumb, value);\n          });\n        };\n        var wasDown = detail.mouseIsDown.get();\n        detail.mouseIsDown.set(false);\n        if (wasDown) {\n          fireOnChoose();\n        }\n      };\n      var onDragStart = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.mouseIsDown.set(true);\n        detail.onDragStart(slider, getThumb(slider));\n      };\n      var onDragEnd = function (slider, simulatedEvent) {\n        simulatedEvent.stop();\n        detail.onDragEnd(slider, getThumb(slider));\n        choose(slider);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.sliderBehaviours, [\n          Keying.config({\n            mode: 'special',\n            focusIn: function (slider) {\n              return getPart(slider, detail, 'spectrum').map(Keying.focusIn).map(always);\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (_) {\n                return modelDetail.value.get();\n              }\n            }\n          }),\n          Receiving.config({ channels: (_a = {}, _a[mouseReleased()] = { onReceive: choose }, _a) })\n        ]),\n        events: derive([\n          run(sliderChangeEvent(), function (slider, simulatedEvent) {\n            changeValue(slider, simulatedEvent.event.value);\n          }),\n          runOnAttached(function (slider, _simulatedEvent) {\n            var getInitial = modelDetail.getInitialValue();\n            modelDetail.value.set(getInitial);\n            var thumb = getThumb(slider);\n            refresh(slider, thumb);\n            var spectrum = getSpectrum(slider);\n            detail.onInit(slider, thumb, spectrum, modelDetail.value.get());\n          }),\n          run(touchstart(), onDragStart),\n          run(touchend(), onDragEnd),\n          run(mousedown(), onDragStart),\n          run(mouseup(), onDragEnd)\n        ]),\n        apis: {\n          resetToMin: resetToMin,\n          resetToMax: resetToMax,\n          changeValue: changeValue,\n          refresh: refresh\n        },\n        domModification: { styles: { position: 'relative' } }\n      };\n    };\n\n    var Slider = composite$1({\n      name: 'Slider',\n      configFields: SliderSchema,\n      partFields: SliderParts,\n      factory: sketch,\n      apis: {\n        resetToMin: function (apis, slider) {\n          apis.resetToMin(slider);\n        },\n        resetToMax: function (apis, slider) {\n          apis.resetToMax(slider);\n        },\n        refresh: function (apis, slider) {\n          apis.refresh(slider);\n        }\n      }\n    });\n\n    var sliderFactory = function (translate, getClass) {\n      var spectrum = Slider.parts.spectrum({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-spectrum')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var thumb = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider-thumb')],\n          attributes: { role: 'presentation' }\n        }\n      });\n      return Slider.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('hue-slider')],\n          attributes: { role: 'presentation' }\n        },\n        rounded: false,\n        model: {\n          mode: 'y',\n          getInitialValue: constant({ y: 0 })\n        },\n        components: [\n          spectrum,\n          thumb\n        ],\n        sliderBehaviours: derive$1([Focusing.config({})]),\n        onChange: function (slider, _thumb, value) {\n          emitWith(slider, sliderUpdate, { value: value });\n        }\n      });\n    };\n\n    var owner$3 = 'form';\n    var schema$h = [field$1('formBehaviours', [Representing])];\n    var getPartName = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$1 = function (fSpec) {\n      var parts = function () {\n        var record = [];\n        var field = function (name, config) {\n          record.push(name);\n          return generateOne(owner$3, getPartName(name), config);\n        };\n        return {\n          field: field,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = fSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName(n)\n        });\n      });\n      return composite(owner$3, schema$h, fieldParts, make$4, spec);\n    };\n    var toResult$1 = function (o, e) {\n      return o.fold(function () {\n        return Result.error(e);\n      }, Result.value);\n    };\n    var make$4 = function (detail, components) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.formBehaviours, [Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (form) {\n                var resPs = getAllParts(form, detail);\n                return map$2(resPs, function (resPThunk, pName) {\n                  return resPThunk().bind(function (v) {\n                    var opt = Composing.getCurrent(v);\n                    return toResult$1(opt, new Error('Cannot find a current component to extract the value from for form part \\'' + pName + '\\': ' + element(v.element)));\n                  }).map(Representing.getValue);\n                });\n              },\n              setValue: function (form, values) {\n                each$1(values, function (newValue, key) {\n                  getPart(form, detail, key).each(function (wrapper) {\n                    Composing.getCurrent(wrapper).each(function (field) {\n                      Representing.setValue(field, newValue);\n                    });\n                  });\n                });\n              }\n            }\n          })]),\n        apis: {\n          getField: function (form, key) {\n            return getPart(form, detail, key).bind(Composing.getCurrent);\n          }\n        }\n      };\n    };\n    var Form = {\n      getField: makeApi(function (apis, component, key) {\n        return apis.getField(component, key);\n      }),\n      sketch: sketch$1\n    };\n\n    var validInput = generate$1('valid-input');\n    var invalidInput = generate$1('invalid-input');\n    var validatingInput = generate$1('validating-input');\n    var translatePrefix = 'colorcustom.rgb.';\n    var rgbFormFactory = function (translate, getClass, onValidHexx, onInvalidHexx) {\n      var invalidation = function (label, isValid) {\n        return Invalidating.config({\n          invalidClass: getClass('invalid'),\n          notify: {\n            onValidate: function (comp) {\n              emitWith(comp, validatingInput, { type: label });\n            },\n            onValid: function (comp) {\n              emitWith(comp, validInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            },\n            onInvalid: function (comp) {\n              emitWith(comp, invalidInput, {\n                type: label,\n                value: Representing.getValue(comp)\n              });\n            }\n          },\n          validator: {\n            validate: function (comp) {\n              var value = Representing.getValue(comp);\n              var res = isValid(value) ? Result.value(true) : Result.error(translate('aria.input.invalid'));\n              return Future.pure(res);\n            },\n            validateOnLoad: false\n          }\n        });\n      };\n      var renderTextField = function (isValid, name, label, description, data) {\n        var helptext = translate(translatePrefix + 'range');\n        var pLabel = FormField.parts.label({\n          dom: {\n            tag: 'label',\n            innerHtml: label,\n            attributes: { 'aria-label': description }\n          }\n        });\n        var pField = FormField.parts.field({\n          data: data,\n          factory: Input,\n          inputAttributes: __assign({ type: 'text' }, name === 'hex' ? { 'aria-live': 'polite' } : {}),\n          inputClasses: [getClass('textfield')],\n          inputBehaviours: derive$1([\n            invalidation(name, isValid),\n            Tabstopping.config({})\n          ]),\n          onSetValue: function (input) {\n            if (Invalidating.isInvalid(input)) {\n              var run = Invalidating.run(input);\n              run.get(noop);\n            }\n          }\n        });\n        var comps = [\n          pLabel,\n          pField\n        ];\n        var concats = name !== 'hex' ? [FormField.parts['aria-descriptor']({ text: helptext })] : [];\n        var components = comps.concat(concats);\n        return {\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' }\n          },\n          components: components\n        };\n      };\n      var copyRgbToHex = function (form, rgba) {\n        var hex = fromRgba(rgba);\n        Form.getField(form, 'hex').each(function (hexField) {\n          if (!Focusing.isFocused(hexField)) {\n            Representing.setValue(form, { hex: hex.value });\n          }\n        });\n        return hex;\n      };\n      var copyRgbToForm = function (form, rgb) {\n        var red = rgb.red;\n        var green = rgb.green;\n        var blue = rgb.blue;\n        Representing.setValue(form, {\n          red: red,\n          green: green,\n          blue: blue\n        });\n      };\n      var memPreview = record({\n        dom: {\n          tag: 'div',\n          classes: [getClass('rgba-preview')],\n          styles: { 'background-color': 'white' },\n          attributes: { role: 'presentation' }\n        }\n      });\n      var updatePreview = function (anyInSystem, hex) {\n        memPreview.getOpt(anyInSystem).each(function (preview) {\n          set$2(preview.element, 'background-color', '#' + hex.value);\n        });\n      };\n      var factory = function () {\n        var state = {\n          red: Cell(Optional.some(255)),\n          green: Cell(Optional.some(255)),\n          blue: Cell(Optional.some(255)),\n          hex: Cell(Optional.some('ffffff'))\n        };\n        var copyHexToRgb = function (form, hex) {\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n        };\n        var get = function (prop) {\n          return state[prop].get();\n        };\n        var set = function (prop, value) {\n          state[prop].set(value);\n        };\n        var getValueRgb = function () {\n          return get('red').bind(function (red) {\n            return get('green').bind(function (green) {\n              return get('blue').map(function (blue) {\n                return rgbaColour(red, green, blue, 1);\n              });\n            });\n          });\n        };\n        var setValueRgb = function (rgb) {\n          var red = rgb.red;\n          var green = rgb.green;\n          var blue = rgb.blue;\n          set('red', Optional.some(red));\n          set('green', Optional.some(green));\n          set('blue', Optional.some(blue));\n        };\n        var onInvalidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (data.type !== 'hex') {\n            set(data.type, Optional.none());\n          } else {\n            onInvalidHexx(form);\n          }\n        };\n        var onValidHex = function (form, value) {\n          onValidHexx(form);\n          var hex = hexColour(value);\n          set('hex', Optional.some(value));\n          var rgb = fromHex(hex);\n          copyRgbToForm(form, rgb);\n          setValueRgb(rgb);\n          emitWith(form, fieldsUpdate, { hex: hex });\n          updatePreview(form, hex);\n        };\n        var onValidRgb = function (form, prop, value) {\n          var val = parseInt(value, 10);\n          set(prop, Optional.some(val));\n          getValueRgb().each(function (rgb) {\n            var hex = copyRgbToHex(form, rgb);\n            updatePreview(form, hex);\n          });\n        };\n        var isHexInputEvent = function (data) {\n          return data.type === 'hex';\n        };\n        var onValidInput = function (form, simulatedEvent) {\n          var data = simulatedEvent.event;\n          if (isHexInputEvent(data)) {\n            onValidHex(form, data.value);\n          } else {\n            onValidRgb(form, data.type, data.value);\n          }\n        };\n        var formPartStrings = function (key) {\n          return {\n            label: translate(translatePrefix + key + '.label'),\n            description: translate(translatePrefix + key + '.description')\n          };\n        };\n        var redStrings = formPartStrings('red');\n        var greenStrings = formPartStrings('green');\n        var blueStrings = formPartStrings('blue');\n        var hexStrings = formPartStrings('hex');\n        return deepMerge(Form.sketch(function (parts) {\n          return {\n            dom: {\n              tag: 'form',\n              classes: [getClass('rgb-form')],\n              attributes: { 'aria-label': translate('aria.color.picker') }\n            },\n            components: [\n              parts.field('red', FormField.sketch(renderTextField(isRgbaComponent, 'red', redStrings.label, redStrings.description, 255))),\n              parts.field('green', FormField.sketch(renderTextField(isRgbaComponent, 'green', greenStrings.label, greenStrings.description, 255))),\n              parts.field('blue', FormField.sketch(renderTextField(isRgbaComponent, 'blue', blueStrings.label, blueStrings.description, 255))),\n              parts.field('hex', FormField.sketch(renderTextField(isHexString, 'hex', hexStrings.label, hexStrings.description, 'ffffff'))),\n              memPreview.asSpec()\n            ],\n            formBehaviours: derive$1([\n              Invalidating.config({ invalidClass: getClass('form-invalid') }),\n              config('rgb-form-events', [\n                run(validInput, onValidInput),\n                run(invalidInput, onInvalidInput),\n                run(validatingInput, onInvalidInput)\n              ])\n            ])\n          };\n        }), {\n          apis: {\n            updateHex: function (form, hex) {\n              Representing.setValue(form, { hex: hex.value });\n              copyHexToRgb(form, hex);\n              updatePreview(form, hex);\n            }\n          }\n        });\n      };\n      var rgbFormSketcher = single$2({\n        factory: factory,\n        name: 'RgbForm',\n        configFields: [],\n        apis: {\n          updateHex: function (apis, form, hex) {\n            apis.updateHex(form, hex);\n          }\n        },\n        extraApis: {}\n      });\n      return rgbFormSketcher;\n    };\n\n    var paletteFactory = function (_translate, getClass) {\n      var spectrumPart = Slider.parts.spectrum({\n        dom: {\n          tag: 'canvas',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-spectrum')]\n        }\n      });\n      var thumbPart = Slider.parts.thumb({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' },\n          classes: [getClass('sv-palette-thumb')],\n          innerHtml: '<div class=' + getClass('sv-palette-inner-thumb') + ' role=\"presentation\"></div>'\n        }\n      });\n      var setColour = function (canvas, rgba) {\n        var width = canvas.width, height = canvas.height;\n        var ctx = canvas.getContext('2d');\n        if (ctx === null) {\n          return;\n        }\n        ctx.fillStyle = rgba;\n        ctx.fillRect(0, 0, width, height);\n        var grdWhite = ctx.createLinearGradient(0, 0, width, 0);\n        grdWhite.addColorStop(0, 'rgba(255,255,255,1)');\n        grdWhite.addColorStop(1, 'rgba(255,255,255,0)');\n        ctx.fillStyle = grdWhite;\n        ctx.fillRect(0, 0, width, height);\n        var grdBlack = ctx.createLinearGradient(0, 0, 0, height);\n        grdBlack.addColorStop(0, 'rgba(0,0,0,0)');\n        grdBlack.addColorStop(1, 'rgba(0,0,0,1)');\n        ctx.fillStyle = grdBlack;\n        ctx.fillRect(0, 0, width, height);\n      };\n      var setSliderColour = function (slider, rgba) {\n        var canvas = slider.components()[0].element.dom;\n        setColour(canvas, toString(rgba));\n      };\n      var factory = function (_detail) {\n        var getInitialValue = constant({\n          x: 0,\n          y: 0\n        });\n        var onChange = function (slider, _thumb, value) {\n          emitWith(slider, paletteUpdate, { value: value });\n        };\n        var onInit = function (_slider, _thumb, spectrum, _value) {\n          setColour(spectrum.element.dom, toString(red));\n        };\n        var sliderBehaviours = derive$1([\n          Composing.config({ find: Optional.some }),\n          Focusing.config({})\n        ]);\n        return Slider.sketch({\n          dom: {\n            tag: 'div',\n            attributes: { role: 'presentation' },\n            classes: [getClass('sv-palette')]\n          },\n          model: {\n            mode: 'xy',\n            getInitialValue: getInitialValue\n          },\n          rounded: false,\n          components: [\n            spectrumPart,\n            thumbPart\n          ],\n          onChange: onChange,\n          onInit: onInit,\n          sliderBehaviours: sliderBehaviours\n        });\n      };\n      var saturationBrightnessPaletteSketcher = single$2({\n        factory: factory,\n        name: 'SaturationBrightnessPalette',\n        configFields: [],\n        apis: {\n          setRgba: function (_apis, slider, rgba) {\n            setSliderColour(slider, rgba);\n          }\n        },\n        extraApis: {}\n      });\n      return saturationBrightnessPaletteSketcher;\n    };\n\n    var makeFactory = function (translate, getClass) {\n      var factory = function (detail) {\n        var rgbForm = rgbFormFactory(translate, getClass, detail.onValidHex, detail.onInvalidHex);\n        var sbPalette = paletteFactory(translate, getClass);\n        var state = { paletteRgba: Cell(red) };\n        var memPalette = record(sbPalette.sketch({}));\n        var memRgb = record(rgbForm.sketch({}));\n        var updatePalette = function (anyInSystem, hex) {\n          memPalette.getOpt(anyInSystem).each(function (palette) {\n            var rgba = fromHex(hex);\n            state.paletteRgba.set(rgba);\n            sbPalette.setRgba(palette, rgba);\n          });\n        };\n        var updateFields = function (anyInSystem, hex) {\n          memRgb.getOpt(anyInSystem).each(function (form) {\n            rgbForm.updateHex(form, hex);\n          });\n        };\n        var runUpdates = function (anyInSystem, hex, updates) {\n          each(updates, function (update) {\n            update(anyInSystem, hex);\n          });\n        };\n        var paletteUpdates = function () {\n          var updates = [updateFields];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var oldRgb = state.paletteRgba.get();\n            var hsvColour$1 = fromRgb(oldRgb);\n            var newHsvColour = hsvColour(hsvColour$1.hue, value.x, 100 - value.y);\n            var rgb = fromHsv(newHsvColour);\n            var nuHex = fromRgba(rgb);\n            runUpdates(form, nuHex, updates);\n          };\n        };\n        var sliderUpdates = function () {\n          var updates = [\n            updatePalette,\n            updateFields\n          ];\n          return function (form, simulatedEvent) {\n            var value = simulatedEvent.event.value;\n            var hex = calcHex(value.y);\n            runUpdates(form, hex, updates);\n          };\n        };\n        return {\n          uid: detail.uid,\n          dom: detail.dom,\n          components: [\n            memPalette.asSpec(),\n            sliderFactory(translate, getClass),\n            memRgb.asSpec()\n          ],\n          behaviours: derive$1([\n            config('colour-picker-events', [\n              run(paletteUpdate, paletteUpdates()),\n              run(sliderUpdate, sliderUpdates())\n            ]),\n            Composing.config({\n              find: function (comp) {\n                return memRgb.getOpt(comp);\n              }\n            }),\n            Keying.config({ mode: 'acyclic' })\n          ])\n        };\n      };\n      var colourPickerSketcher = single$2({\n        name: 'ColourPicker',\n        configFields: [\n          strict$1('dom'),\n          defaulted$1('onValidHex', noop),\n          defaulted$1('onInvalidHex', noop)\n        ],\n        factory: factory\n      });\n      return colourPickerSketcher;\n    };\n\n    var self$1 = function () {\n      return Composing.config({ find: Optional.some });\n    };\n    var memento = function (mem) {\n      return Composing.config({ find: mem.getOpt });\n    };\n    var childAt = function (index) {\n      return Composing.config({\n        find: function (comp) {\n          return child(comp.element, index).bind(function (element) {\n            return comp.getSystem().getByDom(element).toOptional();\n          });\n        }\n      });\n    };\n    var ComposingConfigs = {\n      self: self$1,\n      memento: memento,\n      childAt: childAt\n    };\n\n    var english = {\n      'colorcustom.rgb.red.label': 'R',\n      'colorcustom.rgb.red.description': 'Red component',\n      'colorcustom.rgb.green.label': 'G',\n      'colorcustom.rgb.green.description': 'Green component',\n      'colorcustom.rgb.blue.label': 'B',\n      'colorcustom.rgb.blue.description': 'Blue component',\n      'colorcustom.rgb.hex.label': '#',\n      'colorcustom.rgb.hex.description': 'Hex color code',\n      'colorcustom.rgb.range': 'Range 0 to 255',\n      'colorcustom.sb.saturation': 'Saturation',\n      'colorcustom.sb.brightness': 'Brightness',\n      'colorcustom.sb.picker': 'Saturation and Brightness Picker',\n      'colorcustom.sb.palette': 'Saturation and Brightness Palette',\n      'colorcustom.sb.instructions': 'Use arrow keys to select saturation and brightness, on x and y axes',\n      'colorcustom.hue.hue': 'Hue',\n      'colorcustom.hue.slider': 'Hue Slider',\n      'colorcustom.hue.palette': 'Hue Palette',\n      'colorcustom.hue.instructions': 'Use arrow keys to select a hue',\n      'aria.color.picker': 'Color Picker',\n      'aria.input.invalid': 'Invalid input'\n    };\n    var getEnglishText = function (key) {\n      return english[key];\n    };\n    var translate$1 = function (key) {\n      return getEnglishText(key);\n    };\n    var renderColorPicker = function (_spec) {\n      var getClass = function (key) {\n        return 'tox-' + key;\n      };\n      var colourPickerFactory = makeFactory(translate$1, getClass);\n      var onValidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: true\n        });\n      };\n      var onInvalidHex = function (form) {\n        emitWith(form, formActionEvent, {\n          name: 'hex-valid',\n          value: false\n        });\n      };\n      var memPicker = record(colourPickerFactory.sketch({\n        dom: {\n          tag: 'div',\n          classes: [getClass('color-picker-container')],\n          attributes: { role: 'presentation' }\n        },\n        onValidHex: onValidHex,\n        onInvalidHex: onInvalidHex\n      }));\n      return {\n        dom: { tag: 'div' },\n        components: [memPicker.asSpec()],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                var optHex = optRgbForm.bind(function (rgbForm) {\n                  var formValues = Representing.getValue(rgbForm);\n                  return formValues.hex;\n                });\n                return optHex.map(function (hex) {\n                  return '#' + hex;\n                }).getOr('');\n              },\n              setValue: function (comp, newValue) {\n                var pattern = /^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/;\n                var m = pattern.exec(newValue);\n                var picker = memPicker.get(comp);\n                var optRgbForm = Composing.getCurrent(picker);\n                optRgbForm.fold(function () {\n                  console.log('Can not find form');\n                }, function (rgbForm) {\n                  Representing.setValue(rgbForm, { hex: Optional.from(m[1]).getOr('') });\n                  Form.getField(rgbForm, 'hex').each(function (hexField) {\n                    emit(hexField, input());\n                  });\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.Resource');\n\n    var isOldCustomEditor = function (spec) {\n      return Object.prototype.hasOwnProperty.call(spec, 'init');\n    };\n    var renderCustomEditor = function (spec) {\n      var editorApi = Cell(Optional.none());\n      var memReplaced = record({ dom: { tag: spec.tag } });\n      var initialValue = Cell(Optional.none());\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-custom-editor']\n        },\n        behaviours: derive$1([\n          config('custom-editor-events', [runOnAttached(function (component) {\n              memReplaced.getOpt(component).each(function (ta) {\n                (isOldCustomEditor(spec) ? spec.init(ta.element.dom) : global$b.load(spec.scriptId, spec.scriptUrl).then(function (init) {\n                  return init(ta.element.dom, spec.settings);\n                })).then(function (ea) {\n                  initialValue.get().each(function (cvalue) {\n                    ea.setValue(cvalue);\n                  });\n                  initialValue.set(Optional.none());\n                  editorApi.set(Optional.some(ea));\n                });\n              });\n            })]),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return editorApi.get().fold(function () {\n                  return initialValue.get().getOr('');\n                }, function (ed) {\n                  return ed.getValue();\n                });\n              },\n              setValue: function (component, value) {\n                editorApi.get().fold(function () {\n                  initialValue.set(Optional.some(value));\n                }, function (ed) {\n                  return ed.setValue(value);\n                });\n              }\n            }\n          }),\n          ComposingConfigs.self()\n        ]),\n        components: [memReplaced.asSpec()]\n      };\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var processors = objOf([\n      defaulted$1('preprocess', identity),\n      defaulted$1('postprocess', identity)\n    ]);\n    var memento$1 = function (mem, rawProcessors) {\n      var ps = asRawOrDie('RepresentingConfigs.memento processors', processors, rawProcessors);\n      return Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var other = mem.get(comp);\n            var rawValue = Representing.getValue(other);\n            return ps.postprocess(rawValue);\n          },\n          setValue: function (comp, rawValue) {\n            var newValue = ps.preprocess(rawValue);\n            var other = mem.get(comp);\n            Representing.setValue(other, newValue);\n          }\n        }\n      });\n    };\n    var withComp = function (optInitialValue, getter, setter) {\n      return Representing.config(deepMerge({\n        store: {\n          mode: 'manual',\n          getValue: getter,\n          setValue: setter\n        }\n      }, optInitialValue.map(function (initialValue) {\n        return { store: { initialValue: initialValue } };\n      }).getOr({})));\n    };\n    var withElement = function (initialValue, getter, setter) {\n      return withComp(initialValue, function (c) {\n        return getter(c.element);\n      }, function (c, v) {\n        return setter(c.element, v);\n      });\n    };\n    var domValue = function (optInitialValue) {\n      return withElement(optInitialValue, get$6, set$3);\n    };\n    var domHtml = function (optInitialValue) {\n      return withElement(optInitialValue, get$2, set);\n    };\n    var memory$1 = function (initialValue) {\n      return Representing.config({\n        store: {\n          mode: 'memory',\n          initialValue: initialValue\n        }\n      });\n    };\n    var RepresentingConfigs = {\n      memento: memento$1,\n      withElement: withElement,\n      withComp: withComp,\n      domValue: domValue,\n      domHtml: domHtml,\n      memory: memory$1\n    };\n\n    var defaultImageFileTypes = 'jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp';\n    var filterByExtension = function (files, providersBackstage) {\n      var allowedImageFileTypes = global$c.explode(providersBackstage.getSetting('images_file_types', defaultImageFileTypes, 'string'));\n      var isFileInAllowedTypes = function (file) {\n        return exists(allowedImageFileTypes, function (type) {\n          return endsWith(file.name, '.' + type);\n        });\n      };\n      return filter(from$1(files), isFileInAllowedTypes);\n    };\n    var renderDropZone = function (spec, providersBackstage) {\n      var stopper = function (_, se) {\n        se.stop();\n      };\n      var sequence = function (actions) {\n        return function (comp, se) {\n          each(actions, function (a) {\n            a(comp, se);\n          });\n        };\n      };\n      var onDrop = function (comp, se) {\n        if (!Disabling.isDisabled(comp)) {\n          var transferEvent = se.event.raw;\n          handleFiles(comp, transferEvent.dataTransfer.files);\n        }\n      };\n      var onSelect = function (component, simulatedEvent) {\n        var input = simulatedEvent.event.raw.target;\n        handleFiles(component, input.files);\n      };\n      var handleFiles = function (component, files) {\n        Representing.setValue(component, filterByExtension(files, providersBackstage));\n        emitWith(component, formChangeEvent, { name: spec.name });\n      };\n      var memInput = record({\n        dom: {\n          tag: 'input',\n          attributes: {\n            type: 'file',\n            accept: 'image/*'\n          },\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([config('input-file-events', [\n            cutter(click()),\n            cutter(tap())\n          ])])\n      });\n      var renderField = function (s) {\n        return {\n          uid: s.uid,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dropzone-container']\n          },\n          behaviours: derive$1([\n            RepresentingConfigs.memory([]),\n            ComposingConfigs.self(),\n            Disabling.config({}),\n            Toggling.config({\n              toggleClass: 'dragenter',\n              toggleOnExecute: false\n            }),\n            config('dropzone-events', [\n              run('dragenter', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragleave', sequence([\n                stopper,\n                Toggling.toggle\n              ])),\n              run('dragover', stopper),\n              run('drop', sequence([\n                stopper,\n                onDrop\n              ])),\n              run(change(), onSelect)\n            ])\n          ]),\n          components: [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-dropzone'],\n                styles: {}\n              },\n              components: [\n                {\n                  dom: {\n                    tag: 'p',\n                    innerHtml: providersBackstage.translate('Drop an image here')\n                  }\n                },\n                Button.sketch({\n                  dom: {\n                    tag: 'button',\n                    innerHtml: providersBackstage.translate('Browse for an image'),\n                    styles: { position: 'relative' },\n                    classes: [\n                      'tox-button',\n                      'tox-button--secondary'\n                    ]\n                  },\n                  components: [memInput.asSpec()],\n                  action: function (comp) {\n                    var inputComp = memInput.get(comp);\n                    inputComp.element.dom.click();\n                  },\n                  buttonBehaviours: derive$1([\n                    Tabstopping.config({}),\n                    DisablingConfigs.button(providersBackstage.isDisabled),\n                    receivingConfig()\n                  ])\n                })\n              ]\n            }]\n        };\n      };\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({ factory: { sketch: renderField } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    var renderGrid = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-form__grid',\n            'tox-form__grid--' + spec.columns + 'col'\n          ]\n        },\n        components: map(spec.items, backstage.interpreter)\n      };\n    };\n\n    var beforeObject = generate$1('alloy-fake-before-tabstop');\n    var afterObject = generate$1('alloy-fake-after-tabstop');\n    var craftWithClasses = function (classes) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: {\n            width: '1px',\n            height: '1px',\n            outline: 'none'\n          },\n          attributes: { tabindex: '0' },\n          classes: classes\n        },\n        behaviours: derive$1([\n          Focusing.config({ ignore: true }),\n          Tabstopping.config({})\n        ])\n      };\n    };\n    var craft = function (spec) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-navobj']\n        },\n        components: [\n          craftWithClasses([beforeObject]),\n          spec,\n          craftWithClasses([afterObject])\n        ],\n        behaviours: derive$1([ComposingConfigs.childAt(1)])\n      };\n    };\n    var triggerTab = function (placeholder, shiftKey) {\n      emitWith(placeholder, keydown(), {\n        raw: {\n          which: 9,\n          shiftKey: shiftKey\n        }\n      });\n    };\n    var onFocus$1 = function (container, targetComp) {\n      var target = targetComp.element;\n      if (has$2(target, beforeObject)) {\n        triggerTab(container, true);\n      } else if (has$2(target, afterObject)) {\n        triggerTab(container, false);\n      }\n    };\n    var isPseudoStop = function (element) {\n      return closest$4(element, [\n        '.' + beforeObject,\n        '.' + afterObject\n      ].join(','), never);\n    };\n\n    var platformNeedsSandboxing = !(detect$3().browser.isIE() || detect$3().browser.isEdge());\n    var getDynamicSource = function (isSandbox) {\n      var cachedValue = Cell('');\n      return {\n        getValue: function (_frameComponent) {\n          return cachedValue.get();\n        },\n        setValue: function (frameComponent, html) {\n          if (!isSandbox) {\n            set$1(frameComponent.element, 'src', 'javascript:\\'\\'');\n            var doc = frameComponent.element.dom.contentWindow.document;\n            doc.open();\n            doc.write(html);\n            doc.close();\n          } else {\n            set$1(frameComponent.element, 'srcdoc', html);\n          }\n          cachedValue.set(html);\n        }\n      };\n    };\n    var renderIFrame = function (spec, providersBackstage) {\n      var isSandbox = platformNeedsSandboxing && spec.sandboxed;\n      var attributes = __assign(__assign({}, spec.label.map(function (title) {\n        return { title: title };\n      }).getOr({})), isSandbox ? { sandbox: 'allow-scripts allow-same-origin' } : {});\n      var sourcing = getDynamicSource(isSandbox);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var factory = function (newSpec) {\n        return craft({\n          uid: newSpec.uid,\n          dom: {\n            tag: 'iframe',\n            attributes: attributes\n          },\n          behaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({}),\n            RepresentingConfigs.withComp(Optional.none(), sourcing.getValue, sourcing.setValue)\n          ])\n        });\n      };\n      var pField = FormField.parts.field({ factory: { sketch: factory } });\n      return renderFormFieldWith(pLabel, pField, ['tox-form__group--stretched'], []);\n    };\n\n    function create$5(width, height) {\n      return resize(document.createElement('canvas'), width, height);\n    }\n    function clone$1(canvas) {\n      var tCanvas = create$5(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var anyWindow = window;\n      var asap = Promise.immediateFn || typeof anyWindow.setImmediate === 'function' && anyWindow.setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise$1 = window.Promise ? window.Promise : promise();\n\n    function blobToImage(blob) {\n      return new Promise$1(function (resolve, reject) {\n        var blobUrl = URL.createObjectURL(blob);\n        var image = new Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Optional.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Optional.some(new Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise$1(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (isFunction(HTMLCanvasElement.prototype.toBlob)) {\n        return new Promise$1(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create$5(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise$1(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      URL.revokeObjectURL(image.src);\n    }\n\n    function create$6(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise$1.resolve(blob);\n      }\n      var toDataURL = constant(uri);\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone$1);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$6(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$6(Promise$1.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    function clamp$1(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity$1() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp$1(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp$1(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp$1(adjustR, 0, 2);\n      adjustG = clamp$1(adjustG, 0, 2);\n      adjustB = clamp$1(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity$1(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity$1(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise$1(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create$5(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create$5(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create$5(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var renderIcon$1 = function (iconHtml, behaviours) {\n      return __assign({\n        dom: {\n          tag: 'span',\n          innerHtml: iconHtml,\n          classes: [\n            'tox-icon',\n            'tox-tbtn__icon-wrap'\n          ]\n        }\n      }, behaviours);\n    };\n    var renderIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), {});\n    };\n    var renderReplacableIconFromPack = function (iconName, iconsProvider) {\n      return renderIcon$1(get$e(iconName, iconsProvider), { behaviours: derive$1([Replacing.config({})]) });\n    };\n    var renderLabel$1 = function (text, prefix, providersBackstage) {\n      return {\n        dom: {\n          tag: 'span',\n          innerHtml: providersBackstage.translate(text),\n          classes: [prefix + '__select-label']\n        },\n        behaviours: derive$1([Replacing.config({})])\n      };\n    };\n\n    var _a$1;\n    var internalToolbarButtonExecute = generate$1('toolbar.button.execute');\n    var onToolbarButtonExecute = function (info) {\n      return runOnExecute(function (comp, _simulatedEvent) {\n        runWithApi(info, comp)(function (itemApi) {\n          emitWith(comp, internalToolbarButtonExecute, { buttonApi: itemApi });\n          info.onAction(itemApi);\n        });\n      });\n    };\n    var toolbarButtonEventOrder = (_a$1 = {}, _a$1[execute()] = [\n      'disabling',\n      'alloy.base.behaviour',\n      'toggling',\n      'toolbar-button-events'\n    ], _a$1);\n\n    var updateMenuText = generate$1('update-menu-text');\n    var updateMenuIcon = generate$1('update-menu-icon');\n    var renderCommonDropdown = function (spec, prefix, sharedBackstage) {\n      var editorOffCell = Cell(noop);\n      var optMemDisplayText = spec.text.map(function (text) {\n        return record(renderLabel$1(text, prefix, sharedBackstage.providers));\n      });\n      var optMemDisplayIcon = spec.icon.map(function (iconName) {\n        return record(renderReplacableIconFromPack(iconName, sharedBackstage.providers.icons));\n      });\n      var onLeftOrRightInMenu = function (comp, se) {\n        var dropdown = Representing.getValue(comp);\n        Focusing.focus(dropdown);\n        emitWith(dropdown, 'keydown', { raw: se.event.raw });\n        Dropdown.close(dropdown);\n        return Optional.some(true);\n      };\n      var role = spec.role.fold(function () {\n        return {};\n      }, function (role) {\n        return { role: role };\n      });\n      var tooltipAttributes = spec.tooltip.fold(function () {\n        return {};\n      }, function (tooltip) {\n        var translatedTooltip = sharedBackstage.providers.translate(tooltip);\n        return {\n          'title': translatedTooltip,\n          'aria-label': translatedTooltip\n        };\n      });\n      var memDropdown = record(Dropdown.sketch(__assign(__assign(__assign({}, spec.uid ? { uid: spec.uid } : {}), role), {\n        dom: {\n          tag: 'button',\n          classes: [\n            prefix,\n            prefix + '--select'\n          ].concat(map(spec.classes, function (c) {\n            return prefix + '--' + c;\n          })),\n          attributes: __assign({}, tooltipAttributes)\n        },\n        components: componentRenderPipeline([\n          optMemDisplayIcon.map(function (mem) {\n            return mem.asSpec();\n          }),\n          optMemDisplayText.map(function (mem) {\n            return mem.asSpec();\n          }),\n          Optional.some({\n            dom: {\n              tag: 'div',\n              classes: [prefix + '__select-chevron'],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            }\n          })\n        ]),\n        matchWidth: true,\n        useMinWidth: true,\n        dropdownBehaviours: derive$1(__spreadArrays(spec.dropdownBehaviours, [\n          DisablingConfigs.button(function () {\n            return spec.disabled || sharedBackstage.providers.isDisabled();\n          }),\n          receivingConfig(),\n          Unselecting.config({}),\n          Replacing.config({}),\n          config('dropdown-events', [\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell)\n          ]),\n          config('menubutton-update-display-text', [\n            run(updateMenuText, function (comp, se) {\n              optMemDisplayText.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayText) {\n                Replacing.set(displayText, [text(sharedBackstage.providers.translate(se.event.text))]);\n              });\n            }),\n            run(updateMenuIcon, function (comp, se) {\n              optMemDisplayIcon.bind(function (mem) {\n                return mem.getOpt(comp);\n              }).each(function (displayIcon) {\n                Replacing.set(displayIcon, [renderReplacableIconFromPack(se.event.icon, sharedBackstage.providers.icons)]);\n              });\n            })\n          ])\n        ])),\n        eventOrder: deepMerge(toolbarButtonEventOrder, {\n          mousedown: [\n            'focusing',\n            'alloy.base.behaviour',\n            'item-type-events',\n            'normal-dropdown-events'\n          ]\n        }),\n        sandboxBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onLeft: onLeftOrRightInMenu,\n            onRight: onLeftOrRightInMenu\n          })]),\n        lazySink: sharedBackstage.getSink,\n        toggleClass: prefix + '--active',\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        fetch: function (comp) {\n          return Future.nu(curry(spec.fetch, comp));\n        }\n      })));\n      return memDropdown.asSpec();\n    };\n\n    var isMenuItemReference = function (item) {\n      return isString(item);\n    };\n    var isSeparator = function (item) {\n      return item.type === 'separator';\n    };\n    var isExpandingMenuItem = function (item) {\n      return has(item, 'getSubmenuItems');\n    };\n    var separator$1 = { type: 'separator' };\n    var unwrapReferences = function (items, menuItems) {\n      var realItems = foldl(items, function (acc, item) {\n        if (isMenuItemReference(item)) {\n          if (item === '') {\n            return acc;\n          } else if (item === '|') {\n            return acc.length > 0 && !isSeparator(acc[acc.length - 1]) ? acc.concat([separator$1]) : acc;\n          } else if (has(menuItems, item.toLowerCase())) {\n            return acc.concat([menuItems[item.toLowerCase()]]);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([item]);\n        }\n      }, []);\n      if (realItems.length > 0 && isSeparator(realItems[realItems.length - 1])) {\n        realItems.pop();\n      }\n      return realItems;\n    };\n    var getFromExpandingItem = function (item, menuItems) {\n      var submenuItems = item.getSubmenuItems();\n      var rest = expand(submenuItems, menuItems);\n      var newMenus = deepMerge(rest.menus, wrap$1(item.value, rest.items));\n      var newExpansions = deepMerge(rest.expansions, wrap$1(item.value, item.value));\n      return {\n        item: item,\n        menus: newMenus,\n        expansions: newExpansions\n      };\n    };\n    var getFromItem = function (item, menuItems) {\n      return isExpandingMenuItem(item) ? getFromExpandingItem(item, menuItems) : {\n        item: item,\n        menus: {},\n        expansions: {}\n      };\n    };\n    var generateValueIfRequired = function (item) {\n      if (isSeparator(item)) {\n        return item;\n      } else {\n        var itemValue = get$1(item, 'value').getOrThunk(function () {\n          return generate$1('generated-menu-item');\n        });\n        return deepMerge({ value: itemValue }, item);\n      }\n    };\n    var expand = function (items, menuItems) {\n      var realItems = unwrapReferences(isString(items) ? items.split(' ') : items, menuItems);\n      return foldr(realItems, function (acc, item) {\n        var itemWithValue = generateValueIfRequired(item);\n        var newData = getFromItem(itemWithValue, menuItems);\n        return {\n          menus: deepMerge(acc.menus, newData.menus),\n          items: [newData.item].concat(acc.items),\n          expansions: deepMerge(acc.expansions, newData.expansions)\n        };\n      }, {\n        menus: {},\n        expansions: {},\n        items: []\n      });\n    };\n\n    var build$2 = function (items, itemResponse, backstage, isHorizontalMenu) {\n      var primary = generate$1('primary-menu');\n      var data = expand(items, backstage.shared.providers.menuItems());\n      if (data.items.length === 0) {\n        return Optional.none();\n      }\n      var mainMenu = createPartialMenu(primary, data.items, itemResponse, backstage, isHorizontalMenu);\n      var submenus = map$2(data.menus, function (menuItems, menuName) {\n        return createPartialMenu(menuName, menuItems, itemResponse, backstage, false);\n      });\n      var menus = deepMerge(submenus, wrap$1(primary, mainMenu));\n      return Optional.from(tieredMenu.tieredData(primary, menus, data.expansions));\n    };\n\n    var getMenuButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        },\n        setActive: function (state) {\n          var elm = component.element;\n          if (state) {\n            add$2(elm, 'tox-tbtn--enabled');\n            set$1(elm, 'aria-pressed', true);\n          } else {\n            remove$4(elm, 'tox-tbtn--enabled');\n            remove$1(elm, 'aria-pressed');\n          }\n        },\n        isActive: function () {\n          return has$2(component.element, 'tox-tbtn--enabled');\n        }\n      };\n    };\n    var renderMenuButton = function (spec, prefix, backstage, role) {\n      return renderCommonDropdown({\n        text: spec.text,\n        icon: spec.icon,\n        tooltip: spec.tooltip,\n        role: role,\n        fetch: function (_comp, callback) {\n          spec.fetch(function (items) {\n            callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n          });\n        },\n        onSetup: spec.onSetup,\n        getApi: getMenuButtonApi,\n        columns: 1,\n        presets: 'normal',\n        classes: [],\n        dropdownBehaviours: [Tabstopping.config({})]\n      }, prefix, backstage.shared);\n    };\n    var getFetch$1 = function (items, getButton, backstage) {\n      var getMenuItemAction = function (item) {\n        return function (api) {\n          var newValue = !api.isActive();\n          api.setActive(newValue);\n          item.storage.set(newValue);\n          backstage.shared.getSink().each(function (sink) {\n            getButton().getOpt(sink).each(function (orig) {\n              focus$1(orig.element);\n              emitWith(orig, formActionEvent, {\n                name: item.name,\n                value: item.storage.get()\n              });\n            });\n          });\n        };\n      };\n      var getMenuItemSetup = function (item) {\n        return function (api) {\n          api.setActive(item.storage.get());\n        };\n      };\n      return function (success) {\n        success(map(items, function (item) {\n          var text = item.text.fold(function () {\n            return {};\n          }, function (text) {\n            return { text: text };\n          });\n          return __assign(__assign({\n            type: item.type,\n            active: false\n          }, text), {\n            onAction: getMenuItemAction(item),\n            onSetup: getMenuItemSetup(item)\n          });\n        }));\n      };\n    };\n\n    var renderCommonSpec = function (spec, actionOpt, extraBehaviours, dom, components, providersBackstage) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var action = actionOpt.fold(function () {\n        return {};\n      }, function (action) {\n        return { action: action };\n      });\n      var common = __assign({\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          config('button press', [\n            preventDefault('click'),\n            preventDefault('mousedown')\n          ])\n        ].concat(extraBehaviours)),\n        eventOrder: {\n          click: [\n            'button press',\n            'alloy.base.behaviour'\n          ],\n          mousedown: [\n            'button press',\n            'alloy.base.behaviour'\n          ]\n        }\n      }, action);\n      var domFinal = deepMerge(common, { dom: dom });\n      return deepMerge(domFinal, { components: components });\n    };\n    var renderIconButtonSpec = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var tooltipAttributes = spec.tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n      var dom = {\n        tag: 'button',\n        classes: ['tox-tbtn'],\n        attributes: tooltipAttributes\n      };\n      var icon = spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      });\n      var components = componentRenderPipeline([icon]);\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderIconButton = function (spec, action, providersBackstage, extraBehaviours) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      var iconButtonSpec = renderIconButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours);\n      return Button.sketch(iconButtonSpec);\n    };\n    var renderButtonSpec = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var translatedText = providersBackstage.translate(spec.text);\n      var icon = spec.icon ? spec.icon.map(function (iconName) {\n        return renderIconFromPack(iconName, providersBackstage.icons);\n      }) : Optional.none();\n      var components = icon.isSome() ? componentRenderPipeline([icon]) : [];\n      var innerHtml = icon.isSome() ? {} : { innerHtml: translatedText };\n      var classes = __spreadArrays(!spec.primary && !spec.borderless ? [\n        'tox-button',\n        'tox-button--secondary'\n      ] : ['tox-button'], icon.isSome() ? ['tox-button--icon'] : [], spec.borderless ? ['tox-button--naked'] : [], extraClasses);\n      var dom = __assign(__assign({\n        tag: 'button',\n        classes: classes\n      }, innerHtml), { attributes: { title: translatedText } });\n      return renderCommonSpec(spec, action, extraBehaviours, dom, components, providersBackstage);\n    };\n    var renderButton = function (spec, action, providersBackstage, extraBehaviours, extraClasses) {\n      if (extraBehaviours === void 0) {\n        extraBehaviours = [];\n      }\n      if (extraClasses === void 0) {\n        extraClasses = [];\n      }\n      var buttonSpec = renderButtonSpec(spec, Optional.some(action), providersBackstage, extraBehaviours, extraClasses);\n      return Button.sketch(buttonSpec);\n    };\n    var getAction = function (name, buttonType) {\n      return function (comp) {\n        if (buttonType === 'custom') {\n          emitWith(comp, formActionEvent, {\n            name: name,\n            value: {}\n          });\n        } else if (buttonType === 'submit') {\n          emit(comp, formSubmitEvent);\n        } else if (buttonType === 'cancel') {\n          emit(comp, formCancelEvent);\n        } else {\n          console.error('Unknown button type: ', buttonType);\n        }\n      };\n    };\n    var isMenuFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'menu';\n    };\n    var isNormalFooterButtonSpec = function (spec, buttonType) {\n      return buttonType === 'custom' || buttonType === 'cancel' || buttonType === 'submit';\n    };\n    var renderFooterButton = function (spec, buttonType, backstage) {\n      if (isMenuFooterButtonSpec(spec, buttonType)) {\n        var getButton = function () {\n          return memButton_1;\n        };\n        var menuButtonSpec = spec;\n        var fixedSpec = __assign(__assign({}, spec), {\n          onSetup: function (api) {\n            api.setDisabled(spec.disabled);\n            return noop;\n          },\n          fetch: getFetch$1(menuButtonSpec.items, getButton, backstage)\n        });\n        var memButton_1 = record(renderMenuButton(fixedSpec, 'tox-tbtn', backstage, Optional.none()));\n        return memButton_1.asSpec();\n      } else if (isNormalFooterButtonSpec(spec, buttonType)) {\n        var action = getAction(spec.name, buttonType);\n        var buttonSpec = __assign(__assign({}, spec), { borderless: false });\n        return renderButton(buttonSpec, action, backstage.shared.providers, []);\n      } else {\n        console.error('Unknown footer button type: ', buttonType);\n      }\n    };\n    var renderDialogButton = function (spec, providersBackstage) {\n      var action = getAction(spec.name, 'custom');\n      return renderFormField(Optional.none(), FormField.parts.field(__assign({ factory: Button }, renderButtonSpec(spec, Optional.some(action), providersBackstage, [\n        RepresentingConfigs.memory(''),\n        ComposingConfigs.self()\n      ]))));\n    };\n\n    var schema$i = constant([\n      defaulted$1('field1Name', 'field1'),\n      defaulted$1('field2Name', 'field2'),\n      onStrictHandler('onLockedChange'),\n      markers(['lockClass']),\n      defaulted$1('locked', false),\n      SketchBehaviours.field('coupledFieldBehaviours', [\n        Composing,\n        Representing\n      ])\n    ]);\n    var getField = function (comp, detail, partName) {\n      return getPart(comp, detail, partName).bind(Composing.getCurrent);\n    };\n    var coupledPart = function (selfName, otherName) {\n      return required({\n        factory: FormField,\n        name: selfName,\n        overrides: function (detail) {\n          return {\n            fieldBehaviours: derive$1([config('coupled-input-behaviour', [run(input(), function (me) {\n                  getField(me, detail, otherName).each(function (other) {\n                    getPart(me, detail, 'lock').each(function (lock) {\n                      if (Toggling.isOn(lock)) {\n                        detail.onLockedChange(me, other, lock);\n                      }\n                    });\n                  });\n                })])])\n          };\n        }\n      });\n    };\n    var parts$5 = constant([\n      coupledPart('field1', 'field2'),\n      coupledPart('field2', 'field1'),\n      required({\n        factory: Button,\n        schema: [strict$1('dom')],\n        name: 'lock',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                selected: detail.locked,\n                toggleClass: detail.markers.lockClass,\n                aria: { mode: 'pressed' }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var factory$7 = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: SketchBehaviours.augment(detail.coupledFieldBehaviours, [\n          Composing.config({ find: Optional.some }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (comp) {\n                var _a;\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                return _a = {}, _a[detail.field1Name] = Representing.getValue(parts.field1()), _a[detail.field2Name] = Representing.getValue(parts.field2()), _a;\n              },\n              setValue: function (comp, value) {\n                var parts = getPartsOrDie(comp, detail, [\n                  'field1',\n                  'field2'\n                ]);\n                if (hasNonNullableKey(value, detail.field1Name)) {\n                  Representing.setValue(parts.field1(), value[detail.field1Name]);\n                }\n                if (hasNonNullableKey(value, detail.field2Name)) {\n                  Representing.setValue(parts.field2(), value[detail.field2Name]);\n                }\n              }\n            }\n          })\n        ]),\n        apis: {\n          getField1: function (component) {\n            return getPart(component, detail, 'field1');\n          },\n          getField2: function (component) {\n            return getPart(component, detail, 'field2');\n          },\n          getLock: function (component) {\n            return getPart(component, detail, 'lock');\n          }\n        }\n      };\n    };\n    var FormCoupledInputs = composite$1({\n      name: 'FormCoupledInputs',\n      configFields: schema$i(),\n      partFields: parts$5(),\n      factory: factory$7,\n      apis: {\n        getField1: function (apis, component) {\n          return apis.getField1(component);\n        },\n        getField2: function (apis, component) {\n          return apis.getField2(component);\n        },\n        getLock: function (apis, component) {\n          return apis.getLock(component);\n        }\n      }\n    });\n\n    var formatSize = function (size) {\n      var unitDec = {\n        '': 0,\n        'px': 0,\n        'pt': 1,\n        'mm': 1,\n        'pc': 2,\n        'ex': 2,\n        'em': 2,\n        'ch': 2,\n        'rem': 2,\n        'cm': 3,\n        'in': 4,\n        '%': 4\n      };\n      var maxDecimal = function (unit) {\n        return unit in unitDec ? unitDec[unit] : 1;\n      };\n      var numText = size.value.toFixed(maxDecimal(size.unit));\n      if (numText.indexOf('.') !== -1) {\n        numText = numText.replace(/\\.?0*$/, '');\n      }\n      return numText + size.unit;\n    };\n    var parseSize = function (sizeText) {\n      var numPattern = /^\\s*(\\d+(?:\\.\\d+)?)\\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\\s*$/;\n      var match = numPattern.exec(sizeText);\n      if (match !== null) {\n        var value = parseFloat(match[1]);\n        var unit = match[2];\n        return Result.value({\n          value: value,\n          unit: unit\n        });\n      } else {\n        return Result.error(sizeText);\n      }\n    };\n    var convertUnit = function (size, unit) {\n      var inInch = {\n        '': 96,\n        'px': 96,\n        'pt': 72,\n        'cm': 2.54,\n        'pc': 12,\n        'mm': 25.4,\n        'in': 1\n      };\n      var supported = function (u) {\n        return Object.prototype.hasOwnProperty.call(inInch, u);\n      };\n      if (size.unit === unit) {\n        return Optional.some(size.value);\n      } else if (supported(size.unit) && supported(unit)) {\n        if (inInch[size.unit] === inInch[unit]) {\n          return Optional.some(size.value);\n        } else {\n          return Optional.some(size.value / inInch[size.unit] * inInch[unit]);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var noSizeConversion = function (_input) {\n      return Optional.none();\n    };\n    var ratioSizeConversion = function (scale, unit) {\n      return function (size) {\n        return convertUnit(size, unit).map(function (value) {\n          return {\n            value: value * scale,\n            unit: unit\n          };\n        });\n      };\n    };\n    var makeRatioConverter = function (currentFieldText, otherFieldText) {\n      var cValue = parseSize(currentFieldText).toOptional();\n      var oValue = parseSize(otherFieldText).toOptional();\n      return lift2(cValue, oValue, function (cSize, oSize) {\n        return convertUnit(cSize, oSize.unit).map(function (val) {\n          return oSize.value / val;\n        }).map(function (r) {\n          return ratioSizeConversion(r, oSize.unit);\n        }).getOr(noSizeConversion);\n      }).getOr(noSizeConversion);\n    };\n\n    var renderSizeInput = function (spec, providersBackstage) {\n      var converter = noSizeConversion;\n      var ratioEvent = generate$1('ratio-event');\n      var pLock = FormCoupledInputs.parts.lock({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-lock',\n            'tox-button',\n            'tox-button--naked',\n            'tox-button--icon'\n          ],\n          attributes: { title: providersBackstage.translate(spec.label.getOr('Constrain proportions')) }\n        },\n        components: [\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__lock'\n              ],\n              innerHtml: get$e('lock', providersBackstage.icons)\n            }\n          },\n          {\n            dom: {\n              tag: 'span',\n              classes: [\n                'tox-icon',\n                'tox-lock-icon__unlock'\n              ],\n              innerHtml: get$e('unlock', providersBackstage.icons)\n            }\n          }\n        ],\n        buttonBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          receivingConfig(),\n          Tabstopping.config({})\n        ])\n      });\n      var formGroup = function (components) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group']\n          },\n          components: components\n        };\n      };\n      var getFieldPart = function (isField1) {\n        return FormField.parts.field({\n          factory: Input,\n          inputClasses: ['tox-textfield'],\n          inputBehaviours: derive$1([\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            receivingConfig(),\n            Tabstopping.config({}),\n            config('size-input-events', [\n              run(focusin(), function (component, _simulatedEvent) {\n                emitWith(component, ratioEvent, { isField1: isField1 });\n              }),\n              run(change(), function (component, _simulatedEvent) {\n                emitWith(component, formChangeEvent, { name: spec.name });\n              })\n            ])\n          ]),\n          selectOnFocus: false\n        });\n      };\n      var getLabel = function (label) {\n        return {\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        };\n      };\n      var widthField = FormCoupledInputs.parts.field1(formGroup([\n        FormField.parts.label(getLabel('Width')),\n        getFieldPart(true)\n      ]));\n      var heightField = FormCoupledInputs.parts.field2(formGroup([\n        FormField.parts.label(getLabel('Height')),\n        getFieldPart(false)\n      ]));\n      return FormCoupledInputs.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-form__controls-h-stack']\n            },\n            components: [\n              widthField,\n              heightField,\n              formGroup([\n                getLabel('&nbsp;'),\n                pLock\n              ])\n            ]\n          }],\n        field1Name: 'width',\n        field2Name: 'height',\n        locked: true,\n        markers: { lockClass: 'tox-locked' },\n        onLockedChange: function (current, other, _lock) {\n          parseSize(Representing.getValue(current)).each(function (size) {\n            converter(size).each(function (newSize) {\n              Representing.setValue(other, formatSize(newSize));\n            });\n          });\n        },\n        coupledFieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.disable);\n              FormCoupledInputs.getLock(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormCoupledInputs.getField1(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getField2(comp).bind(FormField.getField).each(Disabling.enable);\n              FormCoupledInputs.getLock(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('size-input-events2', [run(ratioEvent, function (component, simulatedEvent) {\n              var isField1 = simulatedEvent.event.isField1;\n              var optCurrent = isField1 ? FormCoupledInputs.getField1(component) : FormCoupledInputs.getField2(component);\n              var optOther = isField1 ? FormCoupledInputs.getField2(component) : FormCoupledInputs.getField1(component);\n              var value1 = optCurrent.map(Representing.getValue).getOr('');\n              var value2 = optOther.map(Representing.getValue).getOr('');\n              converter = makeRatioConverter(value1, value2);\n            })])\n        ])\n      });\n    };\n\n    var undo = constant(generate$1('undo'));\n    var redo = constant(generate$1('redo'));\n    var zoom = constant(generate$1('zoom'));\n    var back = constant(generate$1('back'));\n    var apply = constant(generate$1('apply'));\n    var swap = constant(generate$1('swap'));\n    var transform = constant(generate$1('transform'));\n    var tempTransform = constant(generate$1('temp-transform'));\n    var transformApply = constant(generate$1('transform-apply'));\n    var internal = {\n      undo: undo,\n      redo: redo,\n      zoom: zoom,\n      back: back,\n      apply: apply,\n      swap: swap,\n      transform: transform,\n      tempTransform: tempTransform,\n      transformApply: transformApply\n    };\n    var saveState = constant('save-state');\n    var disable$1 = constant('disable');\n    var enable$1 = constant('enable');\n    var external$2 = {\n      formActionEvent: formActionEvent,\n      saveState: saveState,\n      disable: disable$1,\n      enable: enable$1\n    };\n\n    var renderEditPanel = function (imagePanel, providersBackstage) {\n      var createButton = function (text, action, disabled, primary) {\n        return record(renderButton({\n          name: text,\n          text: text,\n          disabled: disabled,\n          primary: primary,\n          icon: Optional.none(),\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var createIconButton = function (icon, tooltip, action, disabled) {\n        return record(renderIconButton({\n          name: icon,\n          icon: Optional.some(icon),\n          tooltip: Optional.some(tooltip),\n          disabled: disabled,\n          primary: false,\n          borderless: false\n        }, action, providersBackstage));\n      };\n      var disableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.disable(component);\n          }\n        });\n      };\n      var enableAllComponents = function (comps, eventcomp) {\n        comps.map(function (mem) {\n          var component = mem.get(eventcomp);\n          if (component.hasConfigured(Disabling)) {\n            Disabling.enable(component);\n          }\n        });\n      };\n      var panelDom = {\n        tag: 'div',\n        classes: [\n          'tox-image-tools__toolbar',\n          'tox-image-tools-edit-panel'\n        ]\n      };\n      var noop$1 = noop;\n      var emit$1 = function (comp, event, data) {\n        emitWith(comp, event, data);\n      };\n      var emitDisable = function (component) {\n        return emit(component, external$2.disable());\n      };\n      var emitEnable = function (component) {\n        return emit(component, external$2.enable());\n      };\n      var emitTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var emitTempTransform = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.tempTransform(), { transform: transform });\n        emitEnable(comp);\n      };\n      var getBackSwap = function (anyInSystem) {\n        return function () {\n          memContainer.getOpt(anyInSystem).each(function (container) {\n            Replacing.set(container, [ButtonPanel]);\n          });\n        };\n      };\n      var emitTransformApply = function (comp, transform) {\n        emitDisable(comp);\n        emit$1(comp, internal.transformApply(), {\n          transform: transform,\n          swap: getBackSwap(comp)\n        });\n        emitEnable(comp);\n      };\n      var createBackButton = function () {\n        return createButton('Back', function (button) {\n          return emit$1(button, internal.back(), { swap: getBackSwap(button) });\n        }, false, false);\n      };\n      var createSpacer = function () {\n        return record({\n          dom: {\n            tag: 'div',\n            classes: ['tox-spacer']\n          },\n          behaviours: derive$1([Disabling.config({})])\n        });\n      };\n      var createApplyButton = function () {\n        return createButton('Apply', function (button) {\n          return emit$1(button, internal.apply(), { swap: getBackSwap(button) });\n        }, true, true);\n      };\n      var makeCropTransform = function () {\n        return function (ir) {\n          var rect = imagePanel.getRect();\n          return crop$1(ir, rect.x, rect.y, rect.w, rect.h);\n        };\n      };\n      var cropPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createButton('Apply', function (button) {\n          var transform = makeCropTransform();\n          emitTransformApply(button, transform);\n          imagePanel.hideCrop();\n        }, false, true)\n      ];\n      var CropPanel = Container.sketch({\n        dom: panelDom,\n        components: cropPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-crop-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(cropPanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(cropPanelComponents, comp);\n            })\n          ])])\n      });\n      var memSize = record(renderSizeInput({\n        name: 'size',\n        label: Optional.none(),\n        constrain: true,\n        disabled: false\n      }, providersBackstage));\n      var makeResizeTransform = function (width, height) {\n        return function (ir) {\n          return resize$2(ir, width, height);\n        };\n      };\n      var resizePanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        memSize,\n        createSpacer(),\n        createButton('Apply', function (button) {\n          memSize.getOpt(button).each(function (sizeInput) {\n            var value = Representing.getValue(sizeInput);\n            var width = parseInt(value.width, 10);\n            var height = parseInt(value.height, 10);\n            var transform = makeResizeTransform(width, height);\n            emitTransformApply(button, transform);\n          });\n        }, false, true)\n      ];\n      var ResizePanel = Container.sketch({\n        dom: panelDom,\n        components: resizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-resize-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(resizePanelComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(resizePanelComponents, comp);\n            })\n          ])])\n      });\n      var makeValueTransform = function (transform, value) {\n        return function (ir) {\n          return transform(ir, value);\n        };\n      };\n      var horizontalFlip = makeValueTransform(flip$1, 'h');\n      var verticalFlip = makeValueTransform(flip$1, 'v');\n      var counterclockwiseRotate = makeValueTransform(rotate$1, -90);\n      var clockwiseRotate = makeValueTransform(rotate$1, 90);\n      var flipRotateOnAction = function (comp, operation) {\n        emitTempTransform(comp, operation);\n      };\n      var flipRotateComponents = [\n        createBackButton(),\n        createSpacer(),\n        createIconButton('flip-horizontally', 'Flip horizontally', function (button) {\n          flipRotateOnAction(button, horizontalFlip);\n        }, false),\n        createIconButton('flip-vertically', 'Flip vertically', function (button) {\n          flipRotateOnAction(button, verticalFlip);\n        }, false),\n        createIconButton('rotate-left', 'Rotate counterclockwise', function (button) {\n          flipRotateOnAction(button, counterclockwiseRotate);\n        }, false),\n        createIconButton('rotate-right', 'Rotate clockwise', function (button) {\n          flipRotateOnAction(button, clockwiseRotate);\n        }, false),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FlipRotatePanel = Container.sketch({\n        dom: panelDom,\n        components: flipRotateComponents.map(function (mem) {\n          return mem.asSpec();\n        }),\n        containerBehaviours: derive$1([config('image-tools-fliprotate-buttons-events', [\n            run(external$2.disable(), function (comp, _se) {\n              disableAllComponents(flipRotateComponents, comp);\n            }),\n            run(external$2.enable(), function (comp, _se) {\n              enableAllComponents(flipRotateComponents, comp);\n            })\n          ])])\n      });\n      var makeSlider = function (label, onChoose, min, value, max) {\n        var labelPart = Slider.parts.label({\n          dom: {\n            tag: 'label',\n            classes: ['tox-label'],\n            innerHtml: providersBackstage.translate(label)\n          }\n        });\n        var spectrum = Slider.parts.spectrum({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__rail'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        var thumb = Slider.parts.thumb({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider__handle'],\n            attributes: { role: 'presentation' }\n          }\n        });\n        return record(Slider.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-slider'],\n            attributes: { role: 'presentation' }\n          },\n          model: {\n            mode: 'x',\n            minX: min,\n            maxX: max,\n            getInitialValue: constant({ x: value })\n          },\n          components: [\n            labelPart,\n            spectrum,\n            thumb\n          ],\n          sliderBehaviours: derive$1([Focusing.config({})]),\n          onChoose: onChoose\n        }));\n      };\n      var makeVariableSlider = function (label, transform, min, value, max) {\n        var onChoose = function (slider, _thumb, value) {\n          var valTransform = makeValueTransform(transform, value.x / 100);\n          emitTransform(slider, valTransform);\n        };\n        return makeSlider(label, onChoose, min, value, max);\n      };\n      var variableFilterPanelComponents = function (label, transform, min, value, max) {\n        return [\n          createBackButton(),\n          makeVariableSlider(label, transform, min, value, max),\n          createApplyButton()\n        ];\n      };\n      var createVariableFilterPanel = function (label, transform, min, value, max) {\n        var filterPanelComponents = variableFilterPanelComponents(label, transform, min, value, max);\n        return Container.sketch({\n          dom: panelDom,\n          components: filterPanelComponents.map(function (mem) {\n            return mem.asSpec();\n          }),\n          containerBehaviours: derive$1([config('image-tools-filter-panel-buttons-events', [\n              run(external$2.disable(), function (comp, _se) {\n                disableAllComponents(filterPanelComponents, comp);\n              }),\n              run(external$2.enable(), function (comp, _se) {\n                enableAllComponents(filterPanelComponents, comp);\n              })\n            ])])\n        });\n      };\n      var filterPanelComponents = [\n        createBackButton(),\n        createSpacer(),\n        createApplyButton()\n      ];\n      var FilterPanel = Container.sketch({\n        dom: panelDom,\n        components: filterPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var BrightnessPanel = createVariableFilterPanel('Brightness', brightness$1, -100, 0, 100);\n      var ContrastPanel = createVariableFilterPanel('Contrast', contrast$1, -100, 0, 100);\n      var GammaPanel = createVariableFilterPanel('Gamma', gamma$1, -100, 0, 100);\n      var makeColorTransform = function (red, green, blue) {\n        return function (ir) {\n          return colorize$1(ir, red, green, blue);\n        };\n      };\n      var makeColorSlider = function (label) {\n        var onChoose = function (slider, _thumb, _value) {\n          var redOpt = memRed.getOpt(slider);\n          var blueOpt = memBlue.getOpt(slider);\n          var greenOpt = memGreen.getOpt(slider);\n          redOpt.each(function (red) {\n            blueOpt.each(function (blue) {\n              greenOpt.each(function (green) {\n                var r = Representing.getValue(red).x / 100;\n                var g = Representing.getValue(green).x / 100;\n                var b = Representing.getValue(blue).x / 100;\n                var transform = makeColorTransform(r, g, b);\n                emitTransform(slider, transform);\n              });\n            });\n          });\n        };\n        return makeSlider(label, onChoose, 0, 100, 200);\n      };\n      var memRed = makeColorSlider('R');\n      var memGreen = makeColorSlider('G');\n      var memBlue = makeColorSlider('B');\n      var colorizePanelComponents = [\n        createBackButton(),\n        memRed,\n        memGreen,\n        memBlue,\n        createApplyButton()\n      ];\n      var ColorizePanel = Container.sketch({\n        dom: panelDom,\n        components: colorizePanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var getTransformPanelEvent = function (panel, transform, update) {\n        return function (button) {\n          var swap = function () {\n            memContainer.getOpt(button).each(function (container) {\n              Replacing.set(container, [panel]);\n              update(container);\n            });\n          };\n          emit$1(button, internal.swap(), {\n            transform: transform,\n            swap: swap\n          });\n        };\n      };\n      var cropPanelUpdate = function (_anyInSystem) {\n        imagePanel.showCrop();\n      };\n      var resizePanelUpdate = function (anyInSystem) {\n        memSize.getOpt(anyInSystem).each(function (sizeInput) {\n          var measurements = imagePanel.getMeasurements();\n          var width = measurements.width;\n          var height = measurements.height;\n          Representing.setValue(sizeInput, {\n            width: width,\n            height: height\n          });\n        });\n      };\n      var sharpenTransform = Optional.some(sharpen$1);\n      var invertTransform = Optional.some(invert$1);\n      var buttonPanelComponents = [\n        createIconButton('crop', 'Crop', getTransformPanelEvent(CropPanel, Optional.none(), cropPanelUpdate), false),\n        createIconButton('resize', 'Resize', getTransformPanelEvent(ResizePanel, Optional.none(), resizePanelUpdate), false),\n        createIconButton('orientation', 'Orientation', getTransformPanelEvent(FlipRotatePanel, Optional.none(), noop$1), false),\n        createIconButton('brightness', 'Brightness', getTransformPanelEvent(BrightnessPanel, Optional.none(), noop$1), false),\n        createIconButton('sharpen', 'Sharpen', getTransformPanelEvent(FilterPanel, sharpenTransform, noop$1), false),\n        createIconButton('contrast', 'Contrast', getTransformPanelEvent(ContrastPanel, Optional.none(), noop$1), false),\n        createIconButton('color-levels', 'Color levels', getTransformPanelEvent(ColorizePanel, Optional.none(), noop$1), false),\n        createIconButton('gamma', 'Gamma', getTransformPanelEvent(GammaPanel, Optional.none(), noop$1), false),\n        createIconButton('invert', 'Invert', getTransformPanelEvent(FilterPanel, invertTransform, noop$1), false)\n      ];\n      var ButtonPanel = Container.sketch({\n        dom: panelDom,\n        components: buttonPanelComponents.map(function (mem) {\n          return mem.asSpec();\n        })\n      });\n      var container = Container.sketch({\n        dom: { tag: 'div' },\n        components: [ButtonPanel],\n        containerBehaviours: derive$1([Replacing.config({})])\n      });\n      var memContainer = record(container);\n      var getApplyButton = function (anyInSystem) {\n        return memContainer.getOpt(anyInSystem).map(function (container) {\n          var panel = container.components()[0];\n          return panel.components()[panel.components().length - 1];\n        });\n      };\n      return {\n        memContainer: memContainer,\n        getApplyButton: getApplyButton\n      };\n    };\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$f = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$g = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    function getDocumentSize(doc) {\n      var max = Math.max;\n      var documentElement = doc.documentElement;\n      var body = doc.body;\n      var scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      var clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      var offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      var scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      var clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      var offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || document;\n      var downButton;\n      var startX, startY;\n      var handleElement = doc.getElementById(settings.handle || id);\n      var start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        var handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (window.getComputedStyle) {\n          cursor = window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$e('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$e(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      var drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      var stop = function (e) {\n        updateWithTouchData(e);\n        global$e(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$e(handleElement).off();\n      };\n      global$e(handleElement).on('mousedown touchstart', start);\n    }\n\n    var count = 0;\n    var create$7 = function (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var dragHelpers;\n      var prefix = 'tox-';\n      var id = prefix + 'crid-' + count++;\n      var handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      var blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      var getAbsoluteRect = function (outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      };\n      var getRelativeRect = function (outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      };\n      var getInnerRect = function () {\n        return getRelativeRect(clampRect, currentRect);\n      };\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$d.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$e('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$c.each(blockers, function (blocker) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$c.each(handles, function (handle) {\n          global$e('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\" title=\"' + handle.label + '\">');\n        });\n        dragHelpers = global$c.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$e(containerElm).on('focusin focusout', function (e) {\n          global$e(e.target).attr('aria-grabbed', e.type === 'focus' ? 'true' : 'false');\n        });\n        global$e(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$c.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$g.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$g.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$g.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$g.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$g.ENTER:\n          case global$g.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors = global$c.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$c.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$e(selectors, containerElm).show();\n        } else {\n          global$e(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$e('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$c.each(handles, function (handle) {\n          global$e('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$c.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      var instance = global$c.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$f);\n      return instance;\n    };\n    var CropRect = { create: create$7 };\n\n    var loadImage = function (image) {\n      return new global$4(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var renderImagePanel = function (initialUrl) {\n      var memBg = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image-bg'],\n          attributes: { role: 'presentation' }\n        }\n      });\n      var zoomState = Cell(1);\n      var cropRect = Cell(Optional.none());\n      var rectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var viewRectState = Cell({\n        x: 0,\n        y: 0,\n        w: 1,\n        h: 1\n      });\n      var repaintImg = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var zoom = zoomState.get();\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth * zoom;\n          var height = img.dom.naturalHeight * zoom;\n          var left = Math.max(0, panelW / 2 - width / 2);\n          var top = Math.max(0, panelH / 2 - height / 2);\n          var css = {\n            left: left.toString() + 'px',\n            top: top.toString() + 'px',\n            width: width.toString() + 'px',\n            height: height.toString() + 'px',\n            position: 'absolute'\n          };\n          setAll$1(img, css);\n          memBg.getOpt(panel).each(function (bg) {\n            setAll$1(bg.element, css);\n          });\n          cropRect.get().each(function (cRect) {\n            var rect = rectState.get();\n            cRect.setRect({\n              x: rect.x * zoom + left,\n              y: rect.y * zoom + top,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            cRect.setClampRect({\n              x: left,\n              y: top,\n              w: width,\n              h: height\n            });\n            cRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: panelW,\n              h: panelH\n            });\n          });\n        });\n      };\n      var zoomFit = function (anyInSystem, img) {\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var panelW = get$8(panel.element);\n          var panelH = get$7(panel.element);\n          var width = img.dom.naturalWidth;\n          var height = img.dom.naturalHeight;\n          var zoom = Math.min(panelW / width, panelH / height);\n          if (zoom >= 1) {\n            zoomState.set(1);\n          } else {\n            zoomState.set(zoom);\n          }\n        });\n      };\n      var updateSrc = function (anyInSystem, url) {\n        var img = SugarElement.fromTag('img');\n        set$1(img, 'src', url);\n        return loadImage(img.dom).then(function () {\n          return memContainer.getOpt(anyInSystem).map(function (panel) {\n            var aImg = external({ element: img });\n            Replacing.replaceAt(panel, 1, Optional.some(aImg));\n            var lastViewRect = viewRectState.get();\n            var viewRect = {\n              x: 0,\n              y: 0,\n              w: img.dom.naturalWidth,\n              h: img.dom.naturalHeight\n            };\n            viewRectState.set(viewRect);\n            var rect = global$d.inflate(viewRect, -20, -20);\n            rectState.set(rect);\n            if (lastViewRect.w !== viewRect.w || lastViewRect.h !== viewRect.h) {\n              zoomFit(panel, img);\n            }\n            repaintImg(panel, img);\n            return img;\n          });\n        });\n      };\n      var zoom = function (anyInSystem, direction) {\n        var currentZoom = zoomState.get();\n        var newZoom = direction > 0 ? Math.min(2, currentZoom + 0.1) : Math.max(0.1, currentZoom - 0.1);\n        zoomState.set(newZoom);\n        memContainer.getOpt(anyInSystem).each(function (panel) {\n          var img = panel.components()[1].element;\n          repaintImg(panel, img);\n        });\n      };\n      var showCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(true);\n        });\n      };\n      var hideCrop = function () {\n        cropRect.get().each(function (cRect) {\n          cRect.toggleVisibility(false);\n        });\n      };\n      var getRect = function () {\n        return rectState.get();\n      };\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-image-tools__image']\n        },\n        components: [\n          memBg.asSpec(),\n          {\n            dom: {\n              tag: 'img',\n              attributes: { src: initialUrl }\n            }\n          },\n          {\n            dom: { tag: 'div' },\n            behaviours: derive$1([config('image-panel-crop-events', [runOnAttached(function (comp) {\n                  memContainer.getOpt(comp).each(function (container) {\n                    var el = container.element.dom;\n                    var cRect = CropRect.create({\n                      x: 10,\n                      y: 10,\n                      w: 100,\n                      h: 100\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, {\n                      x: 0,\n                      y: 0,\n                      w: 200,\n                      h: 200\n                    }, el, function () {\n                    });\n                    cRect.toggleVisibility(false);\n                    cRect.on('updateRect', function (e) {\n                      var rect = e.rect;\n                      var zoom = zoomState.get();\n                      var newRect = {\n                        x: Math.round(rect.x / zoom),\n                        y: Math.round(rect.y / zoom),\n                        w: Math.round(rect.w / zoom),\n                        h: Math.round(rect.h / zoom)\n                      };\n                      rectState.set(newRect);\n                    });\n                    cropRect.set(Optional.some(cRect));\n                  });\n                })])])\n          }\n        ],\n        containerBehaviours: derive$1([\n          Replacing.config({}),\n          config('image-panel-events', [runOnAttached(function (comp) {\n              updateSrc(comp, initialUrl);\n            })])\n        ])\n      });\n      var memContainer = record(container);\n      var getMeasurements = function () {\n        var viewRect = viewRectState.get();\n        return {\n          width: viewRect.w,\n          height: viewRect.h\n        };\n      };\n      return {\n        memContainer: memContainer,\n        updateSrc: updateSrc,\n        zoom: zoom,\n        showCrop: showCrop,\n        hideCrop: hideCrop,\n        getRect: getRect,\n        getMeasurements: getMeasurements\n      };\n    };\n\n    var createButton = function (innerHtml, icon, disabled, action, providersBackstage) {\n      return renderIconButton({\n        name: innerHtml,\n        icon: Optional.some(icon),\n        disabled: disabled,\n        tooltip: Optional.some(innerHtml),\n        primary: false,\n        borderless: false\n      }, action, providersBackstage);\n    };\n    var setButtonEnabled = function (button, enabled) {\n      if (enabled) {\n        Disabling.enable(button);\n      } else {\n        Disabling.disable(button);\n      }\n    };\n    var renderSideBar = function (providersBackstage) {\n      var updateButtonUndoStates = function (anyInSystem, undoEnabled, redoEnabled) {\n        memUndo.getOpt(anyInSystem).each(function (undo) {\n          setButtonEnabled(undo, undoEnabled);\n        });\n        memRedo.getOpt(anyInSystem).each(function (redo) {\n          setButtonEnabled(redo, redoEnabled);\n        });\n      };\n      var memUndo = record(createButton('Undo', 'undo', true, function (button) {\n        emitWith(button, internal.undo(), { direction: 1 });\n      }, providersBackstage));\n      var memRedo = record(createButton('Redo', 'redo', true, function (button) {\n        emitWith(button, internal.redo(), { direction: 1 });\n      }, providersBackstage));\n      var container = Container.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-image-tools__toolbar',\n            'tox-image-tools__sidebar'\n          ]\n        },\n        components: [\n          memUndo.asSpec(),\n          memRedo.asSpec(),\n          createButton('Zoom in', 'zoom-in', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: 1 });\n          }, providersBackstage),\n          createButton('Zoom out', 'zoom-out', false, function (button) {\n            emitWith(button, internal.zoom(), { direction: -1 });\n          }, providersBackstage)\n        ]\n      });\n      return {\n        container: container,\n        updateButtonUndoStates: updateButtonUndoStates\n      };\n    };\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var makeState = function (initialState) {\n      var blobState = Cell(initialState);\n      var tempState = Cell(Optional.none());\n      var undoStack = UndoStack();\n      undoStack.add(initialState);\n      var getBlobState = function () {\n        return blobState.get();\n      };\n      var setBlobState = function (state) {\n        blobState.set(state);\n      };\n      var getTempState = function () {\n        return tempState.get().fold(function () {\n          return blobState.get();\n        }, function (temp) {\n          return temp;\n        });\n      };\n      var updateTempState = function (blob) {\n        var newTempState = createState(blob);\n        destroyTempState();\n        tempState.set(Optional.some(newTempState));\n        return newTempState.url;\n      };\n      var createState = function (blob) {\n        return {\n          blob: blob,\n          url: URL.createObjectURL(blob)\n        };\n      };\n      var destroyState = function (state) {\n        URL.revokeObjectURL(state.url);\n      };\n      var destroyStates = function (states) {\n        global$c.each(states, destroyState);\n      };\n      var destroyTempState = function () {\n        tempState.get().each(destroyState);\n        tempState.set(Optional.none());\n      };\n      var addBlobState = function (blob) {\n        var newState = createState(blob);\n        setBlobState(newState);\n        var removed = undoStack.add(newState).removed;\n        destroyStates(removed);\n        return newState.url;\n      };\n      var addTempState = function (blob) {\n        var newState = createState(blob);\n        tempState.set(Optional.some(newState));\n        return newState.url;\n      };\n      var applyTempState = function (postApply) {\n        return tempState.get().fold(function () {\n        }, function (temp) {\n          addBlobState(temp.blob);\n          postApply();\n        });\n      };\n      var undo = function () {\n        var currentState = undoStack.undo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var redo = function () {\n        var currentState = undoStack.redo();\n        setBlobState(currentState);\n        return currentState.url;\n      };\n      var getHistoryStates = function () {\n        var undoEnabled = undoStack.canUndo();\n        var redoEnabled = undoStack.canRedo();\n        return {\n          undoEnabled: undoEnabled,\n          redoEnabled: redoEnabled\n        };\n      };\n      return {\n        getBlobState: getBlobState,\n        setBlobState: setBlobState,\n        addBlobState: addBlobState,\n        getTempState: getTempState,\n        updateTempState: updateTempState,\n        addTempState: addTempState,\n        applyTempState: applyTempState,\n        destroyTempState: destroyTempState,\n        undo: undo,\n        redo: redo,\n        getHistoryStates: getHistoryStates\n      };\n    };\n\n    var renderImageTools = function (detail, providersBackstage) {\n      var state = makeState(detail.currentState);\n      var zoom = function (anyInSystem, simulatedEvent) {\n        var direction = simulatedEvent.event.direction;\n        imagePanel.zoom(anyInSystem, direction);\n      };\n      var updateButtonUndoStates = function (anyInSystem) {\n        var historyStates = state.getHistoryStates();\n        sideBar.updateButtonUndoStates(anyInSystem, historyStates.undoEnabled, historyStates.redoEnabled);\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.saveState(),\n          value: historyStates.undoEnabled\n        });\n      };\n      var disableUndoRedo = function (anyInSystem) {\n        sideBar.updateButtonUndoStates(anyInSystem, false, false);\n      };\n      var undo = function (anyInSystem, _simulatedEvent) {\n        var url = state.undo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var redo = function (anyInSystem, _simulatedEvent) {\n        var url = state.redo();\n        updateSrc(anyInSystem, url).then(function (_oImg) {\n          unblock(anyInSystem);\n          updateButtonUndoStates(anyInSystem);\n        });\n      };\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      var block = function (anyInSystem) {\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.disable(),\n          value: {}\n        });\n      };\n      var unblock = function (anyInSystem) {\n        editPanel.getApplyButton(anyInSystem).each(function (applyButton) {\n          Disabling.enable(applyButton);\n        });\n        emitWith(anyInSystem, external$2.formActionEvent, {\n          name: external$2.enable(),\n          value: {}\n        });\n      };\n      var updateSrc = function (anyInSystem, src) {\n        block(anyInSystem);\n        return imagePanel.updateSrc(anyInSystem, src);\n      };\n      var blobManipulate = function (anyInSystem, blob, filter, action, swap) {\n        block(anyInSystem);\n        return blobToImageResult(blob).then(filter).then(imageResultToBlob).then(action).then(function (url) {\n          return updateSrc(anyInSystem, url).then(function (oImg) {\n            updateButtonUndoStates(anyInSystem);\n            swap();\n            unblock(anyInSystem);\n            return oImg;\n          });\n        }).catch(function (err) {\n          console.log(err);\n          unblock(anyInSystem);\n          return err;\n        });\n      };\n      var manipulate = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          return state.updateTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var tempManipulate = function (anyInSystem, filter) {\n        var blob = state.getTempState().blob;\n        var action = function (blob) {\n          return state.addTempState(blob);\n        };\n        blobManipulate(anyInSystem, blob, filter, action, noop);\n      };\n      var manipulateApply = function (anyInSystem, filter, swap) {\n        var blob = state.getBlobState().blob;\n        var action = function (blob) {\n          var url = state.addBlobState(blob);\n          destroyTempState(anyInSystem);\n          return url;\n        };\n        blobManipulate(anyInSystem, blob, filter, action, swap);\n      };\n      var apply = function (anyInSystem, simulatedEvent) {\n        var postApply = function () {\n          destroyTempState(anyInSystem);\n          var swap = simulatedEvent.event.swap;\n          swap();\n        };\n        state.applyTempState(postApply);\n      };\n      var destroyTempState = function (anyInSystem) {\n        var currentUrl = state.getBlobState().url;\n        state.destroyTempState();\n        updateButtonUndoStates(anyInSystem);\n        return currentUrl;\n      };\n      var cancel = function (anyInSystem) {\n        var currentUrl = destroyTempState(anyInSystem);\n        updateSrc(anyInSystem, currentUrl).then(function (_oImg) {\n          unblock(anyInSystem);\n        });\n      };\n      var back = function (anyInSystem, simulatedEvent) {\n        cancel(anyInSystem);\n        var swap = simulatedEvent.event.swap;\n        swap();\n        imagePanel.hideCrop();\n      };\n      var transform = function (anyInSystem, simulatedEvent) {\n        return manipulate(anyInSystem, simulatedEvent.event.transform, noop);\n      };\n      var tempTransform = function (anyInSystem, simulatedEvent) {\n        return tempManipulate(anyInSystem, simulatedEvent.event.transform);\n      };\n      var transformApply = function (anyInSystem, simulatedEvent) {\n        return manipulateApply(anyInSystem, simulatedEvent.event.transform, simulatedEvent.event.swap);\n      };\n      var imagePanel = renderImagePanel(detail.currentState.url);\n      var sideBar = renderSideBar(providersBackstage);\n      var editPanel = renderEditPanel(imagePanel, providersBackstage);\n      var swap = function (anyInSystem, simulatedEvent) {\n        disableUndoRedo(anyInSystem);\n        var transform = simulatedEvent.event.transform;\n        var swap = simulatedEvent.event.swap;\n        transform.fold(function () {\n          swap();\n        }, function (transform) {\n          manipulate(anyInSystem, transform, swap);\n        });\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { role: 'presentation' }\n        },\n        components: [\n          editPanel.memContainer.asSpec(),\n          imagePanel.memContainer.asSpec(),\n          sideBar.container\n        ],\n        behaviours: derive$1([\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function () {\n                return state.getBlobState();\n              }\n            }\n          }),\n          config('image-tools-events', [\n            run(internal.undo(), undo),\n            run(internal.redo(), redo),\n            run(internal.zoom(), zoom),\n            run(internal.back(), back),\n            run(internal.apply(), apply),\n            run(internal.transform(), transform),\n            run(internal.tempTransform(), tempTransform),\n            run(internal.transformApply(), transformApply),\n            run(internal.swap(), swap)\n          ]),\n          ComposingConfigs.self()\n        ])\n      };\n    };\n\n    var renderLabel$2 = function (spec, backstageShared) {\n      var label = {\n        dom: {\n          tag: 'label',\n          innerHtml: backstageShared.providers.translate(spec.label),\n          classes: ['tox-label']\n        }\n      };\n      var comps = map(spec.items, backstageShared.interpreter);\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: [label].concat(comps),\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Replacing.config({}),\n          RepresentingConfigs.domHtml(Optional.none()),\n          Keying.config({ mode: 'acyclic' })\n        ])\n      };\n    };\n\n    var isSingleListItem = function (item) {\n      return !has(item, 'items');\n    };\n    var dataAttribute = 'data-value';\n    var fetchItems = function (dropdownComp, name, items, selectedValue) {\n      return map(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            getSubmenuItems: function () {\n              return fetchItems(dropdownComp, name, item.items, selectedValue);\n            }\n          };\n        } else {\n          return {\n            type: 'togglemenuitem',\n            text: item.text,\n            value: item.value,\n            active: item.value === selectedValue,\n            onAction: function () {\n              Representing.setValue(dropdownComp, item.value);\n              emitWith(dropdownComp, formChangeEvent, { name: name });\n              Focusing.focus(dropdownComp);\n            }\n          };\n        }\n      });\n    };\n    var findItemByValue = function (items, value) {\n      return findMap(items, function (item) {\n        if (!isSingleListItem(item)) {\n          return findItemByValue(item.items, value);\n        } else {\n          return someIf(item.value === value, item);\n        }\n      });\n    };\n    var renderListBox = function (spec, backstage) {\n      var providersBackstage = backstage.shared.providers;\n      var initialItem = head(spec.items).filter(isSingleListItem);\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        factory: {\n          sketch: function (sketchSpec) {\n            return renderCommonDropdown({\n              uid: sketchSpec.uid,\n              text: initialItem.map(function (item) {\n                return item.text;\n              }),\n              icon: Optional.none(),\n              tooltip: spec.label,\n              role: Optional.none(),\n              fetch: function (comp, callback) {\n                var items = fetchItems(comp, spec.name, spec.items, Representing.getValue(comp));\n                callback(build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false));\n              },\n              onSetup: constant(noop),\n              getApi: constant({}),\n              columns: 1,\n              presets: 'normal',\n              classes: [],\n              dropdownBehaviours: [\n                Tabstopping.config({}),\n                Representing.config({\n                  store: {\n                    mode: 'manual',\n                    initialValue: initialItem.map(function (item) {\n                      return item.value;\n                    }).getOr(''),\n                    getValue: function (comp) {\n                      return get$3(comp.element, dataAttribute);\n                    },\n                    setValue: function (comp, data) {\n                      findItemByValue(spec.items, data).each(function (item) {\n                        set$1(comp.element, dataAttribute, item.value);\n                        emitWith(comp, updateMenuText, { text: item.text });\n                      });\n                    }\n                  }\n                })\n              ]\n            }, 'tox-listbox', backstage.shared);\n          }\n        }\n      });\n      var listBoxWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-listboxfield']\n        },\n        components: [pField]\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [listBoxWrap]\n        ]),\n        fieldBehaviours: derive$1([Disabling.config({\n            disabled: constant(spec.disabled),\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          })])\n      });\n    };\n\n    var renderPanel = function (spec, backstage) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: spec.classes\n        },\n        components: map(spec.items, backstage.shared.interpreter)\n      };\n    };\n\n    var factory$8 = function (detail, _spec) {\n      var options = map(detail.options, function (option) {\n        return {\n          dom: {\n            tag: 'option',\n            value: option.value,\n            innerHtml: option.text\n          }\n        };\n      });\n      var initialValues = detail.data.map(function (v) {\n        return wrap$1('initialValue', v);\n      }).getOr({});\n      return {\n        uid: detail.uid,\n        dom: {\n          tag: 'select',\n          classes: detail.selectClasses,\n          attributes: detail.selectAttributes\n        },\n        components: options,\n        behaviours: augment(detail.selectBehaviours, [\n          Focusing.config({}),\n          Representing.config({\n            store: __assign({\n              mode: 'manual',\n              getValue: function (select) {\n                return get$6(select.element);\n              },\n              setValue: function (select, newValue) {\n                var found = find(detail.options, function (opt) {\n                  return opt.value === newValue;\n                });\n                if (found.isSome()) {\n                  set$3(select.element, newValue);\n                }\n              }\n            }, initialValues)\n          })\n        ])\n      };\n    };\n    var HtmlSelect = single$2({\n      name: 'HtmlSelect',\n      configFields: [\n        strict$1('options'),\n        field$1('selectBehaviours', [\n          Focusing,\n          Representing\n        ]),\n        defaulted$1('selectClasses', []),\n        defaulted$1('selectAttributes', {}),\n        option('data')\n      ],\n      factory: factory$8\n    });\n\n    var renderSelectBox = function (spec, providersBackstage) {\n      var translatedOptions = map(spec.items, function (item) {\n        return {\n          text: providersBackstage.translate(item.text),\n          value: item.value\n        };\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var pField = FormField.parts.field({\n        dom: {},\n        selectAttributes: { size: spec.size },\n        options: translatedOptions,\n        factory: HtmlSelect,\n        selectBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          config('selectbox-change', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var chevron = spec.size > 1 ? Optional.none() : Optional.some({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield__icon-js'],\n          innerHtml: get$e('chevron-down', providersBackstage.icons)\n        }\n      });\n      var selectWrap = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-selectfield']\n        },\n        components: flatten([\n          [pField],\n          chevron.toArray()\n        ])\n      };\n      return FormField.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-form__group']\n        },\n        components: flatten([\n          pLabel.toArray(),\n          [selectWrap]\n        ]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderTable = function (spec, providersBackstage) {\n      var renderTh = function (text) {\n        return {\n          dom: {\n            tag: 'th',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderHeader = function (header) {\n        return {\n          dom: { tag: 'thead' },\n          components: [{\n              dom: { tag: 'tr' },\n              components: map(header, renderTh)\n            }]\n        };\n      };\n      var renderTd = function (text) {\n        return {\n          dom: {\n            tag: 'td',\n            innerHtml: providersBackstage.translate(text)\n          }\n        };\n      };\n      var renderTr = function (row) {\n        return {\n          dom: { tag: 'tr' },\n          components: map(row, renderTd)\n        };\n      };\n      var renderRows = function (rows) {\n        return {\n          dom: { tag: 'tbody' },\n          components: map(rows, renderTr)\n        };\n      };\n      return {\n        dom: {\n          tag: 'table',\n          classes: ['tox-dialog__table']\n        },\n        components: [\n          renderHeader(spec.header),\n          renderRows(spec.cells)\n        ],\n        behaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n\n    var renderTextField = function (spec, providersBackstage) {\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var baseInputBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }\n        }),\n        receivingConfig(),\n        Keying.config({\n          mode: 'execution',\n          useEnter: spec.multiline !== true,\n          useControlEnter: spec.multiline === true,\n          execute: function (comp) {\n            emit(comp, formSubmitEvent);\n            return Optional.some(true);\n          }\n        }),\n        config('textfield-change', [\n          run(input(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          }),\n          run(postPaste(), function (component, _) {\n            emitWith(component, formChangeEvent, { name: spec.name });\n          })\n        ]),\n        Tabstopping.config({})\n      ];\n      var validatingBehaviours = spec.validation.map(function (vl) {\n        return Invalidating.config({\n          getRoot: function (input) {\n            return parent(input.element);\n          },\n          invalidClass: 'tox-invalid',\n          validator: {\n            validate: function (input) {\n              var v = Representing.getValue(input);\n              var result = vl.validator(v);\n              return Future.pure(result === true ? Result.value(v) : Result.error(result));\n            },\n            validateOnLoad: vl.validateOnLoad\n          }\n        });\n      }).toArray();\n      var placeholder = spec.placeholder.fold(constant({}), function (p) {\n        return { placeholder: providersBackstage.translate(p) };\n      });\n      var inputMode = spec.inputMode.fold(constant({}), function (mode) {\n        return { inputmode: mode };\n      });\n      var inputAttributes = __assign(__assign({}, placeholder), inputMode);\n      var pField = FormField.parts.field({\n        tag: spec.multiline === true ? 'textarea' : 'input',\n        inputAttributes: inputAttributes,\n        inputClasses: [spec.classname],\n        inputBehaviours: derive$1(flatten([\n          baseInputBehaviours,\n          validatingBehaviours\n        ])),\n        selectOnFocus: false,\n        factory: Input\n      });\n      var extraClasses = spec.flex ? ['tox-form__group--stretched'] : [];\n      var extraClasses2 = extraClasses.concat(spec.maximized ? ['tox-form-group--maximize'] : []);\n      var extraBehaviours = [\n        Disabling.config({\n          disabled: function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          },\n          onDisabled: function (comp) {\n            FormField.getField(comp).each(Disabling.disable);\n          },\n          onEnabled: function (comp) {\n            FormField.getField(comp).each(Disabling.enable);\n          }\n        }),\n        receivingConfig()\n      ];\n      return renderFormFieldWith(pLabel, pField, extraClasses2, extraBehaviours);\n    };\n    var renderInput = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: false,\n        label: spec.label,\n        inputMode: spec.inputMode,\n        placeholder: spec.placeholder,\n        flex: false,\n        disabled: spec.disabled,\n        classname: 'tox-textfield',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n    var renderTextarea = function (spec, providersBackstage) {\n      return renderTextField({\n        name: spec.name,\n        multiline: true,\n        label: spec.label,\n        inputMode: Optional.none(),\n        placeholder: spec.placeholder,\n        flex: true,\n        disabled: spec.disabled,\n        classname: 'tox-textarea',\n        validation: Optional.none(),\n        maximized: spec.maximized\n      }, providersBackstage);\n    };\n\n    var events$c = function (streamConfig, streamState) {\n      var streams = streamConfig.stream.streams;\n      var processor = streams.setup(streamConfig, streamState);\n      return derive([\n        run(streamConfig.event, processor),\n        runOnDetached(function () {\n          return streamState.cancel();\n        })\n      ].concat(streamConfig.cancelEvent.map(function (e) {\n        return [run(e, function () {\n            return streamState.cancel();\n          })];\n      }).getOr([])));\n    };\n\n    var ActiveStreaming = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$c\n    });\n\n    var throttle = function (_config) {\n      var state = Cell(null);\n      var readState = function () {\n        return { timer: state.get() !== null ? 'set' : 'unset' };\n      };\n      var setTimer = function (t) {\n        state.set(t);\n      };\n      var cancel = function () {\n        var t = state.get();\n        if (t !== null) {\n          t.cancel();\n        }\n      };\n      return nu$5({\n        readState: readState,\n        setTimer: setTimer,\n        cancel: cancel\n      });\n    };\n    var init$6 = function (spec) {\n      return spec.stream.streams.state(spec);\n    };\n\n    var StreamingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        throttle: throttle,\n        init: init$6\n    });\n\n    var setup$2 = function (streamInfo, streamState) {\n      var sInfo = streamInfo.stream;\n      var throttler = last$2(streamInfo.onStream, sInfo.delay);\n      streamState.setTimer(throttler);\n      return function (component, simulatedEvent) {\n        throttler.throttle(component, simulatedEvent);\n        if (sInfo.stopEvent) {\n          simulatedEvent.stop();\n        }\n      };\n    };\n    var StreamingSchema = [\n      strictOf('stream', choose$1('mode', {\n        throttle: [\n          strict$1('delay'),\n          defaulted$1('stopEvent', true),\n          output('streams', {\n            setup: setup$2,\n            state: throttle\n          })\n        ]\n      })),\n      defaulted$1('event', 'input'),\n      option('cancelEvent'),\n      onStrictHandler('onStream')\n    ];\n\n    var Streaming = create$1({\n      fields: StreamingSchema,\n      name: 'streaming',\n      active: ActiveStreaming,\n      state: StreamingState\n    });\n\n    var setValueFromItem = function (model, input, item) {\n      var itemData = Representing.getValue(item);\n      Representing.setValue(input, itemData);\n      setCursorAtEnd(input);\n    };\n    var setSelectionOn = function (input, f) {\n      var el = input.element;\n      var value = get$6(el);\n      var node = el.dom;\n      if (get$3(el, 'type') !== 'number') {\n        f(node, value);\n      }\n    };\n    var setCursorAtEnd = function (input) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(value.length, value.length);\n      });\n    };\n    var setSelectionToEnd = function (input, startOffset) {\n      setSelectionOn(input, function (node, value) {\n        return node.setSelectionRange(startOffset, value.length);\n      });\n    };\n    var attemptSelectOver = function (model, input, item) {\n      if (!model.selectsOver) {\n        return Optional.none();\n      } else {\n        var currentValue = Representing.getValue(input);\n        var inputDisplay_1 = model.getDisplayText(currentValue);\n        var itemValue = Representing.getValue(item);\n        var itemDisplay = model.getDisplayText(itemValue);\n        return itemDisplay.indexOf(inputDisplay_1) === 0 ? Optional.some(function () {\n          setValueFromItem(model, input, item);\n          setSelectionToEnd(input, inputDisplay_1.length);\n        }) : Optional.none();\n      }\n    };\n\n    var itemExecute = constant('alloy.typeahead.itemexecute');\n\n    var make$5 = function (detail, components, spec, externals) {\n      var navigateList = function (comp, simulatedEvent, highlighter) {\n        detail.previewing.set(false);\n        var sandbox = Coupling.getCoupled(comp, 'sandbox');\n        if (Sandboxing.isOpen(sandbox)) {\n          Composing.getCurrent(sandbox).each(function (menu) {\n            Highlighting.getHighlighted(menu).fold(function () {\n              highlighter(menu);\n            }, function () {\n              dispatchEvent(sandbox, menu.element, 'keydown', simulatedEvent);\n            });\n          });\n        } else {\n          var onOpenSync = function (sandbox) {\n            Composing.getCurrent(sandbox).each(highlighter);\n          };\n          open$1(detail, mapFetch(comp), comp, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n        }\n      };\n      var focusBehaviours$1 = focusBehaviours(detail);\n      var mapFetch = function (comp) {\n        return function (tdata) {\n          return tdata.map(function (data) {\n            var menus = values(data.menus);\n            var items = bind(menus, function (menu) {\n              return filter(menu.items, function (item) {\n                return item.type === 'item';\n              });\n            });\n            var repState = Representing.getState(comp);\n            repState.update(map(items, function (item) {\n              return item.data;\n            }));\n            return data;\n          });\n        };\n      };\n      var behaviours = [\n        Focusing.config({}),\n        Representing.config({\n          onSetValue: detail.onSetValue,\n          store: __assign({\n            mode: 'dataset',\n            getDataKey: function (comp) {\n              return get$6(comp.element);\n            },\n            getFallbackEntry: function (itemString) {\n              return {\n                value: itemString,\n                meta: {}\n              };\n            },\n            setValue: function (comp, data) {\n              set$3(comp.element, detail.model.getDisplayText(data));\n            }\n          }, detail.initialData.map(function (d) {\n            return wrap$1('initialValue', d);\n          }).getOr({}))\n        }),\n        Streaming.config({\n          stream: {\n            mode: 'throttle',\n            delay: detail.responseTime,\n            stopEvent: false\n          },\n          onStream: function (component, _simulatedEvent) {\n            var sandbox = Coupling.getCoupled(component, 'sandbox');\n            var focusInInput = Focusing.isFocused(component);\n            if (focusInInput) {\n              if (get$6(component.element).length >= detail.minChars) {\n                var previousValue_1 = Composing.getCurrent(sandbox).bind(function (menu) {\n                  return Highlighting.getHighlighted(menu).map(Representing.getValue);\n                });\n                detail.previewing.set(true);\n                var onOpenSync = function (_sandbox) {\n                  Composing.getCurrent(sandbox).each(function (menu) {\n                    previousValue_1.fold(function () {\n                      if (detail.model.selectsOver) {\n                        Highlighting.highlightFirst(menu);\n                      }\n                    }, function (pv) {\n                      Highlighting.highlightBy(menu, function (item) {\n                        var itemData = Representing.getValue(item);\n                        return itemData.value === pv.value;\n                      });\n                      Highlighting.getHighlighted(menu).orThunk(function () {\n                        Highlighting.highlightFirst(menu);\n                        return Optional.none();\n                      });\n                    });\n                  });\n                };\n                open$1(detail, mapFetch(component), component, sandbox, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n              }\n            }\n          },\n          cancelEvent: typeaheadCancel()\n        }),\n        Keying.config({\n          mode: 'special',\n          onDown: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightFirst);\n            return Optional.some(true);\n          },\n          onEscape: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            if (Sandboxing.isOpen(sandbox)) {\n              Sandboxing.close(sandbox);\n              return Optional.some(true);\n            }\n            return Optional.none();\n          },\n          onUp: function (comp, simulatedEvent) {\n            navigateList(comp, simulatedEvent, Highlighting.highlightLast);\n            return Optional.some(true);\n          },\n          onEnter: function (comp) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            var sandboxIsOpen = Sandboxing.isOpen(sandbox);\n            if (sandboxIsOpen && !detail.previewing.get()) {\n              return Composing.getCurrent(sandbox).bind(function (menu) {\n                return Highlighting.getHighlighted(menu);\n              }).map(function (item) {\n                emitWith(comp, itemExecute(), { item: item });\n                return true;\n              });\n            } else {\n              var currentValue = Representing.getValue(comp);\n              emit(comp, typeaheadCancel());\n              detail.onExecute(sandbox, comp, currentValue);\n              if (sandboxIsOpen) {\n                Sandboxing.close(sandbox);\n              }\n              return Optional.some(true);\n            }\n          }\n        }),\n        Toggling.config({\n          toggleClass: detail.markers.openClass,\n          aria: { mode: 'expanded' }\n        }),\n        Coupling.config({\n          others: {\n            sandbox: function (hotspot) {\n              return makeSandbox(detail, hotspot, {\n                onOpen: function () {\n                  return Toggling.on(hotspot);\n                },\n                onClose: function () {\n                  return Toggling.off(hotspot);\n                }\n              });\n            }\n          }\n        }),\n        config('typeaheadevents', [\n          runOnExecute(function (comp) {\n            var onOpenSync = noop;\n            togglePopup(detail, mapFetch(comp), comp, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n          }),\n          run(itemExecute(), function (comp, se) {\n            var sandbox = Coupling.getCoupled(comp, 'sandbox');\n            setValueFromItem(detail.model, comp, se.event.item);\n            emit(comp, typeaheadCancel());\n            detail.onItemExecute(comp, sandbox, se.event.item, Representing.getValue(comp));\n            Sandboxing.close(sandbox);\n            setCursorAtEnd(comp);\n          })\n        ].concat(detail.dismissOnBlur ? [run(postBlur(), function (typeahead) {\n            var sandbox = Coupling.getCoupled(typeahead, 'sandbox');\n            if (search(sandbox.element).isNone()) {\n              Sandboxing.close(sandbox);\n            }\n          })] : []))\n      ];\n      return {\n        uid: detail.uid,\n        dom: dom$2(deepMerge(detail, {\n          inputAttributes: {\n            'role': 'combobox',\n            'aria-autocomplete': 'list',\n            'aria-haspopup': 'true'\n          }\n        })),\n        behaviours: __assign(__assign({}, focusBehaviours$1), augment(detail.typeaheadBehaviours, behaviours)),\n        eventOrder: detail.eventOrder\n      };\n    };\n\n    var schema$j = constant([\n      option('lazySink'),\n      strict$1('fetch'),\n      defaulted$1('minChars', 5),\n      defaulted$1('responseTime', 1000),\n      onHandler('onOpen'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      defaulted$1('layouts', Optional.none()),\n      defaulted$1('eventOrder', {}),\n      defaultedObjOf('model', {}, [\n        defaulted$1('getDisplayText', function (itemData) {\n          return itemData.meta !== undefined && itemData.meta.text !== undefined ? itemData.meta.text : itemData.value;\n        }),\n        defaulted$1('selectsOver', true),\n        defaulted$1('populateFromBrowse', true)\n      ]),\n      onHandler('onSetValue'),\n      onKeyboardHandler('onExecute'),\n      onHandler('onItemExecute'),\n      defaulted$1('inputClasses', []),\n      defaulted$1('inputAttributes', {}),\n      defaulted$1('inputStyles', {}),\n      defaulted$1('matchWidth', true),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('dismissOnBlur', true),\n      markers(['openClass']),\n      option('initialData'),\n      field$1('typeaheadBehaviours', [\n        Focusing,\n        Representing,\n        Streaming,\n        Keying,\n        Toggling,\n        Coupling\n      ]),\n      state$1('previewing', function () {\n        return Cell(true);\n      })\n    ].concat(schema$f()).concat(sandboxFields()));\n    var parts$6 = constant([external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        overrides: function (detail) {\n          return {\n            fakeFocus: true,\n            onHighlight: function (menu, item) {\n              if (!detail.previewing.get()) {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  if (detail.model.populateFromBrowse) {\n                    setValueFromItem(detail.model, input, item);\n                  }\n                });\n              } else {\n                menu.getSystem().getByUid(detail.uid).each(function (input) {\n                  attemptSelectOver(detail.model, input, item).fold(function () {\n                    return Highlighting.dehighlight(menu, item);\n                  }, function (fn) {\n                    return fn();\n                  });\n                });\n              }\n              detail.previewing.set(false);\n            },\n            onExecute: function (menu, item) {\n              return menu.getSystem().getByUid(detail.uid).toOptional().map(function (typeahead) {\n                emitWith(typeahead, itemExecute(), { item: item });\n                return true;\n              });\n            },\n            onHover: function (menu, item) {\n              detail.previewing.set(false);\n              menu.getSystem().getByUid(detail.uid).each(function (input) {\n                if (detail.model.populateFromBrowse) {\n                  setValueFromItem(detail.model, input, item);\n                }\n              });\n            }\n          };\n        }\n      })]);\n\n    var Typeahead = composite$1({\n      name: 'Typeahead',\n      configFields: schema$j(),\n      partFields: parts$6(),\n      factory: make$5\n    });\n\n    var wrap$2 = function (delegate) {\n      var toCached = function () {\n        return wrap$2(delegate.toCached());\n      };\n      var bindFuture = function (f) {\n        return wrap$2(delegate.bind(function (resA) {\n          return resA.fold(function (err) {\n            return Future.pure(Result.error(err));\n          }, function (a) {\n            return f(a);\n          });\n        }));\n      };\n      var bindResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.bind(f);\n        }));\n      };\n      var mapResult = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.map(f);\n        }));\n      };\n      var mapError = function (f) {\n        return wrap$2(delegate.map(function (resA) {\n          return resA.mapError(f);\n        }));\n      };\n      var foldResult = function (whenError, whenValue) {\n        return delegate.map(function (res) {\n          return res.fold(whenError, whenValue);\n        });\n      };\n      var withTimeout = function (timeout, errorThunk) {\n        return wrap$2(Future.nu(function (callback) {\n          var timedOut = false;\n          var timer = setTimeout(function () {\n            timedOut = true;\n            callback(Result.error(errorThunk()));\n          }, timeout);\n          delegate.get(function (result) {\n            if (!timedOut) {\n              clearTimeout(timer);\n              callback(result);\n            }\n          });\n        }));\n      };\n      return __assign(__assign({}, delegate), {\n        toCached: toCached,\n        bindFuture: bindFuture,\n        bindResult: bindResult,\n        mapResult: mapResult,\n        mapError: mapError,\n        foldResult: foldResult,\n        withTimeout: withTimeout\n      });\n    };\n    var nu$c = function (worker) {\n      return wrap$2(Future.nu(worker));\n    };\n    var value$2 = function (value) {\n      return wrap$2(Future.pure(Result.value(value)));\n    };\n    var error$1 = function (error) {\n      return wrap$2(Future.pure(Result.error(error)));\n    };\n    var fromResult$1 = function (result) {\n      return wrap$2(Future.pure(result));\n    };\n    var fromFuture = function (future) {\n      return wrap$2(future.map(Result.value));\n    };\n    var fromPromise = function (promise) {\n      return nu$c(function (completer) {\n        promise.then(function (value) {\n          completer(Result.value(value));\n        }, function (error) {\n          completer(Result.error(error));\n        });\n      });\n    };\n    var FutureResult = {\n      nu: nu$c,\n      wrap: wrap$2,\n      pure: value$2,\n      value: value$2,\n      error: error$1,\n      fromResult: fromResult$1,\n      fromFuture: fromFuture,\n      fromPromise: fromPromise\n    };\n\n    var separator$2 = { type: 'separator' };\n    var toMenuItem = function (target) {\n      return {\n        type: 'menuitem',\n        value: target.url,\n        text: target.title,\n        meta: { attach: target.attach },\n        onAction: function () {\n        }\n      };\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        type: 'menuitem',\n        value: url,\n        text: title,\n        meta: { attach: undefined },\n        onAction: function () {\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return map(targets, toMenuItem);\n    };\n    var filterLinkTargets = function (type, targets) {\n      return filter(targets, function (target) {\n        return target.type === type;\n      });\n    };\n    var filteredTargets = function (type, targets) {\n      return toMenuItems(filterLinkTargets(type, targets));\n    };\n    var headerTargets = function (linkInfo) {\n      return filteredTargets('header', linkInfo.targets);\n    };\n    var anchorTargets = function (linkInfo) {\n      return filteredTargets('anchor', linkInfo.targets);\n    };\n    var anchorTargetTop = function (linkInfo) {\n      return Optional.from(linkInfo.anchorTop).map(function (url) {\n        return staticMenuItem('<top>', url);\n      }).toArray();\n    };\n    var anchorTargetBottom = function (linkInfo) {\n      return Optional.from(linkInfo.anchorBottom).map(function (url) {\n        return staticMenuItem('<bottom>', url);\n      }).toArray();\n    };\n    var historyTargets = function (history) {\n      return map(history, function (url) {\n        return staticMenuItem(url, url);\n      });\n    };\n    var joinMenuLists = function (items) {\n      return foldl(items, function (a, b) {\n        var bothEmpty = a.length === 0 || b.length === 0;\n        return bothEmpty ? a.concat(b) : a.concat(separator$2, b);\n      }, []);\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      return filter(menuItems, function (item) {\n        var text = item.meta !== undefined && item.meta.text !== undefined ? item.meta.text : item.text;\n        return contains$1(text.toLowerCase(), lowerCaseTerm) || contains$1(item.value.toLowerCase(), lowerCaseTerm);\n      });\n    };\n\n    var getItems = function (fileType, input, urlBackstage) {\n      var urlInputValue = Representing.getValue(input);\n      var term = urlInputValue.meta.text !== undefined ? urlInputValue.meta.text : urlInputValue.value;\n      var info = urlBackstage.getLinkInformation();\n      return info.fold(function () {\n        return [];\n      }, function (linkInfo) {\n        var history = filterByQuery(term, historyTargets(urlBackstage.getHistory(fileType)));\n        return fileType === 'file' ? joinMenuLists([\n          history,\n          filterByQuery(term, headerTargets(linkInfo)),\n          filterByQuery(term, flatten([\n            anchorTargetTop(linkInfo),\n            anchorTargets(linkInfo),\n            anchorTargetBottom(linkInfo)\n          ]))\n        ]) : history;\n      });\n    };\n    var errorId = generate$1('aria-invalid');\n    var renderUrlInput = function (spec, backstage, urlBackstage) {\n      var _a;\n      var providersBackstage = backstage.shared.providers;\n      var updateHistory = function (component) {\n        var urlEntry = Representing.getValue(component);\n        urlBackstage.addToHistory(urlEntry.value, spec.filetype);\n      };\n      var pField = FormField.parts.field({\n        factory: Typeahead,\n        dismissOnBlur: true,\n        inputClasses: ['tox-textfield'],\n        sandboxClasses: ['tox-dialog__popups'],\n        inputAttributes: {\n          'aria-errormessage': errorId,\n          'type': 'url'\n        },\n        minChars: 0,\n        responseTime: 0,\n        fetch: function (input) {\n          var items = getItems(spec.filetype, input, urlBackstage);\n          var tdata = build$2(items, ItemResponse$1.BUBBLE_TO_SANDBOX, backstage, false);\n          return Future.pure(tdata);\n        },\n        getHotspot: function (comp) {\n          return memUrlBox.getOpt(comp);\n        },\n        onSetValue: function (comp, _newValue) {\n          if (comp.hasConfigured(Invalidating)) {\n            Invalidating.run(comp).get(noop);\n          }\n        },\n        typeaheadBehaviours: derive$1(flatten([\n          urlBackstage.getValidationHandler().map(function (handler) {\n            return Invalidating.config({\n              getRoot: function (comp) {\n                return parent(comp.element);\n              },\n              invalidClass: 'tox-control-wrap--status-invalid',\n              notify: {\n                onInvalid: function (comp, err) {\n                  memInvalidIcon.getOpt(comp).each(function (invalidComp) {\n                    set$1(invalidComp.element, 'title', providersBackstage.translate(err));\n                  });\n                }\n              },\n              validator: {\n                validate: function (input) {\n                  var urlEntry = Representing.getValue(input);\n                  return FutureResult.nu(function (completer) {\n                    handler({\n                      type: spec.filetype,\n                      url: urlEntry.value\n                    }, function (validation) {\n                      if (validation.status === 'invalid') {\n                        var err = Result.error(validation.message);\n                        completer(err);\n                      } else {\n                        var val = Result.value(validation.message);\n                        completer(val);\n                      }\n                    });\n                  });\n                },\n                validateOnLoad: false\n              }\n            });\n          }).toArray(),\n          [\n            Disabling.config({\n              disabled: function () {\n                return spec.disabled || providersBackstage.isDisabled();\n              }\n            }),\n            Tabstopping.config({}),\n            config('urlinput-events', flatten([\n              spec.filetype === 'file' ? [run(input(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                })] : [],\n              [\n                run(change(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                }),\n                run(postPaste(), function (comp) {\n                  emitWith(comp, formChangeEvent, { name: spec.name });\n                  updateHistory(comp);\n                })\n              ]\n            ]))\n          ]\n        ])),\n        eventOrder: (_a = {}, _a[input()] = [\n          'streaming',\n          'urlinput-events',\n          'invalidating'\n        ], _a),\n        model: {\n          getDisplayText: function (itemData) {\n            return itemData.value;\n          },\n          selectsOver: false,\n          populateFromBrowse: false\n        },\n        markers: { openClass: 'tox-textfield--popup-open' },\n        lazySink: backstage.shared.getSink,\n        parts: { menu: part(false, 1, 'normal') },\n        onExecute: function (_menu, component, _entry) {\n          emitWith(component, formSubmitEvent, {});\n        },\n        onItemExecute: function (typeahead, _sandbox, _item, _value) {\n          updateHistory(typeahead);\n          emitWith(typeahead, formChangeEvent, { name: spec.name });\n        }\n      });\n      var pLabel = spec.label.map(function (label) {\n        return renderLabel(label, providersBackstage);\n      });\n      var makeIcon = function (name, errId, icon, label) {\n        if (icon === void 0) {\n          icon = name;\n        }\n        if (label === void 0) {\n          label = name;\n        }\n        return {\n          dom: {\n            tag: 'div',\n            classes: [\n              'tox-icon',\n              'tox-control-wrap__status-icon-' + name\n            ],\n            innerHtml: get$e(icon, providersBackstage.icons),\n            attributes: __assign({\n              'title': providersBackstage.translate(label),\n              'aria-live': 'polite'\n            }, errId.fold(function () {\n              return {};\n            }, function (id) {\n              return { id: id };\n            }))\n          }\n        };\n      };\n      var memInvalidIcon = record(makeIcon('invalid', Optional.some(errorId), 'warning'));\n      var memStatus = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap__status-icon-wrap']\n        },\n        components: [memInvalidIcon.asSpec()]\n      });\n      var optUrlPicker = urlBackstage.getUrlPicker(spec.filetype);\n      var browseUrlEvent = generate$1('browser.url.event');\n      var memUrlBox = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-control-wrap']\n        },\n        components: [\n          pField,\n          memStatus.asSpec()\n        ],\n        behaviours: derive$1([Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            }\n          })])\n      });\n      var memUrlPickerButton = record(renderButton({\n        name: spec.name,\n        icon: Optional.some('browse'),\n        text: spec.label.getOr(''),\n        disabled: spec.disabled,\n        primary: false,\n        borderless: true\n      }, function (component) {\n        return emit(component, browseUrlEvent);\n      }, providersBackstage, [], ['tox-browse-url']));\n      var controlHWrapper = function () {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__controls-h-stack']\n          },\n          components: flatten([\n            [memUrlBox.asSpec()],\n            optUrlPicker.map(function () {\n              return memUrlPickerButton.asSpec();\n            }).toArray()\n          ])\n        };\n      };\n      var openUrlPicker = function (comp) {\n        Composing.getCurrent(comp).each(function (field) {\n          var componentData = Representing.getValue(field);\n          var urlData = __assign({ fieldname: spec.name }, componentData);\n          optUrlPicker.each(function (picker) {\n            picker(urlData).get(function (chosenData) {\n              Representing.setValue(field, chosenData);\n              emitWith(comp, formChangeEvent, { name: spec.name });\n            });\n          });\n        });\n      };\n      return FormField.sketch({\n        dom: renderFormFieldDom(),\n        components: pLabel.toArray().concat([controlHWrapper()]),\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providersBackstage.isDisabled();\n            },\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n              memUrlPickerButton.getOpt(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig(),\n          config('url-input-events', [run(browseUrlEvent, openUrlPicker)])\n        ])\n      });\n    };\n\n    var renderAlertBanner = function (spec, providersBackstage) {\n      return Container.sketch({\n        dom: {\n          tag: 'div',\n          attributes: { role: 'alert' },\n          classes: [\n            'tox-notification',\n            'tox-notification--in',\n            'tox-notification--' + spec.level\n          ]\n        },\n        components: [\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__icon']\n            },\n            components: [Button.sketch({\n                dom: {\n                  tag: 'button',\n                  classes: [\n                    'tox-button',\n                    'tox-button--naked',\n                    'tox-button--icon'\n                  ],\n                  innerHtml: get$e(spec.icon, providersBackstage.icons),\n                  attributes: { title: providersBackstage.translate(spec.iconTooltip) }\n                },\n                action: function (comp) {\n                  emitWith(comp, formActionEvent, {\n                    name: 'alert-banner',\n                    value: spec.url\n                  });\n                }\n              })]\n          },\n          {\n            dom: {\n              tag: 'div',\n              classes: ['tox-notification__body'],\n              innerHtml: providersBackstage.translate(spec.text)\n            }\n          }\n        ]\n      });\n    };\n\n    var renderCheckbox = function (spec, providerBackstage) {\n      var repBehaviour = Representing.config({\n        store: {\n          mode: 'manual',\n          getValue: function (comp) {\n            var el = comp.element.dom;\n            return el.checked;\n          },\n          setValue: function (comp, value) {\n            var el = comp.element.dom;\n            el.checked = value;\n          }\n        }\n      });\n      var toggleCheckboxHandler = function (comp) {\n        comp.element.dom.click();\n        return Optional.some(true);\n      };\n      var pField = FormField.parts.field({\n        factory: { sketch: identity },\n        dom: {\n          tag: 'input',\n          classes: ['tox-checkbox__input'],\n          attributes: { type: 'checkbox' }\n        },\n        behaviours: derive$1([\n          ComposingConfigs.self(),\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            }\n          }),\n          Tabstopping.config({}),\n          Focusing.config({}),\n          repBehaviour,\n          Keying.config({\n            mode: 'special',\n            onEnter: toggleCheckboxHandler,\n            onSpace: toggleCheckboxHandler,\n            stopSpaceKeyup: true\n          }),\n          config('checkbox-events', [run(change(), function (component, _) {\n              emitWith(component, formChangeEvent, { name: spec.name });\n            })])\n        ])\n      });\n      var pLabel = FormField.parts.label({\n        dom: {\n          tag: 'span',\n          classes: ['tox-checkbox__label'],\n          innerHtml: providerBackstage.translate(spec.label)\n        },\n        behaviours: derive$1([Unselecting.config({})])\n      });\n      var makeIcon = function (className) {\n        var iconName = className === 'checked' ? 'selected' : 'unselected';\n        return {\n          dom: {\n            tag: 'span',\n            classes: [\n              'tox-icon',\n              'tox-checkbox-icon__' + className\n            ],\n            innerHtml: get$e(iconName, providerBackstage.icons)\n          }\n        };\n      };\n      var memIcons = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-checkbox__icons']\n        },\n        components: [\n          makeIcon('checked'),\n          makeIcon('unchecked')\n        ]\n      });\n      return FormField.sketch({\n        dom: {\n          tag: 'label',\n          classes: ['tox-checkbox']\n        },\n        components: [\n          pField,\n          memIcons.asSpec(),\n          pLabel\n        ],\n        fieldBehaviours: derive$1([\n          Disabling.config({\n            disabled: function () {\n              return spec.disabled || providerBackstage.isDisabled();\n            },\n            disableClass: 'tox-checkbox--disabled',\n            onDisabled: function (comp) {\n              FormField.getField(comp).each(Disabling.disable);\n            },\n            onEnabled: function (comp) {\n              FormField.getField(comp).each(Disabling.enable);\n            }\n          }),\n          receivingConfig()\n        ])\n      });\n    };\n\n    var renderHtmlPanel = function (spec) {\n      if (spec.presets === 'presentation') {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html\n          }\n        });\n      } else {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-form__group'],\n            innerHtml: spec.html,\n            attributes: { role: 'document' }\n          },\n          containerBehaviours: derive$1([\n            Tabstopping.config({}),\n            Focusing.config({})\n          ])\n        });\n      }\n    };\n\n    var make$6 = function (render) {\n      return function (parts, spec, backstage) {\n        return get$1(spec, 'name').fold(function () {\n          return render(spec, backstage);\n        }, function (fieldName) {\n          return parts.field(fieldName, render(spec, backstage));\n        });\n      };\n    };\n    var makeIframe = function (render) {\n      return function (parts, spec, backstage) {\n        var iframeSpec = deepMerge(spec, { source: 'dynamic' });\n        return make$6(render)(parts, iframeSpec, backstage);\n      };\n    };\n    var factories = {\n      bar: make$6(function (spec, backstage) {\n        return renderBar(spec, backstage.shared);\n      }),\n      collection: make$6(function (spec, backstage) {\n        return renderCollection(spec, backstage.shared.providers);\n      }),\n      alertbanner: make$6(function (spec, backstage) {\n        return renderAlertBanner(spec, backstage.shared.providers);\n      }),\n      input: make$6(function (spec, backstage) {\n        return renderInput(spec, backstage.shared.providers);\n      }),\n      textarea: make$6(function (spec, backstage) {\n        return renderTextarea(spec, backstage.shared.providers);\n      }),\n      label: make$6(function (spec, backstage) {\n        return renderLabel$2(spec, backstage.shared);\n      }),\n      iframe: makeIframe(function (spec, backstage) {\n        return renderIFrame(spec, backstage.shared.providers);\n      }),\n      button: make$6(function (spec, backstage) {\n        return renderDialogButton(spec, backstage.shared.providers);\n      }),\n      checkbox: make$6(function (spec, backstage) {\n        return renderCheckbox(spec, backstage.shared.providers);\n      }),\n      colorinput: make$6(function (spec, backstage) {\n        return renderColorInput(spec, backstage.shared, backstage.colorinput);\n      }),\n      colorpicker: make$6(renderColorPicker),\n      dropzone: make$6(function (spec, backstage) {\n        return renderDropZone(spec, backstage.shared.providers);\n      }),\n      grid: make$6(function (spec, backstage) {\n        return renderGrid(spec, backstage.shared);\n      }),\n      listbox: make$6(function (spec, backstage) {\n        return renderListBox(spec, backstage);\n      }),\n      selectbox: make$6(function (spec, backstage) {\n        return renderSelectBox(spec, backstage.shared.providers);\n      }),\n      sizeinput: make$6(function (spec, backstage) {\n        return renderSizeInput(spec, backstage.shared.providers);\n      }),\n      urlinput: make$6(function (spec, backstage) {\n        return renderUrlInput(spec, backstage, backstage.urlinput);\n      }),\n      customeditor: make$6(renderCustomEditor),\n      htmlpanel: make$6(renderHtmlPanel),\n      imagetools: make$6(function (spec, backstage) {\n        return renderImageTools(spec, backstage.shared.providers);\n      }),\n      table: make$6(function (spec, backstage) {\n        return renderTable(spec, backstage.shared.providers);\n      }),\n      panel: make$6(function (spec, backstage) {\n        return renderPanel(spec, backstage);\n      })\n    };\n    var noFormParts = {\n      field: function (_name, spec) {\n        return spec;\n      }\n    };\n    var interpretInForm = function (parts, spec, oldBackstage) {\n      var newBackstage = deepMerge(oldBackstage, {\n        shared: {\n          interpreter: function (childSpec) {\n            return interpretParts(parts, childSpec, newBackstage);\n          }\n        }\n      });\n      return interpretParts(parts, spec, newBackstage);\n    };\n    var interpretParts = function (parts, spec, backstage) {\n      return get$1(factories, spec.type).fold(function () {\n        console.error('Unknown factory type \"' + spec.type + '\", defaulting to container: ', spec);\n        return spec;\n      }, function (factory) {\n        return factory(parts, spec, backstage);\n      });\n    };\n    var interpretWithoutForm = function (spec, backstage) {\n      var parts = noFormParts;\n      return interpretParts(parts, spec, backstage);\n    };\n\n    var bubbleAlignments = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: [],\n      alignRight: [],\n      right: [],\n      left: [],\n      bottom: [],\n      top: []\n    };\n    var getInlineDialogAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var bubble = nu$8(-12, 12, bubbleAlignments);\n      var overrides = { maxHeightFunction: expandable() };\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [northwest$3];\n            },\n            onLtr: function () {\n              return [northeast$3];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          bubble: bubble,\n          layouts: {\n            onRtl: function () {\n              return [southeast$1];\n            },\n            onLtr: function () {\n              return [southwest$1];\n            }\n          },\n          overrides: overrides\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getBannerAnchor = function (contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor) {\n      var editableAreaAnchor = function () {\n        return {\n          anchor: 'node',\n          root: getContentContainer(contentAreaElement()),\n          node: Optional.from(contentAreaElement()),\n          layouts: {\n            onRtl: function () {\n              return [north$3];\n            },\n            onLtr: function () {\n              return [north$3];\n            }\n          }\n        };\n      };\n      var standardAnchor = function () {\n        return {\n          anchor: 'hotspot',\n          hotspot: lazyAnchorbar(),\n          layouts: {\n            onRtl: function () {\n              return [south$1];\n            },\n            onLtr: function () {\n              return [south$1];\n            }\n          }\n        };\n      };\n      return function () {\n        return lazyUseEditableAreaAnchor() ? editableAreaAnchor() : standardAnchor();\n      };\n    };\n    var getCursorAnchor = function (editor, bodyElement) {\n      return function () {\n        return {\n          anchor: 'selection',\n          root: bodyElement(),\n          getSelection: function () {\n            var rng = editor.selection.getRng();\n            return Optional.some(SimSelection.range(SugarElement.fromDom(rng.startContainer), rng.startOffset, SugarElement.fromDom(rng.endContainer), rng.endOffset));\n          }\n        };\n      };\n    };\n    var getNodeAnchor = function (bodyElement) {\n      return function (element) {\n        return {\n          anchor: 'node',\n          root: bodyElement(),\n          node: element\n        };\n      };\n    };\n    var getAnchors = function (editor, lazyAnchorbar, isToolbarTop) {\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var bodyElement = function () {\n        return SugarElement.fromDom(editor.getBody());\n      };\n      var contentAreaElement = function () {\n        return SugarElement.fromDom(editor.getContentAreaContainer());\n      };\n      var lazyUseEditableAreaAnchor = function () {\n        return useFixedToolbarContainer || !isToolbarTop();\n      };\n      return {\n        inlineDialog: getInlineDialogAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        banner: getBannerAnchor(contentAreaElement, lazyAnchorbar, lazyUseEditableAreaAnchor),\n        cursor: getCursorAnchor(editor, bodyElement),\n        node: getNodeAnchor(bodyElement)\n      };\n    };\n\n    var colorPicker = function (editor) {\n      return function (callback, value) {\n        var dialog = colorPickerDialog(editor);\n        dialog(callback, value);\n      };\n    };\n    var hasCustomColors$1 = function (editor) {\n      return function () {\n        return hasCustomColors(editor);\n      };\n    };\n    var getColors$2 = function (editor) {\n      return function () {\n        return getColors(editor);\n      };\n    };\n    var getColorCols$2 = function (editor) {\n      return function () {\n        return getColorCols$1(editor);\n      };\n    };\n    var ColorInputBackstage = function (editor) {\n      return {\n        colorPicker: colorPicker(editor),\n        hasCustomColors: hasCustomColors$1(editor),\n        getColors: getColors$2(editor),\n        getColorCols: getColorCols$2(editor)\n      };\n    };\n\n    var isDraggableModal$1 = function (editor) {\n      return function () {\n        return isDraggableModal(editor);\n      };\n    };\n    var DialogBackstage = function (editor) {\n      return { isDraggableModal: isDraggableModal$1(editor) };\n    };\n\n    var HeaderBackstage = function (editor) {\n      var mode = Cell(isToolbarLocationBottom(editor) ? 'bottom' : 'top');\n      return {\n        isPositionedAtTop: function () {\n          return mode.get() === 'top';\n        },\n        getDockingMode: mode.get,\n        setDockingMode: mode.set\n      };\n    };\n\n    var defaultStyleFormats = [\n      {\n        title: 'Headings',\n        items: [\n          {\n            title: 'Heading 1',\n            format: 'h1'\n          },\n          {\n            title: 'Heading 2',\n            format: 'h2'\n          },\n          {\n            title: 'Heading 3',\n            format: 'h3'\n          },\n          {\n            title: 'Heading 4',\n            format: 'h4'\n          },\n          {\n            title: 'Heading 5',\n            format: 'h5'\n          },\n          {\n            title: 'Heading 6',\n            format: 'h6'\n          }\n        ]\n      },\n      {\n        title: 'Inline',\n        items: [\n          {\n            title: 'Bold',\n            format: 'bold'\n          },\n          {\n            title: 'Italic',\n            format: 'italic'\n          },\n          {\n            title: 'Underline',\n            format: 'underline'\n          },\n          {\n            title: 'Strikethrough',\n            format: 'strikethrough'\n          },\n          {\n            title: 'Superscript',\n            format: 'superscript'\n          },\n          {\n            title: 'Subscript',\n            format: 'subscript'\n          },\n          {\n            title: 'Code',\n            format: 'code'\n          }\n        ]\n      },\n      {\n        title: 'Blocks',\n        items: [\n          {\n            title: 'Paragraph',\n            format: 'p'\n          },\n          {\n            title: 'Blockquote',\n            format: 'blockquote'\n          },\n          {\n            title: 'Div',\n            format: 'div'\n          },\n          {\n            title: 'Pre',\n            format: 'pre'\n          }\n        ]\n      },\n      {\n        title: 'Align',\n        items: [\n          {\n            title: 'Left',\n            format: 'alignleft'\n          },\n          {\n            title: 'Center',\n            format: 'aligncenter'\n          },\n          {\n            title: 'Right',\n            format: 'alignright'\n          },\n          {\n            title: 'Justify',\n            format: 'alignjustify'\n          }\n        ]\n      }\n    ];\n    var isNestedFormat = function (format) {\n      return has(format, 'items');\n    };\n    var isBlockFormat = function (format) {\n      return has(format, 'block');\n    };\n    var isInlineFormat = function (format) {\n      return has(format, 'inline');\n    };\n    var isSelectorFormat = function (format) {\n      return has(format, 'selector');\n    };\n    var mapFormats = function (userFormats) {\n      return foldl(userFormats, function (acc, fmt) {\n        if (isNestedFormat(fmt)) {\n          var result = mapFormats(fmt.items);\n          return {\n            customFormats: acc.customFormats.concat(result.customFormats),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                items: result.formats\n              }])\n          };\n        } else if (isInlineFormat(fmt) || isBlockFormat(fmt) || isSelectorFormat(fmt)) {\n          var formatName = isString(fmt.name) ? fmt.name : fmt.title.toLowerCase();\n          var formatNameWithPrefix = 'custom-' + formatName;\n          return {\n            customFormats: acc.customFormats.concat([{\n                name: formatNameWithPrefix,\n                format: fmt\n              }]),\n            formats: acc.formats.concat([{\n                title: fmt.title,\n                format: formatNameWithPrefix,\n                icon: fmt.icon\n              }])\n          };\n        } else {\n          return __assign(__assign({}, acc), { formats: acc.formats.concat(fmt) });\n        }\n      }, {\n        customFormats: [],\n        formats: []\n      });\n    };\n    var registerCustomFormats = function (editor, userFormats) {\n      var result = mapFormats(userFormats);\n      var registerFormats = function (customFormats) {\n        each(customFormats, function (fmt) {\n          if (!editor.formatter.has(fmt.name)) {\n            editor.formatter.register(fmt.name, fmt.format);\n          }\n        });\n      };\n      if (editor.formatter) {\n        registerFormats(result.customFormats);\n      } else {\n        editor.on('init', function () {\n          registerFormats(result.customFormats);\n        });\n      }\n      return result.formats;\n    };\n    var getStyleFormats = function (editor) {\n      return getUserStyleFormats(editor).map(function (userFormats) {\n        var registeredUserFormats = registerCustomFormats(editor, userFormats);\n        return isMergeStyleFormats(editor) ? defaultStyleFormats.concat(registeredUserFormats) : registeredUserFormats;\n      }).getOr(defaultStyleFormats);\n    };\n\n    var processBasic = function (item, isSelectedFor, getPreviewFor) {\n      var formatterSpec = {\n        type: 'formatter',\n        isSelected: isSelectedFor(item.format),\n        getStylePreview: getPreviewFor(item.format)\n      };\n      return deepMerge(item, formatterSpec);\n    };\n    var register$3 = function (editor, formats, isSelectedFor, getPreviewFor) {\n      var enrichSupported = function (item) {\n        return processBasic(item, isSelectedFor, getPreviewFor);\n      };\n      var enrichMenu = function (item) {\n        var submenuSpec = { type: 'submenu' };\n        return deepMerge(item, submenuSpec);\n      };\n      var enrichCustom = function (item) {\n        var formatName = isString(item.name) ? item.name : generate$1(item.title);\n        var formatNameWithPrefix = 'custom-' + formatName;\n        var customSpec = {\n          type: 'formatter',\n          format: formatNameWithPrefix,\n          isSelected: isSelectedFor(formatNameWithPrefix),\n          getStylePreview: getPreviewFor(formatNameWithPrefix)\n        };\n        var newItem = deepMerge(item, customSpec);\n        editor.formatter.register(formatName, newItem);\n        return newItem;\n      };\n      var doEnrich = function (items) {\n        return map(items, function (item) {\n          var keys$1 = keys(item);\n          if (hasNonNullableKey(item, 'items')) {\n            var newItems_1 = doEnrich(item.items);\n            return deepMerge(enrichMenu(item), {\n              getStyleItems: function () {\n                return newItems_1;\n              }\n            });\n          } else if (hasNonNullableKey(item, 'format')) {\n            return enrichSupported(item);\n          } else if (keys$1.length === 1 && contains(keys$1, 'title')) {\n            return deepMerge(item, { type: 'separator' });\n          } else {\n            return enrichCustom(item);\n          }\n        });\n      };\n      return doEnrich(formats);\n    };\n\n    var init$7 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var flatten = function (fmt) {\n        var subs = fmt.items;\n        return subs !== undefined && subs.length > 0 ? bind(subs, flatten) : [fmt.format];\n      };\n      var settingsFormats = Cell([]);\n      var settingsFlattenedFormats = Cell([]);\n      var eventsFormats = Cell([]);\n      var eventsFlattenedFormats = Cell([]);\n      var replaceSettings = Cell(false);\n      editor.on('PreInit', function (_e) {\n        var formats = getStyleFormats(editor);\n        var enriched = register$3(editor, formats, isSelectedFor, getPreviewFor);\n        settingsFormats.set(enriched);\n        settingsFlattenedFormats.set(bind(enriched, flatten));\n      });\n      editor.on('addStyleModifications', function (e) {\n        var modifications = register$3(editor, e.items, isSelectedFor, getPreviewFor);\n        eventsFormats.set(modifications);\n        replaceSettings.set(e.replace);\n        eventsFlattenedFormats.set(bind(modifications, flatten));\n      });\n      var getData = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFormats.get();\n        var fromEvents = eventsFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      var getFlattenedKeys = function () {\n        var fromSettings = replaceSettings.get() ? [] : settingsFlattenedFormats.get();\n        var fromEvents = eventsFlattenedFormats.get();\n        return fromSettings.concat(fromEvents);\n      };\n      return {\n        getData: getData,\n        getFlattenedKeys: getFlattenedKeys\n      };\n    };\n\n    var trim$1 = global$c.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create$8 = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(SugarElement.fromDom(root), selector), function (element) {\n        return element.dom;\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate$1('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name) !== undefined;\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create$8('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create$8('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim$1(target.title).length > 0;\n    };\n    var find$5 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$5 };\n\n    var STORAGE_KEY = 'tinymce-url-history';\n    var HISTORY_LENGTH = 5;\n    var isHttpUrl = function (url) {\n      return isString(url) && /^https?/.test(url);\n    };\n    var isArrayOfUrl = function (a) {\n      return isArray(a) && a.length <= HISTORY_LENGTH && forall(a, isHttpUrl);\n    };\n    var isRecordOfUrlArray = function (r) {\n      return isObject(r) && find$1(r, function (value) {\n        return !isArrayOfUrl(value);\n      }).isNone();\n    };\n    var getAllHistory = function () {\n      var unparsedHistory = global$9.getItem(STORAGE_KEY);\n      if (unparsedHistory === null) {\n        return {};\n      }\n      var history;\n      try {\n        history = JSON.parse(unparsedHistory);\n      } catch (e) {\n        if (e instanceof SyntaxError) {\n          console.log('Local storage ' + STORAGE_KEY + ' was not valid JSON', e);\n          return {};\n        }\n        throw e;\n      }\n      if (!isRecordOfUrlArray(history)) {\n        console.log('Local storage ' + STORAGE_KEY + ' was not valid format', history);\n        return {};\n      }\n      return history;\n    };\n    var setAllHistory = function (history) {\n      if (!isRecordOfUrlArray(history)) {\n        throw new Error('Bad format for history:\\n' + JSON.stringify(history));\n      }\n      global$9.setItem(STORAGE_KEY, JSON.stringify(history));\n    };\n    var getHistory = function (fileType) {\n      var history = getAllHistory();\n      return Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n    };\n    var addToHistory = function (url, fileType) {\n      if (!isHttpUrl(url)) {\n        return;\n      }\n      var history = getAllHistory();\n      var items = Object.prototype.hasOwnProperty.call(history, fileType) ? history[fileType] : [];\n      var itemsWithoutUrl = filter(items, function (item) {\n        return item !== url;\n      });\n      history[fileType] = [url].concat(itemsWithoutUrl).slice(0, HISTORY_LENGTH);\n      setAllHistory(history);\n    };\n\n    var isTruthy = function (value) {\n      return !!value;\n    };\n    var makeMap = function (value) {\n      return map$2(global$c.makeMap(value, /[, ]/), isTruthy);\n    };\n    var getPicker = function (editor) {\n      return Optional.from(getFilePickerCallback(editor)).filter(isFunction);\n    };\n    var getPickerTypes = function (editor) {\n      var optFileTypes = Optional.some(getFilePickerTypes(editor)).filter(isTruthy);\n      var optLegacyTypes = Optional.some(getFileBrowserCallbackTypes(editor)).filter(isTruthy);\n      var optTypes = optFileTypes.or(optLegacyTypes).map(makeMap);\n      return getPicker(editor).fold(function () {\n        return false;\n      }, function (_picker) {\n        return optTypes.fold(function () {\n          return true;\n        }, function (types) {\n          return keys(types).length > 0 ? types : false;\n        });\n      });\n    };\n    var getPickerSetting = function (editor, filetype) {\n      var pickerTypes = getPickerTypes(editor);\n      if (isBoolean(pickerTypes)) {\n        return pickerTypes ? getPicker(editor) : Optional.none();\n      } else {\n        return pickerTypes[filetype] ? getPicker(editor) : Optional.none();\n      }\n    };\n    var getUrlPicker = function (editor, filetype) {\n      return getPickerSetting(editor, filetype).map(function (picker) {\n        return function (entry) {\n          return Future.nu(function (completer) {\n            var handler = function (value, meta) {\n              if (!isString(value)) {\n                throw new Error('Expected value to be string');\n              }\n              if (meta !== undefined && !isObject(meta)) {\n                throw new Error('Expected meta to be a object');\n              }\n              var r = {\n                value: value,\n                meta: meta\n              };\n              completer(r);\n            };\n            var meta = __assign({\n              filetype: filetype,\n              fieldname: entry.fieldname\n            }, Optional.from(entry.meta).getOr({}));\n            picker.call(editor, handler, entry.value, meta);\n          });\n        };\n      });\n    };\n    var getTextSetting = function (value) {\n      return Optional.from(value).filter(isString).getOrUndefined();\n    };\n    var getLinkInformation = function (editor) {\n      if (noTypeaheadUrls(editor)) {\n        return Optional.none();\n      }\n      return Optional.some({\n        targets: LinkTargets.find(editor.getBody()),\n        anchorTop: getTextSetting(getAnchorTop(editor)),\n        anchorBottom: getTextSetting(getAnchorBottom(editor))\n      });\n    };\n    var getValidationHandler = function (editor) {\n      return Optional.from(getFilePickerValidatorHandler(editor));\n    };\n    var UrlInputBackstage = function (editor) {\n      return {\n        getHistory: getHistory,\n        addToHistory: addToHistory,\n        getLinkInformation: function () {\n          return getLinkInformation(editor);\n        },\n        getValidationHandler: function () {\n          return getValidationHandler(editor);\n        },\n        getUrlPicker: function (filetype) {\n          return getUrlPicker(editor, filetype);\n        }\n      };\n    };\n\n    var init$8 = function (sink, editor, lazyAnchorbar) {\n      var contextMenuState = Cell(false);\n      var toolbar = HeaderBackstage(editor);\n      var backstage = {\n        shared: {\n          providers: {\n            icons: function () {\n              return editor.ui.registry.getAll().icons;\n            },\n            menuItems: function () {\n              return editor.ui.registry.getAll().menuItems;\n            },\n            translate: global$6.translate,\n            isDisabled: function () {\n              return editor.mode.isReadOnly() || editor.ui.isDisabled();\n            },\n            getSetting: editor.getParam.bind(editor)\n          },\n          interpreter: function (s) {\n            return interpretWithoutForm(s, backstage);\n          },\n          anchors: getAnchors(editor, lazyAnchorbar, toolbar.isPositionedAtTop),\n          header: toolbar,\n          getSink: function () {\n            return Result.value(sink);\n          }\n        },\n        urlinput: UrlInputBackstage(editor),\n        styleselect: init$7(editor),\n        colorinput: ColorInputBackstage(editor),\n        dialog: DialogBackstage(editor),\n        isContextMenuOpen: function () {\n          return contextMenuState.get();\n        },\n        setContextMenuState: function (state) {\n          return contextMenuState.set(state);\n        }\n      };\n      return backstage;\n    };\n\n    var expandable$1 = constant(function (element, available) {\n      setMax$1(element, Math.floor(available));\n    });\n\n    var showContextToolbarEvent = 'contexttoolbar-show';\n    var hideContextToolbarEvent = 'contexttoolbar-hide';\n\n    var schema$k = constant([\n      strict$1('dom'),\n      defaulted$1('shell', true),\n      field$1('toolbarBehaviours', [Replacing])\n    ]);\n    var enhanceGroups = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var parts$7 = constant([optional({\n        name: 'groups',\n        overrides: enhanceGroups\n      })]);\n\n    var factory$9 = function (detail, components, _spec, _externals) {\n      var setGroups = function (toolbar, groups) {\n        getGroupContainer(toolbar).fold(function () {\n          console.error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n          throw new Error('Toolbar was defined to not be a shell, but no groups container was specified in components');\n        }, function (container) {\n          Replacing.set(container, groups);\n        });\n      };\n      var getGroupContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'groups');\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.toolbarBehaviours, extra.behaviours),\n        apis: { setGroups: setGroups },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var Toolbar = composite$1({\n      name: 'Toolbar',\n      configFields: schema$k(),\n      partFields: parts$7(),\n      factory: factory$9,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        }\n      }\n    });\n\n    var generate$6 = function (xs, f) {\n      var init = {\n        len: 0,\n        list: []\n      };\n      var r = foldl(xs, function (b, a) {\n        var value = f(a, b.len);\n        return value.fold(constant(b), function (v) {\n          return {\n            len: v.finish,\n            list: b.list.concat([v])\n          };\n        });\n      }, init);\n      return r.list;\n    };\n\n    var output$1 = function (within, extra, withinWidth) {\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var apportion = function (units, total, len) {\n      var parray = generate$6(units, function (unit, current) {\n        var width = len(unit);\n        return Optional.some({\n          element: unit,\n          start: current,\n          finish: current + width,\n          width: width\n        });\n      });\n      var within = filter(parray, function (unit) {\n        return unit.finish <= total;\n      });\n      var withinWidth = foldr(within, function (acc, el) {\n        return acc + el.width;\n      }, 0);\n      var extra = parray.slice(within.length);\n      return {\n        within: within,\n        extra: extra,\n        withinWidth: withinWidth\n      };\n    };\n    var toUnit = function (parray) {\n      return map(parray, function (unit) {\n        return unit.element;\n      });\n    };\n    var fitLast = function (within, extra, withinWidth) {\n      var fits = toUnit(within.concat(extra));\n      return output$1(fits, [], withinWidth);\n    };\n    var overflow = function (within, extra, overflower, withinWidth) {\n      var fits = toUnit(within).concat([overflower]);\n      return output$1(fits, toUnit(extra), withinWidth);\n    };\n    var fitAll = function (within, extra, withinWidth) {\n      return output$1(toUnit(within), [], withinWidth);\n    };\n    var tryFit = function (total, units, len) {\n      var divide = apportion(units, total, len);\n      return divide.extra.length === 0 ? Optional.some(divide) : Optional.none();\n    };\n    var partition$3 = function (total, units, len, overflower) {\n      var divide = tryFit(total, units, len).getOrThunk(function () {\n        return apportion(units, total - len(overflower), len);\n      });\n      var within = divide.within;\n      var extra = divide.extra;\n      var withinWidth = divide.withinWidth;\n      if (extra.length === 1 && extra[0].width <= len(overflower)) {\n        return fitLast(within, extra, withinWidth);\n      } else if (extra.length >= 1) {\n        return overflow(within, extra, overflower, withinWidth);\n      } else {\n        return fitAll(within, extra, withinWidth);\n      }\n    };\n\n    var setGroups = function (toolbar, storedGroups) {\n      var bGroups = map(storedGroups, function (g) {\n        return premade$1(g);\n      });\n      Toolbar.setGroups(toolbar, bGroups);\n    };\n    var findFocusedComp = function (comps) {\n      return findMap(comps, function (comp) {\n        return search(comp.element).bind(function (focusedElm) {\n          return comp.getSystem().getByDom(focusedElm).toOptional();\n        });\n      });\n    };\n    var refresh = function (toolbar, detail, setOverflow) {\n      var primary = getPartOrDie(toolbar, detail, 'primary');\n      var overflowGroup = Coupling.getCoupled(toolbar, 'overflowGroup');\n      set$2(primary.element, 'visibility', 'hidden');\n      var groups = detail.builtGroups.get().concat([overflowGroup]);\n      var focusedComp = findFocusedComp(groups);\n      setOverflow([]);\n      setGroups(primary, groups);\n      var availableWidth = get$8(primary.element);\n      var overflows = partition$3(availableWidth, detail.builtGroups.get(), function (comp) {\n        return get$8(comp.element);\n      }, overflowGroup);\n      if (overflows.extra.length === 0) {\n        Replacing.remove(primary, overflowGroup);\n        setOverflow([]);\n      } else {\n        setGroups(primary, overflows.within);\n        setOverflow(overflows.extra);\n      }\n      remove$6(primary.element, 'visibility');\n      reflow(primary.element);\n      focusedComp.each(Focusing.focus);\n    };\n\n    var schema$l = constant([\n      field$1('splitToolbarBehaviours', [Coupling]),\n      state$1('builtGroups', function () {\n        return Cell([]);\n      })\n    ]);\n\n    var schema$m = constant([\n      markers(['overflowToggledClass']),\n      optionFunction('getOverflowBounds'),\n      strict$1('lazySink'),\n      state$1('overflowGroups', function () {\n        return Cell([]);\n      })\n    ].concat(schema$l()));\n    var parts$8 = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      external$1({\n        schema: schema$k(),\n        name: 'overflow'\n      }),\n      external$1({ name: 'overflow-button' }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var schema$n = constant([\n      markers(['toggledClass']),\n      strict$1('lazySink'),\n      strictFunction('fetch'),\n      optionFunction('getBounds'),\n      optionObjOf('fireDismissalEventInstead', [defaulted$1('event', dismissRequested())]),\n      schema$1()\n    ]);\n    var parts$9 = constant([\n      external$1({\n        name: 'button',\n        overrides: function (detail) {\n          return {\n            dom: { attributes: { 'aria-haspopup': 'true' } },\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.toggledClass,\n                aria: { mode: 'expanded' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'toolbar',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([Keying.config({\n                mode: 'cyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'button').each(Focusing.focus);\n                  return Optional.none();\n                }\n              })])\n          };\n        }\n      })\n    ]);\n\n    var toggle$2 = function (button, externals) {\n      var toolbarSandbox = Coupling.getCoupled(button, 'toolbarSandbox');\n      if (Sandboxing.isOpen(toolbarSandbox)) {\n        Sandboxing.close(toolbarSandbox);\n      } else {\n        Sandboxing.open(toolbarSandbox, externals.toolbar());\n      }\n    };\n    var position$2 = function (button, toolbar, detail, layouts) {\n      var bounds = detail.getBounds.map(function (bounder) {\n        return bounder();\n      });\n      var sink = detail.lazySink(button).getOrDie();\n      Positioning.positionWithinBounds(sink, {\n        anchor: 'hotspot',\n        hotspot: button,\n        layouts: layouts,\n        overrides: { maxWidthFunction: expandable$1() }\n      }, toolbar, bounds);\n    };\n    var setGroups$1 = function (button, toolbar, detail, layouts, groups) {\n      Toolbar.setGroups(toolbar, groups);\n      position$2(button, toolbar, detail, layouts);\n      Toggling.on(button);\n    };\n    var makeSandbox$1 = function (button, spec, detail) {\n      var ariaOwner = manager();\n      var onOpen = function (sandbox, toolbar) {\n        detail.fetch().get(function (groups) {\n          setGroups$1(button, toolbar, detail, spec.layouts, groups);\n          ariaOwner.link(button.element);\n          Keying.focusIn(toolbar);\n        });\n      };\n      var onClose = function () {\n        Toggling.off(button);\n        Focusing.focus(button);\n        ariaOwner.unlink(button.element);\n      };\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { id: ariaOwner.id }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              Sandboxing.close(comp);\n              return Optional.some(true);\n            }\n          }),\n          Sandboxing.config({\n            onOpen: onOpen,\n            onClose: onClose,\n            isPartOf: function (container, data, queryElem) {\n              return isPartOf(data, queryElem) || isPartOf(button, queryElem);\n            },\n            getAttachPoint: function () {\n              return detail.lazySink(button).getOrDie();\n            }\n          }),\n          Receiving.config({\n            channels: __assign(__assign({}, receivingChannel(__assign({ isExtraPart: never }, detail.fireDismissalEventInstead.map(function (fe) {\n              return { fireEventInstead: { event: fe.event } };\n            }).getOr({})))), receivingChannel$1({\n              doReposition: function () {\n                Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n                  position$2(button, toolbar, detail, spec.layouts);\n                });\n              }\n            }))\n          })\n        ])\n      };\n    };\n    var factory$a = function (detail, components, spec, externals) {\n      return __assign(__assign({}, Button.sketch(__assign(__assign({}, externals.button()), {\n        action: function (button) {\n          toggle$2(button, externals);\n        },\n        buttonBehaviours: SketchBehaviours.augment({ dump: externals.button().buttonBehaviours }, [Coupling.config({\n            others: {\n              toolbarSandbox: function (button) {\n                return makeSandbox$1(button, spec, detail);\n              }\n            }\n          })])\n      }))), {\n        apis: {\n          setGroups: function (button, groups) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              setGroups$1(button, toolbar, detail, spec.layouts, groups);\n            });\n          },\n          reposition: function (button) {\n            Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox')).each(function (toolbar) {\n              position$2(button, toolbar, detail, spec.layouts);\n            });\n          },\n          toggle: function (button) {\n            toggle$2(button, externals);\n          },\n          getToolbar: function (button) {\n            return Sandboxing.getState(Coupling.getCoupled(button, 'toolbarSandbox'));\n          },\n          isOpen: function (button) {\n            return Sandboxing.isOpen(Coupling.getCoupled(button, 'toolbarSandbox'));\n          }\n        }\n      });\n    };\n    var FloatingToolbarButton = composite$1({\n      name: 'FloatingToolbarButton',\n      factory: factory$a,\n      configFields: schema$n(),\n      partFields: parts$9(),\n      apis: {\n        setGroups: function (apis, button, groups) {\n          apis.setGroups(button, groups);\n        },\n        reposition: function (apis, button) {\n          apis.reposition(button);\n        },\n        toggle: function (apis, button) {\n          apis.toggle(button);\n        },\n        getToolbar: function (apis, button) {\n          return apis.getToolbar(button);\n        },\n        isOpen: function (apis, button) {\n          return apis.isOpen(button);\n        }\n      }\n    });\n\n    var schema$o = constant([\n      strict$1('items'),\n      markers(['itemSelector']),\n      field$1('tgroupBehaviours', [Keying])\n    ]);\n    var parts$a = constant([group({\n        name: 'items',\n        unit: 'item'\n      })]);\n\n    var factory$b = function (detail, components, _spec, _externals) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.tgroupBehaviours, [Keying.config({\n            mode: 'flow',\n            selector: detail.markers.itemSelector\n          })]),\n        domModification: { attributes: { role: 'toolbar' } }\n      };\n    };\n    var ToolbarGroup = composite$1({\n      name: 'ToolbarGroup',\n      configFields: schema$o(),\n      partFields: parts$a(),\n      factory: factory$b\n    });\n\n    var buildGroups = function (comps) {\n      return map(comps, function (g) {\n        return premade$1(g);\n      });\n    };\n    var refresh$1 = function (toolbar, memFloatingToolbarButton, detail) {\n      refresh(toolbar, detail, function (overflowGroups) {\n        detail.overflowGroups.set(overflowGroups);\n        memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n          FloatingToolbarButton.setGroups(floatingToolbarButton, buildGroups(overflowGroups));\n        });\n      });\n    };\n    var factory$c = function (detail, components, spec, externals) {\n      var memFloatingToolbarButton = record(FloatingToolbarButton.sketch({\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(buildGroups(detail.overflowGroups.get()));\n          });\n        },\n        layouts: {\n          onLtr: function () {\n            return [\n              southwest$1,\n              southeast$1\n            ];\n          },\n          onRtl: function () {\n            return [\n              southeast$1,\n              southwest$1\n            ];\n          },\n          onBottomLtr: function () {\n            return [\n              northwest$1,\n              northeast$1\n            ];\n          },\n          onBottomRtl: function () {\n            return [\n              northeast$1,\n              northwest$1\n            ];\n          }\n        },\n        getBounds: spec.getOverflowBounds,\n        lazySink: detail.lazySink,\n        fireDismissalEventInstead: {},\n        markers: { toggledClass: detail.markers.overflowToggledClass },\n        parts: {\n          button: externals['overflow-button'](),\n          toolbar: externals.overflow()\n        }\n      }));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [Coupling.config({\n            others: {\n              overflowGroup: function () {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), { items: [memFloatingToolbarButton.asSpec()] }));\n              }\n            }\n          })]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            detail.builtGroups.set(map(groups, toolbar.getSystem().build));\n            refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$1(toolbar, memFloatingToolbarButton, detail);\n          },\n          toggle: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.toggle(floatingToolbarButton);\n            });\n          },\n          isOpen: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).map(FloatingToolbarButton.isOpen).getOr(false);\n          },\n          reposition: function (toolbar) {\n            memFloatingToolbarButton.getOpt(toolbar).each(function (floatingToolbarButton) {\n              FloatingToolbarButton.reposition(floatingToolbarButton);\n            });\n          },\n          getOverflow: function (toolbar) {\n            return memFloatingToolbarButton.getOpt(toolbar).bind(FloatingToolbarButton.getToolbar);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitFloatingToolbar = composite$1({\n      name: 'SplitFloatingToolbar',\n      configFields: schema$m(),\n      partFields: parts$8(),\n      factory: factory$c,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        reposition: function (apis, toolbar) {\n          apis.reposition(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        },\n        getOverflow: function (apis, toolbar) {\n          return apis.getOverflow(toolbar);\n        }\n      }\n    });\n\n    var getAnimationRoot = function (component, slideConfig) {\n      return slideConfig.getAnimationRoot.fold(function () {\n        return component.element;\n      }, function (get) {\n        return get(component);\n      });\n    };\n\n    var getDimensionProperty = function (slideConfig) {\n      return slideConfig.dimension.property;\n    };\n    var getDimension = function (slideConfig, elem) {\n      return slideConfig.dimension.getDimension(elem);\n    };\n    var disableTransitions = function (component, slideConfig) {\n      var root = getAnimationRoot(component, slideConfig);\n      remove$5(root, [\n        slideConfig.shrinkingClass,\n        slideConfig.growingClass\n      ]);\n    };\n    var setShrunk = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.openClass);\n      add$2(component.element, slideConfig.closedClass);\n      set$2(component.element, getDimensionProperty(slideConfig), '0px');\n      reflow(component.element);\n    };\n    var setGrown = function (component, slideConfig) {\n      remove$4(component.element, slideConfig.closedClass);\n      add$2(component.element, slideConfig.openClass);\n      remove$6(component.element, getDimensionProperty(slideConfig));\n    };\n    var doImmediateShrink = function (component, slideConfig, slideState, _calculatedSize) {\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), getDimension(slideConfig, component.element));\n      reflow(component.element);\n      disableTransitions(component, slideConfig);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n      slideConfig.onShrunk(component);\n    };\n    var doStartShrink = function (component, slideConfig, slideState, calculatedSize) {\n      var size = calculatedSize.getOrThunk(function () {\n        return getDimension(slideConfig, component.element);\n      });\n      slideState.setCollapsed();\n      set$2(component.element, getDimensionProperty(slideConfig), size);\n      reflow(component.element);\n      var root = getAnimationRoot(component, slideConfig);\n      remove$4(root, slideConfig.growingClass);\n      add$2(root, slideConfig.shrinkingClass);\n      setShrunk(component, slideConfig);\n      slideConfig.onStartShrink(component);\n    };\n    var doStartSmartShrink = function (component, slideConfig, slideState) {\n      var size = getDimension(slideConfig, component.element);\n      var shrinker = size === '0px' ? doImmediateShrink : doStartShrink;\n      shrinker(component, slideConfig, slideState, Optional.some(size));\n    };\n    var doStartGrow = function (component, slideConfig, slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      var wasShrinking = has$2(root, slideConfig.shrinkingClass);\n      var beforeSize = getDimension(slideConfig, component.element);\n      setGrown(component, slideConfig);\n      var fullSize = getDimension(slideConfig, component.element);\n      var startPartialGrow = function () {\n        set$2(component.element, getDimensionProperty(slideConfig), beforeSize);\n        reflow(component.element);\n      };\n      var startCompleteGrow = function () {\n        setShrunk(component, slideConfig);\n      };\n      var setStartSize = wasShrinking ? startPartialGrow : startCompleteGrow;\n      setStartSize();\n      remove$4(root, slideConfig.shrinkingClass);\n      add$2(root, slideConfig.growingClass);\n      setGrown(component, slideConfig);\n      set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      slideState.setExpanded();\n      slideConfig.onStartGrow(component);\n    };\n    var refresh$2 = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        remove$6(component.element, getDimensionProperty(slideConfig));\n        var fullSize = getDimension(slideConfig, component.element);\n        set$2(component.element, getDimensionProperty(slideConfig), fullSize);\n      }\n    };\n    var grow = function (component, slideConfig, slideState) {\n      if (!slideState.isExpanded()) {\n        doStartGrow(component, slideConfig, slideState);\n      }\n    };\n    var shrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doStartSmartShrink(component, slideConfig, slideState);\n      }\n    };\n    var immediateShrink = function (component, slideConfig, slideState) {\n      if (slideState.isExpanded()) {\n        doImmediateShrink(component, slideConfig, slideState, Optional.none());\n      }\n    };\n    var hasGrown = function (component, slideConfig, slideState) {\n      return slideState.isExpanded();\n    };\n    var hasShrunk = function (component, slideConfig, slideState) {\n      return slideState.isCollapsed();\n    };\n    var isGrowing = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.growingClass) === true;\n    };\n    var isShrinking = function (component, slideConfig, _slideState) {\n      var root = getAnimationRoot(component, slideConfig);\n      return has$2(root, slideConfig.shrinkingClass) === true;\n    };\n    var isTransitioning = function (component, slideConfig, slideState) {\n      return isGrowing(component, slideConfig) === true || isShrinking(component, slideConfig) === true;\n    };\n    var toggleGrow = function (component, slideConfig, slideState) {\n      var f = slideState.isExpanded() ? doStartSmartShrink : doStartGrow;\n      f(component, slideConfig, slideState);\n    };\n\n    var SlidingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$2,\n        grow: grow,\n        shrink: shrink,\n        immediateShrink: immediateShrink,\n        hasGrown: hasGrown,\n        hasShrunk: hasShrunk,\n        isGrowing: isGrowing,\n        isShrinking: isShrinking,\n        isTransitioning: isTransitioning,\n        toggleGrow: toggleGrow,\n        disableTransitions: disableTransitions\n    });\n\n    var exhibit$6 = function (base, slideConfig, _slideState) {\n      var expanded = slideConfig.expanded;\n      return expanded ? nu$6({\n        classes: [slideConfig.openClass],\n        styles: {}\n      }) : nu$6({\n        classes: [slideConfig.closedClass],\n        styles: wrap$1(slideConfig.dimension.property, '0px')\n      });\n    };\n    var events$d = function (slideConfig, slideState) {\n      return derive([runOnSource(transitionend(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.propertyName === slideConfig.dimension.property) {\n            disableTransitions(component, slideConfig);\n            if (slideState.isExpanded()) {\n              remove$6(component.element, slideConfig.dimension.property);\n            }\n            var notify = slideState.isExpanded() ? slideConfig.onGrown : slideConfig.onShrunk;\n            notify(component);\n          }\n        })]);\n    };\n\n    var ActiveSliding = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        exhibit: exhibit$6,\n        events: events$d\n    });\n\n    var SlidingSchema = [\n      strict$1('closedClass'),\n      strict$1('openClass'),\n      strict$1('shrinkingClass'),\n      strict$1('growingClass'),\n      option('getAnimationRoot'),\n      onHandler('onShrunk'),\n      onHandler('onStartShrink'),\n      onHandler('onGrown'),\n      onHandler('onStartGrow'),\n      defaulted$1('expanded', false),\n      strictOf('dimension', choose$1('property', {\n        width: [\n          output('property', 'width'),\n          output('getDimension', function (elem) {\n            return get$8(elem) + 'px';\n          })\n        ],\n        height: [\n          output('property', 'height'),\n          output('getDimension', function (elem) {\n            return get$7(elem) + 'px';\n          })\n        ]\n      }))\n    ];\n\n    var init$9 = function (spec) {\n      var state = Cell(spec.expanded);\n      var readState = function () {\n        return 'expanded: ' + state.get();\n      };\n      return nu$5({\n        isExpanded: function () {\n          return state.get() === true;\n        },\n        isCollapsed: function () {\n          return state.get() === false;\n        },\n        setCollapsed: curry(state.set, false),\n        setExpanded: curry(state.set, true),\n        readState: readState\n      });\n    };\n\n    var SlidingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$9\n    });\n\n    var Sliding = create$1({\n      fields: SlidingSchema,\n      name: 'sliding',\n      active: ActiveSliding,\n      apis: SlidingApis,\n      state: SlidingState\n    });\n\n    var schema$p = constant([\n      markers([\n        'closedClass',\n        'openClass',\n        'shrinkingClass',\n        'growingClass',\n        'overflowToggledClass'\n      ]),\n      onHandler('onOpened'),\n      onHandler('onClosed')\n    ].concat(schema$l()));\n    var parts$b = constant([\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'primary'\n      }),\n      required({\n        factory: Toolbar,\n        schema: schema$k(),\n        name: 'overflow',\n        overrides: function (detail) {\n          return {\n            toolbarBehaviours: derive$1([\n              Sliding.config({\n                dimension: { property: 'height' },\n                closedClass: detail.markers.closedClass,\n                openClass: detail.markers.openClass,\n                shrinkingClass: detail.markers.shrinkingClass,\n                growingClass: detail.markers.growingClass,\n                onShrunk: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(function (button) {\n                    Toggling.off(button);\n                    Focusing.focus(button);\n                  });\n                  detail.onClosed(comp);\n                },\n                onGrown: function (comp) {\n                  Keying.focusIn(comp);\n                  detail.onOpened(comp);\n                },\n                onStartGrow: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Toggling.on);\n                }\n              }),\n              Keying.config({\n                mode: 'acyclic',\n                onEscape: function (comp) {\n                  getPart(comp, detail, 'overflow-button').each(Focusing.focus);\n                  return Optional.some(true);\n                }\n              })\n            ])\n          };\n        }\n      }),\n      external$1({\n        name: 'overflow-button',\n        overrides: function (detail) {\n          return {\n            buttonBehaviours: derive$1([Toggling.config({\n                toggleClass: detail.markers.overflowToggledClass,\n                aria: { mode: 'pressed' },\n                toggleOnExecute: false\n              })])\n          };\n        }\n      }),\n      external$1({ name: 'overflow-group' })\n    ]);\n\n    var isOpen$1 = function (toolbar, detail) {\n      return getPart(toolbar, detail, 'overflow').map(Sliding.hasGrown).getOr(false);\n    };\n    var toggleToolbar = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow-button').bind(function () {\n        return getPart(toolbar, detail, 'overflow');\n      }).each(function (overf) {\n        refresh$3(toolbar, detail);\n        Sliding.toggleGrow(overf);\n      });\n    };\n    var refresh$3 = function (toolbar, detail) {\n      getPart(toolbar, detail, 'overflow').each(function (overflow) {\n        refresh(toolbar, detail, function (groups) {\n          var builtGroups = map(groups, function (g) {\n            return premade$1(g);\n          });\n          Toolbar.setGroups(overflow, builtGroups);\n        });\n        getPart(toolbar, detail, 'overflow-button').each(function (button) {\n          if (Sliding.hasGrown(overflow)) {\n            Toggling.on(button);\n          }\n        });\n        Sliding.refresh(overflow);\n      });\n    };\n    var factory$d = function (detail, components, spec, externals) {\n      var toolbarToggleEvent = 'alloy.toolbar.toggle';\n      var doSetGroups = function (toolbar, groups) {\n        var built = map(groups, toolbar.getSystem().build);\n        detail.builtGroups.set(built);\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: augment(detail.splitToolbarBehaviours, [\n          Coupling.config({\n            others: {\n              overflowGroup: function (toolbar) {\n                return ToolbarGroup.sketch(__assign(__assign({}, externals['overflow-group']()), {\n                  items: [Button.sketch(__assign(__assign({}, externals['overflow-button']()), {\n                      action: function (_button) {\n                        emit(toolbar, toolbarToggleEvent);\n                      }\n                    }))]\n                }));\n              }\n            }\n          }),\n          config('toolbar-toggle-events', [run(toolbarToggleEvent, function (toolbar) {\n              toggleToolbar(toolbar, detail);\n            })])\n        ]),\n        apis: {\n          setGroups: function (toolbar, groups) {\n            doSetGroups(toolbar, groups);\n            refresh$3(toolbar, detail);\n          },\n          refresh: function (toolbar) {\n            return refresh$3(toolbar, detail);\n          },\n          toggle: function (toolbar) {\n            return toggleToolbar(toolbar, detail);\n          },\n          isOpen: function (toolbar) {\n            return isOpen$1(toolbar, detail);\n          }\n        },\n        domModification: { attributes: { role: 'group' } }\n      };\n    };\n    var SplitSlidingToolbar = composite$1({\n      name: 'SplitSlidingToolbar',\n      configFields: schema$p(),\n      partFields: parts$b(),\n      factory: factory$d,\n      apis: {\n        setGroups: function (apis, toolbar, groups) {\n          apis.setGroups(toolbar, groups);\n        },\n        refresh: function (apis, toolbar) {\n          apis.refresh(toolbar);\n        },\n        toggle: function (apis, toolbar) {\n          apis.toggle(toolbar);\n        },\n        isOpen: function (apis, toolbar) {\n          return apis.isOpen(toolbar);\n        }\n      }\n    });\n\n    var toolbarHeightChange = constant(generate$1('toolbar-height-change'));\n\n    var renderToolbarGroupCommon = function (toolbarGroup) {\n      var attributes = toolbarGroup.title.fold(function () {\n        return {};\n      }, function (title) {\n        return { attributes: { title: title } };\n      });\n      return {\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-toolbar__group']\n        }, attributes),\n        components: [ToolbarGroup.parts.items({})],\n        items: toolbarGroup.items,\n        markers: { itemSelector: '*:not(.tox-split-button) > .tox-tbtn:not([disabled]), ' + '.tox-split-button:not([disabled]), ' + '.tox-toolbar-nav-js:not([disabled])' },\n        tgroupBehaviours: derive$1([\n          Tabstopping.config({}),\n          Focusing.config({})\n        ])\n      };\n    };\n    var renderToolbarGroup = function (toolbarGroup) {\n      return ToolbarGroup.sketch(renderToolbarGroupCommon(toolbarGroup));\n    };\n    var getToolbarbehaviours = function (toolbarSpec, modeName) {\n      var onAttached = runOnAttached(function (component) {\n        var groups = map(toolbarSpec.initGroups, renderToolbarGroup);\n        Toolbar.setGroups(component, groups);\n      });\n      return derive$1([\n        DisablingConfigs.toolbarButton(toolbarSpec.providers.isDisabled),\n        receivingConfig(),\n        Keying.config({\n          mode: modeName,\n          onEscape: toolbarSpec.onEscape,\n          selector: '.tox-toolbar__group'\n        }),\n        config('toolbar-events', [onAttached])\n      ]);\n    };\n    var renderMoreToolbarCommon = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return {\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        parts: {\n          'overflow-group': renderToolbarGroupCommon({\n            title: Optional.none(),\n            items: []\n          }),\n          'overflow-button': renderIconButtonSpec({\n            name: 'more',\n            icon: Optional.some('more-drawer'),\n            disabled: false,\n            tooltip: Optional.some('More...'),\n            primary: false,\n            borderless: false\n          }, Optional.none(), toolbarSpec.providers)\n        },\n        splitToolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      };\n    };\n    var renderFloatingMoreToolbar = function (toolbarSpec) {\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      var overflowXOffset = 4;\n      var primary = SplitFloatingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      return SplitFloatingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        lazySink: toolbarSpec.getSink,\n        getOverflowBounds: function () {\n          var headerElem = toolbarSpec.moreDrawerData.lazyHeader().element;\n          var headerBounds = absolute$1(headerElem);\n          var docElem = documentElement(headerElem);\n          var docBounds = absolute$1(docElem);\n          var height = Math.max(docElem.dom.scrollHeight, docBounds.height);\n          return bounds$1(headerBounds.x + overflowXOffset, docBounds.y, headerBounds.width - overflowXOffset * 2, height);\n        },\n        parts: __assign(__assign({}, baseSpec.parts), {\n          overflow: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: toolbarSpec.attributes\n            }\n          }\n        }),\n        components: [primary],\n        markers: { overflowToggledClass: 'tox-tbtn--enabled' }\n      }));\n    };\n    var renderSlidingMoreToolbar = function (toolbarSpec) {\n      var primary = SplitSlidingToolbar.parts.primary({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__primary']\n        }\n      });\n      var overflow = SplitSlidingToolbar.parts.overflow({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar__overflow']\n        }\n      });\n      var baseSpec = renderMoreToolbarCommon(toolbarSpec);\n      return SplitSlidingToolbar.sketch(__assign(__assign({}, baseSpec), {\n        components: [\n          primary,\n          overflow\n        ],\n        markers: {\n          openClass: 'tox-toolbar__overflow--open',\n          closedClass: 'tox-toolbar__overflow--closed',\n          growingClass: 'tox-toolbar__overflow--growing',\n          shrinkingClass: 'tox-toolbar__overflow--shrinking',\n          overflowToggledClass: 'tox-tbtn--enabled'\n        },\n        onOpened: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'opened' });\n        },\n        onClosed: function (comp) {\n          comp.getSystem().broadcastOn([toolbarHeightChange()], { type: 'closed' });\n        }\n      }));\n    };\n    var renderToolbar = function (toolbarSpec) {\n      var modeName = toolbarSpec.cyclicKeying ? 'cyclic' : 'acyclic';\n      return Toolbar.sketch({\n        uid: toolbarSpec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar'].concat(toolbarSpec.type === ToolbarMode.scrolling ? ['tox-toolbar--scrolling'] : [])\n        },\n        components: [Toolbar.parts.groups({})],\n        toolbarBehaviours: getToolbarbehaviours(toolbarSpec, modeName)\n      });\n    };\n\n    var groupToolbarButtonSchema = objOf([\n      strictString('type'),\n      strictOf('items', oneOf([\n        arrOfObj$1([\n          strictString('name'),\n          strictArrayOf('items', string)\n        ]),\n        string\n      ]))\n    ].concat(baseToolbarButtonFields));\n    var createGroupToolbarButton = function (spec) {\n      return asRaw('GroupToolbarButton', groupToolbarButtonSchema, spec);\n    };\n\n    var baseMenuButtonFields = [\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ];\n\n    var MenuButtonSchema = objOf(__spreadArrays([strictString('type')], baseMenuButtonFields));\n    var createMenuButton = function (spec) {\n      return asRaw('menubutton', MenuButtonSchema, spec);\n    };\n\n    var splitButtonSchema = objOf([\n      strictString('type'),\n      optionString('tooltip'),\n      optionString('icon'),\n      optionString('text'),\n      optionFunction('select'),\n      strictFunction('fetch'),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      }),\n      defaultedStringEnum('presets', 'normal', [\n        'normal',\n        'color',\n        'listpreview'\n      ]),\n      defaulted$1('columns', 1),\n      strictFunction('onAction'),\n      strictFunction('onItemAction')\n    ]);\n    var createSplitButton = function (spec) {\n      return asRaw('SplitButton', splitButtonSchema, spec);\n    };\n\n    var events$e = function (reflectingConfig, reflectingState) {\n      var update = function (component, data) {\n        reflectingConfig.updateState.each(function (updateState) {\n          var newState = updateState(component, data);\n          reflectingState.set(newState);\n        });\n        reflectingConfig.renderComponents.each(function (renderComponents) {\n          var newComponents = renderComponents(data, reflectingState.get());\n          var newChildren = map(newComponents, component.getSystem().build);\n          replaceChildren(component, newChildren);\n        });\n      };\n      return derive([\n        run(receive(), function (component, message) {\n          var receivingData = message;\n          if (!receivingData.universal) {\n            var channel = reflectingConfig.channel;\n            if (contains(receivingData.channels, channel)) {\n              update(component, receivingData.data);\n            }\n          }\n        }),\n        runOnAttached(function (comp, _se) {\n          reflectingConfig.initialData.each(function (rawData) {\n            update(comp, rawData);\n          });\n        })\n      ]);\n    };\n\n    var ActiveReflecting = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$e\n    });\n\n    var getState$2 = function (component, replaceConfig, reflectState) {\n      return reflectState;\n    };\n\n    var ReflectingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getState: getState$2\n    });\n\n    var ReflectingSchema = [\n      strict$1('channel'),\n      option('renderComponents'),\n      option('updateState'),\n      option('initialData')\n    ];\n\n    var init$a = function () {\n      var cell = Cell(Optional.none());\n      var set = function (optS) {\n        return cell.set(optS);\n      };\n      var clear = function () {\n        return cell.set(Optional.none());\n      };\n      var get = function () {\n        return cell.get();\n      };\n      var readState = function () {\n        return cell.get().fold(function () {\n          return 'none';\n        }, function (x) {\n          return x;\n        });\n      };\n      return {\n        readState: readState,\n        get: get,\n        set: set,\n        clear: clear\n      };\n    };\n\n    var ReflectingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$a\n    });\n\n    var Reflecting = create$1({\n      fields: ReflectingSchema,\n      name: 'reflecting',\n      active: ActiveReflecting,\n      apis: ReflectingApis,\n      state: ReflectingState\n    });\n\n    var schema$q = constant([\n      strict$1('toggleClass'),\n      strict$1('fetch'),\n      onStrictHandler('onExecute'),\n      defaulted$1('getHotspot', Optional.some),\n      defaulted$1('getAnchorOverrides', constant({})),\n      schema$1(),\n      onStrictHandler('onItemExecute'),\n      option('lazySink'),\n      strict$1('dom'),\n      onHandler('onOpen'),\n      field$1('splitDropdownBehaviours', [\n        Coupling,\n        Keying,\n        Focusing\n      ]),\n      defaulted$1('matchWidth', false),\n      defaulted$1('useMinWidth', false),\n      defaulted$1('eventOrder', {}),\n      option('role')\n    ].concat(sandboxFields()));\n    var arrowPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'arrow',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (arrow) {\n            arrow.getSystem().getByUid(detail.uid).each(emitExecute);\n          },\n          buttonBehaviours: derive$1([Toggling.config({\n              toggleOnExecute: false,\n              toggleClass: detail.toggleClass\n            })])\n        };\n      }\n    });\n    var buttonPart = required({\n      factory: Button,\n      schema: [strict$1('dom')],\n      name: 'button',\n      defaults: function () {\n        return { buttonBehaviours: derive$1([Focusing.revoke()]) };\n      },\n      overrides: function (detail) {\n        return {\n          dom: {\n            tag: 'span',\n            attributes: { role: 'presentation' }\n          },\n          action: function (btn) {\n            btn.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n              detail.onExecute(splitDropdown, btn);\n            });\n          }\n        };\n      }\n    });\n    var parts$c = constant([\n      arrowPart,\n      buttonPart,\n      optional({\n        factory: {\n          sketch: function (spec) {\n            return {\n              uid: spec.uid,\n              dom: {\n                tag: 'span',\n                styles: { display: 'none' },\n                attributes: { 'aria-hidden': 'true' },\n                innerHtml: spec.text\n              }\n            };\n          }\n        },\n        schema: [strict$1('text')],\n        name: 'aria-descriptor'\n      }),\n      external$1({\n        schema: [tieredMenuMarkers()],\n        name: 'menu',\n        defaults: function (detail) {\n          return {\n            onExecute: function (tmenu, item) {\n              tmenu.getSystem().getByUid(detail.uid).each(function (splitDropdown) {\n                detail.onItemExecute(splitDropdown, tmenu, item);\n              });\n            }\n          };\n        }\n      }),\n      partType()\n    ]);\n\n    var factory$e = function (detail, components, spec, externals) {\n      var _a;\n      var switchToMenu = function (sandbox) {\n        Composing.getCurrent(sandbox).each(function (current) {\n          Highlighting.highlightFirst(current);\n          Keying.focusIn(current);\n        });\n      };\n      var action = function (component) {\n        var onOpenSync = switchToMenu;\n        togglePopup(detail, function (x) {\n          return x;\n        }, component, externals, onOpenSync, HighlightOnOpen.HighlightFirst).get(noop);\n      };\n      var openMenu = function (comp) {\n        action(comp);\n        return Optional.some(true);\n      };\n      var executeOnButton = function (comp) {\n        var button = getPartOrDie(comp, detail, 'button');\n        emitExecute(button);\n        return Optional.some(true);\n      };\n      var buttonEvents = __assign(__assign({}, derive([runOnAttached(function (component, _simulatedEvent) {\n          var ariaDescriptor = getPart(component, detail, 'aria-descriptor');\n          ariaDescriptor.each(function (descriptor) {\n            var descriptorId = generate$1('aria');\n            set$1(descriptor.element, 'id', descriptorId);\n            set$1(component.element, 'aria-describedby', descriptorId);\n          });\n        })])), events$7(Optional.some(action)));\n      var apis = {\n        repositionMenus: function (comp) {\n          if (Toggling.isOn(comp)) {\n            repositionMenus(comp);\n          }\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        eventOrder: __assign(__assign({}, detail.eventOrder), (_a = {}, _a[execute()] = [\n          'disabling',\n          'toggling',\n          'alloy.base.behaviour'\n        ], _a)),\n        events: buttonEvents,\n        behaviours: augment(detail.splitDropdownBehaviours, [\n          Coupling.config({\n            others: {\n              sandbox: function (hotspot) {\n                var arrow = getPartOrDie(hotspot, detail, 'arrow');\n                var extras = {\n                  onOpen: function () {\n                    Toggling.on(arrow);\n                    Toggling.on(hotspot);\n                  },\n                  onClose: function () {\n                    Toggling.off(arrow);\n                    Toggling.off(hotspot);\n                  }\n                };\n                return makeSandbox(detail, hotspot, extras);\n              }\n            }\n          }),\n          Keying.config({\n            mode: 'special',\n            onSpace: executeOnButton,\n            onEnter: executeOnButton,\n            onDown: openMenu\n          }),\n          Focusing.config({}),\n          Toggling.config({\n            toggleOnExecute: false,\n            aria: { mode: 'expanded' }\n          })\n        ]),\n        domModification: {\n          attributes: {\n            'role': detail.role.getOr('button'),\n            'aria-haspopup': true\n          }\n        }\n      };\n    };\n    var SplitDropdown = composite$1({\n      name: 'SplitDropdown',\n      configFields: schema$q(),\n      partFields: parts$c(),\n      factory: factory$e,\n      apis: {\n        repositionMenus: function (apis, comp) {\n          return apis.repositionMenus(comp);\n        }\n      }\n    });\n\n    var getButtonApi = function (component) {\n      return {\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getToggleApi = function (component) {\n      return {\n        setActive: function (state) {\n          Toggling.set(component, state);\n        },\n        isActive: function () {\n          return Toggling.isOn(component);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(component);\n        },\n        setDisabled: function (state) {\n          return Disabling.set(component, state);\n        }\n      };\n    };\n    var getTooltipAttributes = function (tooltip, providersBackstage) {\n      return tooltip.map(function (tooltip) {\n        return {\n          'aria-label': providersBackstage.translate(tooltip),\n          'title': providersBackstage.translate(tooltip)\n        };\n      }).getOr({});\n    };\n    var focusButtonEvent = generate$1('focus-button');\n    var rtlIcon$1 = [\n      'checklist',\n      'ordered-list'\n    ];\n    var rtlTransform$1 = [\n      'indent',\n      'outdent',\n      'table-insert-column-after',\n      'table-insert-column-before',\n      'unordered-list'\n    ];\n    var renderCommonStructure = function (icon, text, tooltip, receiver, behaviours, providersBackstage) {\n      var _d;\n      var getIconName = function (iconName) {\n        return global$6.isRtl() && contains(rtlIcon$1, iconName) ? iconName + '-rtl' : iconName;\n      };\n      var needsRtlClass = global$6.isRtl() && icon.exists(function (name) {\n        return contains(rtlTransform$1, name);\n      });\n      return {\n        dom: {\n          tag: 'button',\n          classes: ['tox-tbtn'].concat(text.isSome() ? ['tox-tbtn--select'] : []).concat(needsRtlClass ? ['tox-tbtn__icon-rtl'] : []),\n          attributes: getTooltipAttributes(tooltip, providersBackstage)\n        },\n        components: componentRenderPipeline([\n          icon.map(function (iconName) {\n            return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n          }),\n          text.map(function (text) {\n            return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n          })\n        ]),\n        eventOrder: (_d = {}, _d[mousedown()] = [\n          'focusing',\n          'alloy.base.behaviour',\n          'common-button-display-events'\n        ], _d),\n        buttonBehaviours: derive$1([\n          DisablingConfigs.toolbarButton(providersBackstage.isDisabled),\n          receivingConfig(),\n          config('common-button-display-events', [run(mousedown(), function (button, se) {\n              se.event.prevent();\n              emit(button, focusButtonEvent);\n            })])\n        ].concat(receiver.map(function (r) {\n          return Reflecting.config({\n            channel: r,\n            initialData: {\n              icon: icon,\n              text: text\n            },\n            renderComponents: function (data, _state) {\n              return componentRenderPipeline([\n                data.icon.map(function (iconName) {\n                  return renderIconFromPack(getIconName(iconName), providersBackstage.icons);\n                }),\n                data.text.map(function (text) {\n                  return renderLabel$1(text, 'tox-tbtn', providersBackstage);\n                })\n              ]);\n            }\n          });\n        }).toArray()).concat(behaviours.getOr([])))\n      };\n    };\n    var renderFloatingToolbarButton = function (spec, backstage, identifyButtons, attributes) {\n      var sharedBackstage = backstage.shared;\n      return FloatingToolbarButton.sketch({\n        lazySink: sharedBackstage.getSink,\n        fetch: function () {\n          return Future.nu(function (resolve) {\n            resolve(map(identifyButtons(spec.items), renderToolbarGroup));\n          });\n        },\n        markers: { toggledClass: 'tox-tbtn--enabled' },\n        parts: {\n          button: renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), sharedBackstage.providers),\n          toolbar: {\n            dom: {\n              tag: 'div',\n              classes: ['tox-toolbar__overflow'],\n              attributes: attributes\n            }\n          }\n        }\n      });\n    };\n    var renderCommonToolbarButton = function (spec, specialisation, providersBackstage) {\n      var editorOffCell = Cell(noop);\n      var structure = renderCommonStructure(spec.icon, spec.text, spec.tooltip, Optional.none(), Optional.none(), providersBackstage);\n      return Button.sketch({\n        dom: structure.dom,\n        components: structure.components,\n        eventOrder: toolbarButtonEventOrder,\n        buttonBehaviours: derive$1([\n          config('toolbar-button-events', [\n            onToolbarButtonExecute({\n              onAction: spec.onAction,\n              getApi: specialisation.getApi\n            }),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          DisablingConfigs.toolbarButton(function () {\n            return spec.disabled || providersBackstage.isDisabled();\n          }),\n          receivingConfig()\n        ].concat(specialisation.toolbarButtonBehaviours))\n      });\n    };\n    var renderToolbarButton = function (spec, providersBackstage) {\n      return renderToolbarButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [].concat(bonusEvents.length > 0 ? [config('toolbarButtonWith', bonusEvents)] : []),\n        getApi: getButtonApi,\n        onSetup: spec.onSetup\n      }, providersBackstage);\n    };\n    var renderToolbarToggleButton = function (spec, providersBackstage) {\n      return renderToolbarToggleButtonWith(spec, providersBackstage, []);\n    };\n    var renderToolbarToggleButtonWith = function (spec, providersBackstage, bonusEvents) {\n      return deepMerge(renderCommonToolbarButton(spec, {\n        toolbarButtonBehaviours: [\n          Replacing.config({}),\n          Toggling.config({\n            toggleClass: 'tox-tbtn--enabled',\n            aria: { mode: 'pressed' },\n            toggleOnExecute: false\n          })\n        ].concat(bonusEvents.length > 0 ? [config('toolbarToggleButtonWith', bonusEvents)] : []),\n        getApi: getToggleApi,\n        onSetup: spec.onSetup\n      }, providersBackstage));\n    };\n    var fetchChoices = function (getApi, spec, providersBackstage) {\n      return function (comp) {\n        return Future.nu(function (callback) {\n          return spec.fetch(callback);\n        }).map(function (items) {\n          return Optional.from(createTieredDataFrom(deepMerge(createPartialChoiceMenu(generate$1('menu-value'), items, function (value) {\n            spec.onItemAction(getApi(comp), value);\n          }, spec.columns, spec.presets, ItemResponse$1.CLOSE_ON_EXECUTE, spec.select.getOr(function () {\n            return false;\n          }), providersBackstage), {\n            movement: deriveMenuMovement(spec.columns, spec.presets),\n            menuBehaviours: SimpleBehaviours.unnamedEvents(spec.columns !== 'auto' ? [] : [runOnAttached(function (comp, _se) {\n                detectSize(comp, 4, classForPreset(spec.presets)).each(function (_d) {\n                  var numRows = _d.numRows, numColumns = _d.numColumns;\n                  Keying.setGridSize(comp, numRows, numColumns);\n                });\n              })])\n          })));\n        });\n      };\n    };\n    var renderSplitButton = function (spec, sharedBackstage) {\n      var _d;\n      var displayChannel = generate$1('channel-update-split-dropdown-display');\n      var getApi = function (comp) {\n        return {\n          isDisabled: function () {\n            return Disabling.isDisabled(comp);\n          },\n          setDisabled: function (state) {\n            return Disabling.set(comp, state);\n          },\n          setIconFill: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'fill', value);\n            });\n          },\n          setIconStroke: function (id, value) {\n            descendant$1(comp.element, 'svg path[id=\"' + id + '\"], rect[id=\"' + id + '\"]').each(function (underlinePath) {\n              set$1(underlinePath, 'stroke', value);\n            });\n          },\n          setActive: function (state) {\n            set$1(comp.element, 'aria-pressed', state);\n            descendant$1(comp.element, 'span').each(function (button) {\n              comp.getSystem().getByDom(button).each(function (buttonComp) {\n                return Toggling.set(buttonComp, state);\n              });\n            });\n          },\n          isActive: function () {\n            return descendant$1(comp.element, 'span').exists(function (button) {\n              return comp.getSystem().getByDom(button).exists(Toggling.isOn);\n            });\n          }\n        };\n      };\n      var editorOffCell = Cell(noop);\n      var specialisation = {\n        getApi: getApi,\n        onSetup: spec.onSetup\n      };\n      return SplitDropdown.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-split-button'],\n          attributes: __assign({ 'aria-pressed': false }, getTooltipAttributes(spec.tooltip, sharedBackstage.providers))\n        },\n        onExecute: function (button) {\n          spec.onAction(getApi(button));\n        },\n        onItemExecute: function (_a, _b, _c) {\n        },\n        splitDropdownBehaviours: derive$1([\n          DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n          receivingConfig(),\n          config('split-dropdown-events', [\n            run(focusButtonEvent, Focusing.focus),\n            onControlAttached(specialisation, editorOffCell),\n            onControlDetached(specialisation, editorOffCell)\n          ]),\n          Unselecting.config({})\n        ]),\n        eventOrder: (_d = {}, _d[attachedToDom()] = [\n          'alloy.base.behaviour',\n          'split-dropdown-events'\n        ], _d),\n        toggleClass: 'tox-tbtn--enabled',\n        lazySink: sharedBackstage.getSink,\n        fetch: fetchChoices(getApi, spec, sharedBackstage.providers),\n        parts: { menu: part(false, spec.columns, spec.presets) },\n        components: [\n          SplitDropdown.parts.button(renderCommonStructure(spec.icon, spec.text, Optional.none(), Optional.some(displayChannel), Optional.some([Toggling.config({\n              toggleClass: 'tox-tbtn--enabled',\n              toggleOnExecute: false\n            })]), sharedBackstage.providers)),\n          SplitDropdown.parts.arrow({\n            dom: {\n              tag: 'button',\n              classes: [\n                'tox-tbtn',\n                'tox-split-button__chevron'\n              ],\n              innerHtml: get$e('chevron-down', sharedBackstage.providers.icons)\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.splitButton(sharedBackstage.providers.isDisabled),\n              receivingConfig()\n            ])\n          }),\n          SplitDropdown.parts['aria-descriptor']({ text: sharedBackstage.providers.translate('To open the popup, press Shift+Enter') })\n        ]\n      });\n    };\n\n    var getFormApi = function (input) {\n      return {\n        hide: function () {\n          return emit(input, sandboxClose());\n        },\n        getValue: function () {\n          return Representing.getValue(input);\n        }\n      };\n    };\n    var runOnExecute$1 = function (memInput, original) {\n      return run(internalToolbarButtonExecute, function (comp, se) {\n        var input = memInput.get(comp);\n        var formApi = getFormApi(input);\n        original.onAction(formApi, se.event.buttonApi);\n      });\n    };\n    var renderContextButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToolbarButton(__assign(__assign({}, rest), {\n        type: 'button',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var renderContextToggleButton = function (memInput, button, extras) {\n      var _a = button.original, primary = _a.primary, rest = __rest(_a, ['primary']);\n      var bridged = getOrDie(createToggleButton(__assign(__assign({}, rest), {\n        type: 'togglebutton',\n        onAction: function () {\n        }\n      })));\n      return renderToolbarToggleButtonWith(bridged, extras.backstage.shared.providers, [runOnExecute$1(memInput, button)]);\n    };\n    var generateOne$1 = function (memInput, button, providersBackstage) {\n      var extras = { backstage: { shared: { providers: providersBackstage } } };\n      if (button.type === 'contextformtogglebutton') {\n        return renderContextToggleButton(memInput, button, extras);\n      } else {\n        return renderContextButton(memInput, button, extras);\n      }\n    };\n    var generate$7 = function (memInput, buttons, providersBackstage) {\n      var mementos = map(buttons, function (button) {\n        return record(generateOne$1(memInput, button, providersBackstage));\n      });\n      var asSpecs = function () {\n        return map(mementos, function (mem) {\n          return mem.asSpec();\n        });\n      };\n      var findPrimary = function (compInSystem) {\n        return findMap(buttons, function (button, i) {\n          if (button.primary) {\n            return Optional.from(mementos[i]).bind(function (mem) {\n              return mem.getOpt(compInSystem);\n            }).filter(not(Disabling.isDisabled));\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      return {\n        asSpecs: asSpecs,\n        findPrimary: findPrimary\n      };\n    };\n\n    var buildInitGroups = function (ctx, providers) {\n      var inputAttributes = ctx.label.fold(function () {\n        return {};\n      }, function (label) {\n        return { 'aria-label': label };\n      });\n      var memInput = record(Input.sketch({\n        inputClasses: [\n          'tox-toolbar-textfield',\n          'tox-toolbar-nav-js'\n        ],\n        data: ctx.initValue(),\n        inputAttributes: inputAttributes,\n        selectOnFocus: true,\n        inputBehaviours: derive$1([Keying.config({\n            mode: 'special',\n            onEnter: function (input) {\n              return commands.findPrimary(input).map(function (primary) {\n                emitExecute(primary);\n                return true;\n              });\n            },\n            onLeft: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            },\n            onRight: function (comp, se) {\n              se.cut();\n              return Optional.none();\n            }\n          })])\n      }));\n      var commands = generate$7(memInput, ctx.commands, providers);\n      return [\n        {\n          title: Optional.none(),\n          items: [memInput.asSpec()]\n        },\n        {\n          title: Optional.none(),\n          items: commands.asSpecs()\n        }\n      ];\n    };\n    var renderContextForm = function (toolbarType, ctx, providers) {\n      return renderToolbar({\n        type: toolbarType,\n        uid: generate$1('context-toolbar'),\n        initGroups: buildInitGroups(ctx, providers),\n        onEscape: Optional.none,\n        cyclicKeying: true,\n        providers: providers\n      });\n    };\n    var ContextForm = {\n      renderContextForm: renderContextForm,\n      buildInitGroups: buildInitGroups\n    };\n\n    var getHorizontalBounds = function (contentAreaBox, viewportBounds) {\n      var x = Math.max(viewportBounds.x, contentAreaBox.x);\n      var contentBoxWidth = contentAreaBox.right - x;\n      var maxViewportWidth = viewportBounds.width - (x - viewportBounds.x);\n      var width = Math.min(contentBoxWidth, maxViewportWidth);\n      return {\n        x: x,\n        width: width\n      };\n    };\n    var getVerticalBounds = function (editor, contentAreaBox, viewportBounds, isToolbarLocationTop) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var header = descendant$1(container, '.tox-editor-header').getOr(container);\n      var headerBox = box(header);\n      var isToolbarBelowContentArea = headerBox.y >= contentAreaBox.bottom;\n      var isToolbarAbove = isToolbarLocationTop && !isToolbarBelowContentArea;\n      if (editor.inline && isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: viewportBounds.bottom\n        };\n      }\n      if (editor.inline && !isToolbarAbove) {\n        return {\n          y: viewportBounds.y,\n          bottom: Math.min(headerBox.y, viewportBounds.bottom)\n        };\n      }\n      var containerBounds = box(container);\n      if (isToolbarAbove) {\n        return {\n          y: Math.max(headerBox.bottom, viewportBounds.y),\n          bottom: Math.min(containerBounds.bottom, viewportBounds.bottom)\n        };\n      }\n      return {\n        y: Math.max(containerBounds.y, viewportBounds.y),\n        bottom: Math.min(headerBox.y, viewportBounds.bottom)\n      };\n    };\n    var getContextToolbarBounds = function (editor, sharedBackstage) {\n      var viewportBounds = getBounds(window);\n      var contentAreaBox = box(SugarElement.fromDom(editor.getContentAreaContainer()));\n      var toolbarOrMenubarEnabled = isMenubarEnabled(editor) || isToolbarEnabled(editor) || isMultipleToolbars(editor);\n      var _a = getHorizontalBounds(contentAreaBox, viewportBounds), x = _a.x, width = _a.width;\n      if (editor.inline && !toolbarOrMenubarEnabled) {\n        return bounds$1(x, viewportBounds.y, width, viewportBounds.height);\n      } else {\n        var isToolbarTop = sharedBackstage.header.isPositionedAtTop();\n        var _b = getVerticalBounds(editor, contentAreaBox, viewportBounds, isToolbarTop), y = _b.y, bottom = _b.bottom;\n        return bounds$1(x, y, width, bottom - y);\n      }\n    };\n\n    var matchTargetWith = function (elem, candidates) {\n      var ctxs = filter(candidates, function (toolbarApi) {\n        return toolbarApi.predicate(elem.dom);\n      });\n      var _a = partition(ctxs, function (t) {\n          return t.type === 'contexttoolbar';\n        }), pass = _a.pass, fail = _a.fail;\n      return {\n        contextToolbars: pass,\n        contextForms: fail\n      };\n    };\n    var filterByPositionForStartNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var doesPositionExist = function (value) {\n          return exists(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var filterToolbarsByPosition = function (value) {\n          return filter(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var hasSelectionToolbars = doesPositionExist('selection');\n        var hasNodeToolbars = doesPositionExist('node');\n        if (hasSelectionToolbars || hasNodeToolbars) {\n          if (hasNodeToolbars && hasSelectionToolbars) {\n            var nodeToolbars = filterToolbarsByPosition('node');\n            var selectionToolbars = map(filterToolbarsByPosition('selection'), function (t) {\n              return __assign(__assign({}, t), { position: 'node' });\n            });\n            return nodeToolbars.concat(selectionToolbars);\n          } else {\n            return hasSelectionToolbars ? filterToolbarsByPosition('selection') : filterToolbarsByPosition('node');\n          }\n        } else {\n          return filterToolbarsByPosition('line');\n        }\n      }\n    };\n    var filterByPositionForAncestorNode = function (toolbars) {\n      if (toolbars.length <= 1) {\n        return toolbars;\n      } else {\n        var findPosition_1 = function (value) {\n          return find(toolbars, function (t) {\n            return t.position === value;\n          });\n        };\n        var basePosition = findPosition_1('selection').orThunk(function () {\n          return findPosition_1('node');\n        }).orThunk(function () {\n          return findPosition_1('line');\n        }).map(function (t) {\n          return t.position;\n        });\n        return basePosition.fold(function () {\n          return [];\n        }, function (pos) {\n          return filter(toolbars, function (t) {\n            return t.position === pos;\n          });\n        });\n      }\n    };\n    var matchStartNode = function (elem, nodeCandidates, editorCandidates) {\n      var nodeMatches = matchTargetWith(elem, nodeCandidates);\n      if (nodeMatches.contextForms.length > 0) {\n        return Optional.some({\n          elem: elem,\n          toolbars: [nodeMatches.contextForms[0]]\n        });\n      } else {\n        var editorMatches = matchTargetWith(elem, editorCandidates);\n        if (editorMatches.contextForms.length > 0) {\n          return Optional.some({\n            elem: elem,\n            toolbars: [editorMatches.contextForms[0]]\n          });\n        } else if (nodeMatches.contextToolbars.length > 0 || editorMatches.contextToolbars.length > 0) {\n          var toolbars = filterByPositionForStartNode(nodeMatches.contextToolbars.concat(editorMatches.contextToolbars));\n          return Optional.some({\n            elem: elem,\n            toolbars: toolbars\n          });\n        } else {\n          return Optional.none();\n        }\n      }\n    };\n    var matchAncestor = function (isRoot, startNode, scopes) {\n      if (isRoot(startNode)) {\n        return Optional.none();\n      } else {\n        return ancestor(startNode, function (ancestorElem) {\n          var _a = matchTargetWith(ancestorElem, scopes.inNodeScope), contextToolbars = _a.contextToolbars, contextForms = _a.contextForms;\n          var toolbars = contextForms.length > 0 ? contextForms : filterByPositionForAncestorNode(contextToolbars);\n          return toolbars.length > 0 ? Optional.some({\n            elem: ancestorElem,\n            toolbars: toolbars\n          }) : Optional.none();\n        }, isRoot);\n      }\n    };\n    var lookup$1 = function (scopes, editor) {\n      var rootElem = SugarElement.fromDom(editor.getBody());\n      var isRoot = function (elem) {\n        return eq$1(elem, rootElem);\n      };\n      var isOutsideRoot = function (startNode) {\n        return !isRoot(startNode) && !contains$2(rootElem, startNode);\n      };\n      var startNode = SugarElement.fromDom(editor.selection.getNode());\n      if (isOutsideRoot(startNode)) {\n        return Optional.none();\n      }\n      return matchStartNode(startNode, scopes.inNodeScope, scopes.inEditorScope).orThunk(function () {\n        return matchAncestor(isRoot, startNode, scopes);\n      });\n    };\n\n    var categorise = function (contextToolbars, navigate) {\n      var forms = {};\n      var inNodeScope = [];\n      var inEditorScope = [];\n      var formNavigators = {};\n      var lookupTable = {};\n      var registerForm = function (key, toolbarSpec) {\n        var contextForm = getOrDie(createContextForm(toolbarSpec));\n        forms[key] = contextForm;\n        contextForm.launch.map(function (launch) {\n          formNavigators['form:' + key + ''] = __assign(__assign({}, toolbarSpec.launch), {\n            type: launch.type === 'contextformtogglebutton' ? 'togglebutton' : 'button',\n            onAction: function () {\n              navigate(contextForm);\n            }\n          });\n        });\n        if (contextForm.scope === 'editor') {\n          inEditorScope.push(contextForm);\n        } else {\n          inNodeScope.push(contextForm);\n        }\n        lookupTable[key] = contextForm;\n      };\n      var registerToolbar = function (key, toolbarSpec) {\n        createContextToolbar(toolbarSpec).each(function (contextToolbar) {\n          if (toolbarSpec.scope === 'editor') {\n            inEditorScope.push(contextToolbar);\n          } else {\n            inNodeScope.push(contextToolbar);\n          }\n          lookupTable[key] = contextToolbar;\n        });\n      };\n      var keys$1 = keys(contextToolbars);\n      each(keys$1, function (key) {\n        var toolbarApi = contextToolbars[key];\n        if (toolbarApi.type === 'contextform') {\n          registerForm(key, toolbarApi);\n        } else if (toolbarApi.type === 'contexttoolbar') {\n          registerToolbar(key, toolbarApi);\n        }\n      });\n      return {\n        forms: forms,\n        inNodeScope: inNodeScope,\n        inEditorScope: inEditorScope,\n        lookupTable: lookupTable,\n        formNavigators: formNavigators\n      };\n    };\n\n    var forwardSlideEvent = generate$1('forward-slide');\n    var backSlideEvent = generate$1('backward-slide');\n    var changeSlideEvent = generate$1('change-slide-event');\n    var resizingClass = 'tox-pop--resizing';\n    var renderContextToolbar = function (spec) {\n      var stack = Cell([]);\n      return InlineView.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-pop']\n        },\n        fireDismissalEventInstead: { event: 'doNotDismissYet' },\n        onShow: function (comp) {\n          stack.set([]);\n          InlineView.getContent(comp).each(function (c) {\n            remove$6(c.element, 'visibility');\n          });\n          remove$4(comp.element, resizingClass);\n          remove$6(comp.element, 'width');\n        },\n        inlineBehaviours: derive$1([\n          config('context-toolbar-events', [\n            runOnSource(transitionend(), function (comp, _se) {\n              remove$4(comp.element, resizingClass);\n              remove$6(comp.element, 'width');\n            }),\n            run(changeSlideEvent, function (comp, se) {\n              remove$6(comp.element, 'width');\n              var currentWidth = get$8(comp.element);\n              InlineView.setContent(comp, se.event.contents);\n              add$2(comp.element, resizingClass);\n              var newWidth = get$8(comp.element);\n              set$2(comp.element, 'width', currentWidth + 'px');\n              InlineView.getContent(comp).each(function (newContents) {\n                se.event.focus.bind(function (f) {\n                  focus$1(f);\n                  return search(comp.element);\n                }).orThunk(function () {\n                  Keying.focusIn(newContents);\n                  return active();\n                });\n              });\n              global$2.setTimeout(function () {\n                set$2(comp.element, 'width', newWidth + 'px');\n              }, 0);\n            }),\n            run(forwardSlideEvent, function (comp, se) {\n              InlineView.getContent(comp).each(function (oldContents) {\n                stack.set(stack.get().concat([{\n                    bar: oldContents,\n                    focus: active()\n                  }]));\n              });\n              emitWith(comp, changeSlideEvent, {\n                contents: se.event.forwardContents,\n                focus: Optional.none()\n              });\n            }),\n            run(backSlideEvent, function (comp, _se) {\n              last(stack.get()).each(function (last) {\n                stack.set(stack.get().slice(0, stack.get().length - 1));\n                emitWith(comp, changeSlideEvent, {\n                  contents: premade$1(last.bar),\n                  focus: last.focus\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'special',\n            onEscape: function (comp) {\n              return last(stack.get()).fold(function () {\n                return spec.onEscape();\n              }, function (_) {\n                emit(comp, backSlideEvent);\n                return Optional.some(true);\n              });\n            }\n          })\n        ]),\n        lazySink: function () {\n          return Result.value(spec.sink);\n        }\n      });\n    };\n\n    var generateSelectItems = function (_editor, backstage, spec) {\n      var generateItem = function (rawItem, response, disabled, value) {\n        var translatedText = backstage.shared.providers.translate(rawItem.title);\n        if (rawItem.type === 'separator') {\n          return Optional.some({\n            type: 'separator',\n            text: translatedText\n          });\n        } else if (rawItem.type === 'submenu') {\n          var items = bind(rawItem.getStyleItems(), function (si) {\n            return validate(si, response, value);\n          });\n          if (response === 0 && items.length <= 0) {\n            return Optional.none();\n          } else {\n            return Optional.some({\n              type: 'nestedmenuitem',\n              text: translatedText,\n              disabled: items.length <= 0,\n              getSubmenuItems: function () {\n                return bind(rawItem.getStyleItems(), function (si) {\n                  return validate(si, response, value);\n                });\n              }\n            });\n          }\n        } else {\n          return Optional.some(__assign({\n            type: 'togglemenuitem',\n            text: translatedText,\n            icon: rawItem.icon,\n            active: rawItem.isSelected(value),\n            disabled: disabled,\n            onAction: spec.onAction(rawItem)\n          }, rawItem.getStylePreview().fold(function () {\n            return {};\n          }, function (preview) {\n            return { meta: { style: preview } };\n          })));\n        }\n      };\n      var validate = function (item, response, value) {\n        var invalid = item.type === 'formatter' && spec.isInvalid(item);\n        if (response === 0) {\n          return invalid ? [] : generateItem(item, response, false, value).toArray();\n        } else {\n          return generateItem(item, response, invalid, value).toArray();\n        }\n      };\n      var validateItems = function (preItems) {\n        var value = spec.getCurrentValue();\n        var response = spec.shouldHide ? 0 : 1;\n        return bind(preItems, function (item) {\n          return validate(item, response, value);\n        });\n      };\n      var getFetch = function (backstage, getStyleItems) {\n        return function (comp, callback) {\n          var preItems = getStyleItems();\n          var items = validateItems(preItems);\n          var menu = build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false);\n          callback(menu);\n        };\n      };\n      return {\n        validateItems: validateItems,\n        getFetch: getFetch\n      };\n    };\n    var createMenuItems = function (editor, backstage, spec) {\n      var dataset = spec.dataset;\n      var getStyleItems = dataset.type === 'basic' ? function () {\n        return map(dataset.data, function (d) {\n          return processBasic(d, spec.isSelectedFor, spec.getPreviewFor);\n        });\n      } : dataset.getData;\n      return {\n        items: generateSelectItems(editor, backstage, spec),\n        getStyleItems: getStyleItems\n      };\n    };\n    var createSelectButton = function (editor, backstage, spec) {\n      var _a = createMenuItems(editor, backstage, spec), items = _a.items, getStyleItems = _a.getStyleItems;\n      var getApi = function (comp) {\n        return {\n          getComponent: function () {\n            return comp;\n          }\n        };\n      };\n      var onSetup = function (api) {\n        spec.setInitialValue.each(function (f) {\n          return f(api.getComponent());\n        });\n        return spec.nodeChangeHandler.map(function (f) {\n          var handler = f(api.getComponent());\n          editor.on('NodeChange', handler);\n          return function () {\n            editor.off('NodeChange', handler);\n          };\n        }).getOr(noop);\n      };\n      return renderCommonDropdown({\n        text: spec.icon.isSome() ? Optional.none() : Optional.some(''),\n        icon: spec.icon,\n        tooltip: Optional.from(spec.tooltip),\n        role: Optional.none(),\n        fetch: items.getFetch(backstage, getStyleItems),\n        onSetup: onSetup,\n        getApi: getApi,\n        columns: 1,\n        presets: 'normal',\n        classes: spec.icon.isSome() ? [] : ['bespoke'],\n        dropdownBehaviours: []\n      }, 'tox-tbtn', backstage.shared);\n    };\n\n    var process = function (rawFormats) {\n      return map(rawFormats, function (item) {\n        var title = item, format = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          title = values[0];\n          format = values[1];\n        }\n        return {\n          title: title,\n          format: format\n        };\n      });\n    };\n    var buildBasicStaticDataset = function (data) {\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n    var Delimiter;\n    (function (Delimiter) {\n      Delimiter[Delimiter['SemiColon'] = 0] = 'SemiColon';\n      Delimiter[Delimiter['Space'] = 1] = 'Space';\n    }(Delimiter || (Delimiter = {})));\n    var split = function (rawFormats, delimiter) {\n      if (delimiter === Delimiter.SemiColon) {\n        return rawFormats.replace(/;$/, '').split(';');\n      } else {\n        return rawFormats.split(' ');\n      }\n    };\n    var buildBasicSettingsDataset = function (editor, settingName, defaults, delimiter) {\n      var rawFormats = editor.getParam(settingName, defaults, 'string');\n      var data = process(split(rawFormats, delimiter));\n      return {\n        type: 'basic',\n        data: data\n      };\n    };\n\n    var alignMenuItems = [\n      {\n        title: 'Left',\n        icon: 'align-left',\n        format: 'alignleft',\n        command: 'JustifyLeft'\n      },\n      {\n        title: 'Center',\n        icon: 'align-center',\n        format: 'aligncenter',\n        command: 'JustifyCenter'\n      },\n      {\n        title: 'Right',\n        icon: 'align-right',\n        format: 'alignright',\n        command: 'JustifyRight'\n      },\n      {\n        title: 'Justify',\n        icon: 'align-justify',\n        format: 'alignjustify',\n        command: 'JustifyFull'\n      }\n    ];\n    var getSpec = function (editor) {\n      var getMatchingValue = function () {\n        return find(alignMenuItems, function (item) {\n          return editor.formatter.match(item.format);\n        });\n      };\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (_format) {\n        return function () {\n          return Optional.none();\n        };\n      };\n      var updateSelectMenuIcon = function (comp) {\n        var match = getMatchingValue();\n        var alignment = match.fold(function () {\n          return 'left';\n        }, function (item) {\n          return item.title.toLowerCase();\n        });\n        emitWith(comp, updateMenuIcon, { icon: 'align-' + alignment });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuIcon(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuIcon(comp);\n      });\n      var dataset = buildBasicStaticDataset(alignMenuItems);\n      var onAction = function (rawItem) {\n        return function () {\n          return find(alignMenuItems, function (item) {\n            return item.format === rawItem.format;\n          }).each(function (item) {\n            return editor.execCommand(item.command);\n          });\n        };\n      };\n      return {\n        tooltip: 'Align',\n        icon: Optional.some('align-left'),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createAlignSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec(editor));\n    };\n    var alignSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec(editor));\n      editor.ui.registry.addNestedMenuItem('align', {\n        text: backstage.shared.providers.translate('Align'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n    var systemStackFonts = [\n      '-apple-system',\n      'Segoe UI',\n      'Roboto',\n      'Helvetica Neue',\n      'sans-serif'\n    ];\n    var splitFonts = function (fontFamily) {\n      var fonts = fontFamily.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        return font.replace(/^['\"]+|['\"]+$/g, '');\n      });\n    };\n    var isSystemFontStack = function (fontFamily) {\n      var matchesSystemStack = function () {\n        var fonts = splitFonts(fontFamily.toLowerCase());\n        return forall(systemStackFonts, function (font) {\n          return fonts.indexOf(font.toLowerCase()) > -1;\n        });\n      };\n      return fontFamily.indexOf('-apple-system') === 0 && matchesSystemStack();\n    };\n    var getSpec$1 = function (editor) {\n      var getMatchingValue = function () {\n        var getFirstFont = function (fontFamily) {\n          return fontFamily ? splitFonts(fontFamily)[0] : '';\n        };\n        var fontFamily = editor.queryCommandValue('FontName');\n        var items = dataset.data;\n        var font = fontFamily ? fontFamily.toLowerCase() : '';\n        var matchOpt = find(items, function (item) {\n          var format = item.format;\n          return format.toLowerCase() === font || getFirstFont(format).toLowerCase() === getFirstFont(font).toLowerCase();\n        }).orThunk(function () {\n          if (isSystemFontStack(font)) {\n            return Optional.from({\n              title: 'System Font',\n              format: font\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n        return {\n          matchOpt: matchOpt,\n          font: fontFamily\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = function (item) {\n        return function () {\n          return Optional.some({\n            tag: 'div',\n            styles: item.indexOf('dings') === -1 ? { 'font-family': item } : {}\n          });\n        };\n      };\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontName', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, font = _a.font;\n        var text = matchOpt.fold(function () {\n          return font;\n        }, function (item) {\n          return item.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'font_formats', defaultFontsFormats, Delimiter.SemiColon);\n      return {\n        tooltip: 'Fonts',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: getCurrentValue,\n        getPreviewFor: getPreviewFor,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$1(editor));\n    };\n    var fontSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$1(editor));\n      editor.ui.registry.addNestedMenuItem('fontformats', {\n        text: backstage.shared.providers.translate('Fonts'),\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n    var legacyFontSizes = {\n      '8pt': '1',\n      '10pt': '2',\n      '12pt': '3',\n      '14pt': '4',\n      '18pt': '5',\n      '24pt': '6',\n      '36pt': '7'\n    };\n    var keywordFontSizes = {\n      'xx-small': '7pt',\n      'x-small': '8pt',\n      'small': '10pt',\n      'medium': '12pt',\n      'large': '14pt',\n      'x-large': '18pt',\n      'xx-large': '24pt'\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      } else {\n        return get$1(keywordFontSizes, fontSize).getOr(fontSize);\n      }\n    };\n    var toLegacy = function (fontSize) {\n      return get$1(legacyFontSizes, fontSize).getOr('');\n    };\n    var getSpec$2 = function (editor) {\n      var getMatchingValue = function () {\n        var matchOpt = Optional.none();\n        var items = dataset.data;\n        var fontSize = editor.queryCommandValue('FontSize');\n        if (fontSize) {\n          var _loop_1 = function (precision) {\n            var pt = toPt(fontSize, precision);\n            var legacy = toLegacy(pt);\n            matchOpt = find(items, function (item) {\n              return item.format === fontSize || item.format === pt || item.format === legacy;\n            });\n          };\n          for (var precision = 3; matchOpt.isNone() && precision >= 0; precision--) {\n            _loop_1(precision);\n          }\n        }\n        return {\n          matchOpt: matchOpt,\n          size: fontSize\n        };\n      };\n      var isSelectedFor = function (item) {\n        return function (valueOpt) {\n          return valueOpt.exists(function (value) {\n            return value.format === item;\n          });\n        };\n      };\n      var getCurrentValue = function () {\n        var matchOpt = getMatchingValue().matchOpt;\n        return matchOpt;\n      };\n      var getPreviewFor = constant(Optional.none);\n      var onAction = function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('FontSize', false, rawItem.format);\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var _a = getMatchingValue(), matchOpt = _a.matchOpt, size = _a.size;\n        var text = matchOpt.fold(function () {\n          return size;\n        }, function (match) {\n          return match.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'fontsize_formats', defaultFontsizeFormats, Delimiter.Space);\n      return {\n        tooltip: 'Font sizes',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getPreviewFor: getPreviewFor,\n        getCurrentValue: getCurrentValue,\n        onAction: onAction,\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function () {\n          return false;\n        }\n      };\n    };\n    var createFontsizeSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$2(editor));\n    };\n    var fontsizeSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$2(editor));\n      editor.ui.registry.addNestedMenuItem('fontsizes', {\n        text: 'Font sizes',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var findNearest = function (editor, getStyles) {\n      var styles = getStyles();\n      var formats = map(styles, function (style) {\n        return style.format;\n      });\n      return Optional.from(editor.formatter.closest(formats)).bind(function (fmt) {\n        return find(styles, function (data) {\n          return data.format === fmt;\n        });\n      }).orThunk(function () {\n        return someIf(editor.formatter.match('p'), {\n          title: 'Paragraph',\n          format: 'p'\n        });\n      });\n    };\n\n    var revocable = function (doRevoke) {\n      var subject = Cell(Optional.none());\n      var revoke = function () {\n        return subject.get().each(doRevoke);\n      };\n      var clear = function () {\n        revoke();\n        subject.set(Optional.none());\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var set = function (s) {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear: clear,\n        isSet: isSet,\n        set: set\n      };\n    };\n    var destroyable = function () {\n      return revocable(function (s) {\n        return s.destroy();\n      });\n    };\n    var unbindable = function () {\n      return revocable(function (s) {\n        return s.unbind();\n      });\n    };\n    var value$3 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var onSetupFormatToggle = function (editor, name) {\n      return function (api) {\n        var boundCallback = unbindable();\n        var init = function () {\n          api.setActive(editor.formatter.match(name));\n          var binding = editor.formatter.formatChanged(name, api.setActive);\n          boundCallback.set(binding);\n        };\n        editor.initialized ? init() : editor.on('init', init);\n        return boundCallback.clear;\n      };\n    };\n    var onActionToggleFormat = function (editor) {\n      return function (rawItem) {\n        return function () {\n          editor.undoManager.transact(function () {\n            editor.focus();\n            editor.execCommand('mceToggleFormat', false, rawItem.format);\n          });\n        };\n      };\n    };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var getSpec$3 = function (editor) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          });\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var detectedFormat = findNearest(editor, function () {\n          return dataset.data;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      var dataset = buildBasicSettingsDataset(editor, 'block_formats', defaultBlocks, Delimiter.SemiColon);\n      return {\n        tooltip: 'Blocks',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        dataset: dataset,\n        shouldHide: false,\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        }\n      };\n    };\n    var createFormatSelect = function (editor, backstage) {\n      return createSelectButton(editor, backstage, getSpec$3(editor));\n    };\n    var formatSelectMenu = function (editor, backstage) {\n      var menuItems = createMenuItems(editor, backstage, getSpec$3(editor));\n      editor.ui.registry.addNestedMenuItem('blockformats', {\n        text: 'Blocks',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var getSpec$4 = function (editor, dataset) {\n      var isSelectedFor = function (format) {\n        return function () {\n          return editor.formatter.match(format);\n        };\n      };\n      var getPreviewFor = function (format) {\n        return function () {\n          var fmt = editor.formatter.get(format);\n          return fmt !== undefined ? Optional.some({\n            tag: fmt.length > 0 ? fmt[0].inline || fmt[0].block || 'div' : 'div',\n            styles: editor.dom.parseStyle(editor.formatter.getCssText(format))\n          }) : Optional.none();\n        };\n      };\n      var updateSelectMenuText = function (comp) {\n        var getFormatItems = function (fmt) {\n          var subs = fmt.items;\n          return subs !== undefined && subs.length > 0 ? bind(subs, getFormatItems) : [{\n              title: fmt.title,\n              format: fmt.format\n            }];\n        };\n        var flattenedItems = bind(getStyleFormats(editor), getFormatItems);\n        var detectedFormat = findNearest(editor, function () {\n          return flattenedItems;\n        });\n        var text = detectedFormat.fold(function () {\n          return 'Paragraph';\n        }, function (fmt) {\n          return fmt.title;\n        });\n        emitWith(comp, updateMenuText, { text: text });\n      };\n      var nodeChangeHandler = Optional.some(function (comp) {\n        return function () {\n          return updateSelectMenuText(comp);\n        };\n      });\n      var setInitialValue = Optional.some(function (comp) {\n        return updateSelectMenuText(comp);\n      });\n      return {\n        tooltip: 'Formats',\n        icon: Optional.none(),\n        isSelectedFor: isSelectedFor,\n        getCurrentValue: Optional.none,\n        getPreviewFor: getPreviewFor,\n        onAction: onActionToggleFormat(editor),\n        setInitialValue: setInitialValue,\n        nodeChangeHandler: nodeChangeHandler,\n        shouldHide: editor.getParam('style_formats_autohide', false, 'boolean'),\n        isInvalid: function (item) {\n          return !editor.formatter.canApply(item.format);\n        },\n        dataset: dataset\n      };\n    };\n    var createStyleSelect = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      return createSelectButton(editor, backstage, getSpec$4(editor, dataset));\n    };\n    var styleSelectMenu = function (editor, backstage) {\n      var dataset = __assign({ type: 'advanced' }, backstage.styleselect);\n      var menuItems = createMenuItems(editor, backstage, getSpec$4(editor, dataset));\n      editor.ui.registry.addNestedMenuItem('formats', {\n        text: 'Formats',\n        getSubmenuItems: function () {\n          return menuItems.items.validateItems(menuItems.getStyleItems());\n        }\n      });\n    };\n\n    var defaultToolbar = [\n      {\n        name: 'history',\n        items: [\n          'undo',\n          'redo'\n        ]\n      },\n      {\n        name: 'styles',\n        items: ['styleselect']\n      },\n      {\n        name: 'formatting',\n        items: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        name: 'alignment',\n        items: [\n          'alignleft',\n          'aligncenter',\n          'alignright',\n          'alignjustify'\n        ]\n      },\n      {\n        name: 'indentation',\n        items: [\n          'outdent',\n          'indent'\n        ]\n      },\n      {\n        name: 'permanent pen',\n        items: ['permanentpen']\n      },\n      {\n        name: 'comments',\n        items: ['addcomment']\n      }\n    ];\n    var renderFromBridge = function (bridgeBuilder, render) {\n      return function (spec, extras, editor) {\n        var internal = bridgeBuilder(spec).mapError(function (errInfo) {\n          return formatError(errInfo);\n        }).getOrDie();\n        return render(internal, extras, editor);\n      };\n    };\n    var types = {\n      button: renderFromBridge(createToolbarButton, function (s, extras) {\n        return renderToolbarButton(s, extras.backstage.shared.providers);\n      }),\n      togglebutton: renderFromBridge(createToggleButton, function (s, extras) {\n        return renderToolbarToggleButton(s, extras.backstage.shared.providers);\n      }),\n      menubutton: renderFromBridge(createMenuButton, function (s, extras) {\n        return renderMenuButton(s, 'tox-tbtn', extras.backstage, Optional.none());\n      }),\n      splitbutton: renderFromBridge(createSplitButton, function (s, extras) {\n        return renderSplitButton(s, extras.backstage.shared);\n      }),\n      grouptoolbarbutton: renderFromBridge(createGroupToolbarButton, function (s, extras, editor) {\n        var _a;\n        var buttons = editor.ui.registry.getAll().buttons;\n        var identify = function (toolbar) {\n          return identifyButtons(editor, {\n            buttons: buttons,\n            toolbar: toolbar,\n            allowToolbarGroups: false\n          }, extras, Optional.none());\n        };\n        var attributes = (_a = {}, _a[Attribute] = extras.backstage.shared.header.isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop, _a);\n        switch (getToolbarMode(editor)) {\n        case ToolbarMode.floating:\n          return renderFloatingToolbarButton(s, extras.backstage, identify, attributes);\n        default:\n          throw new Error('Toolbar groups are only supported when using floating toolbar mode');\n        }\n      }),\n      styleSelectButton: function (editor, extras) {\n        return createStyleSelect(editor, extras.backstage);\n      },\n      fontsizeSelectButton: function (editor, extras) {\n        return createFontsizeSelect(editor, extras.backstage);\n      },\n      fontSelectButton: function (editor, extras) {\n        return createFontSelect(editor, extras.backstage);\n      },\n      formatButton: function (editor, extras) {\n        return createFormatSelect(editor, extras.backstage);\n      },\n      alignMenuButton: function (editor, extras) {\n        return createAlignSelect(editor, extras.backstage);\n      }\n    };\n    var extractFrom = function (spec, extras, editor) {\n      return get$1(types, spec.type).fold(function () {\n        console.error('skipping button defined by', spec);\n        return Optional.none();\n      }, function (render) {\n        return Optional.some(render(spec, extras, editor));\n      });\n    };\n    var bespokeButtons = {\n      styleselect: types.styleSelectButton,\n      fontsizeselect: types.fontsizeSelectButton,\n      fontselect: types.fontSelectButton,\n      formatselect: types.formatButton,\n      align: types.alignMenuButton\n    };\n    var removeUnusedDefaults = function (buttons) {\n      var filteredItemGroups = map(defaultToolbar, function (group) {\n        var items = filter(group.items, function (subItem) {\n          return has(buttons, subItem) || has(bespokeButtons, subItem);\n        });\n        return {\n          name: group.name,\n          items: items\n        };\n      });\n      return filter(filteredItemGroups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n    var convertStringToolbar = function (strToolbar) {\n      var groupsStrings = strToolbar.split('|');\n      return map(groupsStrings, function (g) {\n        return { items: g.trim().split(' ') };\n      });\n    };\n    var isToolbarGroupSettingArray = function (toolbar) {\n      return isArrayOf(toolbar, function (t) {\n        return has(t, 'name') && has(t, 'items');\n      });\n    };\n    var createToolbar = function (toolbarConfig) {\n      var toolbar = toolbarConfig.toolbar;\n      var buttons = toolbarConfig.buttons;\n      if (toolbar === false) {\n        return [];\n      } else if (toolbar === undefined || toolbar === true) {\n        return removeUnusedDefaults(buttons);\n      } else if (isString(toolbar)) {\n        return convertStringToolbar(toolbar);\n      } else if (isToolbarGroupSettingArray(toolbar)) {\n        return toolbar;\n      } else {\n        console.error('Toolbar type should be string, string[], boolean or ToolbarGroup[]');\n        return [];\n      }\n    };\n    var lookupButton = function (editor, buttons, toolbarItem, allowToolbarGroups, extras, prefixes) {\n      return get$1(buttons, toolbarItem.toLowerCase()).orThunk(function () {\n        return prefixes.bind(function (ps) {\n          return findMap(ps, function (prefix) {\n            return get$1(buttons, prefix + toolbarItem.toLowerCase());\n          });\n        });\n      }).fold(function () {\n        return get$1(bespokeButtons, toolbarItem.toLowerCase()).map(function (r) {\n          return r(editor, extras);\n        }).orThunk(function () {\n          return Optional.none();\n        });\n      }, function (spec) {\n        if (spec.type === 'grouptoolbarbutton' && !allowToolbarGroups) {\n          console.warn('Ignoring the \\'' + toolbarItem + '\\' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.');\n          return Optional.none();\n        } else {\n          return extractFrom(spec, extras, editor);\n        }\n      });\n    };\n    var identifyButtons = function (editor, toolbarConfig, extras, prefixes) {\n      var toolbarGroups = createToolbar(toolbarConfig);\n      var groups = map(toolbarGroups, function (group) {\n        var items = bind(group.items, function (toolbarItem) {\n          return toolbarItem.trim().length === 0 ? [] : lookupButton(editor, toolbarConfig.buttons, toolbarItem, toolbarConfig.allowToolbarGroups, extras, prefixes).toArray();\n        });\n        return {\n          title: Optional.from(editor.translate(group.name)),\n          items: items\n        };\n      });\n      return filter(groups, function (group) {\n        return group.items.length > 0;\n      });\n    };\n\n    var bubbleSize = 12;\n    var bubbleAlignments$1 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var anchorOverrides = {\n      maxHeightFunction: expandable(),\n      maxWidthFunction: expandable$1()\n    };\n    var desktopAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          north$1,\n          south$1,\n          northeast$1,\n          southeast$1,\n          northwest$1,\n          southwest$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          north$1,\n          south$1,\n          northwest$1,\n          southwest$1,\n          northeast$1,\n          southeast$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var mobileAnchorSpecLayouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var getAnchorLayout = function (position, isTouch) {\n      if (position === 'line') {\n        return {\n          bubble: nu$8(bubbleSize, 0, bubbleAlignments$1),\n          layouts: {\n            onLtr: function () {\n              return [east$1];\n            },\n            onRtl: function () {\n              return [west$1];\n            }\n          },\n          overrides: anchorOverrides\n        };\n      } else {\n        return {\n          bubble: nu$8(0, bubbleSize, bubbleAlignments$1),\n          layouts: isTouch ? mobileAnchorSpecLayouts : desktopAnchorSpecLayouts,\n          overrides: anchorOverrides\n        };\n      }\n    };\n    var register$4 = function (editor, registryContextToolbars, sink, extras) {\n      var isTouch = detect$3().deviceType.isTouch;\n      var contextbar = build$1(renderContextToolbar({\n        sink: sink,\n        onEscape: function () {\n          editor.focus();\n          return Optional.some(true);\n        }\n      }));\n      var getBounds = function () {\n        return getContextToolbarBounds(editor, extras.backstage.shared);\n      };\n      var isRangeOverlapping = function (aTop, aBottom, bTop, bBottom) {\n        return Math.max(aTop, bTop) <= Math.min(aBottom, bBottom);\n      };\n      var getLastElementVerticalBound = function () {\n        var nodeBounds = lastElement.get().filter(function (ele) {\n          return inBody(SugarElement.fromDom(ele));\n        }).map(function (ele) {\n          return ele.getBoundingClientRect();\n        }).getOrThunk(function () {\n          return editor.selection.getRng().getBoundingClientRect();\n        });\n        var diffTop = editor.inline ? get$9().top : absolute$1(SugarElement.fromDom(editor.getBody())).y;\n        return {\n          y: nodeBounds.top + diffTop,\n          bottom: nodeBounds.bottom + diffTop\n        };\n      };\n      var shouldContextToolbarHide = function () {\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return true;\n        }\n        var lastElementBounds = getLastElementVerticalBound();\n        var contextToolbarBounds = getBounds();\n        return !isRangeOverlapping(lastElementBounds.y, lastElementBounds.bottom, contextToolbarBounds.y, contextToolbarBounds.bottom);\n      };\n      var forceHide = function () {\n        InlineView.hide(contextbar);\n      };\n      var hideOrRepositionIfNecessary = function () {\n        lastAnchor.get().each(function (anchor) {\n          var contextBarEle = contextbar.element;\n          remove$6(contextBarEle, 'display');\n          if (shouldContextToolbarHide()) {\n            set$2(contextBarEle, 'display', 'none');\n          } else {\n            Positioning.positionWithinBounds(sink, anchor, contextbar, Optional.some(getBounds()));\n          }\n        });\n      };\n      var lastAnchor = Cell(Optional.none());\n      var lastElement = Cell(Optional.none());\n      var timer = Cell(null);\n      var wrapInPopDialog = function (toolbarSpec) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-pop__dialog']\n          },\n          components: [toolbarSpec],\n          behaviours: derive$1([\n            Keying.config({ mode: 'acyclic' }),\n            config('pop-dialog-wrap-events', [\n              runOnAttached(function (comp) {\n                editor.shortcuts.add('ctrl+F9', 'focus statusbar', function () {\n                  return Keying.focusIn(comp);\n                });\n              }),\n              runOnDetached(function (_comp) {\n                editor.shortcuts.remove('ctrl+F9');\n              })\n            ])\n          ])\n        };\n      };\n      var getScopes = cached(function () {\n        return categorise(registryContextToolbars, function (toolbarApi) {\n          var alloySpec = buildToolbar([toolbarApi]);\n          emitWith(contextbar, forwardSlideEvent, { forwardContents: wrapInPopDialog(alloySpec) });\n        });\n      });\n      var buildContextToolbarGroups = function (allButtons, ctx) {\n        return identifyButtons(editor, {\n          buttons: allButtons,\n          toolbar: ctx.items,\n          allowToolbarGroups: false\n        }, extras, Optional.some(['form:']));\n      };\n      var buildContextMenuGroups = function (ctx, providers) {\n        return ContextForm.buildInitGroups(ctx, providers);\n      };\n      var buildToolbar = function (toolbars) {\n        var buttons = editor.ui.registry.getAll().buttons;\n        var scopes = getScopes();\n        var allButtons = __assign(__assign({}, buttons), scopes.formNavigators);\n        var toolbarType = getToolbarMode(editor) === ToolbarMode.scrolling ? ToolbarMode.scrolling : ToolbarMode.default;\n        var initGroups = flatten(map(toolbars, function (ctx) {\n          return ctx.type === 'contexttoolbar' ? buildContextToolbarGroups(allButtons, ctx) : buildContextMenuGroups(ctx, extras.backstage.shared.providers);\n        }));\n        return renderToolbar({\n          type: toolbarType,\n          uid: generate$1('context-toolbar'),\n          initGroups: initGroups,\n          onEscape: Optional.none,\n          cyclicKeying: true,\n          providers: extras.backstage.shared.providers\n        });\n      };\n      editor.on(showContextToolbarEvent, function (e) {\n        var scopes = getScopes();\n        get$1(scopes.lookupTable, e.toolbarKey).each(function (ctx) {\n          launchContext([ctx], e.target === editor ? Optional.none() : Optional.some(e));\n          InlineView.getContent(contextbar).each(Keying.focusIn);\n        });\n      });\n      var getAnchor = function (position, element) {\n        var anchorage = position === 'node' ? extras.backstage.shared.anchors.node(element) : extras.backstage.shared.anchors.cursor();\n        return deepMerge(anchorage, getAnchorLayout(position, isTouch()));\n      };\n      var launchContext = function (toolbarApi, elem) {\n        clearTimer();\n        if (isTouch() && extras.backstage.isContextMenuOpen()) {\n          return;\n        }\n        var toolbarSpec = buildToolbar(toolbarApi);\n        var sElem = elem.map(SugarElement.fromDom);\n        var anchor = getAnchor(toolbarApi[0].position, sElem);\n        lastAnchor.set(Optional.some(anchor));\n        lastElement.set(elem);\n        var contextBarEle = contextbar.element;\n        remove$6(contextBarEle, 'display');\n        InlineView.showWithinBounds(contextbar, anchor, wrapInPopDialog(toolbarSpec), function () {\n          return Optional.some(getBounds());\n        });\n        if (shouldContextToolbarHide()) {\n          set$2(contextBarEle, 'display', 'none');\n        }\n      };\n      var launchContextToolbar = function () {\n        if (!editor.hasFocus()) {\n          return;\n        }\n        var scopes = getScopes();\n        lookup$1(scopes, editor).fold(function () {\n          lastAnchor.set(Optional.none());\n          InlineView.hide(contextbar);\n        }, function (info) {\n          launchContext(info.toolbars, Optional.some(info.elem.dom));\n        });\n      };\n      var clearTimer = function () {\n        var current = timer.get();\n        if (current !== null) {\n          global$2.clearTimeout(current);\n          timer.set(null);\n        }\n      };\n      var resetTimer = function (t) {\n        clearTimer();\n        timer.set(t);\n      };\n      editor.on('init', function () {\n        editor.on(hideContextToolbarEvent, forceHide);\n        editor.on('ScrollContent ScrollWindow longpress', hideOrRepositionIfNecessary);\n        editor.on('click keyup focus SetContent ObjectResized ResizeEditor', function () {\n          resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n        });\n        editor.on('focusout', function (_e) {\n          global$2.setEditorTimeout(editor, function () {\n            if (search(sink.element).isNone() && search(contextbar.element).isNone()) {\n              lastAnchor.set(Optional.none());\n              InlineView.hide(contextbar);\n            }\n          }, 0);\n        });\n        editor.on('SwitchMode', function () {\n          if (editor.mode.isReadOnly()) {\n            lastAnchor.set(Optional.none());\n            InlineView.hide(contextbar);\n          }\n        });\n        editor.on('NodeChange', function (_e) {\n          search(contextbar.element).fold(function () {\n            resetTimer(global$2.setEditorTimeout(editor, launchContextToolbar, 0));\n          }, function (_) {\n          });\n        });\n      });\n    };\n\n    var setup$3 = function (editor, mothership, uiMothership) {\n      var broadcastEvent = function (name, evt) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastEvent(name, evt);\n        });\n      };\n      var broadcastOn = function (channel, message) {\n        each([\n          mothership,\n          uiMothership\n        ], function (ship) {\n          ship.broadcastOn([channel], message);\n        });\n      };\n      var fireDismissPopups = function (evt) {\n        return broadcastOn(dismissPopups(), { target: evt.target });\n      };\n      var onTouchstart = bind$3(SugarElement.fromDom(document), 'touchstart', fireDismissPopups);\n      var onTouchmove = bind$3(SugarElement.fromDom(document), 'touchmove', function (evt) {\n        return broadcastEvent(documentTouchmove(), evt);\n      });\n      var onTouchend = bind$3(SugarElement.fromDom(document), 'touchend', function (evt) {\n        return broadcastEvent(documentTouchend(), evt);\n      });\n      var onMousedown = bind$3(SugarElement.fromDom(document), 'mousedown', fireDismissPopups);\n      var onMouseup = bind$3(SugarElement.fromDom(document), 'mouseup', function (evt) {\n        if (evt.raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: evt.target });\n        }\n      });\n      var onContentClick = function (raw) {\n        return broadcastOn(dismissPopups(), { target: SugarElement.fromDom(raw.target) });\n      };\n      var onContentMouseup = function (raw) {\n        if (raw.button === 0) {\n          broadcastOn(mouseReleased(), { target: SugarElement.fromDom(raw.target) });\n        }\n      };\n      var onWindowScroll = function (evt) {\n        return broadcastEvent(windowScroll(), fromRawEvent$1(evt));\n      };\n      var onWindowResize = function (evt) {\n        broadcastOn(repositionPopups(), {});\n        broadcastEvent(windowResize(), fromRawEvent$1(evt));\n      };\n      var onEditorResize = function () {\n        return broadcastOn(repositionPopups(), {});\n      };\n      editor.on('PostRender', function () {\n        editor.on('click', onContentClick);\n        editor.on('tap', onContentClick);\n        editor.on('mouseup', onContentMouseup);\n        editor.on('ScrollWindow', onWindowScroll);\n        editor.on('ResizeWindow', onWindowResize);\n        editor.on('ResizeEditor', onEditorResize);\n      });\n      editor.on('remove', function () {\n        editor.off('click', onContentClick);\n        editor.off('tap', onContentClick);\n        editor.off('mouseup', onContentMouseup);\n        editor.off('ScrollWindow', onWindowScroll);\n        editor.off('ResizeWindow', onWindowResize);\n        editor.off('ResizeEditor', onEditorResize);\n        onMousedown.unbind();\n        onTouchstart.unbind();\n        onTouchmove.unbind();\n        onTouchend.unbind();\n        onMouseup.unbind();\n      });\n      editor.on('detach', function () {\n        detachSystem(mothership);\n        detachSystem(uiMothership);\n        mothership.destroy();\n        uiMothership.destroy();\n      });\n    };\n\n    var parts$d = AlloyParts;\n    var partType$1 = PartType;\n\n    var schema$r = constant([\n      defaulted$1('shell', false),\n      strict$1('makeItem'),\n      defaulted$1('setupItem', noop),\n      SketchBehaviours.field('listBehaviours', [Replacing])\n    ]);\n    var customListDetail = function () {\n      return { behaviours: derive$1([Replacing.config({})]) };\n    };\n    var itemsPart = optional({\n      name: 'items',\n      overrides: customListDetail\n    });\n    var parts$e = constant([itemsPart]);\n    var name$2 = constant('CustomList');\n\n    var factory$f = function (detail, components, _spec, _external) {\n      var setItems = function (list, items) {\n        getListContainer(list).fold(function () {\n          console.error('Custom List was defined to not be a shell, but no item container was specified in components');\n          throw new Error('Custom List was defined to not be a shell, but no item container was specified in components');\n        }, function (container) {\n          var itemComps = Replacing.contents(container);\n          var numListsRequired = items.length;\n          var numListsToAdd = numListsRequired - itemComps.length;\n          var itemsToAdd = numListsToAdd > 0 ? range(numListsToAdd, function () {\n            return detail.makeItem();\n          }) : [];\n          var itemsToRemove = itemComps.slice(numListsRequired);\n          each(itemsToRemove, function (item) {\n            return Replacing.remove(container, item);\n          });\n          each(itemsToAdd, function (item) {\n            return Replacing.append(container, item);\n          });\n          var builtLists = Replacing.contents(container);\n          each(builtLists, function (item, i) {\n            detail.setupItem(list, item, items[i], i);\n          });\n        });\n      };\n      var extra = detail.shell ? {\n        behaviours: [Replacing.config({})],\n        components: []\n      } : {\n        behaviours: [],\n        components: components\n      };\n      var getListContainer = function (component) {\n        return detail.shell ? Optional.some(component) : getPart(component, detail, 'items');\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: extra.components,\n        behaviours: augment(detail.listBehaviours, extra.behaviours),\n        apis: { setItems: setItems }\n      };\n    };\n    var CustomList = composite$1({\n      name: name$2(),\n      configFields: schema$r(),\n      partFields: parts$e(),\n      factory: factory$f,\n      apis: {\n        setItems: function (apis, list, items) {\n          apis.setItems(list, items);\n        }\n      }\n    });\n\n    var setup$4 = noop;\n    var isDocked = never;\n    var getBehaviours$2 = constant([]);\n\n    var StaticHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$4,\n        isDocked: isDocked,\n        getBehaviours: getBehaviours$2\n    });\n\n    var getOffsetParent = function (element) {\n      var isFixed = getRaw(element, 'position').is('fixed');\n      var offsetParent$1 = isFixed ? Optional.none() : offsetParent(element);\n      return offsetParent$1.orThunk(function () {\n        var marker = SugarElement.fromTag('span');\n        return parent(element).bind(function (parent) {\n          append(parent, marker);\n          var offsetParent$1 = offsetParent(marker);\n          remove(marker);\n          return offsetParent$1;\n        });\n      });\n    };\n    var getOrigin = function (element) {\n      return getOffsetParent(element).map(absolute).getOrThunk(function () {\n        return SugarPosition(0, 0);\n      });\n    };\n\n    var morphAdt = Adt.generate([\n      { static: [] },\n      { absolute: ['positionCss'] },\n      { fixed: ['positionCss'] }\n    ]);\n    var appear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeOutClass);\n      add$2(elem, contextualInfo.fadeInClass);\n      contextualInfo.onShow(component);\n    };\n    var disappear = function (component, contextualInfo) {\n      var elem = component.element;\n      add$2(elem, contextualInfo.transitionClass);\n      remove$4(elem, contextualInfo.fadeInClass);\n      add$2(elem, contextualInfo.fadeOutClass);\n      contextualInfo.onHide(component);\n    };\n    var isPartiallyVisible = function (box, viewport) {\n      return box.y < viewport.bottom && box.bottom > viewport.y;\n    };\n    var isTopCompletelyVisible = function (box, viewport) {\n      return box.y >= viewport.y;\n    };\n    var isBottomCompletelyVisible = function (box, viewport) {\n      return box.bottom <= viewport.bottom;\n    };\n    var isVisibleForModes = function (modes, box, viewport) {\n      return forall(modes, function (mode) {\n        switch (mode) {\n        case 'bottom':\n          return isBottomCompletelyVisible(box, viewport);\n        case 'top':\n          return isTopCompletelyVisible(box, viewport);\n        }\n      });\n    };\n    var getPrior = function (elem, state) {\n      return state.getInitialPosition().map(function (pos) {\n        return bounds$1(pos.bounds.x, pos.bounds.y, get$8(elem), get$7(elem));\n      });\n    };\n    var storePrior = function (elem, box, state) {\n      state.setInitialPosition(Optional.some({\n        style: getAllRaw(elem),\n        position: get$5(elem, 'position') || 'static',\n        bounds: box\n      }));\n    };\n    var revertToOriginal = function (elem, box$1, state) {\n      return state.getInitialPosition().bind(function (position) {\n        state.setInitialPosition(Optional.none());\n        switch (position.position) {\n        case 'static':\n          return Optional.some(morphAdt.static());\n        case 'absolute':\n          var offsetBox_1 = getOffsetParent(elem).map(box).getOrThunk(function () {\n            return box(body());\n          });\n          return Optional.some(morphAdt.absolute(NuPositionCss('absolute', get$1(position.style, 'left').map(function (_left) {\n            return box$1.x - offsetBox_1.x;\n          }), get$1(position.style, 'top').map(function (_top) {\n            return box$1.y - offsetBox_1.y;\n          }), get$1(position.style, 'right').map(function (_right) {\n            return offsetBox_1.right - box$1.right;\n          }), get$1(position.style, 'bottom').map(function (_bottom) {\n            return offsetBox_1.bottom - box$1.bottom;\n          }))));\n        default:\n          return Optional.none();\n        }\n      });\n    };\n    var morphToOriginal = function (elem, viewport, state) {\n      return getPrior(elem, state).filter(function (box) {\n        return isVisibleForModes(state.getModes(), box, viewport);\n      }).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n    var morphToFixed = function (elem, viewport, state) {\n      var box$1 = box(elem);\n      if (!isVisibleForModes(state.getModes(), box$1, viewport)) {\n        storePrior(elem, box$1, state);\n        var winBox = win();\n        var left = box$1.x - winBox.x;\n        var top_1 = viewport.y - winBox.y;\n        var bottom = winBox.bottom - viewport.bottom;\n        var isTop = box$1.y <= viewport.y;\n        return Optional.some(morphAdt.fixed(NuPositionCss('fixed', Optional.some(left), isTop ? Optional.some(top_1) : Optional.none(), Optional.none(), !isTop ? Optional.some(bottom) : Optional.none())));\n      } else {\n        return Optional.none();\n      }\n    };\n    var getMorph = function (component, viewport, state) {\n      var elem = component.element;\n      var isDocked = getRaw(elem, 'position').is('fixed');\n      return isDocked ? morphToOriginal(elem, viewport, state) : morphToFixed(elem, viewport, state);\n    };\n    var getMorphToOriginal = function (component, state) {\n      var elem = component.element;\n      return getPrior(elem, state).bind(function (box) {\n        return revertToOriginal(elem, box, state);\n      });\n    };\n\n    var morphToStatic = function (component, config) {\n      each([\n        'left',\n        'right',\n        'top',\n        'bottom',\n        'position'\n      ], function (prop) {\n        return remove$6(component.element, prop);\n      });\n      config.onUndocked(component);\n    };\n    var morphToCoord = function (component, config, position) {\n      applyPositionCss(component.element, position);\n      var method = position.position === 'fixed' ? config.onDocked : config.onUndocked;\n      method(component);\n    };\n    var updateVisibility = function (component, config, state, viewport, morphToDocked) {\n      if (morphToDocked === void 0) {\n        morphToDocked = false;\n      }\n      config.contextual.each(function (contextInfo) {\n        contextInfo.lazyContext(component).each(function (box) {\n          var isVisible = isPartiallyVisible(box, viewport);\n          if (isVisible !== state.isVisible()) {\n            state.setVisible(isVisible);\n            if (morphToDocked && !isVisible) {\n              add$3(component.element, [contextInfo.fadeOutClass]);\n              contextInfo.onHide(component);\n            } else {\n              var method = isVisible ? appear : disappear;\n              method(component, contextInfo);\n            }\n          }\n        });\n      });\n    };\n    var refreshInternal = function (component, config, state) {\n      var viewport = config.lazyViewport(component);\n      var isDocked = state.isDocked();\n      if (isDocked) {\n        updateVisibility(component, config, state, viewport);\n      }\n      getMorph(component, viewport, state).each(function (morph) {\n        state.setDocked(!isDocked);\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, function (position) {\n          updateVisibility(component, config, state, viewport, true);\n          morphToCoord(component, config, position);\n        });\n      });\n    };\n    var resetInternal = function (component, config, state) {\n      var elem = component.element;\n      state.setDocked(false);\n      getMorphToOriginal(component, state).each(function (morph) {\n        morph.fold(function () {\n          return morphToStatic(component, config);\n        }, function (position) {\n          return morphToCoord(component, config, position);\n        }, noop);\n      });\n      state.setVisible(true);\n      config.contextual.each(function (contextInfo) {\n        remove$5(elem, [\n          contextInfo.fadeInClass,\n          contextInfo.fadeOutClass,\n          contextInfo.transitionClass\n        ]);\n        contextInfo.onShow(component);\n      });\n      refresh$4(component, config, state);\n    };\n    var refresh$4 = function (component, config, state) {\n      if (component.getSystem().isConnected()) {\n        refreshInternal(component, config, state);\n      }\n    };\n    var reset = function (component, config, state) {\n      if (state.isDocked()) {\n        resetInternal(component, config, state);\n      }\n    };\n    var isDocked$1 = function (component, config, state) {\n      return state.isDocked();\n    };\n    var setModes = function (component, config, state, modes) {\n      return state.setModes(modes);\n    };\n    var getModes = function (component, config, state) {\n      return state.getModes();\n    };\n\n    var DockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        refresh: refresh$4,\n        reset: reset,\n        isDocked: isDocked$1,\n        getModes: getModes,\n        setModes: setModes\n    });\n\n    var events$f = function (dockInfo, dockState) {\n      return derive([\n        runOnSource(transitionend(), function (component, simulatedEvent) {\n          dockInfo.contextual.each(function (contextInfo) {\n            if (has$2(component.element, contextInfo.transitionClass)) {\n              remove$5(component.element, [\n                contextInfo.transitionClass,\n                contextInfo.fadeInClass\n              ]);\n              var notify = dockState.isVisible() ? contextInfo.onShown : contextInfo.onHidden;\n              notify(component);\n            }\n            simulatedEvent.stop();\n          });\n        }),\n        run(windowScroll(), function (component, _) {\n          refresh$4(component, dockInfo, dockState);\n        }),\n        run(windowResize(), function (component, _) {\n          reset(component, dockInfo, dockState);\n        })\n      ]);\n    };\n\n    var ActiveDocking = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        events: events$f\n    });\n\n    var DockingSchema = [\n      optionObjOf('contextual', [\n        strictString('fadeInClass'),\n        strictString('fadeOutClass'),\n        strictString('transitionClass'),\n        strictFunction('lazyContext'),\n        onHandler('onShow'),\n        onHandler('onShown'),\n        onHandler('onHide'),\n        onHandler('onHidden')\n      ]),\n      defaultedFunction('lazyViewport', win),\n      defaultedArrayOf('modes', [\n        'top',\n        'bottom'\n      ], string),\n      onHandler('onDocked'),\n      onHandler('onUndocked')\n    ];\n\n    var init$b = function (spec) {\n      var docked = Cell(false);\n      var visible = Cell(true);\n      var initialBounds = Cell(Optional.none());\n      var modes = Cell(spec.modes);\n      var readState = function () {\n        return 'docked:  ' + docked.get() + ', visible: ' + visible.get() + ', modes: ' + modes.get().join(',');\n      };\n      return nu$5({\n        isDocked: docked.get,\n        setDocked: docked.set,\n        getInitialPosition: initialBounds.get,\n        setInitialPosition: initialBounds.set,\n        isVisible: visible.get,\n        setVisible: visible.set,\n        getModes: modes.get,\n        setModes: modes.set,\n        readState: readState\n      });\n    };\n\n    var DockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$b\n    });\n\n    var Docking = create$1({\n      fields: DockingSchema,\n      name: 'docking',\n      active: ActiveDocking,\n      apis: DockingApis,\n      state: DockingState\n    });\n\n    var visibility = {\n      fadeInClass: 'tox-editor-dock-fadein',\n      fadeOutClass: 'tox-editor-dock-fadeout',\n      transitionClass: 'tox-editor-dock-transition'\n    };\n    var editorStickyOnClass = 'tox-tinymce--toolbar-sticky-on';\n    var editorStickyOffClass = 'tox-tinymce--toolbar-sticky-off';\n    var scrollFromBehindHeader = function (e, containerHeader) {\n      var doc = owner(containerHeader);\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      var scrollPos = get$9(doc);\n      var markerElement = SugarElement.fromDom(e.elm);\n      var markerPos = absolute$1(markerElement);\n      var markerHeight = get$7(markerElement);\n      var markerTop = markerPos.y;\n      var markerBottom = markerTop + markerHeight;\n      var editorHeaderPos = absolute(containerHeader);\n      var editorHeaderHeight = get$7(containerHeader);\n      var editorHeaderTop = editorHeaderPos.top;\n      var editorHeaderBottom = editorHeaderTop + editorHeaderHeight;\n      var editorHeaderDockedAtTop = Math.abs(editorHeaderTop - scrollPos.top) < 2;\n      var editorHeaderDockedAtBottom = Math.abs(editorHeaderBottom - (scrollPos.top + viewHeight)) < 2;\n      if (editorHeaderDockedAtTop && markerTop < editorHeaderBottom) {\n        to(scrollPos.left, markerTop - editorHeaderHeight, doc);\n      } else if (editorHeaderDockedAtBottom && markerBottom > editorHeaderTop) {\n        var y = markerTop - viewHeight + markerHeight + editorHeaderHeight;\n        to(scrollPos.left, y, doc);\n      }\n    };\n    var isDockedMode = function (header, mode) {\n      return contains(Docking.getModes(header), mode);\n    };\n    var updateIframeContentFlow = function (header) {\n      var getOccupiedHeight = function (elm) {\n        return getOuter$1(elm) + (parseInt(get$5(elm, 'margin-top'), 10) || 0) + (parseInt(get$5(elm, 'margin-bottom'), 10) || 0);\n      };\n      var elm = header.element;\n      parent(elm).each(function (parentElem) {\n        var padding = 'padding-' + Docking.getModes(header)[0];\n        if (Docking.isDocked(header)) {\n          var parentWidth = get$8(parentElem);\n          set$2(elm, 'width', parentWidth + 'px');\n          set$2(parentElem, padding, getOccupiedHeight(elm) + 'px');\n        } else {\n          remove$6(elm, 'width');\n          remove$6(parentElem, padding);\n        }\n      });\n    };\n    var updateSinkVisibility = function (sinkElem, visible) {\n      if (visible) {\n        remove$4(sinkElem, visibility.fadeOutClass);\n        add$3(sinkElem, [\n          visibility.transitionClass,\n          visibility.fadeInClass\n        ]);\n      } else {\n        remove$4(sinkElem, visibility.fadeInClass);\n        add$3(sinkElem, [\n          visibility.fadeOutClass,\n          visibility.transitionClass\n        ]);\n      }\n    };\n    var updateEditorClasses = function (editor, docked) {\n      var editorContainer = SugarElement.fromDom(editor.getContainer());\n      if (docked) {\n        add$2(editorContainer, editorStickyOnClass);\n        remove$4(editorContainer, editorStickyOffClass);\n      } else {\n        add$2(editorContainer, editorStickyOffClass);\n        remove$4(editorContainer, editorStickyOnClass);\n      }\n    };\n    var restoreFocus = function (headerElem, focusedElem) {\n      var ownerDoc = owner(focusedElem);\n      active(ownerDoc).filter(function (activeElm) {\n        return !eq$1(focusedElem, activeElm);\n      }).filter(function (activeElm) {\n        return eq$1(activeElm, SugarElement.fromDom(ownerDoc.dom.body)) || contains$2(headerElem, activeElm);\n      }).each(function () {\n        return focus$1(focusedElem);\n      });\n    };\n    var findFocusedElem = function (rootElm, lazySink) {\n      return search(rootElm).orThunk(function () {\n        return lazySink().toOptional().bind(function (sink) {\n          return search(sink.element);\n        });\n      });\n    };\n    var setup$5 = function (editor, sharedBackstage, lazyHeader) {\n      if (!editor.inline) {\n        if (!sharedBackstage.header.isPositionedAtTop()) {\n          editor.on('ResizeEditor', function () {\n            lazyHeader().each(Docking.reset);\n          });\n        }\n        editor.on('ResizeWindow ResizeEditor', function () {\n          lazyHeader().each(updateIframeContentFlow);\n        });\n        editor.on('SkinLoaded', function () {\n          lazyHeader().each(function (comp) {\n            Docking.isDocked(comp) ? Docking.reset(comp) : Docking.refresh(comp);\n          });\n        });\n        editor.on('FullscreenStateChanged', function () {\n          lazyHeader().each(Docking.reset);\n        });\n      }\n      editor.on('AfterScrollIntoView', function (e) {\n        lazyHeader().each(function (header) {\n          Docking.refresh(header);\n          var headerElem = header.element;\n          if (isVisible(headerElem)) {\n            scrollFromBehindHeader(e, headerElem);\n          }\n        });\n      });\n      editor.on('PostRender', function () {\n        updateEditorClasses(editor, false);\n      });\n    };\n    var isDocked$2 = function (lazyHeader) {\n      return lazyHeader().map(Docking.isDocked).getOr(false);\n    };\n    var getIframeBehaviours = function () {\n      var _a;\n      return [Receiving.config({ channels: (_a = {}, _a[toolbarHeightChange()] = { onReceive: updateIframeContentFlow }, _a) })];\n    };\n    var getBehaviours$3 = function (editor, sharedBackstage) {\n      var focusedElm = Cell(Optional.none());\n      var lazySink = sharedBackstage.getSink;\n      var runOnSinkElement = function (f) {\n        lazySink().each(function (sink) {\n          return f(sink.element);\n        });\n      };\n      var onDockingSwitch = function (comp) {\n        if (!editor.inline) {\n          updateIframeContentFlow(comp);\n        }\n        updateEditorClasses(editor, Docking.isDocked(comp));\n        comp.getSystem().broadcastOn([repositionPopups()], {});\n        lazySink().each(function (sink) {\n          return sink.getSystem().broadcastOn([repositionPopups()], {});\n        });\n      };\n      var additionalBehaviours = editor.inline ? [] : getIframeBehaviours();\n      return __spreadArrays([\n        Focusing.config({}),\n        Docking.config({\n          contextual: __assign({\n            lazyContext: function (comp) {\n              var headerHeight = getOuter$1(comp.element);\n              var container = editor.inline ? editor.getContentAreaContainer() : editor.getContainer();\n              var box$1 = box(SugarElement.fromDom(container));\n              var boxHeight = box$1.height - headerHeight;\n              var topBound = box$1.y + (isDockedMode(comp, 'top') ? 0 : headerHeight);\n              return Optional.some(bounds$1(box$1.x, topBound, box$1.width, boxHeight));\n            },\n            onShow: function () {\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, true);\n              });\n            },\n            onShown: function (comp) {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [\n                  visibility.transitionClass,\n                  visibility.fadeInClass\n                ]);\n              });\n              focusedElm.get().each(function (elem) {\n                restoreFocus(comp.element, elem);\n                focusedElm.set(Optional.none());\n              });\n            },\n            onHide: function (comp) {\n              focusedElm.set(findFocusedElem(comp.element, lazySink));\n              runOnSinkElement(function (elem) {\n                return updateSinkVisibility(elem, false);\n              });\n            },\n            onHidden: function () {\n              runOnSinkElement(function (elem) {\n                return remove$5(elem, [visibility.transitionClass]);\n              });\n            }\n          }, visibility),\n          modes: [sharedBackstage.header.getDockingMode()],\n          onDocked: onDockingSwitch,\n          onUndocked: onDockingSwitch\n        })\n      ], additionalBehaviours);\n    };\n\n    var StickyHeader = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        setup: setup$5,\n        isDocked: isDocked$2,\n        getBehaviours: getBehaviours$3\n    });\n\n    var renderHeader = function (spec) {\n      var editor = spec.editor;\n      var getBehaviours = spec.sticky ? getBehaviours$3 : getBehaviours$2;\n      return {\n        uid: spec.uid,\n        dom: spec.dom,\n        components: spec.components,\n        behaviours: derive$1(getBehaviours(editor, spec.sharedBackstage))\n      };\n    };\n\n    var factory$g = function (detail, spec) {\n      var setMenus = function (comp, menus) {\n        var newMenus = map(menus, function (m) {\n          var buttonSpec = {\n            type: 'menubutton',\n            text: m.text,\n            fetch: function (callback) {\n              callback(m.getItems());\n            }\n          };\n          var internal = createMenuButton(buttonSpec).mapError(function (errInfo) {\n            return formatError(errInfo);\n          }).getOrDie();\n          return renderMenuButton(internal, 'tox-mbtn', spec.backstage, Optional.some('menuitem'));\n        });\n        Replacing.set(comp, newMenus);\n      };\n      var apis = {\n        focus: Keying.focusIn,\n        setMenus: setMenus\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: [],\n        behaviours: derive$1([\n          Replacing.config({}),\n          config('menubar-events', [\n            runOnAttached(function (component) {\n              detail.onSetup(component);\n            }),\n            run(mouseover(), function (comp, se) {\n              descendant$1(comp.element, '.' + 'tox-mbtn--active').each(function (activeButton) {\n                closest$3(se.event.target, '.' + 'tox-mbtn').each(function (hoveredButton) {\n                  if (!eq$1(activeButton, hoveredButton)) {\n                    comp.getSystem().getByDom(activeButton).each(function (activeComp) {\n                      comp.getSystem().getByDom(hoveredButton).each(function (hoveredComp) {\n                        Dropdown.expand(hoveredComp);\n                        Dropdown.close(activeComp);\n                        Focusing.focus(hoveredComp);\n                      });\n                    });\n                  }\n                });\n              });\n            }),\n            run(focusShifted(), function (comp, se) {\n              se.event.prevFocus.bind(function (prev) {\n                return comp.getSystem().getByDom(prev).toOptional();\n              }).each(function (prev) {\n                se.event.newFocus.bind(function (nu) {\n                  return comp.getSystem().getByDom(nu).toOptional();\n                }).each(function (nu) {\n                  if (Dropdown.isOpen(prev)) {\n                    Dropdown.expand(nu);\n                    Dropdown.close(prev);\n                  }\n                });\n              });\n            })\n          ]),\n          Keying.config({\n            mode: 'flow',\n            selector: '.' + 'tox-mbtn',\n            onEscape: function (comp) {\n              detail.onEscape(comp);\n              return Optional.some(true);\n            }\n          }),\n          Tabstopping.config({})\n        ]),\n        apis: apis,\n        domModification: { attributes: { role: 'menubar' } }\n      };\n    };\n    var SilverMenubar = single$2({\n      factory: factory$g,\n      name: 'silver.Menubar',\n      configFields: [\n        strict$1('dom'),\n        strict$1('uid'),\n        strict$1('onEscape'),\n        strict$1('backstage'),\n        defaulted$1('onSetup', noop)\n      ],\n      apis: {\n        focus: function (apis, comp) {\n          apis.focus(comp);\n        },\n        setMenus: function (apis, comp, menus) {\n          apis.setMenus(comp, menus);\n        }\n      }\n    });\n\n    var owner$4 = 'container';\n    var schema$s = [field$1('slotBehaviours', [])];\n    var getPartName$1 = function (name) {\n      return '<alloy.field.' + name + '>';\n    };\n    var sketch$2 = function (sSpec) {\n      var parts = function () {\n        var record = [];\n        var slot = function (name, config) {\n          record.push(name);\n          return generateOne(owner$4, getPartName$1(name), config);\n        };\n        return {\n          slot: slot,\n          record: function () {\n            return record;\n          }\n        };\n      }();\n      var spec = sSpec(parts);\n      var partNames = parts.record();\n      var fieldParts = map(partNames, function (n) {\n        return required({\n          name: n,\n          pname: getPartName$1(n)\n        });\n      });\n      return composite(owner$4, schema$s, fieldParts, make$7, spec);\n    };\n    var make$7 = function (detail, components) {\n      var getSlotNames = function (_) {\n        return getAllPartNames(detail);\n      };\n      var getSlot = function (container, key) {\n        return getPart(container, detail, key);\n      };\n      var onSlot = function (f, def) {\n        return function (container, key) {\n          return getPart(container, detail, key).map(function (slot) {\n            return f(slot, key);\n          }).getOr(def);\n        };\n      };\n      var onSlots = function (f) {\n        return function (container, keys) {\n          each(keys, function (key) {\n            return f(container, key);\n          });\n        };\n      };\n      var doShowing = function (comp, _key) {\n        return get$3(comp.element, 'aria-hidden') !== 'true';\n      };\n      var doShow = function (comp, key) {\n        if (!doShowing(comp)) {\n          var element = comp.element;\n          remove$6(element, 'display');\n          remove$1(element, 'aria-hidden');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: true\n          });\n        }\n      };\n      var doHide = function (comp, key) {\n        if (doShowing(comp)) {\n          var element = comp.element;\n          set$2(element, 'display', 'none');\n          set$1(element, 'aria-hidden', 'true');\n          emitWith(comp, slotVisibility(), {\n            name: key,\n            visible: false\n          });\n        }\n      };\n      var isShowing = onSlot(doShowing, false);\n      var hideSlot = onSlot(doHide);\n      var hideSlots = onSlots(hideSlot);\n      var hideAllSlots = function (container) {\n        return hideSlots(container, getSlotNames());\n      };\n      var showSlot = onSlot(doShow);\n      var apis = {\n        getSlotNames: getSlotNames,\n        getSlot: getSlot,\n        isShowing: isShowing,\n        hideSlot: hideSlot,\n        hideAllSlots: hideAllSlots,\n        showSlot: showSlot\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.slotBehaviours),\n        apis: apis\n      };\n    };\n    var slotApis = map$2({\n      getSlotNames: function (apis, c) {\n        return apis.getSlotNames(c);\n      },\n      getSlot: function (apis, c, key) {\n        return apis.getSlot(c, key);\n      },\n      isShowing: function (apis, c, key) {\n        return apis.isShowing(c, key);\n      },\n      hideSlot: function (apis, c, key) {\n        return apis.hideSlot(c, key);\n      },\n      hideAllSlots: function (apis, c) {\n        return apis.hideAllSlots(c);\n      },\n      showSlot: function (apis, c, key) {\n        return apis.showSlot(c, key);\n      }\n    }, function (value) {\n      return makeApi(value);\n    });\n    var SlotContainer = __assign(__assign({}, slotApis), { sketch: sketch$2 });\n\n    var sidebarSchema = objOf([\n      optionString('icon'),\n      optionString('tooltip'),\n      defaultedFunction('onShow', noop),\n      defaultedFunction('onHide', noop),\n      defaultedFunction('onSetup', function () {\n        return noop;\n      })\n    ]);\n    var createSidebar = function (spec) {\n      return asRaw('sidebar', sidebarSchema, spec);\n    };\n\n    var setup$6 = function (editor) {\n      var sidebars = editor.ui.registry.getAll().sidebars;\n      each(keys(sidebars), function (name) {\n        var spec = sidebars[name];\n        var isActive = function () {\n          return Optional.from(editor.queryCommandValue('ToggleSidebar')).is(name);\n        };\n        editor.ui.registry.addToggleButton(name, {\n          icon: spec.icon,\n          tooltip: spec.tooltip,\n          onAction: function (buttonApi) {\n            editor.execCommand('ToggleSidebar', false, name);\n            buttonApi.setActive(isActive());\n          },\n          onSetup: function (buttonApi) {\n            var handleToggle = function () {\n              return buttonApi.setActive(isActive());\n            };\n            editor.on('ToggleSidebar', handleToggle);\n            return function () {\n              editor.off('ToggleSidebar', handleToggle);\n            };\n          }\n        });\n      });\n    };\n    var getApi = function (comp) {\n      return {\n        element: function () {\n          return comp.element.dom;\n        }\n      };\n    };\n    var makePanels = function (parts, panelConfigs) {\n      var specs = map(keys(panelConfigs), function (name) {\n        var spec = panelConfigs[name];\n        var bridged = getOrDie(createSidebar(spec));\n        return {\n          name: name,\n          getApi: getApi,\n          onSetup: bridged.onSetup,\n          onShow: bridged.onShow,\n          onHide: bridged.onHide\n        };\n      });\n      return map(specs, function (spec) {\n        var editorOffCell = Cell(noop);\n        return parts.slot(spec.name, {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane']\n          },\n          behaviours: SimpleBehaviours.unnamedEvents([\n            onControlAttached(spec, editorOffCell),\n            onControlDetached(spec, editorOffCell),\n            run(slotVisibility(), function (sidepanel, se) {\n              var data = se.event;\n              var optSidePanelSpec = find(specs, function (config) {\n                return config.name === data.name;\n              });\n              optSidePanelSpec.each(function (sidePanelSpec) {\n                var handler = data.visible ? sidePanelSpec.onShow : sidePanelSpec.onHide;\n                handler(sidePanelSpec.getApi(sidepanel));\n              });\n            })\n          ])\n        });\n      });\n    };\n    var makeSidebar = function (panelConfigs) {\n      return SlotContainer.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-sidebar__pane-container']\n          },\n          components: makePanels(parts, panelConfigs),\n          slotBehaviours: SimpleBehaviours.unnamedEvents([runOnAttached(function (slotContainer) {\n              return SlotContainer.hideAllSlots(slotContainer);\n            })])\n        };\n      });\n    };\n    var setSidebar = function (sidebar, panelConfigs) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        return Replacing.set(slider, [makeSidebar(panelConfigs)]);\n      });\n    };\n    var toggleSidebar = function (sidebar, name) {\n      var optSlider = Composing.getCurrent(sidebar);\n      optSlider.each(function (slider) {\n        var optSlotContainer = Composing.getCurrent(slider);\n        optSlotContainer.each(function (slotContainer) {\n          if (Sliding.hasGrown(slider)) {\n            if (SlotContainer.isShowing(slotContainer, name)) {\n              Sliding.shrink(slider);\n            } else {\n              SlotContainer.hideAllSlots(slotContainer);\n              SlotContainer.showSlot(slotContainer, name);\n            }\n          } else {\n            SlotContainer.hideAllSlots(slotContainer);\n            SlotContainer.showSlot(slotContainer, name);\n            Sliding.grow(slider);\n          }\n        });\n      });\n    };\n    var whichSidebar = function (sidebar) {\n      var optSlider = Composing.getCurrent(sidebar);\n      return optSlider.bind(function (slider) {\n        var sidebarOpen = Sliding.isGrowing(slider) || Sliding.hasGrown(slider);\n        if (sidebarOpen) {\n          var optSlotContainer = Composing.getCurrent(slider);\n          return optSlotContainer.bind(function (slotContainer) {\n            return find(SlotContainer.getSlotNames(slotContainer), function (name) {\n              return SlotContainer.isShowing(slotContainer, name);\n            });\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var fixSize = generate$1('FixSizeEvent');\n    var autoSize = generate$1('AutoSizeEvent');\n    var renderSidebar = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar'],\n          attributes: { role: 'complementary' }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-sidebar__slider']\n            },\n            components: [],\n            behaviours: derive$1([\n              Tabstopping.config({}),\n              Focusing.config({}),\n              Sliding.config({\n                dimension: { property: 'width' },\n                closedClass: 'tox-sidebar--sliding-closed',\n                openClass: 'tox-sidebar--sliding-open',\n                shrinkingClass: 'tox-sidebar--sliding-shrinking',\n                growingClass: 'tox-sidebar--sliding-growing',\n                onShrunk: function (slider) {\n                  var optSlotContainer = Composing.getCurrent(slider);\n                  optSlotContainer.each(SlotContainer.hideAllSlots);\n                  emit(slider, autoSize);\n                },\n                onGrown: function (slider) {\n                  emit(slider, autoSize);\n                },\n                onStartGrow: function (slider) {\n                  emitWith(slider, fixSize, { width: getRaw(slider.element, 'width').getOr('') });\n                },\n                onStartShrink: function (slider) {\n                  emitWith(slider, fixSize, { width: get$8(slider.element) + 'px' });\n                }\n              }),\n              Replacing.config({}),\n              Composing.config({\n                find: function (comp) {\n                  var children = Replacing.contents(comp);\n                  return head(children);\n                }\n              })\n            ])\n          }],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          config('sidebar-sliding-events', [\n            run(fixSize, function (comp, se) {\n              set$2(comp.element, 'width', se.event.width);\n            }),\n            run(autoSize, function (comp, _se) {\n              remove$6(comp.element, 'width');\n            })\n          ])\n        ])\n      };\n    };\n\n    var getAttrs = function (elem) {\n      var attributes = elem.dom.attributes !== undefined ? elem.dom.attributes : [];\n      return foldl(attributes, function (b, attr) {\n        var _a;\n        if (attr.name === 'class') {\n          return b;\n        } else {\n          return __assign(__assign({}, b), (_a = {}, _a[attr.name] = attr.value, _a));\n        }\n      }, {});\n    };\n    var getClasses = function (elem) {\n      return Array.prototype.slice.call(elem.dom.classList, 0);\n    };\n    var fromHtml$2 = function (html) {\n      var elem = SugarElement.fromHtml(html);\n      var children$1 = children(elem);\n      var attrs = getAttrs(elem);\n      var classes = getClasses(elem);\n      var contents = children$1.length === 0 ? {} : { innerHtml: get$2(elem) };\n      return __assign({\n        tag: name(elem),\n        classes: classes,\n        attributes: attrs\n      }, contents);\n    };\n\n    var renderSpinner = function (providerBackstage) {\n      return {\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-label': providerBackstage.translate('Loading...') },\n          classes: ['tox-throbber__busy-spinner']\n        },\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'special',\n            onTab: function () {\n              return Optional.some(true);\n            },\n            onShiftTab: function () {\n              return Optional.some(true);\n            }\n          }),\n          Focusing.config({})\n        ])\n      };\n    };\n    var toggleThrobber = function (comp, state, providerBackstage) {\n      var element = comp.element;\n      if (state === true) {\n        Replacing.set(comp, [renderSpinner(providerBackstage)]);\n        remove$6(element, 'display');\n        remove$1(element, 'aria-hidden');\n      } else {\n        Replacing.set(comp, []);\n        set$2(element, 'display', 'none');\n        set$1(element, 'aria-hidden', 'true');\n      }\n    };\n    var renderThrobber = function (spec) {\n      return {\n        uid: spec.uid,\n        dom: {\n          tag: 'div',\n          attributes: { 'aria-hidden': 'true' },\n          classes: ['tox-throbber'],\n          styles: { display: 'none' }\n        },\n        behaviours: derive$1([Replacing.config({})]),\n        components: []\n      };\n    };\n    var setup$7 = function (editor, lazyThrobber, sharedBackstage) {\n      var throbberState = Cell(false);\n      var timer = Cell(Optional.none());\n      var toggle = function (state) {\n        if (state !== throbberState.get()) {\n          toggleThrobber(lazyThrobber(), state, sharedBackstage.providers);\n          throbberState.set(state);\n        }\n      };\n      editor.on('ProgressState', function (e) {\n        timer.get().each(global$2.clearTimeout);\n        if (isNumber(e.time)) {\n          var timerId = global$2.setEditorTimeout(editor, function () {\n            return toggle(e.state);\n          }, e.time);\n          timer.set(Optional.some(timerId));\n        } else {\n          toggle(e.state);\n          timer.set(Optional.none());\n        }\n      });\n    };\n\n    var factory$h = function (detail, components, _spec) {\n      var apis = {\n        getSocket: function (comp) {\n          return parts$d.getPart(comp, detail, 'socket');\n        },\n        setSidebar: function (comp, panelConfigs) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return setSidebar(sidebar, panelConfigs);\n          });\n        },\n        toggleSidebar: function (comp, name) {\n          parts$d.getPart(comp, detail, 'sidebar').each(function (sidebar) {\n            return toggleSidebar(sidebar, name);\n          });\n        },\n        whichSidebar: function (comp) {\n          return parts$d.getPart(comp, detail, 'sidebar').bind(whichSidebar).getOrNull();\n        },\n        getHeader: function (comp) {\n          return parts$d.getPart(comp, detail, 'header');\n        },\n        getToolbar: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar');\n        },\n        setToolbar: function (comp, groups) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            toolbar.getApis().setGroups(toolbar, groups);\n          });\n        },\n        setToolbars: function (comp, toolbars) {\n          parts$d.getPart(comp, detail, 'multiple-toolbar').each(function (mToolbar) {\n            CustomList.setItems(mToolbar, toolbars);\n          });\n        },\n        refreshToolbar: function (comp) {\n          var toolbar = parts$d.getPart(comp, detail, 'toolbar');\n          toolbar.each(function (toolbar) {\n            return toolbar.getApis().refresh(toolbar);\n          });\n        },\n        toggleToolbarDrawer: function (comp) {\n          parts$d.getPart(comp, detail, 'toolbar').each(function (toolbar) {\n            mapFrom(toolbar.getApis().toggle, function (toggle) {\n              return toggle(toolbar);\n            });\n          });\n        },\n        isToolbarDrawerToggled: function (comp) {\n          return parts$d.getPart(comp, detail, 'toolbar').bind(function (toolbar) {\n            return Optional.from(toolbar.getApis().isOpen).map(function (isOpen) {\n              return isOpen(toolbar);\n            });\n          }).getOr(false);\n        },\n        getThrobber: function (comp) {\n          return parts$d.getPart(comp, detail, 'throbber');\n        },\n        focusToolbar: function (comp) {\n          var optToolbar = parts$d.getPart(comp, detail, 'toolbar').orThunk(function () {\n            return parts$d.getPart(comp, detail, 'multiple-toolbar');\n          });\n          optToolbar.each(function (toolbar) {\n            Keying.focusIn(toolbar);\n          });\n        },\n        setMenubar: function (comp, menus) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.setMenus(menubar, menus);\n          });\n        },\n        focusMenubar: function (comp) {\n          parts$d.getPart(comp, detail, 'menubar').each(function (menubar) {\n            SilverMenubar.focus(menubar);\n          });\n        }\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: apis,\n        behaviours: detail.behaviours\n      };\n    };\n    var partMenubar = partType$1.optional({\n      factory: SilverMenubar,\n      name: 'menubar',\n      schema: [strict$1('backstage')]\n    });\n    var toolbarFactory = function (spec) {\n      if (spec.type === ToolbarMode.sliding) {\n        return renderSlidingMoreToolbar;\n      } else if (spec.type === ToolbarMode.floating) {\n        return renderFloatingMoreToolbar;\n      } else {\n        return renderToolbar;\n      }\n    };\n    var partMultipleToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          return CustomList.sketch({\n            uid: spec.uid,\n            dom: spec.dom,\n            listBehaviours: derive$1([Keying.config({\n                mode: 'acyclic',\n                selector: '.tox-toolbar'\n              })]),\n            makeItem: function () {\n              return renderToolbar({\n                type: spec.type,\n                uid: generate$1('multiple-toolbar-item'),\n                cyclicKeying: false,\n                initGroups: [],\n                providers: spec.providers,\n                onEscape: function () {\n                  spec.onEscape();\n                  return Optional.some(true);\n                }\n              });\n            },\n            setupItem: function (_mToolbar, tc, data, _index) {\n              Toolbar.setGroups(tc, data);\n            },\n            shell: true\n          });\n        }\n      },\n      name: 'multiple-toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape')\n      ]\n    });\n    var partToolbar = partType$1.optional({\n      factory: {\n        sketch: function (spec) {\n          var renderer = toolbarFactory(spec);\n          var toolbarSpec = {\n            type: spec.type,\n            uid: spec.uid,\n            onEscape: function () {\n              spec.onEscape();\n              return Optional.some(true);\n            },\n            cyclicKeying: false,\n            initGroups: [],\n            getSink: spec.getSink,\n            providers: spec.providers,\n            moreDrawerData: {\n              lazyToolbar: spec.lazyToolbar,\n              lazyMoreButton: spec.lazyMoreButton,\n              lazyHeader: spec.lazyHeader\n            },\n            attributes: spec.attributes\n          };\n          return renderer(toolbarSpec);\n        }\n      },\n      name: 'toolbar',\n      schema: [\n        strict$1('dom'),\n        strict$1('onEscape'),\n        strict$1('getSink')\n      ]\n    });\n    var partHeader = partType$1.optional({\n      factory: { sketch: renderHeader },\n      name: 'header',\n      schema: [strict$1('dom')]\n    });\n    var partSocket = partType$1.optional({\n      name: 'socket',\n      schema: [strict$1('dom')]\n    });\n    var partSidebar = partType$1.optional({\n      factory: { sketch: renderSidebar },\n      name: 'sidebar',\n      schema: [strict$1('dom')]\n    });\n    var partThrobber = partType$1.optional({\n      factory: { sketch: renderThrobber },\n      name: 'throbber',\n      schema: [strict$1('dom')]\n    });\n    var OuterContainer = composite$1({\n      name: 'OuterContainer',\n      factory: factory$h,\n      configFields: [\n        strict$1('dom'),\n        strict$1('behaviours')\n      ],\n      partFields: [\n        partHeader,\n        partMenubar,\n        partToolbar,\n        partMultipleToolbar,\n        partSocket,\n        partSidebar,\n        partThrobber\n      ],\n      apis: {\n        getSocket: function (apis, comp) {\n          return apis.getSocket(comp);\n        },\n        setSidebar: function (apis, comp, panelConfigs) {\n          apis.setSidebar(comp, panelConfigs);\n        },\n        toggleSidebar: function (apis, comp, name) {\n          apis.toggleSidebar(comp, name);\n        },\n        whichSidebar: function (apis, comp) {\n          return apis.whichSidebar(comp);\n        },\n        getHeader: function (apis, comp) {\n          return apis.getHeader(comp);\n        },\n        getToolbar: function (apis, comp) {\n          return apis.getToolbar(comp);\n        },\n        setToolbar: function (apis, comp, grps) {\n          var groups = map(grps, function (grp) {\n            return renderToolbarGroup(grp);\n          });\n          apis.setToolbar(comp, groups);\n        },\n        setToolbars: function (apis, comp, ts) {\n          var renderedToolbars = map(ts, function (g) {\n            return map(g, renderToolbarGroup);\n          });\n          apis.setToolbars(comp, renderedToolbars);\n        },\n        refreshToolbar: function (apis, comp) {\n          return apis.refreshToolbar(comp);\n        },\n        toggleToolbarDrawer: function (apis, comp) {\n          apis.toggleToolbarDrawer(comp);\n        },\n        isToolbarDrawerToggled: function (apis, comp) {\n          return apis.isToolbarDrawerToggled(comp);\n        },\n        getThrobber: function (apis, comp) {\n          return apis.getThrobber(comp);\n        },\n        setMenubar: function (apis, comp, menus) {\n          apis.setMenubar(comp, menus);\n        },\n        focusMenubar: function (apis, comp) {\n          apis.focusMenubar(comp);\n        },\n        focusToolbar: function (apis, comp) {\n          apis.focusToolbar(comp);\n        }\n      }\n    });\n\n    var defaultMenubar = 'file edit view insert format tools table help';\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | export print | deleteallconversations'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall | searchreplace'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code wordcount'\n      },\n      table: {\n        title: 'Table',\n        items: 'inserttable | cell row column | advtablesort | tableprops deletetable'\n      },\n      help: {\n        title: 'Help',\n        items: 'help'\n      }\n    };\n    var make$8 = function (menu, registry, editor) {\n      var removedMenuItems = getRemovedMenuItems(editor).split(/[ ,]/);\n      return {\n        text: menu.title,\n        getItems: function () {\n          return bind(menu.items, function (i) {\n            var itemName = i.toLowerCase();\n            if (itemName.trim().length === 0) {\n              return [];\n            } else if (exists(removedMenuItems, function (removedMenuItem) {\n                return removedMenuItem === itemName;\n              })) {\n              return [];\n            } else if (itemName === 'separator' || itemName === '|') {\n              return [{ type: 'separator' }];\n            } else if (registry.menuItems[itemName]) {\n              return [registry.menuItems[itemName]];\n            } else {\n              return [];\n            }\n          });\n        }\n      };\n    };\n    var parseItemsString = function (items) {\n      if (typeof items === 'string') {\n        return items.split(' ');\n      }\n      return items;\n    };\n    var identifyMenus = function (editor, registry) {\n      var rawMenuData = __assign(__assign({}, defaultMenus), registry.menus);\n      var userDefinedMenus = keys(registry.menus).length > 0;\n      var menubar = registry.menubar === undefined || registry.menubar === true ? parseItemsString(defaultMenubar) : parseItemsString(registry.menubar === false ? '' : registry.menubar);\n      var validMenus = filter(menubar, function (menuName) {\n        return userDefinedMenus ? registry.menus.hasOwnProperty(menuName) && registry.menus[menuName].hasOwnProperty('items') || defaultMenus.hasOwnProperty(menuName) : defaultMenus.hasOwnProperty(menuName);\n      });\n      var menus = map(validMenus, function (menuName) {\n        var menuData = rawMenuData[menuName];\n        return make$8({\n          title: menuData.title,\n          items: parseItemsString(menuData.items)\n        }, registry, editor);\n      });\n      return filter(menus, function (menu) {\n        var isNotSeparator = function (item) {\n          return item.type !== 'separator';\n        };\n        return menu.getItems().length > 0 && exists(menu.getItems(), isNotSeparator);\n      });\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var fireSkinLoadError$1 = function (editor, err) {\n      return function () {\n        return fireSkinLoadError(editor, { message: err });\n      };\n    };\n\n    var loadStylesheet = function (editor, stylesheetUrl, styleSheetLoader) {\n      return new global$4(function (resolve, reject) {\n        styleSheetLoader.load(stylesheetUrl, resolve, reject);\n        editor.on('remove', function () {\n          return styleSheetLoader.unload(stylesheetUrl);\n        });\n      });\n    };\n    var loadUiSkins = function (editor, skinUrl) {\n      var skinUiCss = skinUrl + '/skin.min.css';\n      return loadStylesheet(editor, skinUiCss, editor.ui.styleSheetLoader);\n    };\n    var loadShadowDomUiSkins = function (editor, skinUrl) {\n      var isInShadowRoot$1 = isInShadowRoot(SugarElement.fromDom(editor.getElement()));\n      if (isInShadowRoot$1) {\n        var shadowDomSkinCss = skinUrl + '/skin.shadowdom.min.css';\n        return loadStylesheet(editor, shadowDomSkinCss, global$5.DOM.styleSheetLoader);\n      } else {\n        return global$4.resolve();\n      }\n    };\n    var loadSkin = function (isInline, editor) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        editor.contentCSS.push(skinUrl + (isInline ? '/content.inline' : '/content') + '.min.css');\n      }\n      if (isSkinDisabled(editor) === false && isString(skinUrl)) {\n        global$4.all([\n          loadUiSkins(editor, skinUrl),\n          loadShadowDomUiSkins(editor, skinUrl)\n        ]).then(fireSkinLoaded$1(editor), fireSkinLoadError$1(editor, 'Skin could not be loaded'));\n      } else {\n        fireSkinLoaded$1(editor)();\n      }\n    };\n    var iframe = curry(loadSkin, false);\n    var inline = curry(loadSkin, true);\n\n    var setToolbar = function (editor, uiComponents, rawUiConfig, backstage) {\n      var comp = uiComponents.outerContainer;\n      var toolbarConfig = rawUiConfig.toolbar;\n      var toolbarButtonsConfig = rawUiConfig.buttons;\n      if (isArrayOf(toolbarConfig, isString)) {\n        var toolbars = toolbarConfig.map(function (t) {\n          var config = {\n            toolbar: t,\n            buttons: toolbarButtonsConfig,\n            allowToolbarGroups: rawUiConfig.allowToolbarGroups\n          };\n          return identifyButtons(editor, config, { backstage: backstage }, Optional.none());\n        });\n        OuterContainer.setToolbars(comp, toolbars);\n      } else {\n        OuterContainer.setToolbar(comp, identifyButtons(editor, rawUiConfig, { backstage: backstage }, Optional.none()));\n      }\n    };\n\n    var detection = detect$3();\n    var isiOS12 = detection.os.isiOS() && detection.os.version.major <= 12;\n    var setupEvents = function (editor, uiComponents) {\n      var dom = editor.dom;\n      var contentWindow = editor.getWin();\n      var initialDocEle = editor.getDoc().documentElement;\n      var lastWindowDimensions = Cell(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n      var lastDocumentDimensions = Cell(SugarPosition(initialDocEle.offsetWidth, initialDocEle.offsetHeight));\n      var resizeWindow = function () {\n        var outer = lastWindowDimensions.get();\n        if (outer.left !== contentWindow.innerWidth || outer.top !== contentWindow.innerHeight) {\n          lastWindowDimensions.set(SugarPosition(contentWindow.innerWidth, contentWindow.innerHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var resizeDocument = function () {\n        var docEle = editor.getDoc().documentElement;\n        var inner = lastDocumentDimensions.get();\n        if (inner.left !== docEle.offsetWidth || inner.top !== docEle.offsetHeight) {\n          lastDocumentDimensions.set(SugarPosition(docEle.offsetWidth, docEle.offsetHeight));\n          fireResizeContent(editor);\n        }\n      };\n      var scroll = function (e) {\n        return fireScrollContent(editor, e);\n      };\n      dom.bind(contentWindow, 'resize', resizeWindow);\n      dom.bind(contentWindow, 'scroll', scroll);\n      var elementLoad = capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeDocument);\n      var mothership = uiComponents.uiMothership.element;\n      editor.on('hide', function () {\n        set$2(mothership, 'display', 'none');\n      });\n      editor.on('show', function () {\n        remove$6(mothership, 'display');\n      });\n      editor.on('NodeChange', resizeDocument);\n      editor.on('remove', function () {\n        elementLoad.unbind();\n        dom.unbind(contentWindow, 'resize', resizeWindow);\n        dom.unbind(contentWindow, 'scroll', scroll);\n        contentWindow = null;\n      });\n    };\n    var render$1 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var lastToolbarWidth = Cell(0);\n      var outerContainer = uiComponents.outerContainer;\n      iframe(editor);\n      var eTargetNode = SugarElement.fromDom(args.targetNode);\n      var uiRoot = getContentContainer(getRootNode(eTargetNode));\n      attachSystemAfter(eTargetNode, uiComponents.mothership);\n      attachSystem(uiRoot, uiComponents.uiMothership);\n      editor.on('PostRender', function () {\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        lastToolbarWidth.set(editor.getWin().innerWidth);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        OuterContainer.setSidebar(outerContainer, rawUiConfig.sidebar);\n        setupEvents(editor, uiComponents);\n      });\n      var socket = OuterContainer.getSocket(outerContainer).getOrDie('Could not find expected socket element');\n      if (isiOS12) {\n        setAll$1(socket.element, {\n          'overflow': 'scroll',\n          '-webkit-overflow-scrolling': 'touch'\n        });\n        var limit = first(function () {\n          editor.fire('ScrollContent');\n        }, 20);\n        var unbinder = bind$3(socket.element, 'scroll', limit.throttle);\n        editor.on('remove', unbinder.unbind);\n      }\n      setupReadonlyModeSwitch(editor, uiComponents);\n      editor.addCommand('ToggleSidebar', function (_ui, value) {\n        OuterContainer.toggleSidebar(outerContainer, value);\n        editor.fire('ToggleSidebar');\n      });\n      editor.addQueryValueHandler('ToggleSidebar', function () {\n        return OuterContainer.whichSidebar(outerContainer);\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var refreshDrawer = function () {\n        OuterContainer.refreshToolbar(uiComponents.outerContainer);\n      };\n      if (toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating) {\n        editor.on('ResizeWindow ResizeEditor ResizeContent', function () {\n          var width = editor.getWin().innerWidth;\n          if (width !== lastToolbarWidth.get()) {\n            refreshDrawer();\n            lastToolbarWidth.set(width);\n          }\n        });\n      }\n      var api = {\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        iframeContainer: socket.element.dom,\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Iframe = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$1\n    });\n\n    var parseToInt = function (val) {\n      var re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + val)) {\n        return Optional.some(parseInt('' + val, 10));\n      }\n      return Optional.none();\n    };\n    var numToPx = function (val) {\n      return isNumber(val) ? val + 'px' : val;\n    };\n    var calcCappedSize = function (size, minSize, maxSize) {\n      var minOverride = minSize.filter(function (min) {\n        return size < min;\n      });\n      var maxOverride = maxSize.filter(function (max) {\n        return size > max;\n      });\n      return minOverride.or(maxOverride).getOr(size);\n    };\n\n    var getHeight$1 = function (editor) {\n      var baseHeight = getHeightSetting(editor);\n      var minHeight = getMinHeightSetting(editor);\n      var maxHeight = getMaxHeightSetting(editor);\n      return parseToInt(baseHeight).map(function (height) {\n        return calcCappedSize(height, minHeight, maxHeight);\n      });\n    };\n    var getHeightWithFallback = function (editor) {\n      var height = getHeight$1(editor);\n      return height.getOr(getHeightSetting(editor));\n    };\n    var getWidth$1 = function (editor) {\n      var baseWidth = getWidthSetting(editor);\n      var minWidth = getMinWidthSetting(editor);\n      var maxWidth = getMaxWidthSetting(editor);\n      return parseToInt(baseWidth).map(function (width) {\n        return calcCappedSize(width, minWidth, maxWidth);\n      });\n    };\n    var getWidthWithFallback = function (editor) {\n      var width = getWidth$1(editor);\n      return width.getOr(getWidthSetting(editor));\n    };\n\n    var InlineHeader = function (editor, targetElm, uiComponents, backstage, floatContainer) {\n      var uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var DOM = global$5.DOM;\n      var useFixedToolbarContainer = useFixedContainer(editor);\n      var isSticky = isStickyToolbar(editor);\n      var editorMaxWidthOpt = getMaxWidthSetting(editor).or(getWidth$1(editor));\n      var headerBackstage = backstage.shared.header;\n      var isPositionedAtTop = headerBackstage.isPositionedAtTop;\n      var toolbarMode = getToolbarMode(editor);\n      var isSplitToolbar = toolbarMode === ToolbarMode.sliding || toolbarMode === ToolbarMode.floating;\n      var visible = Cell(false);\n      var isVisible = function () {\n        return visible.get() && !editor.removed;\n      };\n      var calcToolbarOffset = function (toolbar) {\n        return isSplitToolbar ? toolbar.fold(function () {\n          return 0;\n        }, function (tbar) {\n          return tbar.components().length > 1 ? get$7(tbar.components()[1].element) : 0;\n        }) : 0;\n      };\n      var calcMode = function (container) {\n        switch (getToolbarLocation(editor)) {\n        case ToolbarLocation.auto:\n          var toolbar_1 = OuterContainer.getToolbar(outerContainer);\n          var offset = calcToolbarOffset(toolbar_1);\n          var toolbarHeight = get$7(container.element) - offset;\n          var targetBounds = box(targetElm);\n          var roomAtTop = targetBounds.y > toolbarHeight;\n          if (roomAtTop) {\n            return 'top';\n          } else {\n            var doc = documentElement(targetElm);\n            var docHeight = Math.max(doc.dom.scrollHeight, get$7(doc));\n            var roomAtBottom = targetBounds.bottom < docHeight - toolbarHeight;\n            if (roomAtBottom) {\n              return 'bottom';\n            } else {\n              var winBounds = win();\n              var isRoomAtBottomViewport = winBounds.bottom < targetBounds.bottom - toolbarHeight;\n              return isRoomAtBottomViewport ? 'bottom' : 'top';\n            }\n          }\n        case ToolbarLocation.bottom:\n          return 'bottom';\n        case ToolbarLocation.top:\n        default:\n          return 'top';\n        }\n      };\n      var setupMode = function (mode) {\n        var container = floatContainer.get();\n        Docking.setModes(container, [mode]);\n        headerBackstage.setDockingMode(mode);\n        var verticalDir = isPositionedAtTop() ? AttributeValue.TopToBottom : AttributeValue.BottomToTop;\n        set$1(container.element, Attribute, verticalDir);\n      };\n      var updateChromeWidth = function () {\n        var maxWidth = editorMaxWidthOpt.getOrThunk(function () {\n          var bodyMargin = parseToInt(get$5(body(), 'margin-left')).getOr(0);\n          return get$8(body()) - absolute(targetElm).left + bodyMargin;\n        });\n        set$2(floatContainer.get().element, 'max-width', maxWidth + 'px');\n      };\n      var updateChromePosition = function () {\n        var toolbar = OuterContainer.getToolbar(outerContainer);\n        var offset = calcToolbarOffset(toolbar);\n        var targetBounds = box(targetElm);\n        var top = isPositionedAtTop() ? Math.max(targetBounds.y - get$7(floatContainer.get().element) + offset, 0) : targetBounds.bottom;\n        setAll$1(outerContainer.element, {\n          position: 'absolute',\n          top: Math.round(top) + 'px',\n          left: Math.round(targetBounds.x) + 'px'\n        });\n      };\n      var repositionPopups$1 = function () {\n        uiMothership.broadcastOn([repositionPopups()], {});\n      };\n      var updateChromeUi = function (resetDocking) {\n        if (resetDocking === void 0) {\n          resetDocking = false;\n        }\n        if (!isVisible()) {\n          return;\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromeWidth();\n        }\n        if (isSplitToolbar) {\n          OuterContainer.refreshToolbar(outerContainer);\n        }\n        if (!useFixedToolbarContainer) {\n          updateChromePosition();\n        }\n        if (isSticky) {\n          var floatContainerComp = floatContainer.get();\n          resetDocking ? Docking.reset(floatContainerComp) : Docking.refresh(floatContainerComp);\n        }\n        repositionPopups$1();\n      };\n      var updateMode = function (updateUi) {\n        if (updateUi === void 0) {\n          updateUi = true;\n        }\n        if (useFixedToolbarContainer || !isSticky || !isVisible()) {\n          return;\n        }\n        var currentMode = headerBackstage.getDockingMode();\n        var newMode = calcMode(floatContainer.get());\n        if (newMode !== currentMode) {\n          setupMode(newMode);\n          if (updateUi) {\n            updateChromeUi(true);\n          }\n        }\n      };\n      var show = function () {\n        visible.set(true);\n        set$2(outerContainer.element, 'display', 'flex');\n        DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        remove$6(uiMothership.element, 'display');\n        updateMode(false);\n        updateChromeUi();\n      };\n      var hide = function () {\n        visible.set(false);\n        if (uiComponents.outerContainer) {\n          set$2(outerContainer.element, 'display', 'none');\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n        set$2(uiMothership.element, 'display', 'none');\n      };\n      return {\n        isVisible: isVisible,\n        isPositionedAtTop: isPositionedAtTop,\n        show: show,\n        hide: hide,\n        update: updateChromeUi,\n        updateMode: updateMode,\n        repositionPopups: repositionPopups$1\n      };\n    };\n\n    var getTargetPosAndBounds = function (targetElm, isToolbarTop) {\n      var bounds = box(targetElm);\n      return {\n        pos: isToolbarTop ? bounds.y : bounds.bottom,\n        bounds: bounds\n      };\n    };\n    var setupEvents$1 = function (editor, targetElm, ui, toolbarPersist) {\n      var prevPosAndBounds = Cell(getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()));\n      var resizeContent = function (e) {\n        var _a = getTargetPosAndBounds(targetElm, ui.isPositionedAtTop()), pos = _a.pos, bounds = _a.bounds;\n        var _b = prevPosAndBounds.get(), prevPos = _b.pos, prevBounds = _b.bounds;\n        var hasResized = bounds.height !== prevBounds.height || bounds.width !== prevBounds.width;\n        prevPosAndBounds.set({\n          pos: pos,\n          bounds: bounds\n        });\n        if (hasResized) {\n          fireResizeContent(editor, e);\n        }\n        if (ui.isVisible()) {\n          if (prevPos !== pos) {\n            ui.update(true);\n          } else if (hasResized) {\n            ui.updateMode();\n            ui.repositionPopups();\n          }\n        }\n      };\n      if (!toolbarPersist) {\n        editor.on('activate', ui.show);\n        editor.on('deactivate', ui.hide);\n      }\n      editor.on('SkinLoaded ResizeWindow', function () {\n        return ui.update(true);\n      });\n      editor.on('NodeChange keydown', function (e) {\n        global$2.requestAnimationFrame(function () {\n          return resizeContent(e);\n        });\n      });\n      editor.on('ScrollWindow', function () {\n        return ui.updateMode();\n      });\n      var elementLoad = unbindable();\n      elementLoad.set(capture$1(SugarElement.fromDom(editor.getBody()), 'load', resizeContent));\n      editor.on('remove', function () {\n        elementLoad.clear();\n      });\n    };\n    var render$2 = function (editor, uiComponents, rawUiConfig, backstage, args) {\n      var mothership = uiComponents.mothership, uiMothership = uiComponents.uiMothership, outerContainer = uiComponents.outerContainer;\n      var floatContainer = Cell(null);\n      var targetElm = SugarElement.fromDom(args.targetNode);\n      var ui = InlineHeader(editor, targetElm, uiComponents, backstage, floatContainer);\n      var toolbarPersist = isToolbarPersist(editor);\n      inline(editor);\n      var render = function () {\n        if (floatContainer.get()) {\n          ui.show();\n          return;\n        }\n        floatContainer.set(OuterContainer.getHeader(outerContainer).getOrDie());\n        var uiContainer = getUiContainer(editor);\n        attachSystem(uiContainer, mothership);\n        attachSystem(uiContainer, uiMothership);\n        setToolbar(editor, uiComponents, rawUiConfig, backstage);\n        OuterContainer.setMenubar(outerContainer, identifyMenus(editor, rawUiConfig));\n        ui.show();\n        setupEvents$1(editor, targetElm, ui, toolbarPersist);\n        editor.nodeChanged();\n      };\n      editor.on('show', render);\n      editor.on('hide', ui.hide);\n      if (!toolbarPersist) {\n        editor.on('focus', render);\n        editor.on('blur', ui.hide);\n      }\n      editor.on('init', function () {\n        if (editor.hasFocus() || toolbarPersist) {\n          render();\n        }\n      });\n      setupReadonlyModeSwitch(editor, uiComponents);\n      var api = {\n        show: function () {\n          ui.show();\n        },\n        hide: function () {\n          ui.hide();\n        },\n        enable: function () {\n          broadcastReadonly(uiComponents, false);\n        },\n        disable: function () {\n          broadcastReadonly(uiComponents, true);\n        },\n        isDisabled: function () {\n          return Disabling.isDisabled(outerContainer);\n        }\n      };\n      return {\n        editorContainer: outerContainer.element.dom,\n        api: api\n      };\n    };\n\n    var Inline = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        render: render$2\n    });\n\n    var register$5 = function (editor) {\n      var alignToolbarButtons = [\n        {\n          name: 'alignleft',\n          text: 'Align left',\n          cmd: 'JustifyLeft',\n          icon: 'align-left'\n        },\n        {\n          name: 'aligncenter',\n          text: 'Align center',\n          cmd: 'JustifyCenter',\n          icon: 'align-center'\n        },\n        {\n          name: 'alignright',\n          text: 'Align right',\n          cmd: 'JustifyRight',\n          icon: 'align-right'\n        },\n        {\n          name: 'alignjustify',\n          text: 'Justify',\n          cmd: 'JustifyFull',\n          icon: 'align-justify'\n        }\n      ];\n      global$c.each(alignToolbarButtons, function (item) {\n        editor.ui.registry.addToggleButton(item.name, {\n          tooltip: item.text,\n          onAction: function () {\n            return editor.execCommand(item.cmd);\n          },\n          icon: item.icon,\n          onSetup: onSetupFormatToggle(editor, item.name)\n        });\n      });\n      var alignNoneToolbarButton = {\n        name: 'alignnone',\n        text: 'No alignment',\n        cmd: 'JustifyNone',\n        icon: 'align-none'\n      };\n      editor.ui.registry.addButton(alignNoneToolbarButton.name, {\n        tooltip: alignNoneToolbarButton.text,\n        onAction: function () {\n          return editor.execCommand(alignNoneToolbarButton.cmd);\n        },\n        icon: alignNoneToolbarButton.icon\n      });\n    };\n\n    var register$6 = function (editor, backstage) {\n      alignSelectMenu(editor, backstage);\n      fontSelectMenu(editor, backstage);\n      styleSelectMenu(editor, backstage);\n      formatSelectMenu(editor, backstage);\n      fontsizeSelectMenu(editor, backstage);\n    };\n\n    var toggleOutdentState = function (api, editor) {\n      api.setDisabled(!editor.queryCommandState('outdent'));\n      var onNodeChange = function () {\n        api.setDisabled(!editor.queryCommandState('outdent'));\n      };\n      editor.on('NodeChange', onNodeChange);\n      return function () {\n        return editor.off('NodeChange', onNodeChange);\n      };\n    };\n    var registerButtons = function (editor) {\n      editor.ui.registry.addButton('outdent', {\n        tooltip: 'Decrease indent',\n        icon: 'outdent',\n        onSetup: function (api) {\n          return toggleOutdentState(api, editor);\n        },\n        onAction: function () {\n          return editor.execCommand('outdent');\n        }\n      });\n      editor.ui.registry.addButton('indent', {\n        tooltip: 'Increase indent',\n        icon: 'indent',\n        onAction: function () {\n          return editor.execCommand('indent');\n        }\n      });\n    };\n    var register$7 = function (editor) {\n      registerButtons(editor);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var registerFormatButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          icon: 'bold'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          icon: 'italic'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          icon: 'underline'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          icon: 'strike-through'\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          icon: 'subscript'\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          icon: 'superscript'\n        }\n      ], function (btn, _idx) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onSetup: onSetupFormatToggle(editor, btn.name),\n          onAction: toggleFormat(editor, btn.name)\n        });\n      });\n      for (var i = 1; i <= 6; i++) {\n        var name_1 = 'h' + i;\n        editor.ui.registry.addToggleButton(name_1, {\n          text: name_1.toUpperCase(),\n          tooltip: 'Heading ' + i,\n          onSetup: onSetupFormatToggle(editor, name_1),\n          onAction: toggleFormat(editor, name_1)\n        });\n      }\n    };\n    var registerCommandButtons = function (editor) {\n      global$c.each([\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste'\n        },\n        {\n          name: 'help',\n          text: 'Help',\n          action: 'mceHelp',\n          icon: 'help'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all'\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document'\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting'\n        },\n        {\n          name: 'remove',\n          text: 'Remove',\n          action: 'Delete',\n          icon: 'remove'\n        }\n      ], function (btn) {\n        editor.ui.registry.addButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$c.each([{\n          name: 'blockquote',\n          text: 'Blockquote',\n          action: 'mceBlockQuote',\n          icon: 'quote'\n        }], function (btn) {\n        editor.ui.registry.addToggleButton(btn.name, {\n          tooltip: btn.text,\n          icon: btn.icon,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          },\n          onSetup: onSetupFormatToggle(editor, btn.name)\n        });\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems = function (editor) {\n      global$c.each([\n        {\n          name: 'bold',\n          text: 'Bold',\n          action: 'Bold',\n          icon: 'bold',\n          shortcut: 'Meta+B'\n        },\n        {\n          name: 'italic',\n          text: 'Italic',\n          action: 'Italic',\n          icon: 'italic',\n          shortcut: 'Meta+I'\n        },\n        {\n          name: 'underline',\n          text: 'Underline',\n          action: 'Underline',\n          icon: 'underline',\n          shortcut: 'Meta+U'\n        },\n        {\n          name: 'strikethrough',\n          text: 'Strikethrough',\n          action: 'Strikethrough',\n          icon: 'strike-through',\n          shortcut: ''\n        },\n        {\n          name: 'subscript',\n          text: 'Subscript',\n          action: 'Subscript',\n          icon: 'subscript',\n          shortcut: ''\n        },\n        {\n          name: 'superscript',\n          text: 'Superscript',\n          action: 'Superscript',\n          icon: 'superscript',\n          shortcut: ''\n        },\n        {\n          name: 'removeformat',\n          text: 'Clear formatting',\n          action: 'RemoveFormat',\n          icon: 'remove-formatting',\n          shortcut: ''\n        },\n        {\n          name: 'newdocument',\n          text: 'New document',\n          action: 'mceNewDocument',\n          icon: 'new-document',\n          shortcut: ''\n        },\n        {\n          name: 'cut',\n          text: 'Cut',\n          action: 'Cut',\n          icon: 'cut',\n          shortcut: 'Meta+X'\n        },\n        {\n          name: 'copy',\n          text: 'Copy',\n          action: 'Copy',\n          icon: 'copy',\n          shortcut: 'Meta+C'\n        },\n        {\n          name: 'paste',\n          text: 'Paste',\n          action: 'Paste',\n          icon: 'paste',\n          shortcut: 'Meta+V'\n        },\n        {\n          name: 'selectall',\n          text: 'Select all',\n          action: 'SelectAll',\n          icon: 'select-all',\n          shortcut: 'Meta+A'\n        }\n      ], function (btn) {\n        editor.ui.registry.addMenuItem(btn.name, {\n          text: btn.text,\n          icon: btn.icon,\n          shortcut: btn.shortcut,\n          onAction: function () {\n            return editor.execCommand(btn.action);\n          }\n        });\n      });\n      editor.ui.registry.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'sourcecode',\n        onAction: toggleFormat(editor, 'code')\n      });\n    };\n    var register$8 = function (editor) {\n      registerButtons$1(editor);\n      registerMenuItems(editor);\n    };\n\n    var toggleUndoRedoState = function (api, editor, type) {\n      var checkState = function () {\n        return editor.undoManager ? editor.undoManager[type]() : false;\n      };\n      var onUndoStateChange = function () {\n        api.setDisabled(editor.mode.isReadOnly() || !checkState());\n      };\n      api.setDisabled(!checkState());\n      editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      return function () {\n        return editor.off('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', onUndoStateChange);\n      };\n    };\n    var registerMenuItems$1 = function (editor) {\n      editor.ui.registry.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var registerButtons$2 = function (editor) {\n      editor.ui.registry.addButton('undo', {\n        tooltip: 'Undo',\n        icon: 'undo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasUndo');\n        },\n        onAction: function () {\n          return editor.execCommand('undo');\n        }\n      });\n      editor.ui.registry.addButton('redo', {\n        tooltip: 'Redo',\n        icon: 'redo',\n        onSetup: function (api) {\n          return toggleUndoRedoState(api, editor, 'hasRedo');\n        },\n        onAction: function () {\n          return editor.execCommand('redo');\n        }\n      });\n    };\n    var register$9 = function (editor) {\n      registerMenuItems$1(editor);\n      registerButtons$2(editor);\n    };\n\n    var toggleVisualAidState = function (api, editor) {\n      api.setActive(editor.hasVisual);\n      var onVisualAid = function (e) {\n        api.setActive(e.hasVisual);\n      };\n      editor.on('VisualAid', onVisualAid);\n      return function () {\n        return editor.off('VisualAid', onVisualAid);\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.ui.registry.addToggleMenuItem('visualaid', {\n        text: 'Visual aids',\n        onSetup: function (api) {\n          return toggleVisualAidState(api, editor);\n        },\n        onAction: function () {\n          editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var registerToolbarButton = function (editor) {\n      editor.ui.registry.addButton('visualaid', {\n        tooltip: 'Visual aids',\n        text: 'Visual aids',\n        onAction: function () {\n          return editor.execCommand('mceToggleVisualAid');\n        }\n      });\n    };\n    var register$a = function (editor) {\n      registerToolbarButton(editor);\n      registerMenuItems$2(editor);\n    };\n\n    var units = {\n      unsupportedLength: [\n        'em',\n        'ex',\n        'cap',\n        'ch',\n        'ic',\n        'rem',\n        'lh',\n        'rlh',\n        'vw',\n        'vh',\n        'vi',\n        'vb',\n        'vmin',\n        'vmax',\n        'cm',\n        'mm',\n        'Q',\n        'in',\n        'pc',\n        'pt',\n        'px'\n      ],\n      fixed: [\n        'px',\n        'pt'\n      ],\n      relative: ['%'],\n      empty: ['']\n    };\n    var pattern = function () {\n      var decimalDigits = '[0-9]+';\n      var signedInteger = '[+-]?' + decimalDigits;\n      var exponentPart = '[eE]' + signedInteger;\n      var dot = '\\\\.';\n      var opt = function (input) {\n        return '(?:' + input + ')?';\n      };\n      var unsignedDecimalLiteral = [\n        'Infinity',\n        decimalDigits + dot + opt(decimalDigits) + opt(exponentPart),\n        dot + decimalDigits + opt(exponentPart),\n        decimalDigits + opt(exponentPart)\n      ].join('|');\n      var float = '[+-]?(?:' + unsignedDecimalLiteral + ')';\n      return new RegExp('^(' + float + ')(.*)$');\n    }();\n    var isUnit = function (unit, accepted) {\n      return exists(accepted, function (acc) {\n        return exists(units[acc], function (check) {\n          return unit === check;\n        });\n      });\n    };\n    var parse = function (input, accepted) {\n      var match = Optional.from(pattern.exec(input));\n      return match.bind(function (array) {\n        var value = Number(array[1]);\n        var unitRaw = array[2];\n        if (isUnit(unitRaw, accepted)) {\n          return Optional.some({\n            value: value,\n            unit: unitRaw\n          });\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalise = function (input, accepted) {\n      return parse(input, accepted).map(function (_a) {\n        var value = _a.value, unit = _a.unit;\n        return value + unit;\n      });\n    };\n\n    var normaliseLineHeight = function (input) {\n      return normalise(input, [\n        'fixed',\n        'relative',\n        'empty'\n      ]).getOr(input);\n    };\n    var getLineHeights = function (editor) {\n      var options = getLineHeightFormats(editor);\n      var apis = new Map();\n      var lastApi = destroyable();\n      var callback = function () {\n        var current = normaliseLineHeight(editor.queryCommandValue('LineHeight'));\n        Optional.from(apis.get(current)).fold(function () {\n          return lastApi.clear();\n        }, function (api) {\n          lastApi.set({\n            destroy: function () {\n              api.setActive(false);\n            }\n          });\n          api.setActive(true);\n        });\n      };\n      editor.on('nodeChange', callback);\n      return map(options, function (value, i) {\n        return {\n          type: 'togglemenuitem',\n          text: value,\n          onSetup: function (api) {\n            apis.set(normaliseLineHeight(value), api);\n            if (i + 1 === options.length) {\n              callback();\n            }\n            return function () {\n              if (i === 0) {\n                editor.off('nodeChange', callback);\n                lastApi.clear();\n              }\n            };\n          },\n          onAction: function () {\n            return editor.execCommand('LineHeight', false, value);\n          }\n        };\n      });\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.ui.registry.addNestedMenuItem('lineheight', {\n        type: 'nestedmenuitem',\n        text: 'Line height',\n        getSubmenuItems: function () {\n          return getLineHeights(editor);\n        }\n      });\n    };\n    var registerButtons$3 = function (editor) {\n      editor.ui.registry.addMenuButton('lineheight', {\n        tooltip: 'Line height',\n        icon: 'line-height',\n        fetch: function (callback) {\n          return callback(getLineHeights(editor));\n        }\n      });\n    };\n    var register$b = function (editor) {\n      registerMenuItems$3(editor);\n      registerButtons$3(editor);\n    };\n\n    var setup$8 = function (editor, backstage) {\n      register$5(editor);\n      register$8(editor);\n      register$6(editor, backstage);\n      register$9(editor);\n      register$1(editor);\n      register$a(editor);\n      register$7(editor);\n      register$b(editor);\n    };\n\n    var nu$d = function (x, y) {\n      return {\n        anchor: 'makeshift',\n        x: x,\n        y: y\n      };\n    };\n    var transpose$1 = function (pos, dx, dy) {\n      return nu$d(pos.x + dx, pos.y + dy);\n    };\n    var isTouchEvent$1 = function (e) {\n      return e.type === 'longpress' || e.type.indexOf('touch') === 0;\n    };\n    var fromPageXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.pageX, touch.pageY);\n      } else {\n        return nu$d(e.pageX, e.pageY);\n      }\n    };\n    var fromClientXY = function (e) {\n      if (isTouchEvent$1(e)) {\n        var touch = e.touches[0];\n        return nu$d(touch.clientX, touch.clientY);\n      } else {\n        return nu$d(e.clientX, e.clientY);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$5.DOM.getPos(element);\n      return transpose$1(pos, containerPos.x, containerPos.y);\n    };\n    var getPointAnchor = function (editor, e) {\n      if (e.type === 'contextmenu' || e.type === 'longpress') {\n        if (editor.inline) {\n          return fromPageXY(e);\n        } else {\n          return transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        }\n      } else {\n        return getSelectionAnchor(editor);\n      }\n    };\n    var getSelectionAnchor = function (editor) {\n      return {\n        anchor: 'selection',\n        root: SugarElement.fromDom(editor.selection.getNode())\n      };\n    };\n    var getNodeAnchor$1 = function (editor) {\n      return {\n        anchor: 'node',\n        node: Optional.some(SugarElement.fromDom(editor.selection.getNode())),\n        root: SugarElement.fromDom(editor.getBody())\n      };\n    };\n\n    var initAndShow = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var items = buildMenu();\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchor(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, false).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuAt(contextmenu, anchorSpec, {\n          menu: { markers: markers$1('normal') },\n          data: menuData\n        });\n      });\n    };\n\n    var layouts = {\n      onLtr: function () {\n        return [\n          south$1,\n          southeast$1,\n          southwest$1,\n          northeast$1,\n          northwest$1,\n          north$1,\n          north$3,\n          south$3,\n          northeast$3,\n          southeast$3,\n          northwest$3,\n          southwest$3\n        ];\n      },\n      onRtl: function () {\n        return [\n          south$1,\n          southwest$1,\n          southeast$1,\n          northwest$1,\n          northeast$1,\n          north$1,\n          north$3,\n          south$3,\n          northwest$3,\n          southwest$3,\n          northeast$3,\n          southeast$3\n        ];\n      }\n    };\n    var bubbleSize$1 = 12;\n    var bubbleAlignments$2 = {\n      valignCentre: [],\n      alignCentre: [],\n      alignLeft: ['tox-pop--align-left'],\n      alignRight: ['tox-pop--align-right'],\n      right: ['tox-pop--right'],\n      left: ['tox-pop--left'],\n      bottom: ['tox-pop--bottom'],\n      top: ['tox-pop--top']\n    };\n    var isTouchWithinSelection = function (editor, e) {\n      var selection = editor.selection;\n      if (selection.isCollapsed() || e.touches.length < 1) {\n        return false;\n      } else {\n        var touch_1 = e.touches[0];\n        var rng = selection.getRng();\n        var rngRectOpt = getFirstRect$1(editor.getWin(), SimSelection.domRange(rng));\n        return rngRectOpt.exists(function (rngRect) {\n          return rngRect.left <= touch_1.clientX && rngRect.right >= touch_1.clientX && rngRect.top <= touch_1.clientY && rngRect.bottom >= touch_1.clientY;\n        });\n      }\n    };\n    var getPointAnchorSpec = function (editor, e) {\n      return __assign({\n        bubble: nu$8(0, bubbleSize$1, bubbleAlignments$2),\n        layouts: layouts,\n        overrides: {\n          maxWidthFunction: expandable$1(),\n          maxHeightFunction: expandable()\n        }\n      }, getPointAnchor(editor, e));\n    };\n    var setupiOSOverrides = function (editor) {\n      var originalSelection = editor.selection.getRng();\n      var selectionReset = function () {\n        global$2.setEditorTimeout(editor, function () {\n          editor.selection.setRng(originalSelection);\n        }, 10);\n        unbindEventListeners();\n      };\n      editor.once('touchend', selectionReset);\n      var preventMousedown = function (e) {\n        e.preventDefault();\n        e.stopImmediatePropagation();\n      };\n      editor.on('mousedown', preventMousedown, true);\n      var clearSelectionReset = function () {\n        return unbindEventListeners();\n      };\n      editor.once('longpresscancel', clearSelectionReset);\n      var unbindEventListeners = function () {\n        editor.off('touchend', selectionReset);\n        editor.off('longpresscancel', clearSelectionReset);\n        editor.off('mousedown', preventMousedown);\n      };\n    };\n    var show = function (editor, e, items, backstage, contextmenu, useNodeAnchor, highlightImmediately) {\n      var anchorSpec = useNodeAnchor ? getNodeAnchor$1(editor) : getPointAnchorSpec(editor, e);\n      build$2(items, ItemResponse$1.CLOSE_ON_EXECUTE, backstage, true).map(function (menuData) {\n        e.preventDefault();\n        InlineView.showMenuWithinBounds(contextmenu, anchorSpec, {\n          menu: {\n            markers: markers$1('normal'),\n            highlightImmediately: highlightImmediately\n          },\n          data: menuData,\n          type: 'horizontal'\n        }, function () {\n          return Optional.some(getContextToolbarBounds(editor, backstage.shared));\n        });\n        editor.fire(hideContextToolbarEvent);\n      });\n    };\n    var initAndShow$1 = function (editor, e, buildMenu, backstage, contextmenu, useNodeAnchor) {\n      var detection = detect$3();\n      var isiOS = detection.os.isiOS();\n      var isOSX = detection.os.isOSX();\n      var isAndroid = detection.os.isAndroid();\n      var isTouch = detection.deviceType.isTouch();\n      var shouldHighlightImmediately = function () {\n        return !(isAndroid || isiOS || isOSX && isTouch);\n      };\n      var open = function () {\n        var items = buildMenu();\n        show(editor, e, items, backstage, contextmenu, useNodeAnchor, shouldHighlightImmediately());\n      };\n      if ((isOSX || isiOS) && !useNodeAnchor) {\n        var openiOS_1 = function () {\n          setupiOSOverrides(editor);\n          open();\n        };\n        if (isTouchWithinSelection(editor, e)) {\n          openiOS_1();\n        } else {\n          editor.once('selectionchange', openiOS_1);\n          editor.once('touchend', function () {\n            return editor.off('selectionchange', openiOS_1);\n          });\n        }\n      } else {\n        if (isAndroid && !useNodeAnchor) {\n          editor.selection.setCursorLocation(e.target, 0);\n        }\n        open();\n      }\n    };\n\n    var patchPipeConfig = function (config) {\n      return typeof config === 'string' ? config.split(/[ ,]/) : config;\n    };\n    var shouldNeverUseNative = function (editor) {\n      return editor.getParam('contextmenu_never_use_native', false, 'boolean');\n    };\n    var getMenuItems = function (editor, name, defaultItems) {\n      var contextMenus = editor.ui.registry.getAll().contextMenus;\n      return Optional.from(editor.getParam(name)).map(patchPipeConfig).getOrThunk(function () {\n        return filter(patchPipeConfig(defaultItems), function (item) {\n          return has(contextMenus, item);\n        });\n      });\n    };\n    var isContextMenuDisabled = function (editor) {\n      return editor.getParam('contextmenu') === false;\n    };\n    var getContextMenu = function (editor) {\n      return getMenuItems(editor, 'contextmenu', 'link linkchecker image imagetools table spellchecker configurepermanentpen');\n    };\n    var getAvoidOverlapSelector = function (editor) {\n      return editor.getParam('contextmenu_avoid_overlap', '', 'string');\n    };\n\n    var isSeparator$1 = function (item) {\n      return isString(item) ? item === '|' : item.type === 'separator';\n    };\n    var separator$3 = { type: 'separator' };\n    var makeContextItem = function (item) {\n      if (isString(item)) {\n        return item;\n      } else {\n        switch (item.type) {\n        case 'separator':\n          return separator$3;\n        case 'submenu':\n          return {\n            type: 'nestedmenuitem',\n            text: item.text,\n            icon: item.icon,\n            getSubmenuItems: function () {\n              var items = item.getSubmenuItems();\n              if (isString(items)) {\n                return items;\n              } else {\n                return map(items, makeContextItem);\n              }\n            }\n          };\n        default:\n          return {\n            type: 'menuitem',\n            text: item.text,\n            icon: item.icon,\n            onAction: noarg(item.onAction)\n          };\n        }\n      }\n    };\n    var addContextMenuGroup = function (xs, groupItems) {\n      if (groupItems.length === 0) {\n        return xs;\n      }\n      var lastMenuItem = last(xs).filter(function (item) {\n        return !isSeparator$1(item);\n      });\n      var before = lastMenuItem.fold(function () {\n        return [];\n      }, function (_) {\n        return [separator$3];\n      });\n      return xs.concat(before).concat(groupItems).concat([separator$3]);\n    };\n    var generateContextMenu = function (contextMenus, menuConfig, selectedElement) {\n      var sections = foldl(menuConfig, function (acc, name) {\n        if (has(contextMenus, name)) {\n          var items = contextMenus[name].update(selectedElement);\n          if (isString(items)) {\n            return addContextMenuGroup(acc, items.split(' '));\n          } else if (items.length > 0) {\n            var allItems = map(items, makeContextItem);\n            return addContextMenuGroup(acc, allItems);\n          } else {\n            return acc;\n          }\n        } else {\n          return acc.concat([name]);\n        }\n      }, []);\n      if (sections.length > 0 && isSeparator$1(sections[sections.length - 1])) {\n        sections.pop();\n      }\n      return sections;\n    };\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !shouldNeverUseNative(editor);\n    };\n    var isTriggeredByKeyboard = function (editor, e) {\n      return e.type !== 'longpress' && (e.button !== 2 || e.target === editor.getBody() && e.pointerType === '');\n    };\n    var getSelectedElement = function (editor, e) {\n      return isTriggeredByKeyboard(editor, e) ? editor.selection.getStart(true) : e.target;\n    };\n    var shouldUseNodeAnchor = function (editor, e) {\n      var selector = getAvoidOverlapSelector(editor);\n      if (isTriggeredByKeyboard(editor, e)) {\n        return true;\n      } else if (selector) {\n        var target = getSelectedElement(editor, e);\n        return closest$4(SugarElement.fromDom(target), selector);\n      } else {\n        return false;\n      }\n    };\n    var setup$9 = function (editor, lazySink, backstage) {\n      var detection = detect$3();\n      var isTouch = detection.deviceType.isTouch;\n      var contextmenu = build$1(InlineView.sketch({\n        dom: { tag: 'div' },\n        lazySink: lazySink,\n        onEscape: function () {\n          return editor.focus();\n        },\n        onShow: function () {\n          return backstage.setContextMenuState(true);\n        },\n        onHide: function () {\n          return backstage.setContextMenuState(false);\n        },\n        fireDismissalEventInstead: {},\n        inlineBehaviours: derive$1([config('dismissContextMenu', [run(dismissRequested(), function (comp, _se) {\n              Sandboxing.close(comp);\n              editor.focus();\n            })])])\n      }));\n      var hideContextMenu = function (_e) {\n        return InlineView.hide(contextmenu);\n      };\n      var showContextMenu = function (e) {\n        if (shouldNeverUseNative(editor)) {\n          e.preventDefault();\n        }\n        if (isNativeOverrideKeyEvent(editor, e) || isContextMenuDisabled(editor)) {\n          return;\n        }\n        var useNodeAnchor = shouldUseNodeAnchor(editor, e);\n        var buildMenu = function () {\n          var selectedElement = getSelectedElement(editor, e);\n          var registry = editor.ui.registry.getAll();\n          var menuConfig = getContextMenu(editor);\n          return generateContextMenu(registry.contextMenus, menuConfig, selectedElement);\n        };\n        var initAndShow$2 = isTouch() ? initAndShow$1 : initAndShow;\n        initAndShow$2(editor, e, buildMenu, backstage, contextmenu, useNodeAnchor);\n      };\n      editor.on('init', function () {\n        var hideEvents = 'ResizeEditor ScrollContent ScrollWindow longpresscancel' + (isTouch() ? '' : ' ResizeWindow');\n        editor.on(hideEvents, hideContextMenu);\n        editor.on('longpress contextmenu', showContextMenu);\n      });\n    };\n\n    var adt$c = Adt.generate([\n      {\n        offset: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        absolute: [\n          'x',\n          'y'\n        ]\n      },\n      {\n        fixed: [\n          'x',\n          'y'\n        ]\n      }\n    ]);\n    var subtract = function (change) {\n      return function (point) {\n        return point.translate(-change.left, -change.top);\n      };\n    };\n    var add$4 = function (change) {\n      return function (point) {\n        return point.translate(change.left, change.top);\n      };\n    };\n    var transform$1 = function (changes) {\n      return function (x, y) {\n        return foldl(changes, function (rest, f) {\n          return f(rest);\n        }, SugarPosition(x, y));\n      };\n    };\n    var asFixed = function (coord, scroll, origin) {\n      return coord.fold(transform$1([\n        add$4(origin),\n        subtract(scroll)\n      ]), transform$1([subtract(scroll)]), transform$1([]));\n    };\n    var asAbsolute = function (coord, scroll, origin) {\n      return coord.fold(transform$1([add$4(origin)]), transform$1([]), transform$1([add$4(scroll)]));\n    };\n    var asOffset = function (coord, scroll, origin) {\n      return coord.fold(transform$1([]), transform$1([subtract(origin)]), transform$1([\n        add$4(scroll),\n        subtract(origin)\n      ]));\n    };\n    var withinRange = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      return Math.abs(a1.left - a2.left) <= xRange && Math.abs(a1.top - a2.top) <= yRange;\n    };\n    var getDeltas = function (coord1, coord2, xRange, yRange, scroll, origin) {\n      var a1 = asAbsolute(coord1, scroll, origin);\n      var a2 = asAbsolute(coord2, scroll, origin);\n      var left = Math.abs(a1.left - a2.left);\n      var top = Math.abs(a1.top - a2.top);\n      return SugarPosition(left, top);\n    };\n    var toStyles = function (coord, scroll, origin) {\n      var stylesOpt = coord.fold(function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('absolute'),\n          left: Optional.some(x - origin.left + 'px'),\n          top: Optional.some(y - origin.top + 'px')\n        };\n      }, function (x, y) {\n        return {\n          position: Optional.some('fixed'),\n          left: Optional.some(x + 'px'),\n          top: Optional.some(y + 'px')\n        };\n      });\n      return __assign({\n        right: Optional.none(),\n        bottom: Optional.none()\n      }, stylesOpt);\n    };\n    var translate$2 = function (coord, deltaX, deltaY) {\n      return coord.fold(function (x, y) {\n        return offset(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return absolute$3(x + deltaX, y + deltaY);\n      }, function (x, y) {\n        return fixed$1(x + deltaX, y + deltaY);\n      });\n    };\n    var absorb = function (partialCoord, originalCoord, scroll, origin) {\n      var absorbOne = function (stencil, nu) {\n        return function (optX, optY) {\n          var original = stencil(originalCoord, scroll, origin);\n          return nu(optX.getOr(original.left), optY.getOr(original.top));\n        };\n      };\n      return partialCoord.fold(absorbOne(asOffset, offset), absorbOne(asAbsolute, absolute$3), absorbOne(asFixed, fixed$1));\n    };\n    var offset = adt$c.offset;\n    var absolute$3 = adt$c.absolute;\n    var fixed$1 = adt$c.fixed;\n\n    var parseAttrToInt = function (element, name) {\n      var value = get$3(element, name);\n      return isUndefined(value) ? NaN : parseInt(value, 10);\n    };\n    var get$f = function (component, snapsInfo) {\n      var element = component.element;\n      var x = parseAttrToInt(element, snapsInfo.leftAttr);\n      var y = parseAttrToInt(element, snapsInfo.topAttr);\n      return isNaN(x) || isNaN(y) ? Optional.none() : Optional.some(SugarPosition(x, y));\n    };\n    var set$8 = function (component, snapsInfo, pt) {\n      var element = component.element;\n      set$1(element, snapsInfo.leftAttr, pt.left + 'px');\n      set$1(element, snapsInfo.topAttr, pt.top + 'px');\n    };\n    var clear = function (component, snapsInfo) {\n      var element = component.element;\n      remove$1(element, snapsInfo.leftAttr);\n      remove$1(element, snapsInfo.topAttr);\n    };\n\n    var getCoords = function (component, snapInfo, coord, delta) {\n      return get$f(component, snapInfo).fold(function () {\n        return coord;\n      }, function (fixed) {\n        return fixed$1(fixed.left + delta.left, fixed.top + delta.top);\n      });\n    };\n    var moveOrSnap = function (component, snapInfo, coord, delta, scroll, origin) {\n      var newCoord = getCoords(component, snapInfo, coord, delta);\n      var snap = snapInfo.mustSnap ? findClosestSnap(component, snapInfo, newCoord, scroll, origin) : findSnap(component, snapInfo, newCoord, scroll, origin);\n      var fixedCoord = asFixed(newCoord, scroll, origin);\n      set$8(component, snapInfo, fixedCoord);\n      return snap.fold(function () {\n        return {\n          coord: fixed$1(fixedCoord.left, fixedCoord.top),\n          extra: Optional.none()\n        };\n      }, function (spanned) {\n        return {\n          coord: spanned.output,\n          extra: spanned.extra\n        };\n      });\n    };\n    var stopDrag = function (component, snapInfo) {\n      clear(component, snapInfo);\n    };\n    var findMatchingSnap = function (snaps, newCoord, scroll, origin) {\n      return findMap(snaps, function (snap) {\n        var sensor = snap.sensor;\n        var inRange = withinRange(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n        return inRange ? Optional.some({\n          output: absorb(snap.output, newCoord, scroll, origin),\n          extra: snap.extra\n        }) : Optional.none();\n      });\n    };\n    var findClosestSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      var matchSnap = findMatchingSnap(snaps, newCoord, scroll, origin);\n      return matchSnap.orThunk(function () {\n        var bestSnap = foldl(snaps, function (acc, snap) {\n          var sensor = snap.sensor;\n          var deltas = getDeltas(newCoord, sensor, snap.range.left, snap.range.top, scroll, origin);\n          return acc.deltas.fold(function () {\n            return {\n              deltas: Optional.some(deltas),\n              snap: Optional.some(snap)\n            };\n          }, function (bestDeltas) {\n            var currAvg = (deltas.left + deltas.top) / 2;\n            var bestAvg = (bestDeltas.left + bestDeltas.top) / 2;\n            if (currAvg <= bestAvg) {\n              return {\n                deltas: Optional.some(deltas),\n                snap: Optional.some(snap)\n              };\n            } else {\n              return acc;\n            }\n          });\n        }, {\n          deltas: Optional.none(),\n          snap: Optional.none()\n        });\n        return bestSnap.snap.map(function (snap) {\n          return {\n            output: absorb(snap.output, newCoord, scroll, origin),\n            extra: snap.extra\n          };\n        });\n      });\n    };\n    var findSnap = function (component, snapInfo, newCoord, scroll, origin) {\n      var snaps = snapInfo.getSnapPoints(component);\n      return findMatchingSnap(snaps, newCoord, scroll, origin);\n    };\n    var snapTo = function (snap, scroll, origin) {\n      return {\n        coord: absorb(snap.output, snap.output, scroll, origin),\n        extra: snap.extra\n      };\n    };\n\n    var snapTo$1 = function (component, dragConfig, _state, snap) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var snapPin = snapTo(snap, scroll_1, origin_1);\n        var styles = toStyles(snapPin.coord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n    };\n\n    var DraggingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        snapTo: snapTo$1\n    });\n\n    var initialAttribute = 'data-initial-z-index';\n    var resetZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getOpt(root, initialAttribute).fold(function () {\n          return remove$6(root, 'z-index');\n        }, function (zIndex) {\n          return set$2(root, 'z-index', zIndex);\n        });\n        remove$1(root, initialAttribute);\n      });\n    };\n    var changeZIndex = function (blocker) {\n      parent(blocker.element).filter(isElement).each(function (root) {\n        getRaw(root, 'z-index').each(function (zindex) {\n          set$1(root, initialAttribute, zindex);\n        });\n        set$2(root, 'z-index', get$5(blocker.element, 'z-index'));\n      });\n    };\n    var instigate = function (anyComponent, blocker) {\n      anyComponent.getSystem().addToGui(blocker);\n      changeZIndex(blocker);\n    };\n    var discard = function (blocker) {\n      resetZIndex(blocker);\n      blocker.getSystem().removeFromGui(blocker);\n    };\n    var createComponent = function (component, blockerClass, blockerEvents) {\n      return component.getSystem().build(Container.sketch({\n        dom: {\n          styles: {\n            'left': '0px',\n            'top': '0px',\n            'width': '100%',\n            'height': '100%',\n            'position': 'fixed',\n            'z-index': '1000000000000000'\n          },\n          classes: [blockerClass]\n        },\n        events: blockerEvents\n      }));\n    };\n\n    var SnapSchema = optionObjOf('snaps', [\n      strict$1('getSnapPoints'),\n      onHandler('onSensor'),\n      strict$1('leftAttr'),\n      strict$1('topAttr'),\n      defaulted$1('lazyViewport', win),\n      defaulted$1('mustSnap', false)\n    ]);\n\n    var schema$t = [\n      defaulted$1('useFixed', never),\n      strict$1('blockerClass'),\n      defaulted$1('getTarget', identity),\n      defaulted$1('onDrag', noop),\n      defaulted$1('repositionTarget', true),\n      defaulted$1('onDrop', noop),\n      defaultedFunction('getBounds', win),\n      SnapSchema\n    ];\n\n    var getCurrentCoord = function (target) {\n      return lift3(getRaw(target, 'left'), getRaw(target, 'top'), getRaw(target, 'position'), function (left, top, position) {\n        var nu = position === 'fixed' ? fixed$1 : offset;\n        return nu(parseInt(left, 10), parseInt(top, 10));\n      }).getOrThunk(function () {\n        var location = absolute(target);\n        return absolute$3(location.left, location.top);\n      });\n    };\n    var clampCoords = function (component, coords, scroll, origin, startData) {\n      var bounds = startData.bounds;\n      var absoluteCoord = asAbsolute(coords, scroll, origin);\n      var newX = clamp(absoluteCoord.left, bounds.x, bounds.x + bounds.width - startData.width);\n      var newY = clamp(absoluteCoord.top, bounds.y, bounds.y + bounds.height - startData.height);\n      var newCoords = absolute$3(newX, newY);\n      return coords.fold(function () {\n        var offset$1 = asOffset(newCoords, scroll, origin);\n        return offset(offset$1.left, offset$1.top);\n      }, function () {\n        return newCoords;\n      }, function () {\n        var fixed = asFixed(newCoords, scroll, origin);\n        return fixed$1(fixed.left, fixed.top);\n      });\n    };\n    var calcNewCoord = function (component, optSnaps, currentCoord, scroll, origin, delta, startData) {\n      var newCoord = optSnaps.fold(function () {\n        var translated = translate$2(currentCoord, delta.left, delta.top);\n        var fixedCoord = asFixed(translated, scroll, origin);\n        return fixed$1(fixedCoord.left, fixedCoord.top);\n      }, function (snapInfo) {\n        var snapping = moveOrSnap(component, snapInfo, currentCoord, delta, scroll, origin);\n        snapping.extra.each(function (extra) {\n          snapInfo.onSensor(component, extra);\n        });\n        return snapping.coord;\n      });\n      return clampCoords(component, newCoord, scroll, origin, startData);\n    };\n    var dragBy = function (component, dragConfig, startData, delta) {\n      var target = dragConfig.getTarget(component.element);\n      if (dragConfig.repositionTarget) {\n        var doc = owner(component.element);\n        var scroll_1 = get$9(doc);\n        var origin_1 = getOrigin(target);\n        var currentCoord = getCurrentCoord(target);\n        var newCoord = calcNewCoord(component, dragConfig.snaps, currentCoord, scroll_1, origin_1, delta, startData);\n        var styles = toStyles(newCoord, scroll_1, origin_1);\n        setOptions(target, styles);\n      }\n      dragConfig.onDrag(component, target, delta);\n    };\n\n    var calcStartData = function (dragConfig, comp) {\n      return {\n        bounds: dragConfig.getBounds(),\n        height: getOuter$1(comp.element),\n        width: getOuter$2(comp.element)\n      };\n    };\n    var move$1 = function (component, dragConfig, dragState, dragMode, event) {\n      var delta = dragState.update(dragMode, event);\n      var dragStartData = dragState.getStartData().getOrThunk(function () {\n        return calcStartData(dragConfig, component);\n      });\n      delta.each(function (dlt) {\n        dragBy(component, dragConfig, dragStartData, dlt);\n      });\n    };\n    var stop = function (component, blocker, dragConfig, dragState) {\n      blocker.each(discard);\n      dragConfig.snaps.each(function (snapInfo) {\n        stopDrag(component, snapInfo);\n      });\n      var target = dragConfig.getTarget(component.element);\n      dragState.reset();\n      dragConfig.onDrop(component, target);\n    };\n    var handlers = function (events) {\n      return function (dragConfig, dragState) {\n        var updateStartState = function (comp) {\n          dragState.setStartData(calcStartData(dragConfig, comp));\n        };\n        return derive(__spreadArrays([run(windowScroll(), function (comp) {\n            dragState.getStartData().each(function () {\n              return updateStartState(comp);\n            });\n          })], events(dragConfig, dragState, updateStartState)));\n      };\n    };\n\n    var init$c = function (dragApi) {\n      return derive([\n        run(mousedown(), dragApi.forceDrop),\n        run(mouseup(), dragApi.drop),\n        run(mousemove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        }),\n        run(mouseout(), dragApi.delayDrop)\n      ]);\n    };\n\n    var getData$1 = function (event) {\n      return Optional.from(SugarPosition(event.x, event.y));\n    };\n    var getDelta$1 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var MouseData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$1,\n        getDelta: getDelta$1\n    });\n\n    var events$g = function (dragConfig, dragState, updateStartState) {\n      return [run(mousedown(), function (component, simulatedEvent) {\n          var raw = simulatedEvent.event.raw;\n          if (raw.button !== 0) {\n            return;\n          }\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            return stop(component, Optional.some(blocker), dragConfig, dragState);\n          };\n          var delayDrop = DelayedFunction(stop$1, 200);\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: delayDrop.schedule,\n            forceDrop: stop$1,\n            move: function (event) {\n              delayDrop.cancel();\n              move$1(component, dragConfig, dragState, MouseData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$c(dragApi));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        })];\n    };\n    var schema$u = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$g) })]);\n\n    var init$d = function (dragApi) {\n      return derive([\n        run(touchstart(), dragApi.forceDrop),\n        run(touchend(), dragApi.drop),\n        run(touchcancel(), dragApi.drop),\n        run(touchmove(), function (comp, simulatedEvent) {\n          dragApi.move(simulatedEvent.event);\n        })\n      ]);\n    };\n\n    var getDataFrom = function (touches) {\n      var touch = touches[0];\n      return Optional.some(SugarPosition(touch.clientX, touch.clientY));\n    };\n    var getData$2 = function (event) {\n      var raw = event.raw;\n      var touches = raw.touches;\n      return touches.length === 1 ? getDataFrom(touches) : Optional.none();\n    };\n    var getDelta$2 = function (old, nu) {\n      return SugarPosition(nu.left - old.left, nu.top - old.top);\n    };\n\n    var TouchData = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        getData: getData$2,\n        getDelta: getDelta$2\n    });\n\n    var events$h = function (dragConfig, dragState, updateStartState) {\n      var blockerCell = Cell(Optional.none());\n      return [\n        run(touchstart(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          var stop$1 = function () {\n            stop(component, blockerCell.get(), dragConfig, dragState);\n            blockerCell.set(Optional.none());\n          };\n          var dragApi = {\n            drop: stop$1,\n            delayDrop: function () {\n            },\n            forceDrop: stop$1,\n            move: function (event) {\n              move$1(component, dragConfig, dragState, TouchData, event);\n            }\n          };\n          var blocker = createComponent(component, dragConfig.blockerClass, init$d(dragApi));\n          blockerCell.set(Optional.some(blocker));\n          var start = function () {\n            updateStartState(component);\n            instigate(component, blocker);\n          };\n          start();\n        }),\n        run(touchmove(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          move$1(component, dragConfig, dragState, TouchData, simulatedEvent.event);\n        }),\n        run(touchend(), function (component, simulatedEvent) {\n          simulatedEvent.stop();\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        }),\n        run(touchcancel(), function (component) {\n          stop(component, blockerCell.get(), dragConfig, dragState);\n          blockerCell.set(Optional.none());\n        })\n      ];\n    };\n    var schema$v = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$h) })]);\n\n    var events$i = function (dragConfig, dragState, updateStartState) {\n      return __spreadArrays(events$g(dragConfig, dragState, updateStartState), events$h(dragConfig, dragState, updateStartState));\n    };\n    var schema$w = __spreadArrays(schema$t, [output('dragger', { handlers: handlers(events$i) })]);\n\n    var mouse = schema$u;\n    var touch = schema$v;\n    var mouseOrTouch = schema$w;\n\n    var DraggingBranches = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        mouse: mouse,\n        touch: touch,\n        mouseOrTouch: mouseOrTouch\n    });\n\n    var init$e = function () {\n      var previous = Optional.none();\n      var startData = Optional.none();\n      var reset = function () {\n        previous = Optional.none();\n        startData = Optional.none();\n      };\n      var calculateDelta = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.getDelta(old, nu);\n        });\n        previous = Optional.some(nu);\n        return result;\n      };\n      var update = function (mode, dragEvent) {\n        return mode.getData(dragEvent).bind(function (nuData) {\n          return calculateDelta(mode, nuData);\n        });\n      };\n      var setStartData = function (data) {\n        startData = Optional.some(data);\n      };\n      var getStartData = function () {\n        return startData;\n      };\n      var readState = constant({});\n      return nu$5({\n        readState: readState,\n        reset: reset,\n        update: update,\n        getStartData: getStartData,\n        setStartData: setStartData\n      });\n    };\n\n    var DragState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$e\n    });\n\n    var Dragging = createModes$1({\n      branchKey: 'mode',\n      branches: DraggingBranches,\n      name: 'dragging',\n      active: {\n        events: function (dragConfig, dragState) {\n          var dragger = dragConfig.dragger;\n          return dragger.handlers(dragConfig, dragState);\n        }\n      },\n      extra: {\n        snap: function (sConfig) {\n          return {\n            sensor: sConfig.sensor,\n            range: sConfig.range,\n            output: sConfig.output,\n            extra: Optional.from(sConfig.extra)\n          };\n        }\n      },\n      state: DragState,\n      apis: DraggingApis\n    });\n\n    var snapWidth = 40;\n    var snapOffset = snapWidth / 2;\n    var calcSnap = function (selectorOpt, td, x, y, width, height) {\n      return selectorOpt.fold(function () {\n        return Dragging.snap({\n          sensor: absolute$3(x - snapOffset, y - snapOffset),\n          range: SugarPosition(width, height),\n          output: absolute$3(Optional.some(x), Optional.some(y)),\n          extra: { td: td }\n        });\n      }, function (selectorHandle) {\n        var sensorLeft = x - snapOffset;\n        var sensorTop = y - snapOffset;\n        var sensorWidth = snapWidth;\n        var sensorHeight = snapWidth;\n        var rect = selectorHandle.element.dom.getBoundingClientRect();\n        return Dragging.snap({\n          sensor: absolute$3(sensorLeft, sensorTop),\n          range: SugarPosition(sensorWidth, sensorHeight),\n          output: absolute$3(Optional.some(x - rect.width / 2), Optional.some(y - rect.height / 2)),\n          extra: { td: td }\n        });\n      });\n    };\n    var getSnapsConfig = function (getSnapPoints, cell, onChange) {\n      var isSameCell = function (cellOpt, td) {\n        return cellOpt.exists(function (currentTd) {\n          return eq$1(currentTd, td);\n        });\n      };\n      return {\n        getSnapPoints: getSnapPoints,\n        leftAttr: 'data-drag-left',\n        topAttr: 'data-drag-top',\n        onSensor: function (component, extra) {\n          var td = extra.td;\n          if (!isSameCell(cell.get(), td)) {\n            cell.set(Optional.some(td));\n            onChange(td);\n          }\n        },\n        mustSnap: true\n      };\n    };\n    var createSelector = function (snaps) {\n      return record(Button.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-selector']\n        },\n        buttonBehaviours: derive$1([\n          Dragging.config({\n            mode: 'mouseOrTouch',\n            blockerClass: 'blocker',\n            snaps: snaps\n          }),\n          Unselecting.config({})\n        ]),\n        eventOrder: {\n          mousedown: [\n            'dragging',\n            'alloy.base.behaviour'\n          ],\n          touchstart: [\n            'dragging',\n            'alloy.base.behaviour'\n          ]\n        }\n      }));\n    };\n    var setup$a = function (editor, sink) {\n      var tlTds = Cell([]);\n      var brTds = Cell([]);\n      var isVisible = Cell(false);\n      var startCell = Cell(Optional.none());\n      var finishCell = Cell(Optional.none());\n      var getTopLeftSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memTopLeft.getOpt(sink), td, box.x, box.y, box.width, box.height);\n      };\n      var getTopLeftSnaps = function () {\n        return map(tlTds.get(), function (td) {\n          return getTopLeftSnap(td);\n        });\n      };\n      var getBottomRightSnap = function (td) {\n        var box = absolute$1(td);\n        return calcSnap(memBottomRight.getOpt(sink), td, box.right, box.bottom, box.width, box.height);\n      };\n      var getBottomRightSnaps = function () {\n        return map(brTds.get(), function (td) {\n          return getBottomRightSnap(td);\n        });\n      };\n      var topLeftSnaps = getSnapsConfig(getTopLeftSnaps, startCell, function (start) {\n        finishCell.get().each(function (finish) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var bottomRightSnaps = getSnapsConfig(getBottomRightSnaps, finishCell, function (finish) {\n        startCell.get().each(function (start) {\n          editor.fire('TableSelectorChange', {\n            start: start,\n            finish: finish\n          });\n        });\n      });\n      var memTopLeft = createSelector(topLeftSnaps);\n      var memBottomRight = createSelector(bottomRightSnaps);\n      var topLeft = build$1(memTopLeft.asSpec());\n      var bottomRight = build$1(memBottomRight.asSpec());\n      var showOrHideHandle = function (selector, cell, isAbove, isBelow) {\n        var cellRect = cell.dom.getBoundingClientRect();\n        remove$6(selector.element, 'display');\n        var viewportHeight = defaultView(SugarElement.fromDom(editor.getBody())).dom.innerHeight;\n        var aboveViewport = isAbove(cellRect);\n        var belowViewport = isBelow(cellRect, viewportHeight);\n        if (aboveViewport || belowViewport) {\n          set$2(selector.element, 'display', 'none');\n        }\n      };\n      var snapTo = function (selector, cell, getSnapConfig, pos) {\n        var snap = getSnapConfig(cell);\n        Dragging.snapTo(selector, snap);\n        var isAbove = function (rect) {\n          return rect[pos] < 0;\n        };\n        var isBelow = function (rect, viewportHeight) {\n          return rect[pos] > viewportHeight;\n        };\n        showOrHideHandle(selector, cell, isAbove, isBelow);\n      };\n      var snapTopLeft = function (cell) {\n        return snapTo(topLeft, cell, getTopLeftSnap, 'top');\n      };\n      var snapLastTopLeft = function () {\n        return startCell.get().each(snapTopLeft);\n      };\n      var snapBottomRight = function (cell) {\n        return snapTo(bottomRight, cell, getBottomRightSnap, 'bottom');\n      };\n      var snapLastBottomRight = function () {\n        return finishCell.get().each(snapBottomRight);\n      };\n      if (detect$3().deviceType.isTouch()) {\n        editor.on('TableSelectionChange', function (e) {\n          if (!isVisible.get()) {\n            attach$1(sink, topLeft);\n            attach$1(sink, bottomRight);\n            isVisible.set(true);\n          }\n          startCell.set(Optional.some(e.start));\n          finishCell.set(Optional.some(e.finish));\n          e.otherCells.each(function (otherCells) {\n            tlTds.set(otherCells.upOrLeftCells);\n            brTds.set(otherCells.downOrRightCells);\n            snapTopLeft(e.start);\n            snapBottomRight(e.finish);\n          });\n        });\n        editor.on('ResizeEditor ResizeWindow ScrollContent', function () {\n          snapLastTopLeft();\n          snapLastBottomRight();\n        });\n        editor.on('TableSelectionClear', function () {\n          if (isVisible.get()) {\n            detach(topLeft);\n            detach(bottomRight);\n            isVisible.set(false);\n          }\n          startCell.set(Optional.none());\n          finishCell.set(Optional.none());\n        });\n      }\n    };\n\n    var ResizeTypes;\n    (function (ResizeTypes) {\n      ResizeTypes[ResizeTypes['None'] = 0] = 'None';\n      ResizeTypes[ResizeTypes['Both'] = 1] = 'Both';\n      ResizeTypes[ResizeTypes['Vertical'] = 2] = 'Vertical';\n    }(ResizeTypes || (ResizeTypes = {})));\n    var getDimensions = function (editor, deltas, resizeType, originalHeight, originalWidth) {\n      var dimensions = {};\n      dimensions.height = calcCappedSize(originalHeight + deltas.top, getMinHeightSetting(editor), getMaxHeightSetting(editor));\n      if (resizeType === ResizeTypes.Both) {\n        dimensions.width = calcCappedSize(originalWidth + deltas.left, getMinWidthSetting(editor), getMaxWidthSetting(editor));\n      }\n      return dimensions;\n    };\n    var resize$3 = function (editor, deltas, resizeType) {\n      var container = SugarElement.fromDom(editor.getContainer());\n      var dimensions = getDimensions(editor, deltas, resizeType, get$7(container), get$8(container));\n      each$1(dimensions, function (val, dim) {\n        return set$2(container, dim, numToPx(val));\n      });\n      fireResizeEditor(editor);\n    };\n\n    var isHidden$1 = function (elm) {\n      if (elm.nodeType === 1) {\n        if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n          return true;\n        }\n        if (elm.getAttribute('data-mce-type') === 'bookmark') {\n          return true;\n        }\n      }\n      return false;\n    };\n    var renderElementPath = function (editor, settings, providersBackstage) {\n      if (!settings.delimiter) {\n        settings.delimiter = '\\xBB';\n      }\n      var getDataPath = function (data) {\n        var parts = data || [];\n        var newPathElements = map(parts, function (part, index) {\n          return Button.sketch({\n            dom: {\n              tag: 'div',\n              classes: ['tox-statusbar__path-item'],\n              attributes: {\n                'role': 'button',\n                'data-index': index,\n                'tab-index': -1,\n                'aria-level': index + 1\n              },\n              innerHtml: part.name\n            },\n            action: function (_btn) {\n              editor.focus();\n              editor.selection.select(part.element);\n              editor.nodeChanged();\n            },\n            buttonBehaviours: derive$1([\n              DisablingConfigs.button(providersBackstage.isDisabled),\n              receivingConfig()\n            ])\n          });\n        });\n        var divider = {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__path-divider'],\n            attributes: { 'aria-hidden': true },\n            innerHtml: ' ' + settings.delimiter + ' '\n          }\n        };\n        return foldl(newPathElements.slice(1), function (acc, element) {\n          var newAcc = acc;\n          newAcc.push(divider);\n          newAcc.push(element);\n          return newAcc;\n        }, [newPathElements[0]]);\n      };\n      var updatePath = function (parents) {\n        var newPath = [];\n        var i = parents.length;\n        while (i-- > 0) {\n          var parent_1 = parents[i];\n          if (parent_1.nodeType === 1 && !isHidden$1(parent_1)) {\n            var args = editor.fire('ResolveName', {\n              name: parent_1.nodeName.toLowerCase(),\n              target: parent_1\n            });\n            if (!args.isDefaultPrevented()) {\n              newPath.push({\n                name: args.name,\n                element: parent_1\n              });\n            }\n            if (args.isPropagationStopped()) {\n              break;\n            }\n          }\n        }\n        return newPath;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar__path'],\n          attributes: { role: 'navigation' }\n        },\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'flow',\n            selector: 'div[role=button]'\n          }),\n          Disabling.config({ disabled: providersBackstage.isDisabled }),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          config('elementPathEvents', [runOnAttached(function (comp, _e) {\n              editor.shortcuts.add('alt+F11', 'focus statusbar elementpath', function () {\n                return Keying.focusIn(comp);\n              });\n              editor.on('NodeChange', function (e) {\n                var newPath = updatePath(e.parents);\n                if (newPath.length > 0) {\n                  Replacing.set(comp, getDataPath(newPath));\n                } else {\n                  Replacing.set(comp, []);\n                }\n              });\n            })])\n        ]),\n        components: []\n      };\n    };\n\n    var renderWordCount = function (editor, providersBackstage) {\n      var _a;\n      var replaceCountText = function (comp, count, mode) {\n        return Replacing.set(comp, [text(providersBackstage.translate([\n            '{0} ' + mode,\n            count[mode]\n          ]))]);\n      };\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: ['tox-statusbar__wordcount']\n        },\n        components: [],\n        buttonBehaviours: derive$1([\n          DisablingConfigs.button(providersBackstage.isDisabled),\n          receivingConfig(),\n          Tabstopping.config({}),\n          Replacing.config({}),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: {\n                mode: 'words',\n                count: {\n                  words: 0,\n                  characters: 0\n                }\n              }\n            }\n          }),\n          config('wordcount-events', [\n            runOnExecute(function (comp) {\n              var currentVal = Representing.getValue(comp);\n              var newMode = currentVal.mode === 'words' ? 'characters' : 'words';\n              Representing.setValue(comp, {\n                mode: newMode,\n                count: currentVal.count\n              });\n              replaceCountText(comp, currentVal.count, newMode);\n            }),\n            runOnAttached(function (comp) {\n              editor.on('wordCountUpdate', function (e) {\n                var mode = Representing.getValue(comp).mode;\n                Representing.setValue(comp, {\n                  mode: mode,\n                  count: e.wordCount\n                });\n                replaceCountText(comp, e.wordCount, mode);\n              });\n            })\n          ])\n        ]),\n        eventOrder: (_a = {}, _a[execute()] = [\n          'disabling',\n          'alloy.base.behaviour',\n          'wordcount-events'\n        ], _a)\n      });\n    };\n\n    var renderStatusbar = function (editor, providersBackstage) {\n      var renderResizeHandlerIcon = function (resizeType) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-statusbar__resize-handle'],\n            attributes: {\n              'title': providersBackstage.translate('Resize'),\n              'aria-hidden': 'true'\n            },\n            innerHtml: get$e('resize-handle', providersBackstage.icons)\n          },\n          behaviours: derive$1([Dragging.config({\n              mode: 'mouse',\n              repositionTarget: false,\n              onDrag: function (comp, target, delta) {\n                resize$3(editor, delta, resizeType);\n              },\n              blockerClass: 'tox-blocker'\n            })])\n        };\n      };\n      var renderBranding = function () {\n        var label = global$6.translate([\n          'Powered by {0}',\n          'Tiny'\n        ]);\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5\" rel=\"noopener\" target=\"_blank\" tabindex=\"-1\" aria-label=\"' + label + '\">' + label + '</a>';\n        return {\n          dom: {\n            tag: 'span',\n            classes: ['tox-statusbar__branding'],\n            innerHtml: linkHtml\n          }\n        };\n      };\n      var getResizeType = function (editor) {\n        var fallback = !editor.hasPlugin('autoresize');\n        var resize = editor.getParam('resize', fallback);\n        if (resize === false) {\n          return ResizeTypes.None;\n        } else if (resize === 'both') {\n          return ResizeTypes.Both;\n        } else {\n          return ResizeTypes.Vertical;\n        }\n      };\n      var getTextComponents = function () {\n        var components = [];\n        if (editor.getParam('elementpath', true, 'boolean')) {\n          components.push(renderElementPath(editor, {}, providersBackstage));\n        }\n        if (editor.hasPlugin('wordcount')) {\n          components.push(renderWordCount(editor, providersBackstage));\n        }\n        if (editor.getParam('branding', true, 'boolean')) {\n          components.push(renderBranding());\n        }\n        if (components.length > 0) {\n          return [{\n              dom: {\n                tag: 'div',\n                classes: ['tox-statusbar__text-container']\n              },\n              components: components\n            }];\n        }\n        return [];\n      };\n      var getComponents = function () {\n        var components = getTextComponents();\n        var resizeType = getResizeType(editor);\n        if (resizeType !== ResizeTypes.None) {\n          components.push(renderResizeHandlerIcon(resizeType));\n        }\n        return components;\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-statusbar']\n        },\n        components: getComponents()\n      };\n    };\n\n    var setup$b = function (editor) {\n      var _a;\n      var isInline = editor.inline;\n      var mode = isInline ? Inline : Iframe;\n      var header = isStickyToolbar(editor) ? StickyHeader : StaticHeader;\n      var lazyOuterContainer = Optional.none();\n      var platform = detect$3();\n      var isIE = platform.browser.isIE();\n      var platformClasses = isIE ? ['tox-platform-ie'] : [];\n      var isTouch = platform.deviceType.isTouch();\n      var touchPlatformClass = 'tox-platform-touch';\n      var deviceClasses = isTouch ? [touchPlatformClass] : [];\n      var isToolbarBottom = isToolbarLocationBottom(editor);\n      var uiContainer = getUiContainer(editor);\n      var dirAttributes = global$6.isRtl() ? { attributes: { dir: 'rtl' } } : {};\n      var verticalDirAttributes = { attributes: (_a = {}, _a[Attribute] = isToolbarBottom ? AttributeValue.BottomToTop : AttributeValue.TopToBottom, _a) };\n      var lazyHeader = function () {\n        return lazyOuterContainer.bind(OuterContainer.getHeader);\n      };\n      var isHeaderDocked = function () {\n        return header.isDocked(lazyHeader);\n      };\n      var resizeUiMothership = function () {\n        set$2(uiMothership.element, 'width', document.body.clientWidth + 'px');\n      };\n      var makeSinkDefinition = function () {\n        var isGridUiContainer = eq$1(body(), uiContainer) && get$5(uiContainer, 'display') === 'grid';\n        var sinkSpec = {\n          dom: __assign({\n            tag: 'div',\n            classes: [\n              'tox',\n              'tox-silver-sink',\n              'tox-tinymce-aux'\n            ].concat(platformClasses).concat(deviceClasses)\n          }, dirAttributes),\n          behaviours: derive$1([Positioning.config({\n              useFixed: function () {\n                return isHeaderDocked();\n              }\n            })])\n        };\n        var reactiveWidthSpec = {\n          dom: { styles: { width: document.body.clientWidth + 'px' } },\n          events: derive([run(windowResize(), resizeUiMothership)])\n        };\n        return deepMerge(sinkSpec, isGridUiContainer ? reactiveWidthSpec : {});\n      };\n      var sink = build$1(makeSinkDefinition());\n      var lazySink = function () {\n        return Result.value(sink);\n      };\n      var memAnchorBar = record({\n        dom: {\n          tag: 'div',\n          classes: ['tox-anchorbar']\n        }\n      });\n      var lazyAnchorBar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return memAnchorBar.getOpt(container);\n        }).getOrDie('Could not find a anchor bar element');\n      };\n      var lazyToolbar = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getToolbar(container);\n        }).getOrDie('Could not find more toolbar element');\n      };\n      var lazyThrobber = function () {\n        return lazyOuterContainer.bind(function (container) {\n          return OuterContainer.getThrobber(container);\n        }).getOrDie('Could not find throbber element');\n      };\n      var backstage = init$8(sink, editor, lazyAnchorBar);\n      var partMenubar = OuterContainer.parts.menubar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-menubar']\n        },\n        backstage: backstage,\n        onEscape: function () {\n          editor.focus();\n        }\n      });\n      var toolbarMode = getToolbarMode(editor);\n      var partToolbar = OuterContainer.parts.toolbar(__assign({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar']\n        },\n        getSink: lazySink,\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode,\n        lazyToolbar: lazyToolbar,\n        lazyHeader: function () {\n          return lazyHeader().getOrDie('Could not find header element');\n        }\n      }, verticalDirAttributes));\n      var partMultipleToolbar = OuterContainer.parts['multiple-toolbar']({\n        dom: {\n          tag: 'div',\n          classes: ['tox-toolbar-overlord']\n        },\n        providers: backstage.shared.providers,\n        onEscape: function () {\n          editor.focus();\n        },\n        type: toolbarMode\n      });\n      var partSocket = OuterContainer.parts.socket({\n        dom: {\n          tag: 'div',\n          classes: ['tox-edit-area']\n        }\n      });\n      var partSidebar = OuterContainer.parts.sidebar({\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar']\n        }\n      });\n      var partThrobber = OuterContainer.parts.throbber({\n        dom: {\n          tag: 'div',\n          classes: ['tox-throbber']\n        },\n        backstage: backstage\n      });\n      var sb = editor.getParam('statusbar', true, 'boolean');\n      var statusbar = sb && !isInline ? Optional.some(renderStatusbar(editor, backstage.shared.providers)) : Optional.none();\n      var socketSidebarContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-sidebar-wrap']\n        },\n        components: [\n          partSocket,\n          partSidebar\n        ]\n      };\n      var hasMultipleToolbar = isMultipleToolbars(editor);\n      var hasToolbar = isToolbarEnabled(editor);\n      var hasMenubar = isMenubarEnabled(editor);\n      var getPartToolbar = function () {\n        if (hasMultipleToolbar) {\n          return [partMultipleToolbar];\n        } else if (hasToolbar) {\n          return [partToolbar];\n        } else {\n          return [];\n        }\n      };\n      var partHeader = OuterContainer.parts.header({\n        dom: __assign({\n          tag: 'div',\n          classes: ['tox-editor-header']\n        }, verticalDirAttributes),\n        components: flatten([\n          hasMenubar ? [partMenubar] : [],\n          getPartToolbar(),\n          useFixedContainer(editor) ? [] : [memAnchorBar.asSpec()]\n        ]),\n        sticky: isStickyToolbar(editor),\n        editor: editor,\n        sharedBackstage: backstage.shared\n      });\n      var editorComponents = flatten([\n        isToolbarBottom ? [] : [partHeader],\n        isInline ? [] : [socketSidebarContainer],\n        isToolbarBottom ? [partHeader] : []\n      ]);\n      var editorContainer = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-editor-container']\n        },\n        components: editorComponents\n      };\n      var containerComponents = flatten([\n        [editorContainer],\n        isInline ? [] : statusbar.toArray(),\n        [partThrobber]\n      ]);\n      var isHidden = isDistractionFree(editor);\n      var attributes = __assign(__assign({ role: 'application' }, global$6.isRtl() ? { dir: 'rtl' } : {}), isHidden ? { 'aria-hidden': 'true' } : {});\n      var outerContainer = build$1(OuterContainer.sketch({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox',\n            'tox-tinymce'\n          ].concat(isInline ? ['tox-tinymce-inline'] : []).concat(isToolbarBottom ? ['tox-tinymce--toolbar-bottom'] : []).concat(deviceClasses).concat(platformClasses),\n          styles: __assign({ visibility: 'hidden' }, isHidden ? {\n            opacity: '0',\n            border: '0'\n          } : {}),\n          attributes: attributes\n        },\n        components: containerComponents,\n        behaviours: derive$1([\n          receivingConfig(),\n          Disabling.config({ disableClass: 'tox-tinymce--disabled' }),\n          Keying.config({\n            mode: 'cyclic',\n            selector: '.tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a'\n          })\n        ])\n      }));\n      lazyOuterContainer = Optional.some(outerContainer);\n      editor.shortcuts.add('alt+F9', 'focus menubar', function () {\n        OuterContainer.focusMenubar(outerContainer);\n      });\n      editor.shortcuts.add('alt+F10', 'focus toolbar', function () {\n        OuterContainer.focusToolbar(outerContainer);\n      });\n      editor.addCommand('ToggleToolbarDrawer', function () {\n        OuterContainer.toggleToolbarDrawer(outerContainer);\n      });\n      editor.addQueryStateHandler('ToggleToolbarDrawer', function () {\n        return OuterContainer.isToolbarDrawerToggled(outerContainer);\n      });\n      var mothership = takeover(outerContainer);\n      var uiMothership = takeover(sink);\n      setup$3(editor, mothership, uiMothership);\n      var getUi = function () {\n        var channels = {\n          broadcastAll: uiMothership.broadcast,\n          broadcastOn: uiMothership.broadcastOn,\n          register: function () {\n          }\n        };\n        return { channels: channels };\n      };\n      var setEditorSize = function () {\n        var parsedHeight = numToPx(getHeightWithFallback(editor));\n        var parsedWidth = numToPx(getWidthWithFallback(editor));\n        if (!editor.inline) {\n          if (isValidValue('div', 'width', parsedWidth)) {\n            set$2(outerContainer.element, 'width', parsedWidth);\n          }\n          if (isValidValue('div', 'height', parsedHeight)) {\n            set$2(outerContainer.element, 'height', parsedHeight);\n          } else {\n            set$2(outerContainer.element, 'height', '200px');\n          }\n        }\n        return parsedHeight;\n      };\n      var renderUI = function () {\n        header.setup(editor, backstage.shared, lazyHeader);\n        setup$8(editor, backstage);\n        setup$9(editor, lazySink, backstage);\n        setup$6(editor);\n        setup$7(editor, lazyThrobber, backstage.shared);\n        map$2(getToolbarGroups(editor), function (toolbarGroupButtonConfig, name) {\n          editor.ui.registry.addGroupToolbarButton(name, toolbarGroupButtonConfig);\n        });\n        var _a = editor.ui.registry.getAll(), buttons = _a.buttons, menuItems = _a.menuItems, contextToolbars = _a.contextToolbars, sidebars = _a.sidebars;\n        var toolbarOpt = getMultipleToolbarsSetting(editor);\n        var rawUiConfig = {\n          menuItems: menuItems,\n          menus: getMenus(editor),\n          menubar: getMenubar(editor),\n          toolbar: toolbarOpt.getOrThunk(function () {\n            return getToolbar(editor);\n          }),\n          allowToolbarGroups: toolbarMode === ToolbarMode.floating,\n          buttons: buttons,\n          sidebar: sidebars\n        };\n        register$4(editor, contextToolbars, sink, { backstage: backstage });\n        setup$a(editor, sink);\n        var elm = editor.getElement();\n        var height = setEditorSize();\n        var uiComponents = {\n          mothership: mothership,\n          uiMothership: uiMothership,\n          outerContainer: outerContainer\n        };\n        var args = {\n          targetNode: elm,\n          height: height\n        };\n        return mode.render(editor, uiComponents, rawUiConfig, backstage, args);\n      };\n      return {\n        mothership: mothership,\n        uiMothership: uiMothership,\n        backstage: backstage,\n        renderUI: renderUI,\n        getUi: getUi\n      };\n    };\n\n    var describedBy = function (describedElement, describeElement) {\n      var describeId = Optional.from(get$3(describedElement, 'id')).fold(function () {\n        var id = generate$1('dialog-describe');\n        set$1(describeElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(describedElement, 'aria-describedby', describeId);\n    };\n\n    var labelledBy = function (labelledElement, labelElement) {\n      var labelId = getOpt(labelledElement, 'id').fold(function () {\n        var id = generate$1('dialog-label');\n        set$1(labelElement, 'id', id);\n        return id;\n      }, identity);\n      set$1(labelledElement, 'aria-labelledby', labelId);\n    };\n\n    var schema$x = constant([\n      strict$1('lazySink'),\n      option('dragBlockClass'),\n      defaultedFunction('getBounds', win),\n      defaulted$1('useTabstopAt', always),\n      defaulted$1('eventOrder', {}),\n      field$1('modalBehaviours', [Keying]),\n      onKeyboardHandler('onExecute'),\n      onStrictKeyboardHandler('onEscape')\n    ]);\n    var basic = { sketch: identity };\n    var parts$f = constant([\n      optional({\n        name: 'draghandle',\n        overrides: function (detail, spec) {\n          return {\n            behaviours: derive$1([Dragging.config({\n                mode: 'mouse',\n                getTarget: function (handle) {\n                  return ancestor$2(handle, '[role=\"dialog\"]').getOr(handle);\n                },\n                blockerClass: detail.dragBlockClass.getOrDie(new Error('The drag blocker class was not specified for a dialog with a drag handle: \\n' + JSON.stringify(spec, null, 2)).message),\n                getBounds: detail.getDragBounds\n              })])\n          };\n        }\n      }),\n      required({\n        schema: [strict$1('dom')],\n        name: 'title'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'close'\n      }),\n      required({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'body'\n      }),\n      optional({\n        factory: basic,\n        schema: [strict$1('dom')],\n        name: 'footer'\n      }),\n      external$1({\n        factory: {\n          sketch: function (spec, detail) {\n            return __assign(__assign({}, spec), {\n              dom: detail.dom,\n              components: detail.components\n            });\n          }\n        },\n        schema: [\n          defaulted$1('dom', {\n            tag: 'div',\n            styles: {\n              position: 'fixed',\n              left: '0px',\n              top: '0px',\n              right: '0px',\n              bottom: '0px'\n            }\n          }),\n          defaulted$1('components', [])\n        ],\n        name: 'blocker'\n      })\n    ]);\n\n    var block = function (component, config, state, getBusySpec) {\n      set$1(component.element, 'aria-busy', true);\n      var root = config.getRoot(component).getOr(component);\n      var blockerBehaviours = derive$1([\n        Keying.config({\n          mode: 'special',\n          onTab: function () {\n            return Optional.some(true);\n          },\n          onShiftTab: function () {\n            return Optional.some(true);\n          }\n        }),\n        Focusing.config({})\n      ]);\n      var blockSpec = getBusySpec(root, blockerBehaviours);\n      var blocker = root.getSystem().build(blockSpec);\n      Replacing.append(root, premade$1(blocker));\n      if (blocker.hasConfigured(Keying)) {\n        Keying.focusIn(blocker);\n      }\n      if (!state.isBlocked()) {\n        config.onBlock(component);\n      }\n      state.blockWith(function () {\n        return Replacing.remove(root, blocker);\n      });\n    };\n    var unblock = function (component, config, state) {\n      remove$1(component.element, 'aria-busy');\n      if (state.isBlocked()) {\n        config.onUnblock(component);\n      }\n      state.clear();\n    };\n\n    var BlockingApis = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        block: block,\n        unblock: unblock\n    });\n\n    var BlockingSchema = [\n      defaultedFunction('getRoot', Optional.none),\n      onHandler('onBlock'),\n      onHandler('onUnblock')\n    ];\n\n    var init$f = function () {\n      var blocker = destroyable();\n      var blockWith = function (destroy) {\n        blocker.set({ destroy: destroy });\n      };\n      return nu$5({\n        readState: blocker.isSet,\n        blockWith: blockWith,\n        clear: blocker.clear,\n        isBlocked: blocker.isSet\n      });\n    };\n\n    var BlockingState = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        init: init$f\n    });\n\n    var Blocking = create$1({\n      fields: BlockingSchema,\n      name: 'blocking',\n      apis: BlockingApis,\n      state: BlockingState\n    });\n\n    var factory$i = function (detail, components, spec, externals) {\n      var _a;\n      var dialogComp = Cell(Optional.none());\n      var showDialog = function (dialog) {\n        dialogComp.set(Optional.some(dialog));\n        var sink = detail.lazySink(dialog).getOrDie();\n        var externalBlocker = externals.blocker();\n        var blocker = sink.getSystem().build(__assign(__assign({}, externalBlocker), {\n          components: externalBlocker.components.concat([premade$1(dialog)]),\n          behaviours: derive$1([\n            Focusing.config({}),\n            config('dialog-blocker-events', [runOnSource(focusin(), function () {\n                Keying.focusIn(dialog);\n              })])\n          ])\n        }));\n        attach$1(sink, blocker);\n        Keying.focusIn(dialog);\n      };\n      var hideDialog = function (dialog) {\n        dialogComp.set(Optional.none());\n        parent(dialog.element).each(function (blockerDom) {\n          dialog.getSystem().getByDom(blockerDom).each(function (blocker) {\n            detach(blocker);\n          });\n        });\n      };\n      var getDialogBody = function (dialog) {\n        return getPartOrDie(dialog, detail, 'body');\n      };\n      var getDialogFooter = function (dialog) {\n        return getPartOrDie(dialog, detail, 'footer');\n      };\n      var setBusy = function (dialog, getBusySpec) {\n        Blocking.block(dialog, getBusySpec);\n      };\n      var setIdle = function (dialog) {\n        Blocking.unblock(dialog);\n      };\n      var modalEventsId = generate$1('modal-events');\n      var eventOrder = __assign(__assign({}, detail.eventOrder), (_a = {}, _a[attachedToDom()] = [modalEventsId].concat(detail.eventOrder['alloy.system.attached'] || []), _a));\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        apis: {\n          show: showDialog,\n          hide: hideDialog,\n          getBody: getDialogBody,\n          getFooter: getDialogFooter,\n          setIdle: setIdle,\n          setBusy: setBusy\n        },\n        eventOrder: eventOrder,\n        domModification: {\n          attributes: {\n            'role': 'dialog',\n            'aria-modal': 'true'\n          }\n        },\n        behaviours: augment(detail.modalBehaviours, [\n          Replacing.config({}),\n          Keying.config({\n            mode: 'cyclic',\n            onEnter: detail.onExecute,\n            onEscape: detail.onEscape,\n            useTabstopAt: detail.useTabstopAt\n          }),\n          Blocking.config({ getRoot: dialogComp.get }),\n          config(modalEventsId, [runOnAttached(function (c) {\n              labelledBy(c.element, getPartOrDie(c, detail, 'title').element);\n              describedBy(c.element, getPartOrDie(c, detail, 'body').element);\n            })])\n        ])\n      };\n    };\n    var ModalDialog = composite$1({\n      name: 'ModalDialog',\n      configFields: schema$x(),\n      partFields: parts$f(),\n      factory: factory$i,\n      apis: {\n        show: function (apis, dialog) {\n          apis.show(dialog);\n        },\n        hide: function (apis, dialog) {\n          apis.hide(dialog);\n        },\n        getBody: function (apis, dialog) {\n          return apis.getBody(dialog);\n        },\n        getFooter: function (apis, dialog) {\n          return apis.getFooter(dialog);\n        },\n        setBusy: function (apis, dialog, getBusySpec) {\n          apis.setBusy(dialog, getBusySpec);\n        },\n        setIdle: function (apis, dialog) {\n          apis.setIdle(dialog);\n        }\n      }\n    });\n\n    var dialogToggleMenuItemSchema = objOf([\n      strictString('type'),\n      strictString('name')\n    ].concat(commonMenuItemFields));\n    var dialogToggleMenuItemDataProcessor = boolean;\n\n    var baseFooterButtonFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedStringEnum('align', 'end', [\n        'start',\n        'end'\n      ]),\n      defaultedBoolean('primary', false),\n      defaultedBoolean('disabled', false)\n    ];\n    var dialogFooterButtonFields = __spreadArrays(baseFooterButtonFields, [strictString('text')]);\n    var normalFooterButtonFields = __spreadArrays([strictStringEnum('type', [\n        'submit',\n        'cancel',\n        'custom'\n      ])], dialogFooterButtonFields);\n    var menuFooterButtonFields = __spreadArrays([\n      strictStringEnum('type', ['menu']),\n      optionString('text'),\n      optionString('tooltip'),\n      optionString('icon'),\n      strictArrayOf('items', dialogToggleMenuItemSchema)\n    ], baseFooterButtonFields);\n    var dialogFooterButtonSchema = choose$1('type', {\n      submit: normalFooterButtonFields,\n      cancel: normalFooterButtonFields,\n      custom: normalFooterButtonFields,\n      menu: menuFooterButtonFields\n    });\n\n    var alertBannerFields = [\n      strictString('type'),\n      strictString('text'),\n      strictStringEnum('level', [\n        'info',\n        'warn',\n        'error',\n        'success'\n      ]),\n      strictString('icon'),\n      defaulted$1('url', '')\n    ];\n    var alertBannerSchema = objOf(alertBannerFields);\n\n    var createBarFields = function (itemsField) {\n      return [\n        strictString('type'),\n        itemsField\n      ];\n    };\n\n    var buttonFields = [\n      strictString('type'),\n      strictString('text'),\n      defaultedBoolean('disabled', false),\n      defaultedBoolean('primary', false),\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('button-name');\n      }), string),\n      optionString('icon'),\n      defaultedBoolean('borderless', false)\n    ];\n    var buttonSchema = objOf(buttonFields);\n\n    var checkboxFields = [\n      strictString('type'),\n      strictString('name'),\n      strictString('label'),\n      defaultedBoolean('disabled', false)\n    ];\n    var checkboxSchema = objOf(checkboxFields);\n    var checkboxDataProcessor = boolean;\n\n    var formComponentFields = [\n      strictString('type'),\n      strictString('name')\n    ];\n    var formComponentWithLabelFields = formComponentFields.concat([optionString('label')]);\n\n    var collectionFields = formComponentWithLabelFields.concat([defaulted$1('columns', 'auto')]);\n    var collectionSchema = objOf(collectionFields);\n    var collectionDataProcessor = arrOfObj$1([\n      strictString('value'),\n      strictString('text'),\n      strictString('icon')\n    ]);\n\n    var colorInputFields = formComponentWithLabelFields;\n    var colorInputSchema = objOf(colorInputFields);\n    var colorInputDataProcessor = string;\n\n    var colorPickerFields = formComponentWithLabelFields;\n    var colorPickerSchema = objOf(colorPickerFields);\n    var colorPickerDataProcessor = string;\n\n    var customEditorFields = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictString('scriptId'),\n      strictString('scriptUrl'),\n      defaultedPostMsg('settings', undefined)\n    ]);\n    var customEditorFieldsOld = formComponentFields.concat([\n      defaultedString('tag', 'textarea'),\n      strictFunction('init')\n    ]);\n    var customEditorSchema = valueOf(function (v) {\n      return asRaw('customeditor.old', objOfOnly(customEditorFieldsOld), v).orThunk(function () {\n        return asRaw('customeditor.new', objOfOnly(customEditorFields), v);\n      });\n    });\n    var customEditorDataProcessor = string;\n\n    var dropZoneFields = formComponentWithLabelFields;\n    var dropZoneSchema = objOf(dropZoneFields);\n    var dropZoneDataProcessor = arrOfVal();\n\n    var createGridFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictNumber('columns'),\n        itemsField\n      ];\n    };\n\n    var htmlPanelFields = [\n      strictString('type'),\n      strictString('html'),\n      defaultedStringEnum('presets', 'presentation', [\n        'presentation',\n        'document'\n      ])\n    ];\n    var htmlPanelSchema = objOf(htmlPanelFields);\n\n    var iframeFields = formComponentWithLabelFields.concat([defaultedBoolean('sandboxed', true)]);\n    var iframeSchema = objOf(iframeFields);\n    var iframeDataProcessor = string;\n\n    var imageToolsFields = formComponentWithLabelFields.concat([strictOf('currentState', objOf([\n        strict$1('blob'),\n        strictString('url')\n      ]))]);\n    var imageToolsSchema = objOf(imageToolsFields);\n\n    var inputFields = formComponentWithLabelFields.concat([\n      optionString('inputMode'),\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var inputSchema = objOf(inputFields);\n    var inputDataProcessor = string;\n\n    var createLabelFields = function (itemsField) {\n      return [\n        strictString('type'),\n        strictString('label'),\n        itemsField\n      ];\n    };\n\n    var listBoxSingleItemFields = [\n      strictString('text'),\n      strictString('value')\n    ];\n    var listBoxNestedItemFields = [\n      strictString('text'),\n      strictArrayOf('items', thunkOf('items', function () {\n        return listBoxItemSchema;\n      }))\n    ];\n    var listBoxItemSchema = oneOf([\n      objOf(listBoxSingleItemFields),\n      objOf(listBoxNestedItemFields)\n    ]);\n    var listBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOf('items', listBoxItemSchema),\n      defaultedBoolean('disabled', false)\n    ]);\n    var listBoxSchema = objOf(listBoxFields);\n    var listBoxDataProcessor = string;\n\n    var selectBoxFields = formComponentWithLabelFields.concat([\n      strictArrayOfObj('items', [\n        strictString('text'),\n        strictString('value')\n      ]),\n      defaultedNumber('size', 1),\n      defaultedBoolean('disabled', false)\n    ]);\n    var selectBoxSchema = objOf(selectBoxFields);\n    var selectBoxDataProcessor = string;\n\n    var sizeInputFields = formComponentWithLabelFields.concat([\n      defaultedBoolean('constrain', true),\n      defaultedBoolean('disabled', false)\n    ]);\n    var sizeInputSchema = objOf(sizeInputFields);\n    var sizeInputDataProcessor = objOf([\n      strictString('width'),\n      strictString('height')\n    ]);\n\n    var tableFields = [\n      strictString('type'),\n      strictArrayOf('header', string),\n      strictArrayOf('cells', arrOf(string))\n    ];\n    var tableSchema = objOf(tableFields);\n\n    var textAreaFields = formComponentWithLabelFields.concat([\n      optionString('placeholder'),\n      defaultedBoolean('maximized', false),\n      defaultedBoolean('disabled', false)\n    ]);\n    var textAreaSchema = objOf(textAreaFields);\n    var textAreaDataProcessor = string;\n\n    var urlInputFields = formComponentWithLabelFields.concat([\n      defaultedStringEnum('filetype', 'file', [\n        'image',\n        'media',\n        'file'\n      ]),\n      defaulted$1('disabled', false)\n    ]);\n    var urlInputSchema = objOf(urlInputFields);\n    var urlInputDataProcessor = objOf([\n      strictString('value'),\n      defaulted$1('meta', {})\n    ]);\n\n    var createItemsField = function (name) {\n      return field('items', 'items', strict(), arrOf(valueOf(function (v) {\n        return asRaw('Checking item of ' + name, itemSchema$3, v).fold(function (sErr) {\n          return Result.error(formatError(sErr));\n        }, function (passValue) {\n          return Result.value(passValue);\n        });\n      })));\n    };\n    var itemSchema$3 = valueThunkOf(function () {\n      return chooseProcessor('type', {\n        alertbanner: alertBannerSchema,\n        bar: objOf(createBarFields(createItemsField('bar'))),\n        button: buttonSchema,\n        checkbox: checkboxSchema,\n        colorinput: colorInputSchema,\n        colorpicker: colorPickerSchema,\n        dropzone: dropZoneSchema,\n        grid: objOf(createGridFields(createItemsField('grid'))),\n        iframe: iframeSchema,\n        input: inputSchema,\n        listbox: listBoxSchema,\n        selectbox: selectBoxSchema,\n        sizeinput: sizeInputSchema,\n        textarea: textAreaSchema,\n        urlinput: urlInputSchema,\n        customeditor: customEditorSchema,\n        htmlpanel: htmlPanelSchema,\n        imagetools: imageToolsSchema,\n        collection: collectionSchema,\n        label: objOf(createLabelFields(createItemsField('label'))),\n        table: tableSchema,\n        panel: panelSchema\n      });\n    });\n    var panelFields = [\n      strictString('type'),\n      defaulted$1('classes', []),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var panelSchema = objOf(panelFields);\n\n    var tabFields = [\n      field('name', 'name', defaultedThunk(function () {\n        return generate$1('tab-name');\n      }), string),\n      strictString('title'),\n      strictArrayOf('items', itemSchema$3)\n    ];\n    var tabPanelFields = [\n      strictString('type'),\n      strictArrayOfObj('tabs', tabFields)\n    ];\n    var tabPanelSchema = objOf(tabPanelFields);\n\n    var dialogButtonFields = dialogFooterButtonFields;\n    var dialogButtonSchema = dialogFooterButtonSchema;\n    var dialogSchema = objOf([\n      strictString('title'),\n      strictOf('body', chooseProcessor('type', {\n        panel: panelSchema,\n        tabpanel: tabPanelSchema\n      })),\n      defaultedString('size', 'normal'),\n      strictArrayOf('buttons', dialogButtonSchema),\n      defaulted$1('initialData', {}),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onChange', noop),\n      defaultedFunction('onSubmit', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onCancel', noop),\n      defaulted$1('onTabChange', noop)\n    ]);\n    var createDialog = function (spec) {\n      return asRaw('dialog', dialogSchema, spec);\n    };\n\n    var urlDialogButtonSchema = objOf(__spreadArrays([strictStringEnum('type', [\n        'cancel',\n        'custom'\n      ])], dialogButtonFields));\n    var urlDialogSchema = objOf([\n      strictString('title'),\n      strictString('url'),\n      optionNumber('height'),\n      optionNumber('width'),\n      optionArrayOf('buttons', urlDialogButtonSchema),\n      defaultedFunction('onAction', noop),\n      defaultedFunction('onCancel', noop),\n      defaultedFunction('onClose', noop),\n      defaultedFunction('onMessage', noop)\n    ]);\n    var createUrlDialog = function (spec) {\n      return asRaw('dialog', urlDialogSchema, spec);\n    };\n\n    var getAllObjects = function (obj) {\n      if (isObject(obj)) {\n        return [obj].concat(bind(values(obj), getAllObjects));\n      } else if (isArray(obj)) {\n        return bind(obj, getAllObjects);\n      } else {\n        return [];\n      }\n    };\n\n    var isNamedItem = function (obj) {\n      return isString(obj.type) && isString(obj.name);\n    };\n    var dataProcessors = {\n      checkbox: checkboxDataProcessor,\n      colorinput: colorInputDataProcessor,\n      colorpicker: colorPickerDataProcessor,\n      dropzone: dropZoneDataProcessor,\n      input: inputDataProcessor,\n      iframe: iframeDataProcessor,\n      sizeinput: sizeInputDataProcessor,\n      selectbox: selectBoxDataProcessor,\n      listbox: listBoxDataProcessor,\n      size: sizeInputDataProcessor,\n      textarea: textAreaDataProcessor,\n      urlinput: urlInputDataProcessor,\n      customeditor: customEditorDataProcessor,\n      collection: collectionDataProcessor,\n      togglemenuitem: dialogToggleMenuItemDataProcessor\n    };\n    var getDataProcessor = function (item) {\n      return Optional.from(dataProcessors[item.type]);\n    };\n    var getNamedItems = function (structure) {\n      return filter(getAllObjects(structure), isNamedItem);\n    };\n\n    var createDataValidator = function (structure) {\n      var namedItems = getNamedItems(structure);\n      var fields = bind(namedItems, function (item) {\n        return getDataProcessor(item).fold(function () {\n          return [];\n        }, function (schema) {\n          return [strictOf(item.name, schema)];\n        });\n      });\n      return objOf(fields);\n    };\n\n    var extract$1 = function (structure) {\n      var internalDialog = getOrDie(createDialog(structure));\n      var dataValidator = createDataValidator(structure);\n      var initialData = structure.initialData;\n      return {\n        internalDialog: internalDialog,\n        dataValidator: dataValidator,\n        initialData: initialData\n      };\n    };\n    var DialogManager = {\n      open: function (factory, structure) {\n        var extraction = extract$1(structure);\n        return factory(extraction.internalDialog, extraction.initialData, extraction.dataValidator);\n      },\n      openUrl: function (factory, structure) {\n        var internalDialog = getOrDie(createUrlDialog(structure));\n        return factory(internalDialog);\n      },\n      redial: function (structure) {\n        return extract$1(structure);\n      }\n    };\n\n    var toValidValues = function (values) {\n      var errors = [];\n      var result = {};\n      each$1(values, function (value, name) {\n        value.fold(function () {\n          errors.push(name);\n        }, function (v) {\n          result[name] = v;\n        });\n      });\n      return errors.length > 0 ? Result.error(errors) : Result.value(result);\n    };\n\n    var renderBodyPanel = function (spec, backstage) {\n      var memForm = record(Form.sketch(function (parts) {\n        return {\n          dom: {\n            tag: 'div',\n            classes: ['tox-form'].concat(spec.classes)\n          },\n          components: map(spec.items, function (item) {\n            return interpretInForm(parts, item, backstage);\n          })\n        };\n      }));\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [memForm.asSpec()]\n          }],\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          }),\n          ComposingConfigs.memento(memForm),\n          RepresentingConfigs.memento(memForm, {\n            postprocess: function (formValue) {\n              return toValidValues(formValue).fold(function (err) {\n                console.error(err);\n                return {};\n              }, function (vals) {\n                return vals;\n              });\n            }\n          })\n        ])\n      };\n    };\n\n    var factory$j = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: detail.components,\n        events: events$7(detail.action),\n        behaviours: augment(detail.tabButtonBehaviours, [\n          Focusing.config({}),\n          Keying.config({\n            mode: 'execution',\n            useSpace: true,\n            useEnter: true\n          }),\n          Representing.config({\n            store: {\n              mode: 'memory',\n              initialValue: detail.value\n            }\n          })\n        ]),\n        domModification: detail.domModification\n      };\n    };\n    var TabButton = single$2({\n      name: 'TabButton',\n      configFields: [\n        defaulted$1('uid', undefined),\n        strict$1('value'),\n        field('dom', 'dom', mergeWithThunk(function () {\n          return {\n            attributes: {\n              'role': 'tab',\n              'id': generate$1('aria'),\n              'aria-selected': 'false'\n            }\n          };\n        }), anyValue$1()),\n        option('action'),\n        defaulted$1('domModification', {}),\n        field$1('tabButtonBehaviours', [\n          Focusing,\n          Keying,\n          Representing\n        ]),\n        strict$1('view')\n      ],\n      factory: factory$j\n    });\n\n    var schema$y = constant([\n      strict$1('tabs'),\n      strict$1('dom'),\n      defaulted$1('clickToDismiss', false),\n      field$1('tabbarBehaviours', [\n        Highlighting,\n        Keying\n      ]),\n      markers([\n        'tabClass',\n        'selectedClass'\n      ])\n    ]);\n    var tabsPart = group({\n      factory: TabButton,\n      name: 'tabs',\n      unit: 'tab',\n      overrides: function (barDetail) {\n        var dismissTab$1 = function (tabbar, button) {\n          Highlighting.dehighlight(tabbar, button);\n          emitWith(tabbar, dismissTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        var changeTab$1 = function (tabbar, button) {\n          Highlighting.highlight(tabbar, button);\n          emitWith(tabbar, changeTab(), {\n            tabbar: tabbar,\n            button: button\n          });\n        };\n        return {\n          action: function (button) {\n            var tabbar = button.getSystem().getByUid(barDetail.uid).getOrDie();\n            var activeButton = Highlighting.isHighlighted(tabbar, button);\n            var response = function () {\n              if (activeButton && barDetail.clickToDismiss) {\n                return dismissTab$1;\n              } else if (!activeButton) {\n                return changeTab$1;\n              } else {\n                return noop;\n              }\n            }();\n            response(tabbar, button);\n          },\n          domModification: { classes: [barDetail.markers.tabClass] }\n        };\n      }\n    });\n    var parts$g = constant([tabsPart]);\n\n    var factory$k = function (detail, components, _spec, _externals) {\n      return {\n        'uid': detail.uid,\n        'dom': detail.dom,\n        components: components,\n        'debug.sketcher': 'Tabbar',\n        'domModification': { attributes: { role: 'tablist' } },\n        'behaviours': augment(detail.tabbarBehaviours, [\n          Highlighting.config({\n            highlightClass: detail.markers.selectedClass,\n            itemClass: detail.markers.tabClass,\n            onHighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'true');\n            },\n            onDehighlight: function (tabbar, tab) {\n              set$1(tab.element, 'aria-selected', 'false');\n            }\n          }),\n          Keying.config({\n            mode: 'flow',\n            getInitial: function (tabbar) {\n              return Highlighting.getHighlighted(tabbar).map(function (tab) {\n                return tab.element;\n              });\n            },\n            selector: '.' + detail.markers.tabClass,\n            executeOnMove: true\n          })\n        ])\n      };\n    };\n    var Tabbar = composite$1({\n      name: 'Tabbar',\n      configFields: schema$y(),\n      partFields: parts$g(),\n      factory: factory$k\n    });\n\n    var factory$l = function (detail, _spec) {\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        behaviours: augment(detail.tabviewBehaviours, [Replacing.config({})]),\n        domModification: { attributes: { role: 'tabpanel' } }\n      };\n    };\n    var Tabview = single$2({\n      name: 'Tabview',\n      configFields: [field$1('tabviewBehaviours', [Replacing])],\n      factory: factory$l\n    });\n\n    var schema$z = constant([\n      defaulted$1('selectFirst', true),\n      onHandler('onChangeTab'),\n      onHandler('onDismissTab'),\n      defaulted$1('tabs', []),\n      field$1('tabSectionBehaviours', [])\n    ]);\n    var barPart = required({\n      factory: Tabbar,\n      schema: [\n        strict$1('dom'),\n        strictObjOf('markers', [\n          strict$1('tabClass'),\n          strict$1('selectedClass')\n        ])\n      ],\n      name: 'tabbar',\n      defaults: function (detail) {\n        return { tabs: detail.tabs };\n      }\n    });\n    var viewPart = required({\n      factory: Tabview,\n      name: 'tabview'\n    });\n    var parts$h = constant([\n      barPart,\n      viewPart\n    ]);\n\n    var factory$m = function (detail, components, _spec, _externals) {\n      var changeTab$1 = function (button) {\n        var tabValue = Representing.getValue(button);\n        getPart(button, detail, 'tabview').each(function (tabview) {\n          var tabWithValue = find(detail.tabs, function (t) {\n            return t.value === tabValue;\n          });\n          tabWithValue.each(function (tabData) {\n            var panel = tabData.view();\n            getOpt(button.element, 'id').each(function (id) {\n              set$1(tabview.element, 'aria-labelledby', id);\n            });\n            Replacing.set(tabview, panel);\n            detail.onChangeTab(tabview, button, panel);\n          });\n        });\n      };\n      var changeTabBy = function (section, byPred) {\n        getPart(section, detail, 'tabbar').each(function (tabbar) {\n          byPred(tabbar).each(emitExecute);\n        });\n      };\n      return {\n        uid: detail.uid,\n        dom: detail.dom,\n        components: components,\n        behaviours: get$d(detail.tabSectionBehaviours),\n        events: derive(flatten([\n          detail.selectFirst ? [runOnAttached(function (section, _simulatedEvent) {\n              changeTabBy(section, Highlighting.getFirst);\n            })] : [],\n          [\n            run(changeTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              changeTab$1(button);\n            }),\n            run(dismissTab(), function (section, simulatedEvent) {\n              var button = simulatedEvent.event.button;\n              detail.onDismissTab(section, button);\n            })\n          ]\n        ])),\n        apis: {\n          getViewItems: function (section) {\n            return getPart(section, detail, 'tabview').map(function (tabview) {\n              return Replacing.contents(tabview);\n            }).getOr([]);\n          },\n          showTab: function (section, tabKey) {\n            var getTabIfNotActive = function (tabbar) {\n              var candidates = Highlighting.getCandidates(tabbar);\n              var optTab = find(candidates, function (c) {\n                return Representing.getValue(c) === tabKey;\n              });\n              return optTab.filter(function (tab) {\n                return !Highlighting.isHighlighted(tabbar, tab);\n              });\n            };\n            changeTabBy(section, getTabIfNotActive);\n          }\n        }\n      };\n    };\n    var TabSection = composite$1({\n      name: 'TabSection',\n      configFields: schema$z(),\n      partFields: parts$h(),\n      factory: factory$m,\n      apis: {\n        getViewItems: function (apis, component) {\n          return apis.getViewItems(component);\n        },\n        showTab: function (apis, component, tabKey) {\n          apis.showTab(component, tabKey);\n        }\n      }\n    });\n\n    var measureHeights = function (allTabs, tabview, tabviewComp) {\n      return map(allTabs, function (_tab, i) {\n        Replacing.set(tabviewComp, allTabs[i].view());\n        var rect = tabview.dom.getBoundingClientRect();\n        Replacing.set(tabviewComp, []);\n        return rect.height;\n      });\n    };\n    var getMaxHeight = function (heights) {\n      return head(sort(heights, function (a, b) {\n        if (a > b) {\n          return -1;\n        } else if (a < b) {\n          return +1;\n        } else {\n          return 0;\n        }\n      }));\n    };\n    var getMaxTabviewHeight = function (dialog, tabview, tablist) {\n      var documentElement$1 = documentElement(dialog).dom;\n      var rootElm = ancestor$2(dialog, '.tox-dialog-wrap').getOr(dialog);\n      var isFixed = get$5(rootElm, 'position') === 'fixed';\n      var maxHeight;\n      if (isFixed) {\n        maxHeight = Math.max(documentElement$1.clientHeight, window.innerHeight);\n      } else {\n        maxHeight = Math.max(documentElement$1.offsetHeight, documentElement$1.scrollHeight);\n      }\n      var tabviewHeight = get$7(tabview);\n      var isTabListBeside = tabview.dom.offsetLeft >= tablist.dom.offsetLeft + get$8(tablist);\n      var currentTabHeight = isTabListBeside ? Math.max(get$7(tablist), tabviewHeight) : tabviewHeight;\n      var dialogTopMargin = parseInt(get$5(dialog, 'margin-top'), 10) || 0;\n      var dialogBottomMargin = parseInt(get$5(dialog, 'margin-bottom'), 10) || 0;\n      var dialogHeight = get$7(dialog) + dialogTopMargin + dialogBottomMargin;\n      var chromeHeight = dialogHeight - currentTabHeight;\n      return maxHeight - chromeHeight;\n    };\n    var showTab = function (allTabs, comp) {\n      head(allTabs).each(function (tab) {\n        return TabSection.showTab(comp, tab.value);\n      });\n    };\n    var setTabviewHeight = function (tabview, height) {\n      set$2(tabview, 'height', height + 'px');\n      if (!detect$3().browser.isIE()) {\n        set$2(tabview, 'flex-basis', height + 'px');\n      } else {\n        remove$6(tabview, 'flex-basis');\n      }\n    };\n    var updateTabviewHeight = function (dialogBody, tabview, maxTabHeight) {\n      ancestor$2(dialogBody, '[role=\"dialog\"]').each(function (dialog) {\n        descendant$1(dialog, '[role=\"tablist\"]').each(function (tablist) {\n          maxTabHeight.get().map(function (height) {\n            set$2(tabview, 'height', '0');\n            set$2(tabview, 'flex-basis', '0');\n            return Math.min(height, getMaxTabviewHeight(dialog, tabview, tablist));\n          }).each(function (height) {\n            setTabviewHeight(tabview, height);\n          });\n        });\n      });\n    };\n    var getTabview = function (dialog) {\n      return descendant$1(dialog, '[role=\"tabpanel\"]');\n    };\n    var setMode = function (allTabs) {\n      var smartTabHeight = function () {\n        var maxTabHeight = Cell(Optional.none());\n        var extraEvents = [\n          runOnAttached(function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              set$2(tabview, 'visibility', 'hidden');\n              comp.getSystem().getByDom(tabview).toOptional().each(function (tabviewComp) {\n                var heights = measureHeights(allTabs, tabview, tabviewComp);\n                var maxTabHeightOpt = getMaxHeight(heights);\n                maxTabHeight.set(maxTabHeightOpt);\n              });\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n              remove$6(tabview, 'visibility');\n              showTab(allTabs, comp);\n              global$2.requestAnimationFrame(function () {\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              });\n            });\n          }),\n          run(windowResize(), function (comp) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              updateTabviewHeight(dialog, tabview, maxTabHeight);\n            });\n          }),\n          run(formResizeEvent, function (comp, _se) {\n            var dialog = comp.element;\n            getTabview(dialog).each(function (tabview) {\n              var oldFocus = active();\n              set$2(tabview, 'visibility', 'hidden');\n              var oldHeight = getRaw(tabview, 'height').map(function (h) {\n                return parseInt(h, 10);\n              });\n              remove$6(tabview, 'height');\n              remove$6(tabview, 'flex-basis');\n              var newHeight = tabview.dom.getBoundingClientRect().height;\n              var hasGrown = oldHeight.forall(function (h) {\n                return newHeight > h;\n              });\n              if (hasGrown) {\n                maxTabHeight.set(Optional.from(newHeight));\n                updateTabviewHeight(dialog, tabview, maxTabHeight);\n              } else {\n                oldHeight.each(function (h) {\n                  setTabviewHeight(tabview, h);\n                });\n              }\n              remove$6(tabview, 'visibility');\n              oldFocus.each(focus$1);\n            });\n          })\n        ];\n        var selectFirst = false;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      var naiveTabHeight = function () {\n        var extraEvents = [];\n        var selectFirst = true;\n        return {\n          extraEvents: extraEvents,\n          selectFirst: selectFirst\n        };\n      }();\n      return {\n        smartTabHeight: smartTabHeight,\n        naiveTabHeight: naiveTabHeight\n      };\n    };\n\n    var SendDataToSectionChannel = 'send-data-to-section';\n    var SendDataToViewChannel = 'send-data-to-view';\n    var renderTabPanel = function (spec, backstage) {\n      var storedValue = Cell({});\n      var updateDataWithForm = function (form) {\n        var formData = Representing.getValue(form);\n        var validData = toValidValues(formData).getOr({});\n        var currentData = storedValue.get();\n        var newData = deepMerge(currentData, validData);\n        storedValue.set(newData);\n      };\n      var setDataOnForm = function (form) {\n        var tabData = storedValue.get();\n        Representing.setValue(form, tabData);\n      };\n      var oldTab = Cell(null);\n      var allTabs = map(spec.tabs, function (tab) {\n        return {\n          value: tab.name,\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__body-nav-item'],\n            innerHtml: backstage.shared.providers.translate(tab.title)\n          },\n          view: function () {\n            return [Form.sketch(function (parts) {\n                return {\n                  dom: {\n                    tag: 'div',\n                    classes: ['tox-form']\n                  },\n                  components: map(tab.items, function (item) {\n                    return interpretInForm(parts, item, backstage);\n                  }),\n                  formBehaviours: derive$1([\n                    Keying.config({\n                      mode: 'acyclic',\n                      useTabstopAt: not(isPseudoStop)\n                    }),\n                    config('TabView.form.events', [\n                      runOnAttached(setDataOnForm),\n                      runOnDetached(updateDataWithForm)\n                    ]),\n                    Receiving.config({\n                      channels: wrapAll$1([\n                        {\n                          key: SendDataToSectionChannel,\n                          value: { onReceive: updateDataWithForm }\n                        },\n                        {\n                          key: SendDataToViewChannel,\n                          value: { onReceive: setDataOnForm }\n                        }\n                      ])\n                    })\n                  ])\n                };\n              })];\n          }\n        };\n      });\n      var tabMode = setMode(allTabs).smartTabHeight;\n      return TabSection.sketch({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        onChangeTab: function (section, button, _viewItems) {\n          var name = Representing.getValue(button);\n          emitWith(section, formTabChangeEvent, {\n            name: name,\n            oldName: oldTab.get()\n          });\n          oldTab.set(name);\n        },\n        tabs: allTabs,\n        components: [\n          TabSection.parts.tabbar({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-nav']\n            },\n            components: [Tabbar.parts.tabs({})],\n            markers: {\n              tabClass: 'tox-tab',\n              selectedClass: 'tox-dialog__body-nav-item--active'\n            },\n            tabbarBehaviours: derive$1([Tabstopping.config({})])\n          }),\n          TabSection.parts.tabview({\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            }\n          })\n        ],\n        selectFirst: tabMode.selectFirst,\n        tabSectionBehaviours: derive$1([\n          config('tabpanel', tabMode.extraEvents),\n          Keying.config({ mode: 'acyclic' }),\n          Composing.config({\n            find: function (comp) {\n              return head(TabSection.getViewItems(comp));\n            }\n          }),\n          Representing.config({\n            store: {\n              mode: 'manual',\n              getValue: function (tsection) {\n                tsection.getSystem().broadcastOn([SendDataToSectionChannel], {});\n                return storedValue.get();\n              },\n              setValue: function (tsection, value) {\n                storedValue.set(value);\n                tsection.getSystem().broadcastOn([SendDataToViewChannel], {});\n              }\n            }\n          })\n        ])\n      });\n    };\n\n    var dialogChannel = generate$1('update-dialog');\n    var titleChannel = generate$1('update-title');\n    var bodyChannel = generate$1('update-body');\n    var footerChannel = generate$1('update-footer');\n    var bodySendMessageChannel = generate$1('body-send-message');\n\n    var renderBody = function (spec, id, backstage, ariaAttrs) {\n      var renderComponents = function (incoming) {\n        switch (incoming.body.type) {\n        case 'tabpanel': {\n            return [renderTabPanel(incoming.body, backstage)];\n          }\n        default: {\n            return [renderBodyPanel(incoming.body, backstage)];\n          }\n        }\n      };\n      var updateState = function (_comp, incoming) {\n        return Optional.some({\n          isTabPanel: function () {\n            return incoming.body.type === 'tabpanel';\n          }\n        });\n      };\n      var ariaAttributes = { 'aria-live': 'polite' };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js'],\n          attributes: __assign(__assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({})), ariaAttrs ? ariaAttributes : {})\n        },\n        components: [],\n        behaviours: derive$1([\n          ComposingConfigs.childAt(0),\n          Reflecting.config({\n            channel: bodyChannel,\n            updateState: updateState,\n            renderComponents: renderComponents,\n            initialData: spec\n          })\n        ])\n      };\n    };\n    var renderInlineBody = function (spec, contentId, backstage, ariaAttrs) {\n      return renderBody(spec, Optional.some(contentId), backstage, ariaAttrs);\n    };\n    var renderModalBody = function (spec, backstage) {\n      var bodySpec = renderBody(spec, Optional.none(), backstage, false);\n      return ModalDialog.parts.body(bodySpec);\n    };\n    var renderIframeBody = function (spec) {\n      var bodySpec = {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__content-js']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-iframe']\n            },\n            components: [craft({\n                dom: {\n                  tag: 'iframe',\n                  attributes: { src: spec.url }\n                },\n                behaviours: derive$1([\n                  Tabstopping.config({}),\n                  Focusing.config({})\n                ])\n              })]\n          }],\n        behaviours: derive$1([Keying.config({\n            mode: 'acyclic',\n            useTabstopAt: not(isPseudoStop)\n          })])\n      };\n      return ModalDialog.parts.body(bodySpec);\n    };\n\n    var isTouch = global$8.deviceType.isTouch();\n    var hiddenHeader = function (title, close) {\n      return {\n        dom: {\n          tag: 'div',\n          styles: { display: 'none' },\n          classes: ['tox-dialog__header']\n        },\n        components: [\n          title,\n          close\n        ]\n      };\n    };\n    var pClose = function (onClose, providersBackstage) {\n      return ModalDialog.parts.close(Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close')\n          }\n        },\n        action: onClose,\n        buttonBehaviours: derive$1([Tabstopping.config({})])\n      }));\n    };\n    var pUntitled = function () {\n      return ModalDialog.parts.title({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          innerHtml: '',\n          styles: { display: 'none' }\n        }\n      });\n    };\n    var pBodyMessage = function (message, providersBackstage) {\n      return ModalDialog.parts.body({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__body']\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-dialog__body-content']\n            },\n            components: [{ dom: fromHtml$2('<p>' + providersBackstage.translate(message) + '</p>') }]\n          }]\n      });\n    };\n    var pFooter = function (buttons) {\n      return ModalDialog.parts.footer({\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__footer']\n        },\n        components: buttons\n      });\n    };\n    var pFooterGroup = function (startButtons, endButtons) {\n      return [\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-start']\n          },\n          components: startButtons\n        }),\n        Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-end']\n          },\n          components: endButtons\n        })\n      ];\n    };\n    var renderDialog = function (spec) {\n      var _a;\n      var dialogClass = 'tox-dialog';\n      var blockerClass = dialogClass + '-wrap';\n      var blockerBackdropClass = blockerClass + '__backdrop';\n      var scrollLockClass = dialogClass + '__disable-scroll';\n      return ModalDialog.sketch({\n        lazySink: spec.lazySink,\n        onEscape: function (comp) {\n          spec.onEscape(comp);\n          return Optional.some(true);\n        },\n        useTabstopAt: function (elem) {\n          return !isPseudoStop(elem);\n        },\n        dom: {\n          tag: 'div',\n          classes: [dialogClass].concat(spec.extraClasses),\n          styles: __assign({ position: 'relative' }, spec.extraStyles)\n        },\n        components: __spreadArrays([\n          spec.header,\n          spec.body\n        ], spec.footer.toArray()),\n        parts: {\n          blocker: {\n            dom: fromHtml$2('<div class=\"' + blockerClass + '\"></div>'),\n            components: [{\n                dom: {\n                  tag: 'div',\n                  classes: isTouch ? [\n                    blockerBackdropClass,\n                    blockerBackdropClass + '--opaque'\n                  ] : [blockerBackdropClass]\n                }\n              }]\n          }\n        },\n        dragBlockClass: blockerClass,\n        modalBehaviours: derive$1(__spreadArrays([\n          Focusing.config({}),\n          config('dialog-events', spec.dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          config('scroll-lock', [\n            runOnAttached(function () {\n              add$2(body(), scrollLockClass);\n            }),\n            runOnDetached(function () {\n              remove$4(body(), scrollLockClass);\n            })\n          ])\n        ], spec.extraBehaviours)),\n        eventOrder: __assign((_a = {}, _a[execute()] = ['dialog-events'], _a[attachedToDom()] = [\n          'scroll-lock',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'scroll-lock'\n        ], _a), spec.eventOrder)\n      });\n    };\n\n    var renderClose = function (providersBackstage) {\n      return Button.sketch({\n        dom: {\n          tag: 'button',\n          classes: [\n            'tox-button',\n            'tox-button--icon',\n            'tox-button--naked'\n          ],\n          attributes: {\n            'type': 'button',\n            'aria-label': providersBackstage.translate('Close'),\n            'title': providersBackstage.translate('Close')\n          }\n        },\n        components: [{\n            dom: {\n              tag: 'div',\n              classes: ['tox-icon'],\n              innerHtml: get$e('close', providersBackstage.icons)\n            }\n          }],\n        action: function (comp) {\n          emit(comp, formCancelEvent);\n        }\n      });\n    };\n    var renderTitle = function (spec, id, providersBackstage) {\n      var renderComponents = function (data) {\n        return [text(providersBackstage.translate(data.title))];\n      };\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__title'],\n          attributes: __assign({}, id.map(function (x) {\n            return { id: x };\n          }).getOr({}))\n        },\n        components: renderComponents(spec),\n        behaviours: derive$1([Reflecting.config({\n            channel: titleChannel,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderDragHandle = function () {\n      return { dom: fromHtml$2('<div class=\"tox-dialog__draghandle\"></div>') };\n    };\n    var renderInlineHeader = function (spec, titleId, providersBackstage) {\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: [\n          renderTitle(spec, Optional.some(titleId), providersBackstage),\n          renderDragHandle(),\n          renderClose(providersBackstage)\n        ],\n        containerBehaviours: derive$1([Dragging.config({\n            mode: 'mouse',\n            blockerClass: 'blocker',\n            getTarget: function (handle) {\n              return closest$3(handle, '[role=\"dialog\"]').getOrDie();\n            },\n            snaps: {\n              getSnapPoints: function () {\n                return [];\n              },\n              leftAttr: 'data-drag-left',\n              topAttr: 'data-drag-top'\n            }\n          })])\n      });\n    };\n    var renderModalHeader = function (spec, providersBackstage) {\n      var pTitle = ModalDialog.parts.title(renderTitle(spec, Optional.none(), providersBackstage));\n      var pHandle = ModalDialog.parts.draghandle(renderDragHandle());\n      var pClose = ModalDialog.parts.close(renderClose(providersBackstage));\n      var components = [pTitle].concat(spec.draggable ? [pHandle] : []).concat([pClose]);\n      return Container.sketch({\n        dom: fromHtml$2('<div class=\"tox-dialog__header\"></div>'),\n        components: components\n      });\n    };\n\n    var getHeader = function (title, backstage) {\n      return renderModalHeader({\n        title: backstage.shared.providers.translate(title),\n        draggable: backstage.dialog.isDraggableModal()\n      }, backstage.shared.providers);\n    };\n    var getBusySpec = function (message, bs) {\n      return {\n        dom: {\n          tag: 'div',\n          classes: ['tox-dialog__busy-spinner'],\n          attributes: { 'aria-label': message },\n          styles: {\n            left: '0px',\n            right: '0px',\n            bottom: '0px',\n            top: '0px',\n            position: 'absolute'\n          }\n        },\n        behaviours: bs,\n        components: [{ dom: fromHtml$2('<div class=\"tox-spinner\"><div></div><div></div><div></div></div>') }]\n      };\n    };\n    var getEventExtras = function (lazyDialog, extra) {\n      return {\n        onClose: function () {\n          return extra.closeWindow();\n        },\n        onBlock: function (blockEvent) {\n          ModalDialog.setBusy(lazyDialog(), function (_comp, bs) {\n            return getBusySpec(blockEvent.message, bs);\n          });\n        },\n        onUnblock: function () {\n          ModalDialog.setIdle(lazyDialog());\n        }\n      };\n    };\n    var renderModalDialog = function (spec, initialData, dialogEvents, backstage) {\n      var _a;\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      return build$1(renderDialog(__assign(__assign({}, spec), {\n        lazySink: backstage.shared.getSink,\n        extraBehaviours: __spreadArrays([\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: initialData\n          }),\n          RepresentingConfigs.memory({})\n        ], spec.extraBehaviours),\n        onEscape: function (comp) {\n          emit(comp, formCancelEvent);\n        },\n        dialogEvents: dialogEvents,\n        eventOrder: (_a = {}, _a[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _a[attachedToDom()] = [\n          'scroll-lock',\n          Reflecting.name(),\n          'messages',\n          'dialog-events',\n          'alloy.base.behaviour'\n        ], _a[detachedFromDom()] = [\n          'alloy.base.behaviour',\n          'dialog-events',\n          'messages',\n          Reflecting.name(),\n          'scroll-lock'\n        ], _a)\n      })));\n    };\n    var mapMenuButtons = function (buttons) {\n      var mapItems = function (button) {\n        var items = map(button.items, function (item) {\n          var cell = Cell(false);\n          return __assign(__assign({}, item), { storage: cell });\n        });\n        return __assign(__assign({}, button), { items: items });\n      };\n      return map(buttons, function (button) {\n        if (button.type === 'menu') {\n          return mapItems(button);\n        }\n        return button;\n      });\n    };\n    var extractCellsToObject = function (buttons) {\n      return foldl(buttons, function (acc, button) {\n        if (button.type === 'menu') {\n          var menuButton = button;\n          return foldl(menuButton.items, function (innerAcc, item) {\n            innerAcc[item.name] = item.storage;\n            return innerAcc;\n          }, acc);\n        }\n        return acc;\n      }, {});\n    };\n\n    var initCommonEvents = function (fireApiEvent, extras) {\n      return [\n        runWithTarget(focusin(), onFocus$1),\n        fireApiEvent(formCloseEvent, function (_api, spec) {\n          extras.onClose();\n          spec.onClose();\n        }),\n        fireApiEvent(formCancelEvent, function (api, spec, _event, self) {\n          spec.onCancel(api);\n          emit(self, formCloseEvent);\n        }),\n        run(formUnblockEvent, function (_c, _se) {\n          return extras.onUnblock();\n        }),\n        run(formBlockEvent, function (_c, se) {\n          return extras.onBlock(se.event);\n        })\n      ];\n    };\n    var initUrlDialog = function (getInstanceApi, extras) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialog) {\n          f(currentDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [fireApiEvent(formActionEvent, function (api, spec, event) {\n          spec.onAction(api, { name: event.name });\n        })]);\n    };\n    var initDialog = function (getInstanceApi, extras, getSink) {\n      var fireApiEvent = function (eventName, f) {\n        return run(eventName, function (c, se) {\n          withSpec(c, function (spec, _c) {\n            f(getInstanceApi(), spec, se.event, c);\n          });\n        });\n      };\n      var withSpec = function (c, f) {\n        Reflecting.getState(c).get().each(function (currentDialogInit) {\n          f(currentDialogInit.internalDialog, c);\n        });\n      };\n      return __spreadArrays(initCommonEvents(fireApiEvent, extras), [\n        fireApiEvent(formSubmitEvent, function (api, spec) {\n          return spec.onSubmit(api);\n        }),\n        fireApiEvent(formChangeEvent, function (api, spec, event) {\n          spec.onChange(api, { name: event.name });\n        }),\n        fireApiEvent(formActionEvent, function (api, spec, event, component) {\n          var focusIn = function () {\n            return Keying.focusIn(component);\n          };\n          var isDisabled = function (focused) {\n            return has$1(focused, 'disabled') || getOpt(focused, 'aria-disabled').exists(function (val) {\n              return val === 'true';\n            });\n          };\n          var rootNode = getRootNode(component.element);\n          var current = active(rootNode);\n          spec.onAction(api, {\n            name: event.name,\n            value: event.value\n          });\n          active(rootNode).fold(focusIn, function (focused) {\n            if (isDisabled(focused)) {\n              focusIn();\n            } else if (current.exists(function (cur) {\n                return contains$2(focused, cur) && isDisabled(cur);\n              })) {\n              focusIn();\n            } else {\n              getSink().toOptional().filter(function (sink) {\n                return !contains$2(sink.element, focused);\n              }).each(focusIn);\n            }\n          });\n        }),\n        fireApiEvent(formTabChangeEvent, function (api, spec, event) {\n          spec.onTabChange(api, {\n            newTabName: event.name,\n            oldTabName: event.oldName\n          });\n        }),\n        runOnDetached(function (component) {\n          var api = getInstanceApi();\n          Representing.setValue(component, api.getData());\n        })\n      ]);\n    };\n    var SilverDialogEvents = {\n      initUrlDialog: initUrlDialog,\n      initDialog: initDialog\n    };\n\n    var makeButton = function (button, backstage) {\n      return renderFooterButton(button, button.type, backstage);\n    };\n    var lookup$2 = function (compInSystem, footerButtons, buttonName) {\n      return find(footerButtons, function (button) {\n        return button.name === buttonName;\n      }).bind(function (memButton) {\n        return memButton.memento.getOpt(compInSystem);\n      });\n    };\n    var renderComponents = function (_data, state) {\n      var footerButtons = state.map(function (s) {\n        return s.footerButtons;\n      }).getOr([]);\n      var buttonGroups = partition(footerButtons, function (button) {\n        return button.align === 'start';\n      });\n      var makeGroup = function (edge, buttons) {\n        return Container.sketch({\n          dom: {\n            tag: 'div',\n            classes: ['tox-dialog__footer-' + edge]\n          },\n          components: map(buttons, function (button) {\n            return button.memento.asSpec();\n          })\n        });\n      };\n      var startButtons = makeGroup('start', buttonGroups.pass);\n      var endButtons = makeGroup('end', buttonGroups.fail);\n      return [\n        startButtons,\n        endButtons\n      ];\n    };\n    var renderFooter = function (initSpec, backstage) {\n      var updateState = function (_comp, data) {\n        var footerButtons = map(data.buttons, function (button) {\n          var memButton = record(makeButton(button, backstage));\n          return {\n            name: button.name,\n            align: button.align,\n            memento: memButton\n          };\n        });\n        var lookupByName = function (compInSystem, buttonName) {\n          return lookup$2(compInSystem, footerButtons, buttonName);\n        };\n        return Optional.some({\n          lookupByName: lookupByName,\n          footerButtons: footerButtons\n        });\n      };\n      return {\n        dom: fromHtml$2('<div class=\"tox-dialog__footer\"></div>'),\n        components: [],\n        behaviours: derive$1([Reflecting.config({\n            channel: footerChannel,\n            initialData: initSpec,\n            updateState: updateState,\n            renderComponents: renderComponents\n          })])\n      };\n    };\n    var renderInlineFooter = function (initSpec, backstage) {\n      return renderFooter(initSpec, backstage);\n    };\n    var renderModalFooter = function (initSpec, backstage) {\n      return ModalDialog.parts.footer(renderFooter(initSpec, backstage));\n    };\n\n    var getCompByName = function (access, name) {\n      var root = access.getRoot();\n      if (root.getSystem().isConnected()) {\n        var form_1 = Composing.getCurrent(access.getFormWrapper()).getOr(access.getFormWrapper());\n        return Form.getField(form_1, name).fold(function () {\n          var footer = access.getFooter();\n          var footerState = Reflecting.getState(footer);\n          return footerState.get().bind(function (f) {\n            return f.lookupByName(form_1, name);\n          });\n        }, function (comp) {\n          return Optional.some(comp);\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n    var validateData = function (access, data) {\n      var root = access.getRoot();\n      return Reflecting.getState(root).get().map(function (dialogState) {\n        return getOrDie(asRaw('data', dialogState.dataValidator, data));\n      }).getOr(data);\n    };\n    var getDialogApi = function (access, doRedial, menuItemStates) {\n      var withRoot = function (f) {\n        var root = access.getRoot();\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var getData = function () {\n        var root = access.getRoot();\n        var valueComp = root.getSystem().isConnected() ? access.getFormWrapper() : root;\n        var representedValues = Representing.getValue(valueComp);\n        var menuItemCurrentState = map$2(menuItemStates, function (cell) {\n          return cell.get();\n        });\n        return __assign(__assign({}, representedValues), menuItemCurrentState);\n      };\n      var setData = function (newData) {\n        withRoot(function (_) {\n          var prevData = instanceApi.getData();\n          var mergedData = __assign(__assign({}, prevData), newData);\n          var newInternalData = validateData(access, mergedData);\n          var form = access.getFormWrapper();\n          Representing.setValue(form, newInternalData);\n          each$1(menuItemStates, function (v, k) {\n            if (has(mergedData, k)) {\n              v.set(mergedData[k]);\n            }\n          });\n        });\n      };\n      var disable = function (name) {\n        getCompByName(access, name).each(Disabling.disable);\n      };\n      var enable = function (name) {\n        getCompByName(access, name).each(Disabling.enable);\n      };\n      var focus = function (name) {\n        getCompByName(access, name).each(Focusing.focus);\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var showTab = function (name) {\n        withRoot(function (_) {\n          var body = access.getBody();\n          var bodyState = Reflecting.getState(body);\n          if (bodyState.get().exists(function (b) {\n              return b.isTabPanel();\n            })) {\n            Composing.getCurrent(body).each(function (tabSection) {\n              TabSection.showTab(tabSection, name);\n            });\n          }\n        });\n      };\n      var redial = function (d) {\n        withRoot(function (root) {\n          var dialogInit = doRedial(d);\n          root.getSystem().broadcastOn([dialogChannel], dialogInit);\n          root.getSystem().broadcastOn([titleChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([bodyChannel], dialogInit.internalDialog);\n          root.getSystem().broadcastOn([footerChannel], dialogInit.internalDialog);\n          instanceApi.setData(dialogInit.initialData);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var instanceApi = {\n        getData: getData,\n        setData: setData,\n        disable: disable,\n        enable: enable,\n        focus: focus,\n        block: block,\n        unblock: unblock,\n        showTab: showTab,\n        redial: redial,\n        close: close\n      };\n      return instanceApi;\n    };\n\n    var getDialogSizeClasses = function (size) {\n      switch (size) {\n      case 'large':\n        return ['tox-dialog--width-lg'];\n      case 'medium':\n        return ['tox-dialog--width-md'];\n      default:\n        return [];\n      }\n    };\n    var renderDialog$1 = function (dialogInit, extra, backstage) {\n      var header = getHeader(dialogInit.internalDialog.title, backstage);\n      var body = renderModalBody({ body: dialogInit.internalDialog.body }, backstage);\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var footer = renderModalFooter({ buttons: storagedMenuButtons }, backstage);\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra), backstage.shared.getSink);\n      var dialogSize = getDialogSizeClasses(dialogInit.internalDialog.size);\n      var spec = {\n        header: header,\n        body: body,\n        footer: Optional.some(footer),\n        extraClasses: dialogSize,\n        extraBehaviours: [],\n        extraStyles: {}\n      };\n      var dialog = renderModalDialog(spec, dialogInit, dialogEvents, backstage);\n      var modalAccess = function () {\n        var getForm = function () {\n          var outerForm = ModalDialog.getBody(dialog);\n          return Composing.getCurrent(outerForm).getOr(outerForm);\n        };\n        return {\n          getRoot: function () {\n            return dialog;\n          },\n          getBody: function () {\n            return ModalDialog.getBody(dialog);\n          },\n          getFooter: function () {\n            return ModalDialog.getFooter(dialog);\n          },\n          getFormWrapper: getForm\n        };\n      }();\n      var instanceApi = getDialogApi(modalAccess, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var renderInlineDialog = function (dialogInit, extra, backstage, ariaAttrs) {\n      var _a, _b;\n      var dialogLabelId = generate$1('dialog-label');\n      var dialogContentId = generate$1('dialog-content');\n      var updateState = function (_comp, incoming) {\n        return Optional.some(incoming);\n      };\n      var memHeader = record(renderInlineHeader({\n        title: dialogInit.internalDialog.title,\n        draggable: true\n      }, dialogLabelId, backstage.shared.providers));\n      var memBody = record(renderInlineBody({ body: dialogInit.internalDialog.body }, dialogContentId, backstage, ariaAttrs));\n      var storagedMenuButtons = mapMenuButtons(dialogInit.internalDialog.buttons);\n      var objOfCells = extractCellsToObject(storagedMenuButtons);\n      var memFooter = record(renderInlineFooter({ buttons: storagedMenuButtons }, backstage));\n      var dialogEvents = SilverDialogEvents.initDialog(function () {\n        return instanceApi;\n      }, {\n        onBlock: function (event) {\n          Blocking.block(dialog, function (_comp, bs) {\n            return getBusySpec(event.message, bs);\n          });\n        },\n        onUnblock: function () {\n          Blocking.unblock(dialog);\n        },\n        onClose: function () {\n          return extra.closeWindow();\n        }\n      }, backstage.shared.getSink);\n      var dialog = build$1({\n        dom: {\n          tag: 'div',\n          classes: [\n            'tox-dialog',\n            'tox-dialog-inline'\n          ],\n          attributes: (_a = { role: 'dialog' }, _a['aria-labelledby'] = dialogLabelId, _a['aria-describedby'] = '' + dialogContentId, _a)\n        },\n        eventOrder: (_b = {}, _b[receive()] = [\n          Reflecting.name(),\n          Receiving.name()\n        ], _b[execute()] = ['execute-on-form'], _b[attachedToDom()] = [\n          'reflecting',\n          'execute-on-form'\n        ], _b),\n        behaviours: derive$1([\n          Keying.config({\n            mode: 'cyclic',\n            onEscape: function (c) {\n              emit(c, formCloseEvent);\n              return Optional.some(true);\n            },\n            useTabstopAt: function (elem) {\n              return !isPseudoStop(elem) && (name(elem) !== 'button' || get$3(elem, 'disabled') !== 'disabled');\n            }\n          }),\n          Reflecting.config({\n            channel: dialogChannel,\n            updateState: updateState,\n            initialData: dialogInit\n          }),\n          Focusing.config({}),\n          config('execute-on-form', dialogEvents.concat([runOnSource(focusin(), function (comp, _se) {\n              Keying.focusIn(comp);\n            })])),\n          Blocking.config({\n            getRoot: function () {\n              return Optional.some(dialog);\n            }\n          }),\n          Replacing.config({}),\n          RepresentingConfigs.memory({})\n        ]),\n        components: [\n          memHeader.asSpec(),\n          memBody.asSpec(),\n          memFooter.asSpec()\n        ]\n      });\n      var instanceApi = getDialogApi({\n        getRoot: function () {\n          return dialog;\n        },\n        getFooter: function () {\n          return memFooter.get(dialog);\n        },\n        getBody: function () {\n          return memBody.get(dialog);\n        },\n        getFormWrapper: function () {\n          var body = memBody.get(dialog);\n          return Composing.getCurrent(body).getOr(body);\n        }\n      }, extra.redial, objOfCells);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var global$h = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getUrlDialogApi = function (root) {\n      var withRoot = function (f) {\n        if (root.getSystem().isConnected()) {\n          f(root);\n        }\n      };\n      var block = function (message) {\n        if (!isString(message)) {\n          throw new Error('The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument');\n        }\n        withRoot(function (root) {\n          emitWith(root, formBlockEvent, { message: message });\n        });\n      };\n      var unblock = function () {\n        withRoot(function (root) {\n          emit(root, formUnblockEvent);\n        });\n      };\n      var close = function () {\n        withRoot(function (root) {\n          emit(root, formCloseEvent);\n        });\n      };\n      var sendMessage = function (data) {\n        withRoot(function (root) {\n          root.getSystem().broadcastOn([bodySendMessageChannel], data);\n        });\n      };\n      return {\n        block: block,\n        unblock: unblock,\n        close: close,\n        sendMessage: sendMessage\n      };\n    };\n\n    var SUPPORTED_MESSAGE_ACTIONS = [\n      'insertContent',\n      'setContent',\n      'execCommand',\n      'close',\n      'block',\n      'unblock'\n    ];\n    var isSupportedMessage = function (data) {\n      return isObject(data) && SUPPORTED_MESSAGE_ACTIONS.indexOf(data.mceAction) !== -1;\n    };\n    var isCustomMessage = function (data) {\n      return !isSupportedMessage(data) && isObject(data) && has(data, 'mceAction');\n    };\n    var handleMessage = function (editor, api, data) {\n      switch (data.mceAction) {\n      case 'insertContent':\n        editor.insertContent(data.content);\n        break;\n      case 'setContent':\n        editor.setContent(data.content);\n        break;\n      case 'execCommand':\n        var ui = isBoolean(data.ui) ? data.ui : false;\n        editor.execCommand(data.cmd, ui, data.value);\n        break;\n      case 'close':\n        api.close();\n        break;\n      case 'block':\n        api.block(data.message);\n        break;\n      case 'unblock':\n        api.unblock();\n        break;\n      }\n    };\n    var renderUrlDialog = function (internalDialog, extra, editor, backstage) {\n      var _a;\n      var header = getHeader(internalDialog.title, backstage);\n      var body = renderIframeBody(internalDialog);\n      var footer = internalDialog.buttons.bind(function (buttons) {\n        if (buttons.length === 0) {\n          return Optional.none();\n        } else {\n          return Optional.some(renderModalFooter({ buttons: buttons }, backstage));\n        }\n      });\n      var dialogEvents = SilverDialogEvents.initUrlDialog(function () {\n        return instanceApi;\n      }, getEventExtras(function () {\n        return dialog;\n      }, extra));\n      var styles = __assign(__assign({}, internalDialog.height.fold(function () {\n        return {};\n      }, function (height) {\n        return {\n          'height': height + 'px',\n          'max-height': height + 'px'\n        };\n      })), internalDialog.width.fold(function () {\n        return {};\n      }, function (width) {\n        return {\n          'width': width + 'px',\n          'max-width': width + 'px'\n        };\n      }));\n      var classes = internalDialog.width.isNone() && internalDialog.height.isNone() ? ['tox-dialog--width-lg'] : [];\n      var iframeUri = new global$h(internalDialog.url, { base_uri: new global$h(window.location.href) });\n      var iframeDomain = iframeUri.protocol + '://' + iframeUri.host + (iframeUri.port ? ':' + iframeUri.port : '');\n      var messageHandlerUnbinder = Cell(Optional.none());\n      var extraBehaviours = [\n        config('messages', [\n          runOnAttached(function () {\n            var unbind = bind$3(SugarElement.fromDom(window), 'message', function (e) {\n              if (iframeUri.isSameOrigin(new global$h(e.raw.origin))) {\n                var data = e.raw.data;\n                if (isSupportedMessage(data)) {\n                  handleMessage(editor, instanceApi, data);\n                } else if (isCustomMessage(data)) {\n                  internalDialog.onMessage(instanceApi, data);\n                }\n              }\n            });\n            messageHandlerUnbinder.set(Optional.some(unbind));\n          }),\n          runOnDetached(function () {\n            messageHandlerUnbinder.get().each(function (unbinder) {\n              return unbinder.unbind();\n            });\n          })\n        ]),\n        Receiving.config({\n          channels: (_a = {}, _a[bodySendMessageChannel] = {\n            onReceive: function (comp, data) {\n              descendant$1(comp.element, 'iframe').each(function (iframeEle) {\n                var iframeWin = iframeEle.dom.contentWindow;\n                iframeWin.postMessage(data, iframeDomain);\n              });\n            }\n          }, _a)\n        })\n      ];\n      var spec = {\n        header: header,\n        body: body,\n        footer: footer,\n        extraClasses: classes,\n        extraBehaviours: extraBehaviours,\n        extraStyles: styles\n      };\n      var dialog = renderModalDialog(spec, internalDialog, dialogEvents, backstage);\n      var instanceApi = getUrlDialogApi(dialog);\n      return {\n        dialog: dialog,\n        instanceApi: instanceApi\n      };\n    };\n\n    var setup$c = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function () {\n          ModalDialog.hide(alertDialog);\n          callback();\n        };\n        var memFooterClose = record(renderFooterButton({\n          name: 'close-alert',\n          text: 'OK',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage));\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(closeDialog, sharedBackstage.providers);\n        var alertDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [memFooterClose.asSpec()]))),\n          onEscape: closeDialog,\n          extraClasses: ['tox-alert-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [run(formCancelEvent, closeDialog)],\n          eventOrder: {}\n        }));\n        ModalDialog.show(alertDialog);\n        var footerCloseButton = memFooterClose.get(alertDialog);\n        Focusing.focus(footerCloseButton);\n      };\n      return { open: open };\n    };\n\n    var setup$d = function (extras) {\n      var sharedBackstage = extras.backstage.shared;\n      var open = function (message, callback) {\n        var closeDialog = function (state) {\n          ModalDialog.hide(confirmDialog);\n          callback(state);\n        };\n        var memFooterYes = record(renderFooterButton({\n          name: 'yes',\n          text: 'Yes',\n          primary: true,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'submit', extras.backstage));\n        var footerNo = renderFooterButton({\n          name: 'no',\n          text: 'No',\n          primary: false,\n          align: 'end',\n          disabled: false,\n          icon: Optional.none()\n        }, 'cancel', extras.backstage);\n        var titleSpec = pUntitled();\n        var closeSpec = pClose(function () {\n          return closeDialog(false);\n        }, sharedBackstage.providers);\n        var confirmDialog = build$1(renderDialog({\n          lazySink: function () {\n            return sharedBackstage.getSink();\n          },\n          header: hiddenHeader(titleSpec, closeSpec),\n          body: pBodyMessage(message, sharedBackstage.providers),\n          footer: Optional.some(pFooter(pFooterGroup([], [\n            footerNo,\n            memFooterYes.asSpec()\n          ]))),\n          onEscape: function () {\n            return closeDialog(false);\n          },\n          extraClasses: ['tox-confirm-dialog'],\n          extraBehaviours: [],\n          extraStyles: {},\n          dialogEvents: [\n            run(formCancelEvent, function () {\n              return closeDialog(false);\n            }),\n            run(formSubmitEvent, function () {\n              return closeDialog(true);\n            })\n          ],\n          eventOrder: {}\n        }));\n        ModalDialog.show(confirmDialog);\n        var footerYesButton = memFooterYes.get(confirmDialog);\n        Focusing.focus(footerYesButton);\n      };\n      return { open: open };\n    };\n\n    var validateData$1 = function (data, validator) {\n      return getOrDie(asRaw('data', validator, data));\n    };\n    var isAlertOrConfirmDialog = function (target) {\n      return closest$4(target, '.tox-alert-dialog') || closest$4(target, '.tox-confirm-dialog');\n    };\n    var inlineAdditionalBehaviours = function (editor, isStickyToolbar, isToolbarLocationTop) {\n      if (isStickyToolbar && isToolbarLocationTop) {\n        return [];\n      } else {\n        return [Docking.config({\n            contextual: {\n              lazyContext: function () {\n                return Optional.some(box(SugarElement.fromDom(editor.getContentAreaContainer())));\n              },\n              fadeInClass: 'tox-dialog-dock-fadein',\n              fadeOutClass: 'tox-dialog-dock-fadeout',\n              transitionClass: 'tox-dialog-dock-transition'\n            },\n            modes: ['top']\n          })];\n      }\n    };\n    var setup$e = function (extras) {\n      var backstage = extras.backstage;\n      var editor = extras.editor;\n      var isStickyToolbar$1 = isStickyToolbar(editor);\n      var alertDialog = setup$c(extras);\n      var confirmDialog = setup$d(extras);\n      var open = function (config, params, closeWindow) {\n        if (params !== undefined && params.inline === 'toolbar') {\n          return openInlineDialog(config, backstage.shared.anchors.inlineDialog(), closeWindow, params.ariaAttrs);\n        } else if (params !== undefined && params.inline === 'cursor') {\n          return openInlineDialog(config, backstage.shared.anchors.cursor(), closeWindow, params.ariaAttrs);\n        } else {\n          return openModalDialog(config, closeWindow);\n        }\n      };\n      var openUrl = function (config, closeWindow) {\n        return openModalUrlDialog(config, closeWindow);\n      };\n      var openModalUrlDialog = function (config, closeWindow) {\n        var factory = function (contents) {\n          var dialog = renderUrlDialog(contents, {\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, editor, backstage);\n          ModalDialog.show(dialog.dialog);\n          return dialog.instanceApi;\n        };\n        return DialogManager.openUrl(factory, config);\n      };\n      var openModalDialog = function (config, closeWindow) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = internalInitialData;\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var dialog = renderDialog$1(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              ModalDialog.hide(dialog.dialog);\n              closeWindow(dialog.instanceApi);\n            }\n          }, backstage);\n          ModalDialog.show(dialog.dialog);\n          dialog.instanceApi.setData(initialData);\n          return dialog.instanceApi;\n        };\n        return DialogManager.open(factory, config);\n      };\n      var openInlineDialog = function (config$1, anchor, closeWindow, ariaAttrs) {\n        var factory = function (contents, internalInitialData, dataValidator) {\n          var initialData = validateData$1(internalInitialData, dataValidator);\n          var inlineDialog = value$3();\n          var isToolbarLocationTop = backstage.shared.header.isPositionedAtTop();\n          var dialogInit = {\n            dataValidator: dataValidator,\n            initialData: initialData,\n            internalDialog: contents\n          };\n          var refreshDocking = function () {\n            return inlineDialog.on(function (dialog) {\n              InlineView.reposition(dialog);\n              Docking.refresh(dialog);\n            });\n          };\n          var dialogUi = renderInlineDialog(dialogInit, {\n            redial: DialogManager.redial,\n            closeWindow: function () {\n              inlineDialog.on(InlineView.hide);\n              editor.off('ResizeEditor', refreshDocking);\n              inlineDialog.clear();\n              closeWindow(dialogUi.instanceApi);\n            }\n          }, backstage, ariaAttrs);\n          var inlineDialogComp = build$1(InlineView.sketch(__assign(__assign({\n            lazySink: backstage.shared.getSink,\n            dom: {\n              tag: 'div',\n              classes: []\n            },\n            fireDismissalEventInstead: {}\n          }, isToolbarLocationTop ? {} : { fireRepositionEventInstead: {} }), {\n            inlineBehaviours: derive$1(__spreadArrays([config('window-manager-inline-events', [run(dismissRequested(), function (_comp, _se) {\n                  emit(dialogUi.dialog, formCancelEvent);\n                })])], inlineAdditionalBehaviours(editor, isStickyToolbar$1, isToolbarLocationTop))),\n            isExtraPart: function (_comp, target) {\n              return isAlertOrConfirmDialog(target);\n            }\n          })));\n          inlineDialog.set(inlineDialogComp);\n          InlineView.showWithin(inlineDialogComp, anchor, premade$1(dialogUi.dialog), Optional.some(body()));\n          if (!isStickyToolbar$1 || !isToolbarLocationTop) {\n            Docking.refresh(inlineDialogComp);\n            editor.on('ResizeEditor', refreshDocking);\n          }\n          dialogUi.instanceApi.setData(initialData);\n          Keying.focusIn(dialogUi.dialog);\n          return dialogUi.instanceApi;\n        };\n        return DialogManager.open(factory, config$1);\n      };\n      var confirm = function (message, callback) {\n        confirmDialog.open(message, function (state) {\n          callback(state);\n        });\n      };\n      var alert = function (message, callback) {\n        alertDialog.open(message, function () {\n          callback();\n        });\n      };\n      var close = function (instanceApi) {\n        instanceApi.close();\n      };\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        close: close,\n        confirm: confirm\n      };\n    };\n\n    function Theme () {\n      global$1.add('silver', function (editor) {\n        var _a = setup$b(editor), uiMothership = _a.uiMothership, backstage = _a.backstage, renderUI = _a.renderUI, getUi = _a.getUi;\n        Autocompleter.register(editor, backstage.shared);\n        var windowMgr = setup$e({\n          editor: editor,\n          backstage: backstage\n        });\n        return {\n          renderUI: renderUI,\n          getWindowManagerImpl: constant(windowMgr),\n          getNotificationManagerImpl: function () {\n            return NotificationManagerImpl(editor, { backstage: backstage }, uiMothership);\n          },\n          ui: getUi()\n        };\n      });\n    }\n\n    Theme();\n\n}());\n","/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.6.2 (2020-12-08)\n */\n(function () {\n    'use strict';\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      if (x === undefined) {\n        return 'undefined';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isEquatableType = function (x) {\n      return [\n        'undefined',\n        'boolean',\n        'number',\n        'string',\n        'function',\n        'xml',\n        'null'\n      ].indexOf(x) !== -1;\n    };\n\n    var sort = function (xs, compareFn) {\n      var clone = Array.prototype.slice.call(xs);\n      return clone.sort(compareFn);\n    };\n\n    var contramap = function (eqa, f) {\n      return eq(function (x, y) {\n        return eqa.eq(f(x), f(y));\n      });\n    };\n    var eq = function (f) {\n      return { eq: f };\n    };\n    var tripleEq = eq(function (x, y) {\n      return x === y;\n    });\n    var eqString = tripleEq;\n    var eqArray = function (eqa) {\n      return eq(function (x, y) {\n        if (x.length !== y.length) {\n          return false;\n        }\n        var len = x.length;\n        for (var i = 0; i < len; i++) {\n          if (!eqa.eq(x[i], y[i])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqSortedArray = function (eqa, compareFn) {\n      return contramap(eqArray(eqa), function (xs) {\n        return sort(xs, compareFn);\n      });\n    };\n    var eqRecord = function (eqa) {\n      return eq(function (x, y) {\n        var kx = Object.keys(x);\n        var ky = Object.keys(y);\n        if (!eqSortedArray(eqString).eq(kx, ky)) {\n          return false;\n        }\n        var len = kx.length;\n        for (var i = 0; i < len; i++) {\n          var q = kx[i];\n          if (!eqa.eq(x[q], y[q])) {\n            return false;\n          }\n        }\n        return true;\n      });\n    };\n    var eqAny = eq(function (x, y) {\n      if (x === y) {\n        return true;\n      }\n      var tx = typeOf(x);\n      var ty = typeOf(y);\n      if (tx !== ty) {\n        return false;\n      }\n      if (isEquatableType(tx)) {\n        return x === y;\n      } else if (tx === 'array') {\n        return eqArray(eqAny).eq(x, y);\n      } else if (tx === 'object') {\n        return eqRecord(eqAny).eq(x, y);\n      }\n      return false;\n    });\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var compose1 = function (fbc, fab) {\n      return function (a) {\n        return fbc(fab(a));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function (t) {\n        return !f(t);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var call = function (f) {\n      f();\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, _s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Optional = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf$1 = function (x) {\n      var t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      } else if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf$1(value) === type;\n      };\n    };\n    var isSimpleType = function (type) {\n      return function (value) {\n        return typeof value === type;\n      };\n    };\n    var eq$1 = function (t) {\n      return function (a) {\n        return t === a;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = eq$1(null);\n    var isBoolean = isSimpleType('boolean');\n    var isUndefined = eq$1(undefined);\n    var isNullable = function (a) {\n      return a === null || a === undefined;\n    };\n    var isNonNullable = function (a) {\n      return !isNullable(a);\n    };\n    var isFunction = isSimpleType('function');\n    var isNumber = isSimpleType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Optional.none() : Optional.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var findUntil = function (xs, pred, until) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(x);\n        } else if (until(x, i)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var find = function (xs, pred) {\n      return findUntil(xs, pred, never);\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Optional.some(i);\n        }\n      }\n      return Optional.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      return flatten(map(xs, f));\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort$1 = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var get = function (xs, i) {\n      return i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    };\n    var head = function (xs) {\n      return get(xs, 0);\n    };\n    var last = function (xs) {\n      return get(xs, xs.length - 1);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    var keys = Object.keys;\n    var hasOwnProperty = Object.hasOwnProperty;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var objAcc = function (r) {\n      return function (x, i) {\n        r[i] = x;\n      };\n    };\n    var internalFilter = function (obj, pred, onTrue, onFalse) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      internalFilter(obj, pred, objAcc(t), objAcc(f));\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var filter$1 = function (obj, pred) {\n      var t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    var mapToArray = function (obj, f) {\n      var r = [];\n      each$1(obj, function (value, name) {\n        r.push(f(value, name));\n      });\n      return r;\n    };\n    var values = function (obj) {\n      return mapToArray(obj, function (v) {\n        return v;\n      });\n    };\n    var get$1 = function (obj, key) {\n      return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n    var hasNonNullableKey = function (obj, key) {\n      return has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n    };\n    var equal = function (a1, a2, eq) {\n      if (eq === void 0) {\n        eq = eqAny;\n      }\n      return eqRecord(eq).eq(a1, a2);\n    };\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      if (!isArray$1(obj)) {\n        var array = [];\n        for (var i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n        return array;\n      } else {\n        return obj;\n      }\n    };\n    var each$2 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return false;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return false;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    };\n    var map$2 = function (array, callback) {\n      var out = [];\n      each$2(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$2 = function (a, f) {\n      var o = [];\n      each$2(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$1 = function (a, v) {\n      if (a) {\n        for (var i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var acc = isUndefined(accumulator) ? collection[0] : accumulator;\n      for (var i = 0; i < collection.length; i++) {\n        acc = iteratee.call(thisArg, acc, collection[i], i);\n      }\n      return acc;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var DeviceType = function (os, browser, userAgent, mediaMatch) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isMobile = os.isiOS() || os.isAndroid();\n      var isTouch = isMobile || mediaMatch('(pointer:coarse)');\n      var isTablet = isiPad || !isiPhone && isMobile && mediaMatch('(min-device-width:768px)');\n      var isPhone = isiPhone || isMobile && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      var isDesktop = !isPhone && !isTablet && !iOSwebview;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview),\n        isDesktop: constant(isDesktop)\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var removeFromStart = function (str, numChars) {\n      return str.substring(numChars);\n    };\n\n    var checkRange = function (str, substr, start) {\n      return substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    };\n    var removeLeading = function (str, prefix) {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var startsWith = function (str, prefix) {\n      return checkRange(str, prefix, 0);\n    };\n    var blank = function (r) {\n      return function (s) {\n        return s.replace(r, '');\n      };\n    };\n    var trim = blank(/^\\s+|\\s+$/g);\n    var lTrim = blank(/^\\s+/g);\n    var rTrim = blank(/\\s+$/g);\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('mac os x'),\n        versionRegexes: [/.*?mac\\ os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      },\n      {\n        name: 'ChromeOS',\n        search: checkContains('cros'),\n        versionRegexes: [/.*?chrome\\/([0-9]+)\\.([0-9]+).*/]\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isBrowser = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge),\n        isChrome: isBrowser(chrome),\n        isIE: isBrowser(ie),\n        isOpera: isBrowser(opera),\n        isFirefox: isBrowser(firefox),\n        isSafari: isBrowser(safari)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var chromeos = 'ChromeOS';\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      var isOS = function (name) {\n        return function () {\n          return current === name;\n        };\n      };\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows),\n        isiOS: isOS(ios),\n        isAndroid: isOS(android),\n        isOSX: isOS(osx),\n        isLinux: isOS(linux),\n        isSolaris: isOS(solaris),\n        isFreeBSD: isOS(freebsd),\n        isChromeOS: isOS(chromeos)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd),\n      chromeos: constant(chromeos)\n    };\n\n    var detect$2 = function (userAgent, mediaMatch) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent, mediaMatch);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var mediaMatch = function (query) {\n      return window.matchMedia(query).matches;\n    };\n    var platform = cached(function () {\n      return PlatformDetection.detect(navigator.userAgent, mediaMatch);\n    });\n    var detect$3 = function () {\n      return platform();\n    };\n\n    var userAgent = navigator.userAgent;\n    var platform$1 = detect$3();\n    var browser = platform$1.browser;\n    var os = platform$1.os;\n    var deviceType = platform$1.deviceType;\n    var webkit = /WebKit/.test(userAgent) && !browser.isEdge();\n    var fileApi = 'FormData' in window && 'FileReader' in window && 'URL' in window && !!URL.createObjectURL;\n    var windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    var Env = {\n      opera: browser.isOpera(),\n      webkit: webkit,\n      ie: browser.isIE() || browser.isEdge() ? browser.version.major : false,\n      gecko: browser.isFirefox(),\n      mac: os.isOSX() || os.isiOS(),\n      iOS: deviceType.isiPad() || deviceType.isiPhone(),\n      android: os.isAndroid(),\n      contentEditable: true,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: true,\n      range: window.getSelection && 'Range' in window,\n      documentMode: browser.isIE() ? document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: true,\n      cacheSuffix: null,\n      container: null,\n      experimentalShadowDom: false,\n      canHaveCSP: !browser.isIE(),\n      desktop: deviceType.isDesktop(),\n      windowsPhone: windowsPhone,\n      browser: {\n        current: browser.current,\n        version: browser.version,\n        isChrome: browser.isChrome,\n        isEdge: browser.isEdge,\n        isFirefox: browser.isFirefox,\n        isIE: browser.isIE,\n        isOpera: browser.isOpera,\n        isSafari: browser.isSafari\n      },\n      os: {\n        current: os.current,\n        version: os.version,\n        isAndroid: os.isAndroid,\n        isChromeOS: os.isChromeOS,\n        isFreeBSD: os.isFreeBSD,\n        isiOS: os.isiOS,\n        isLinux: os.isLinux,\n        isOSX: os.isOSX,\n        isSolaris: os.isSolaris,\n        isWindows: os.isWindows\n      },\n      deviceType: {\n        isDesktop: deviceType.isDesktop,\n        isiPad: deviceType.isiPad,\n        isiPhone: deviceType.isiPhone,\n        isPhone: deviceType.isPhone,\n        isTablet: deviceType.isTablet,\n        isTouch: deviceType.isTouch,\n        isWebView: deviceType.isWebView\n      }\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && isArray$1(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty$1 = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      var cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      var ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj) {\n      var exts = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        exts[_i - 1] = arguments[_i];\n      }\n      for (var i = 0; i < exts.length; i++) {\n        var ext = exts[i];\n        for (var name_1 in ext) {\n          if (ext.hasOwnProperty(name_1)) {\n            var value = ext[name_1];\n            if (value !== undefined) {\n              obj[name_1] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        each$2(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve = function (n, o) {\n      var i, l;\n      o = o || window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return map$2(s.split(d || ','), trim$1);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim$1,\n      isArray: isArray$1,\n      is: is,\n      toArray: toArray,\n      makeMap: makeMap,\n      each: each$2,\n      map: map$2,\n      grep: filter$2,\n      inArray: indexOf$1,\n      hasOwn: hasOwnProperty$1,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: node };\n    };\n    var fromPoint = function (docElm, x, y) {\n      return Optional.from(docElm.dom.elementFromPoint(x, y)).map(fromDom);\n    };\n    var SugarElement = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, Node.DOCUMENT_POSITION_CONTAINED_BY);\n    };\n\n    var COMMENT = 8;\n    var DOCUMENT = 9;\n    var DOCUMENT_FRAGMENT = 11;\n    var ELEMENT = 1;\n    var TEXT = 3;\n\n    var is$1 = function (element, selector) {\n      var dom = element.dom;\n      if (dom.nodeType !== ELEMENT) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT && dom.nodeType !== DOCUMENT && dom.nodeType !== DOCUMENT_FRAGMENT || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), SugarElement.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? document : scope.dom;\n      return bypassSelector(base) ? Optional.none() : Optional.from(base.querySelector(selector)).map(SugarElement.fromDom);\n    };\n\n    var eq$2 = function (e1, e2) {\n      return e1.dom === e2.dom;\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom;\n      var d2 = e2.dom;\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return documentPositionContainedBy(e1.dom, e2.dom);\n    };\n    var contains$2 = function (e1, e2) {\n      return detect$3().browser.isIE() ? ieContains(e1, e2) : regularContains(e1, e2);\n    };\n\n    var Global = typeof window !== 'undefined' ? window : Function('return this;')();\n\n    var name = function (element) {\n      var r = element.dom.nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom.nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n    var isDocument = isType$1(DOCUMENT);\n    var isDocumentFragment = isType$1(DOCUMENT_FRAGMENT);\n\n    var owner = function (element) {\n      return SugarElement.fromDom(element.dom.ownerDocument);\n    };\n    var documentOrOwner = function (dos) {\n      return isDocument(dos) ? dos : owner(dos);\n    };\n    var documentElement = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.documentElement);\n    };\n    var defaultView = function (element) {\n      return SugarElement.fromDom(documentOrOwner(element).dom.defaultView);\n    };\n    var parent = function (element) {\n      return Optional.from(element.dom.parentNode).map(SugarElement.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom;\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = SugarElement.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var siblings = function (element) {\n      var filterSelf = function (elements) {\n        return filter(elements, function (x) {\n          return !eq$2(element, x);\n        });\n      };\n      return parent(element).map(children).map(filterSelf).getOr([]);\n    };\n    var prevSibling = function (element) {\n      return Optional.from(element.dom.previousSibling).map(SugarElement.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Optional.from(element.dom.nextSibling).map(SugarElement.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(toArray$1(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return toArray$1(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom.childNodes, SugarElement.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom.childNodes;\n      return Optional.from(cs[index]).map(SugarElement.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom.childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom.childNodes.length;\n    };\n\n    var getHead = function (doc) {\n      var b = doc.dom.head;\n      if (b === null || b === undefined) {\n        throw new Error('Head is not available yet');\n      }\n      return SugarElement.fromDom(b);\n    };\n\n    var isShadowRoot = function (dos) {\n      return isDocumentFragment(dos);\n    };\n    var supported = isFunction(Element.prototype.attachShadow) && isFunction(Node.prototype.getRootNode);\n    var isSupported = constant(supported);\n    var getRootNode = supported ? function (e) {\n      return SugarElement.fromDom(e.dom.getRootNode());\n    } : documentOrOwner;\n    var getStyleContainer = function (dos) {\n      return isShadowRoot(dos) ? dos : getHead(documentOrOwner(dos));\n    };\n    var getShadowRoot = function (e) {\n      var r = getRootNode(e);\n      return isShadowRoot(r) ? Optional.some(r) : Optional.none();\n    };\n    var getShadowHost = function (e) {\n      return SugarElement.fromDom(e.dom.host);\n    };\n    var getOriginalEventTarget = function (event) {\n      if (isSupported() && isNonNullable(event.target)) {\n        var el = SugarElement.fromDom(event.target);\n        if (isElement(el) && isOpenShadowHost(el)) {\n          if (event.composed && event.composedPath) {\n            var composedPath = event.composedPath();\n            if (composedPath) {\n              return head(composedPath);\n            }\n          }\n        }\n      }\n      return Optional.from(event.target);\n    };\n    var isOpenShadowHost = function (element) {\n      return isNonNullable(element.dom.shadowRoot);\n    };\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom.insertBefore(element.dom, marker.dom);\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom.insertBefore(element.dom, v.dom);\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom.appendChild(element.dom);\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom.textContent = '';\n      each(children(element), function (rogue) {\n        remove(rogue);\n      });\n    };\n    var remove = function (element) {\n      var dom = element.dom;\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove(wrapper);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom.parentNode : element.dom;\n      if (dom === undefined || dom === null || dom.ownerDocument === null) {\n        return false;\n      }\n      var doc = dom.ownerDocument;\n      return getShadowRoot(SugarElement.fromDom(dom)).fold(function () {\n        return doc.body.contains(dom);\n      }, compose1(inBody, getShadowHost));\n    };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: left,\n        top: top,\n        translate: translate\n      };\n    };\n    var SugarPosition = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return SugarPosition(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      if (a !== undefined) {\n        return a;\n      } else {\n        return b !== undefined ? b : 0;\n      }\n    };\n    var absolute = function (element) {\n      var doc = element.dom.ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      if (body === element.dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      var scrollTop = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win === null || win === void 0 ? void 0 : win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom;\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return SugarPosition(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return SugarPosition(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var get$2 = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return SugarPosition(x, y);\n    };\n    var to = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom : document;\n      var win = doc.defaultView;\n      if (win) {\n        win.scrollTo(x, y);\n      }\n    };\n    var intoView = function (element, alignToTop) {\n      var isSafari = detect$3().browser.isSafari();\n      if (isSafari && isFunction(element.dom.scrollIntoViewIfNeeded)) {\n        element.dom.scrollIntoViewIfNeeded(false);\n      } else {\n        element.dom.scrollIntoView(alignToTop);\n      }\n    };\n\n    var get$3 = function (_win) {\n      var win = _win === undefined ? window : _win;\n      return Optional.from(win['visualViewport']);\n    };\n    var bounds = function (x, y, width, height) {\n      return {\n        x: x,\n        y: y,\n        width: width,\n        height: height,\n        right: x + width,\n        bottom: y + height\n      };\n    };\n    var getBounds = function (_win) {\n      var win = _win === undefined ? window : _win;\n      var doc = win.document;\n      var scroll = get$2(SugarElement.fromDom(doc));\n      return get$3(win).fold(function () {\n        var html = win.document.documentElement;\n        var width = html.clientWidth;\n        var height = html.clientHeight;\n        return bounds(scroll.left, scroll.top, width, height);\n      }, function (visualViewport) {\n        return bounds(Math.max(visualViewport.pageLeft, scroll.left), Math.max(visualViewport.pageTop, scroll.top), visualViewport.width, visualViewport.height);\n      });\n    };\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var lowercasedNames = names.map(function (s) {\n        return s.toLowerCase();\n      });\n      return function (node) {\n        if (node && node.nodeName) {\n          var nodeName = node.nodeName.toLowerCase();\n          return contains(lowercasedNames, nodeName);\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasAttribute = function (attrName) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isTextareaOrInput = matchNodeNames([\n      'textarea',\n      'input'\n    ]);\n    var isText$1 = isNodeType(3);\n    var isComment$1 = isNodeType(8);\n    var isDocument$1 = isNodeType(9);\n    var isDocumentFragment$1 = isNodeType(11);\n    var isBr = matchNodeNames(['br']);\n    var isImg = matchNodeNames(['img']);\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var isTableCell = matchNodeNames([\n      'td',\n      'th'\n    ]);\n    var isMedia = matchNodeNames([\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n\n    var isSupported$1 = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        console.error('Invalid call to Attribute.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom, key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom;\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get$4 = function (element, key) {\n      var v = element.dom.getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var getOpt = function (element, key) {\n      return Optional.from(get$4(element, key));\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom;\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove$1 = function (element, key) {\n      element.dom.removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom.attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported$1(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom;\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$5 = function (element, property) {\n      var dom = element.dom;\n      var styles = window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      return r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported$1(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom;\n      var raw = getUnsafeProperty(dom, property);\n      return Optional.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom;\n      if (isSupported$1(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n    var reflow = function (e) {\n      return e.dom.offsetWidth;\n    };\n\n    var browser$1 = detect$3().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom.offsetTop;\n            var captionTop = caption.dom.offsetTop;\n            var captionHeight = caption.dom.offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var hasChild = function (elm, child) {\n      return elm.children && contains(elm.children, child);\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$5(SugarElement.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType && !hasChild(offsetParent, rootElm)) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(SugarElement.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Optional.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        if (!isReady()) {\n          data = Optional.some(x);\n          run(callbacks);\n          callbacks = [];\n        }\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (_opt) {\n        return value(o);\n      };\n      var orThunk = function (_f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (_f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOptional = function () {\n        return Optional.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOptional: toOptional\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (_f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (_f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOptional: Optional.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var generate = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate };\n\n    var comparison = Adt.generate([\n      {\n        bothErrors: [\n          'error1',\n          'error2'\n        ]\n      },\n      {\n        firstError: [\n          'error1',\n          'value2'\n        ]\n      },\n      {\n        secondError: [\n          'value1',\n          'error2'\n        ]\n      },\n      {\n        bothValues: [\n          'value1',\n          'value2'\n        ]\n      }\n    ]);\n    var unite = function (result) {\n      return result.fold(identity, identity);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      if (is(scope, a)) {\n        return Optional.some(scope);\n      } else if (isFunction(isRoot) && isRoot(scope)) {\n        return Optional.none();\n      } else {\n        return ancestor(scope, a, isRoot);\n      }\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom;\n      var stop = isFunction(isRoot) ? isRoot : never;\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        if (predicate(el)) {\n          return Optional.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var sibling = function (scope, predicate) {\n      var element = scope.dom;\n      if (!element.parentNode) {\n        return Optional.none();\n      }\n      return child$1(SugarElement.fromDom(element.parentNode), function (x) {\n        return !eq$2(scope, x) && predicate(x);\n      });\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(SugarElement.fromDom(node));\n      };\n      var result = find(scope.dom.childNodes, pred);\n      return result.map(SugarElement.fromDom);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      var is = function (element, selector) {\n        return is$1(element, selector);\n      };\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof setImmediate === 'function' && setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer;\n      var func = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    function StyleSheetLoader(documentOrShadowRoot, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var edos = SugarElement.fromDom(documentOrShadowRoot);\n      var doc = documentOrOwner(edos);\n      var maxLoadTime = settings.maxLoadTime || 5000;\n      var _setReferrerPolicy = function (referrerPolicy) {\n        settings.referrerPolicy = referrerPolicy;\n      };\n      var addStyle = function (element) {\n        append(getStyleContainer(edos), element);\n      };\n      var removeStyle = function (id) {\n        var styleContainer = getStyleContainer(edos);\n        descendant(styleContainer, '#' + id).each(remove);\n      };\n      var getOrCreateState = function (url) {\n        return get$1(loadedStates, url).getOrThunk(function () {\n          return {\n            id: 'mce-u' + idCount++,\n            passed: [],\n            failed: [],\n            count: 0\n          };\n        });\n      };\n      var load = function (url, success, failure) {\n        var link;\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        var state = getOrCreateState(urlWithSuffix);\n        loadedStates[urlWithSuffix] = state;\n        state.count++;\n        var resolve = function (callbacks, status) {\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = status;\n          state.passed = [];\n          state.failed = [];\n          if (link) {\n            link.onload = null;\n            link.onerror = null;\n            link = null;\n          }\n        };\n        var passed = function () {\n          return resolve(state.passed, 2);\n        };\n        var failed = function () {\n          return resolve(state.failed, 3);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (Date.now() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = documentOrShadowRoot.styleSheets;\n            var i = styleSheets.length;\n            while (i--) {\n              var styleSheet = styleSheets[i];\n              var owner = styleSheet.ownerNode;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n            return false;\n          }, waitForWebKitLinkLoaded);\n        };\n        if (success) {\n          state.passed.push(success);\n        }\n        if (failure) {\n          state.failed.push(failure);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        var linkElem = SugarElement.fromTag('link', doc.dom);\n        setAll(linkElem, {\n          rel: 'stylesheet',\n          type: 'text/css',\n          id: state.id\n        });\n        var startTime = Date.now();\n        if (settings.contentCssCors) {\n          set(linkElem, 'crossOrigin', 'anonymous');\n        }\n        if (settings.referrerPolicy) {\n          set(linkElem, 'referrerpolicy', settings.referrerPolicy);\n        }\n        link = linkElem.dom;\n        link.onload = waitForWebKitLinkLoaded;\n        link.onerror = failed;\n        addStyle(linkElem);\n        set(linkElem, 'href', urlWithSuffix);\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unite));\n          } else {\n            success(parts.pass.map(unite));\n          }\n        });\n      };\n      var unload = function (url) {\n        var urlWithSuffix = Tools._addCacheSuffix(url);\n        get$1(loadedStates, urlWithSuffix).each(function (state) {\n          var count = --state.count;\n          if (count === 0) {\n            delete loadedStates[urlWithSuffix];\n            removeStyle(state.id);\n          }\n        });\n      };\n      var unloadAll = function (urls) {\n        each(urls, function (url) {\n          unload(url);\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll,\n        unload: unload,\n        unloadAll: unloadAll,\n        _setReferrerPolicy: _setReferrerPolicy\n      };\n    }\n\n    var create$1 = function () {\n      var map = new WeakMap();\n      var forElement = function (referenceElement, settings) {\n        var root = getRootNode(referenceElement);\n        var rootDom = root.dom;\n        return Optional.from(map.get(rootDom)).getOrThunk(function () {\n          var sl = StyleSheetLoader(rootDom, settings);\n          map.set(rootDom, sl);\n          return sl;\n        });\n      };\n      return { forElement: forElement };\n    };\n    var instance = create$1();\n\n    var DomTreeWalker = function () {\n      function DomTreeWalker(startNode, rootNode) {\n        this.node = startNode;\n        this.rootNode = rootNode;\n        this.current = this.current.bind(this);\n        this.next = this.next.bind(this);\n        this.prev = this.prev.bind(this);\n        this.prev2 = this.prev2.bind(this);\n      }\n      DomTreeWalker.prototype.current = function () {\n        return this.node;\n      };\n      DomTreeWalker.prototype.next = function (shallow) {\n        this.node = this.findSibling(this.node, 'firstChild', 'nextSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev = function (shallow) {\n        this.node = this.findSibling(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.prev2 = function (shallow) {\n        this.node = this.findPreviousNode(this.node, 'lastChild', 'previousSibling', shallow);\n        return this.node;\n      };\n      DomTreeWalker.prototype.findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== this.rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== this.rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      DomTreeWalker.prototype.findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (this.rootNode && sibling === this.rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== this.rootNode) {\n            return parent;\n          }\n        }\n      };\n      return DomTreeWalker;\n    }();\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, always);\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isTable$1 = function (node) {\n      return name(node) === 'table';\n    };\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr$1 = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell$1 = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var zeroWidth = '\\uFEFF';\n    var nbsp = '\\xA0';\n    var isZwsp = function (char) {\n      return char === zeroWidth;\n    };\n    var removeZwsp = function (s) {\n      return s.replace(/\\uFEFF/g, '');\n    };\n\n    var ZWSP = zeroWidth;\n    var isZwsp$1 = isZwsp;\n    var trim$2 = removeZwsp;\n\n    var isElement$2 = isElement$1;\n    var isText$2 = isText$1;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && isZwsp$1(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var sibling;\n      var doc = node.ownerDocument;\n      var textNode = doc.createTextNode(ZWSP);\n      var parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!isText$1(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!isText$1(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc = node.ownerDocument;\n      var blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      var parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var isContentEditableTrue$1 = isContentEditableTrue;\n    var isContentEditableFalse$1 = isContentEditableFalse;\n    var isBr$2 = isBr;\n    var isText$3 = isText$1;\n    var isInvalidTextElement = matchNodeNames([\n      'script',\n      'style',\n      'textarea'\n    ]);\n    var isAtomicInline = matchNodeNames([\n      'img',\n      'input',\n      'textarea',\n      'hr',\n      'iframe',\n      'video',\n      'audio',\n      'object',\n      'embed'\n    ]);\n    var isTable$2 = matchNodeNames(['table']);\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        return !isInvalidTextElement(node.parentNode);\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$2(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return isElement$1(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var whiteSpaceRegExp$1 = /^[ \\t\\r\\n]*$/;\n    var isWhitespaceText = function (text) {\n      return whiteSpaceRegExp$1.test(text);\n    };\n\n    var hasWhitespacePreserveParent = function (node, rootNode) {\n      var rootElement = SugarElement.fromDom(rootNode);\n      var startNode = SugarElement.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq$2, rootElement));\n    };\n    var isWhitespace = function (node, rootNode) {\n      return isText$1(node) && isWhitespaceText(node.data) && hasWhitespacePreserveParent(node, rootNode) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return isElement$1(node) && node.nodeName === 'A' && !node.hasAttribute('href') && (node.hasAttribute('name') || node.hasAttribute('id'));\n    };\n    var isContent = function (node, rootNode) {\n      return isCaretCandidate(node) && isWhitespace(node, rootNode) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = hasAttribute('data-mce-bookmark');\n    var isBogus$1 = hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode, skipBogus) {\n      var node, brCount = 0;\n      if (isContent(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        var walker = new DomTreeWalker(node, targetNode);\n        do {\n          if (skipBogus) {\n            if (isBogusAll$1(node)) {\n              node = walker.next(true);\n              continue;\n            }\n            if (isBogus$1(node)) {\n              node = walker.next();\n              continue;\n            }\n          }\n          if (isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent(node, targetNode)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty = function (elm, skipBogus) {\n      if (skipBogus === void 0) {\n        skipBogus = true;\n      }\n      return isEmptyNode(elm.dom, skipBogus);\n    };\n\n    var isSpan = function (node) {\n      return node.nodeName.toLowerCase() === 'span';\n    };\n    var isInlineContent = function (node, root) {\n      return isNonNullable(node) && (isContent(node, root) || isInline(SugarElement.fromDom(node)));\n    };\n    var surroundedByInlineContent = function (node, root) {\n      var prev = new DomTreeWalker(node, root).prev(false);\n      var next = new DomTreeWalker(node, root).next(false);\n      var prevIsInline = isUndefined(prev) || isInlineContent(prev, root);\n      var nextIsInline = isUndefined(next) || isInlineContent(next, root);\n      return prevIsInline && nextIsInline;\n    };\n    var isBookmarkNode = function (node) {\n      return isSpan(node) && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var isKeepTextNode = function (node, root) {\n      return isText$1(node) && node.data.length > 0 && surroundedByInlineContent(node, root);\n    };\n    var isKeepElement = function (node) {\n      return isElement$1(node) ? node.childNodes.length > 0 : false;\n    };\n    var isDocument$2 = function (node) {\n      return isDocumentFragment$1(node) || isDocument$1(node);\n    };\n    var trimNode = function (dom, node, root) {\n      var rootNode = root || node;\n      if (isElement$1(node) && isBookmarkNode(node)) {\n        return node;\n      }\n      var children = node.childNodes;\n      for (var i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i], rootNode);\n      }\n      if (isElement$1(node)) {\n        var currentChildren = node.childNodes;\n        if (currentChildren.length === 1 && isBookmarkNode(currentChildren[0])) {\n          node.parentNode.insertBefore(currentChildren[0], node);\n        }\n      }\n      if (!isDocument$2(node) && !isContent(node, rootNode) && !isKeepElement(node) && !isKeepTextNode(node, rootNode)) {\n        dom.remove(node);\n      }\n      return node;\n    };\n\n    var makeMap$1 = Tools.makeMap;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    var baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    var reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm = SugarElement.fromTag('div').dom;\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    var namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$3 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        var names = split(name);\n        ni = names.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[names[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        var names = split(name);\n        ni = names.length;\n        var attrs = split(attributes);\n        while (ni--) {\n          schemaItem = schema[names[ni]];\n          for (i = 0, l = attrs.length; i < l; i++) {\n            schemaItem.attributes[attrs[i]] = {};\n            schemaItem.attributesOrder.push(attrs[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$3(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$3(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('img', 'loading');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen loading');\n      }\n      each$3(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$3(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      var schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      var validStyles = compileElementMap(settings.valid_styles);\n      var invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      var validClasses = compileElementMap(settings.valid_classes, 'map');\n      var whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      var selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      var shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      var boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      var nonEmptyOrMoveCaretBeforeOnEnter = 'td th iframe video audio object script code';\n      var nonEmptyElementsMap = createLookupTable('non_empty_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' pre', shortEndedElementsMap);\n      var moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', nonEmptyOrMoveCaretBeforeOnEnter + ' table', shortEndedElementsMap);\n      var textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      var blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      var textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$3((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          var validElementsArr = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElementsArr.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElementsArr[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                each$1(globalAttributes, function (value, key) {\n                  attributes[key] = value;\n                });\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$3(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$3(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$3(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)([A-Za-z0-9_\\-.\\u00b7\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u037d\\u037f-\\u1fff\\u200c-\\u200d\\u203f-\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]+)\\[([^\\]]+)]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$3(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$3(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$3(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$3(split('strong/b em/i'), function (item) {\n            var items = split(item, '/');\n            elements[items[1]].outputName = items[0];\n          });\n        }\n        each$3(split('ol ul sub sup blockquote span font a table tbody strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$3(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$3(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$3({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$3(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    var Styles = function (settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = zeroWidth;\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      var encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            var right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            var bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            var left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '';\n          var serializeStyles = function (name) {\n            var value;\n            var styleList = validStyles[name];\n            if (styleList) {\n              for (var i_1 = 0, l = styleList.length; i_1 < l; i_1++) {\n                name = styleList[i_1];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            return !(styleMap && styleMap[name]);\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            each$1(styles, function (value, name) {\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            });\n          }\n          return css;\n        }\n      };\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1,\n      mozPressure: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var isMouseEvent = function (event) {\n      return mouseEventRe.test(event.type);\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || document;\n      }\n      if (event.composedPath) {\n        event.composedPath = function () {\n          return originalEvent.composedPath();\n        };\n      }\n      if (originalEvent && isMouseEvent(originalEvent) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        removeEvent(win, 'DOMContentLoaded', readyHandler);\n        removeEvent(win, 'load', readyHandler);\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n        win = null;\n      };\n      if (isDocReady()) {\n        readyHandler();\n      } else {\n        addEvent(win, 'DOMContentLoaded', readyHandler);\n      }\n      if (!eventUtils.domLoaded) {\n        addEvent(win, 'load', readyHandler);\n      }\n    };\n    var EventUtils = function () {\n      function EventUtils() {\n        this.domLoaded = false;\n        this.events = {};\n        this.count = 1;\n        this.expando = eventExpandoPrefix + (+new Date()).toString(32);\n        this.hasMouseEnterLeave = 'onmouseenter' in document.documentElement;\n        this.hasFocusIn = 'onfocusin' in document.documentElement;\n        this.count = 1;\n      }\n      EventUtils.prototype.bind = function (target, names, callback, scope) {\n        var self = this;\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = window;\n        var defaultNativeHandler = function (evt) {\n          self.executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[self.expando]) {\n          id = self.count++;\n          target[self.expando] = id;\n          self.events[id] = {};\n        } else {\n          id = target[self.expando];\n        }\n        scope = scope || target;\n        var namesList = names.split(' ');\n        i = namesList.length;\n        while (i--) {\n          name = namesList[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!self.hasMouseEnterLeave) {\n            fakeName = self.mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current = evt.currentTarget;\n                var related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  self.executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!self.hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              self.executeHandlers(evt, id);\n            };\n          }\n          callbackList = self.events[id][name];\n          if (!callbackList) {\n            self.events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback(fix({ type: name }));\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = null;\n        return callback;\n      };\n      EventUtils.prototype.unbind = function (target, names, callback) {\n        var callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var id = target[this.expando];\n        if (id) {\n          eventMap = this.events[id];\n          if (names) {\n            var namesList = names.split(' ');\n            i = namesList.length;\n            while (i--) {\n              name = namesList[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            each$1(eventMap, function (callbackList, name) {\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            });\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            if (has(eventMap, name)) {\n              return this;\n            }\n          }\n          delete this.events[id];\n          try {\n            delete target[this.expando];\n          } catch (ex) {\n            target[this.expando] = null;\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        var event = fix(null, args);\n        event.type = name;\n        event.target = target;\n        do {\n          id = target[this.expando];\n          if (id) {\n            this.executeHandlers(event, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !event.isPropagationStopped());\n        return this;\n      };\n      EventUtils.prototype.clean = function (target) {\n        var i, children;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return this;\n        }\n        if (target[this.expando]) {\n          this.unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          this.unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[this.expando]) {\n              this.unbind(target);\n            }\n          }\n        }\n        return this;\n      };\n      EventUtils.prototype.destroy = function () {\n        this.events = {};\n      };\n      EventUtils.prototype.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n      EventUtils.prototype.executeHandlers = function (evt, id) {\n        var container = this.events[id];\n        var callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (var i = 0, l = callbackList.length; i < l; i++) {\n            var callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      EventUtils.Event = new EventUtils();\n      return EventUtils;\n    }();\n\n    var support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document$1, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$3, expando = 'sizzle' + -new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf$2 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document$1) {\n        setDocument(context);\n      }\n      context = context || document$1;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$3(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document$1 || doc.nodeType !== 9 || !doc.documentElement) {\n        return document$1;\n      }\n      document$1 = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$3 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$3(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$3(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$2.call(sortInput, a) - indexOf$2.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$2.call(sortInput, a) - indexOf$2.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document$1, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document$1) {\n        setDocument(context);\n      }\n      return contains$3(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document$1) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$2.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = window.location && window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document$1.activeElement && (!document$1.hasFocus || document$1.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    each([\n      'radio',\n      'checkbox',\n      'file',\n      'password',\n      'image'\n    ], function (i) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    });\n    each([\n      'submit',\n      'reset'\n    ], function (i) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    });\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if (!Expr.filter.hasOwnProperty(type)) {\n            continue;\n          }\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$2.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$2.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document$1 && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var doc = document, push$1 = Array.prototype.push, slice$1 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      fragDoc = fragDoc || doc;\n      var container = fragDoc.createElement('div');\n      var frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      var node;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap$1 = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQueryConstructor = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray$1 = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$2 = /^\\s*|\\s*$/g;\n    var trim$3 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$2, '');\n    };\n    var each$4 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$4(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQueryConstructor.fn = DomQueryConstructor.prototype = {\n      constructor: DomQueryConstructor,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$1.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$1.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$4(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap$1(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap$1(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$4(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var classState = hasClass(node, className);\n            if (classState !== state) {\n              var existingClassName = node.className;\n              if (classState) {\n                node.className = trim$3((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$4(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$1.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$1,\n      sort: Array.prototype.sort,\n      splice: Array.prototype.splice\n    };\n    Tools.extend(DomQueryConstructor, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray$1,\n      isArray: Tools.isArray,\n      each: each$4,\n      trim: trim$3,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling$1 = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$4({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling$1(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (selector) {\n          return wrappedResult.filter(selector);\n        }\n        return wrappedResult;\n      };\n    });\n    each$4({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling$1(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling$1(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQueryConstructor.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        var wrappedResult = DomQuery(result);\n        if (filter) {\n          return wrappedResult.filter(filter);\n        }\n        return wrappedResult;\n      };\n    });\n    DomQueryConstructor.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQueryConstructor.fn.init.prototype = DomQueryConstructor.fn;\n    DomQueryConstructor.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    DomQueryConstructor.attrHooks = attrHooks;\n    DomQueryConstructor.cssHooks = cssHooks;\n    var DomQuery = DomQueryConstructor;\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      var attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            if (value !== null && typeof value === 'string') {\n              $elm.removeAttr('style');\n              $elm.css(styles.parse(value));\n            } else {\n              $elm.attr('style', value);\n            }\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var addedStyles = {};\n      var win = window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = instance.forElement(SugarElement.fromDom(doc), {\n        contentCssCors: settings.contentCssCors,\n        referrerPolicy: settings.referrerPolicy\n      });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils() : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        return elm && doc && isString(elm) ? doc.getElementById(elm) : elm;\n      };\n      var $$ = function (elm) {\n        return $(typeof elm === 'string' ? get(elm) : elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        var originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        var hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        } else {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var vp = getBounds(argWin);\n        return {\n          x: vp.x,\n          y: vp.y,\n          w: vp.width,\n          h: vp.height\n        };\n      };\n      var getPos$1 = function (elm, rootElm) {\n        return getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = isString(name) ? $$(elm).css(name, value) : $$(elm).css(name);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.browser.isIE() ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        elm = get(elm);\n        var pos = getPos$1(elm);\n        var size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || isNullable(node.nodeType) || isDocument$1(node) || isDocumentFragment$1(node)) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              result.push(func.call(scope, typeof elm === 'string' ? get(elm) : elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (urls) {\n        if (!urls) {\n          urls = '';\n        }\n        each(urls.split(','), function (url) {\n          files[url] = true;\n          styleSheetLoader.load(url, noop);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return isElement$1(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent = referenceNode.parentNode;\n          var nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isNonEmptyElement = function (node) {\n        if (isElement$1(node)) {\n          var isNamedAnchor = node.nodeName.toLowerCase() === 'a' && !getAttrib(node, 'href') && getAttrib(node, 'id');\n          if (getAttrib(node, 'name') || getAttrib(node, 'data-mce-bookmark') || isNamedAnchor) {\n            return true;\n          }\n        }\n        return false;\n      };\n      var isEmpty = function (node, elements) {\n        var type, name, brCount = 0;\n        if (isNonEmptyElement(node)) {\n          return false;\n        }\n        node = node.firstChild;\n        if (node) {\n          var walker = new DomTreeWalker(node, node.parentNode);\n          var whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          do {\n            type = node.nodeType;\n            if (isElement$1(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && isWhitespaceText(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var range = createRng();\n        var beforeFragment;\n        var afterFragment;\n        var parentNode;\n        if (parentElm && splitElm) {\n          range.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          range.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          beforeFragment = range.extractContents();\n          range = createRng();\n          range.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          range.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          afterFragment = range.extractContents();\n          parentNode = parentElm.parentNode;\n          parentNode.insertBefore(trimNode(self, beforeFragment), parentElm);\n          if (replacementElm) {\n            parentNode.insertBefore(replacementElm, parentElm);\n          } else {\n            parentNode.insertBefore(splitElm, parentElm);\n          }\n          parentNode.insertBefore(trimNode(self, afterFragment), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = bind(target[i], name, func, scope);\n          }\n          return rv;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        var output = events.bind(target, name, func, scope || self);\n        return output;\n      };\n      var unbind = function (target, name, func) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          var rv = [];\n          while (i--) {\n            rv[i] = unbind(target[i], name, func);\n          }\n          return rv;\n        } else {\n          if (boundEvents.length > 0 && (target === doc || target === win)) {\n            var i = boundEvents.length;\n            while (i--) {\n              var item = boundEvents[i];\n              if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n                events.unbind(item[0], item[1], item[2]);\n              }\n            }\n          }\n          return events.unbind(target, name, func);\n        }\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && isElement$1(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents.length > 0) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        each$1(files, function (_, url) {\n          styleSheetLoader.unload(url);\n          delete files[url];\n        });\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos$1,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      var attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var QUEUED = 0;\n    var LOADING = 1;\n    var LOADED = 2;\n    var FAILED = 3;\n    var ScriptLoader = function () {\n      function ScriptLoader(settings) {\n        if (settings === void 0) {\n          settings = {};\n        }\n        this.states = {};\n        this.queue = [];\n        this.scriptLoadedCallbacks = {};\n        this.queueLoadedCallbacks = [];\n        this.loading = 0;\n        this.settings = settings;\n      }\n      ScriptLoader.prototype._setReferrerPolicy = function (referrerPolicy) {\n        this.settings.referrerPolicy = referrerPolicy;\n      };\n      ScriptLoader.prototype.loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm;\n        var cleanup = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onerror = elm.onload = elm = null;\n          }\n        };\n        var done = function () {\n          cleanup();\n          success();\n        };\n        var error = function () {\n          cleanup();\n          if (isFunction(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        var id = dom.uniqueId();\n        elm = document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        if (this.settings.referrerPolicy) {\n          dom.setAttrib(elm, 'referrerpolicy', this.settings.referrerPolicy);\n        }\n        elm.onload = done;\n        elm.onerror = error;\n        (document.getElementsByTagName('head')[0] || document.body).appendChild(elm);\n      };\n      ScriptLoader.prototype.isDone = function (url) {\n        return this.states[url] === LOADED;\n      };\n      ScriptLoader.prototype.markDone = function (url) {\n        this.states[url] = LOADED;\n      };\n      ScriptLoader.prototype.add = function (url, success, scope, failure) {\n        var state = this.states[url];\n        this.queue.push(url);\n        if (state === undefined) {\n          this.states[url] = QUEUED;\n        }\n        if (success) {\n          if (!this.scriptLoadedCallbacks[url]) {\n            this.scriptLoadedCallbacks[url] = [];\n          }\n          this.scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      ScriptLoader.prototype.load = function (url, success, scope, failure) {\n        return this.add(url, success, scope, failure);\n      };\n      ScriptLoader.prototype.remove = function (url) {\n        delete this.states[url];\n        delete this.scriptLoadedCallbacks[url];\n      };\n      ScriptLoader.prototype.loadQueue = function (success, scope, failure) {\n        this.loadScripts(this.queue, success, scope, failure);\n      };\n      ScriptLoader.prototype.loadScripts = function (scripts, success, scope, failure) {\n        var self = this;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(self.scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          self.scriptLoadedCallbacks[url] = undefined;\n        };\n        self.queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        var loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (self.states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (self.states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (self.states[url] !== LOADING) {\n              self.states[url] = LOADING;\n              self.loading++;\n              self.loadScript(url, function () {\n                self.states[url] = LOADED;\n                self.loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                self.states[url] = FAILED;\n                self.loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!self.loading) {\n            var notifyCallbacks = self.queueLoadedCallbacks.slice(0);\n            self.queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n      ScriptLoader.ScriptLoader = new ScriptLoader();\n      return ScriptLoader;\n    }();\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      return {\n        get: get,\n        set: set\n      };\n    };\n\n    var isRaw = function (str) {\n      return isObject(str) && has(str, 'raw');\n    };\n    var isTokenised = function (str) {\n      return isArray(str) && str.length > 1;\n    };\n    var data = {};\n    var currentCode = Cell('en');\n    var getLanguageData = function () {\n      return get$1(data, currentCode.get());\n    };\n    var getData = function () {\n      return map$1(data, function (value) {\n        return __assign({}, value);\n      });\n    };\n    var setCode = function (newCode) {\n      if (newCode) {\n        currentCode.set(newCode);\n      }\n    };\n    var getCode = function () {\n      return currentCode.get();\n    };\n    var add = function (code, items) {\n      var langData = data[code];\n      if (!langData) {\n        data[code] = langData = {};\n      }\n      each$1(items, function (translation, name) {\n        langData[name.toLowerCase()] = translation;\n      });\n    };\n    var translate = function (text) {\n      var langData = getLanguageData().getOr({});\n      var toString = function (obj) {\n        if (isFunction(obj)) {\n          return Object.prototype.toString.call(obj);\n        }\n        return !isEmpty(obj) ? '' + obj : '';\n      };\n      var isEmpty = function (text) {\n        return text === '' || text === null || text === undefined;\n      };\n      var getLangData = function (text) {\n        var textstr = toString(text);\n        return get$1(langData, textstr.toLowerCase()).map(toString).getOr(textstr);\n      };\n      var removeContext = function (str) {\n        return str.replace(/{context:\\w+}$/, '');\n      };\n      if (isEmpty(text)) {\n        return '';\n      }\n      if (isRaw(text)) {\n        return toString(text.raw);\n      }\n      if (isTokenised(text)) {\n        var values_1 = text.slice(1);\n        var substitued = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n          return has(values_1, $2) ? toString(values_1[$2]) : $1;\n        });\n        return removeContext(substitued);\n      }\n      return removeContext(getLangData(text));\n    };\n    var isRtl = function () {\n      return getLanguageData().bind(function (items) {\n        return get$1(items, '_dir');\n      }).exists(function (dir) {\n        return dir === 'rtl';\n      });\n    };\n    var hasCode = function (code) {\n      return has(data, code);\n    };\n    var I18n = {\n      getData: getData,\n      setCode: setCode,\n      getCode: getCode,\n      add: add,\n      translate: translate,\n      isRtl: isRtl,\n      hasCode: hasCode\n    };\n\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var runListeners = function (name, state) {\n        var matchedListeners = filter(_listeners, function (listener) {\n          return listener.name === name && listener.state === state;\n        });\n        each(matchedListeners, function (listener) {\n          return listener.callback();\n        });\n      };\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        if (AddOnManager.languageLoad !== false) {\n          waitFor(name, function () {\n            var language = I18n.getCode();\n            var wrappedLanguages = ',' + (languages || '') + ',';\n            if (!language || languages && wrappedLanguages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n            ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n          }, 'loaded');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        var addOnConstructor = addOn;\n        items.push(addOnConstructor);\n        lookup[id] = {\n          instance: addOnConstructor,\n          dependencies: dependencies\n        };\n        runListeners(id, 'added');\n        return addOnConstructor;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        var done = function () {\n          runListeners(name, 'loaded');\n          loadDependencies(name, addOnUrl, success, scope);\n        };\n        if (lookup[name]) {\n          done();\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, done, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback, state) {\n        if (state === void 0) {\n          state = 'added';\n        }\n        if (has(lookup, name) && state === 'added') {\n          callback();\n        } else if (has(urls, name) && state === 'loaded') {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            state: state,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n    var AddOnManager$1 = AddOnManager;\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          clearTimeout(timer);\n        }\n        timer = setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get$4(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add$1 = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove$1(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom.classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$2 = function (element, clazz) {\n      return add$1(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$3 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom.classList.add(clazz);\n      } else {\n        add$2(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom.classList : get$6(element);\n      if (classList.length === 0) {\n        remove$1(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom.classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom.classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = SugarElement.fromDom(rng.startContainer);\n      var root = SugarElement.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq$2(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Optional.some(get$4(c, property));\n        } else {\n          return Optional.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = SugarElement.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get$4(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, _registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Optional.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom;\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort$1(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Optional.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Optional.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Optional.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('NodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        return Optional.from(span.attr(dataAnnotation())).bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$2 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Optional.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Optional.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var unique = 0;\n    var generate$1 = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$4 = function (element, classes) {\n      each(classes, function (x) {\n        add$3(element, x);\n      });\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(SugarElement.fromDom(div));\n    };\n\n    var get$7 = function (element) {\n      return element.dom.innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom;\n      var fragment = SugarElement.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return SugarElement.fromDom(original.dom.cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n\n    var TextWalker = function (startNode, rootNode, isBoundary) {\n      if (isBoundary === void 0) {\n        isBoundary = never;\n      }\n      var walker = new DomTreeWalker(startNode, rootNode);\n      var walk = function (direction) {\n        var next;\n        do {\n          next = walker[direction]();\n        } while (next && !isText$1(next) && !isBoundary(next));\n        return Optional.from(next).filter(isText$1);\n      };\n      return {\n        current: function () {\n          return Optional.from(walker.current()).filter(isText$1);\n        },\n        next: function () {\n          return walk('next');\n        },\n        prev: function () {\n          return walk('prev');\n        },\n        prev2: function () {\n          return walk('prev2');\n        }\n      };\n    };\n\n    var TextSeeker = function (dom, isBoundary) {\n      var isBlockBoundary = isBoundary ? isBoundary : function (node) {\n        return dom.isBlock(node) || isBr(node) || isContentEditableFalse(node);\n      };\n      var walk = function (node, offset, walker, process) {\n        if (isText$1(node)) {\n          var newOffset = process(node, offset, node.data);\n          if (newOffset !== -1) {\n            return Optional.some({\n              container: node,\n              offset: newOffset\n            });\n          }\n        }\n        return walker().bind(function (next) {\n          return walk(next.container, next.offset, walker, process);\n        });\n      };\n      var backwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.prev().map(function (prev) {\n            return {\n              container: prev,\n              offset: prev.length\n            };\n          });\n        }, process).getOrNull();\n      };\n      var forwards = function (node, offset, process, root) {\n        var walker = TextWalker(node, root, isBlockBoundary);\n        return walk(node, offset, function () {\n          return walker.next().map(function (next) {\n            return {\n              container: next,\n              offset: 0\n            };\n          });\n        }, process).getOrNull();\n      };\n      return {\n        backwards: backwards,\n        forwards: forwards\n      };\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie())) : Optional.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Optional.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Optional.none();\n    };\n    var someIf = function (b, a) {\n      return b ? Optional.some(a) : Optional.none();\n    };\n\n    var round = Math.round;\n    var clone$2 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$2(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var or = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n\n    var isElement$3 = isElement$1;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = matchStyleValues('display', 'block table');\n    var isFloated = matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = isText$1;\n    var isBr$3 = isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && isText$1(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp$1 = doc.createTextNode(nbsp);\n      var parentNode = brNode.parentNode;\n      parentNode.insertBefore(nbsp$1, brNode);\n      rng.setStart(nbsp$1, 0);\n      rng.setEnd(nbsp$1, 1);\n      var clientRect = clone$2(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp$1);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && isText$1(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect;\n      var clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$2(clientRects[0]);\n      } else {\n        clientRect = clone$2(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return lift2(head(pos2.getClientRects()), last(pos1.getClientRects()), isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return lift2(last(pos2.getClientRects()), head(pos1.getClientRects()), isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? isText$1(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (isText$1(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Optional.from(frag.firstChild);\n      var lastChild = Optional.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (isDocumentFragment$1(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isText$5 = isText$1;\n    var isBogus$2 = isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$2(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return reduce(node.childNodes, function (result, node) {\n        if (isBogus$2(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal$1 = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index;\n      nodes = getChildNodes(normalizedParent(node));\n      index = findIndex$1(nodes, equal$1(node), node);\n      nodes = nodes.slice(0, index + 1);\n      var numTextFragments = reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = filter$2(nodes, matchNodeNames([node.nodeName]));\n      index = findIndex$1(nodes, equal$1(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$3 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = filter$2(parents, not(isBogus));\n      path = path.concat(map$2(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = filter$2(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = filter$2(nodes, matchNodeNames([name]));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$1 = function (root, path) {\n      var offset;\n      if (!path) {\n        return null;\n      }\n      var parts = path.split(',');\n      var paths = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      var container = reduce(paths, function (result, value) {\n        var match = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!match) {\n          return null;\n        }\n        if (match[1] === 'text()') {\n          match[1] = '#text';\n        }\n        return resolvePathItem(result, match[1], parseInt(match[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var isContentEditableFalse$2 = isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && isText$1(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (isText$1(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (isElement$1(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (isElement$1(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (isText$1(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$3(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$3(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        id: id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: true\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(trim$2, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var getUndoBookmark = curry(getOffsetBookmark, identity, true);\n\n    var DOM$1 = DOMUtils$1.DOM;\n    var defaultPreviewStyles = 'font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow';\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      if (block === false) {\n        return '';\n      } else if (block === true) {\n        return 'p';\n      } else {\n        return block;\n      }\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', 'xx-small,x-small,small,medium,large,x-large,xx-large'));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', always, 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getIconPackName = function (editor) {\n      return editor.getParam('icons', '', 'string');\n    };\n    var getIconsUrl = function (editor) {\n      return editor.getParam('icons_url', '', 'string');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getReferrerPolicy = function (editor) {\n      return editor.getParam('referrer_policy', '', 'string');\n    };\n    var getLanguageCode = function (editor) {\n      return editor.getParam('language', 'en', 'string');\n    };\n    var getLanguageUrl = function (editor) {\n      return editor.getParam('language_url', '', 'string');\n    };\n    var shouldIndentUseMargin = function (editor) {\n      return editor.getParam('indent_use_margin', false);\n    };\n    var getIndentation = function (editor) {\n      return editor.getParam('indentation', '40px', 'string');\n    };\n    var getContentCss = function (editor) {\n      var contentCss = editor.getParam('content_css');\n      if (isString(contentCss)) {\n        return map(contentCss.split(','), trim);\n      } else if (isArray(contentCss)) {\n        return contentCss;\n      } else if (contentCss === false || editor.inline) {\n        return [];\n      } else {\n        return ['default'];\n      }\n    };\n    var getDirectionality = function (editor) {\n      return editor.getParam('directionality', I18n.isRtl() ? 'rtl' : undefined);\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var getObjectResizing = function (editor) {\n      var selector = editor.getParam('object_resizing');\n      if (selector === false || Env.iOS) {\n        return false;\n      } else {\n        return isString(selector) ? selector : 'table,img,figure.image,div';\n      }\n    };\n    var getResizeImgProportional = function (editor) {\n      return editor.getParam('resize_img_proportional', true, 'boolean');\n    };\n    var getPlaceholder = function (editor) {\n      return editor.getParam('placeholder', DOM$1.getAttrib(editor.getElement(), 'placeholder'), 'string');\n    };\n    var getEventRoot = function (editor) {\n      return editor.getParam('event_root');\n    };\n    var getServiceMessage = function (editor) {\n      return editor.getParam('service_message');\n    };\n    var getTheme = function (editor) {\n      return editor.getParam('theme');\n    };\n    var shouldValidate = function (editor) {\n      return editor.getParam('validate');\n    };\n    var isInlineBoundariesEnabled = function (editor) {\n      return editor.getParam('inline_boundaries') !== false;\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('formats');\n    };\n    var getPreviewStyles = function (editor) {\n      var style = editor.getParam('preview_styles', defaultPreviewStyles);\n      if (isString(style)) {\n        return style;\n      } else {\n        return '';\n      }\n    };\n    var canFormatEmptyLines = function (editor) {\n      return editor.getParam('format_empty_lines', false, 'boolean');\n    };\n    var getCustomUiSelector = function (editor) {\n      return editor.getParam('custom_ui_selector', '', 'string');\n    };\n    var getThemeUrl = function (editor) {\n      return editor.getParam('theme_url');\n    };\n    var isInline$1 = function (editor) {\n      return editor.getParam('inline');\n    };\n    var hasHiddenInput = function (editor) {\n      return editor.getParam('hidden_input');\n    };\n    var shouldPatchSubmit = function (editor) {\n      return editor.getParam('submit_patch');\n    };\n    var isEncodingXml = function (editor) {\n      return editor.getParam('encoding') === 'xml';\n    };\n    var shouldAddFormSubmitTrigger = function (editor) {\n      return editor.getParam('add_form_submit_trigger');\n    };\n    var shouldAddUnloadTrigger = function (editor) {\n      return editor.getParam('add_unload_trigger');\n    };\n    var hasForcedRootBlock = function (editor) {\n      return getForcedRootBlock(editor) !== '';\n    };\n    var getCustomUndoRedoLevels = function (editor) {\n      return editor.getParam('custom_undo_redo_levels', 0, 'number');\n    };\n    var shouldDisableNodeChange = function (editor) {\n      return editor.getParam('disable_nodechange');\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly');\n    };\n    var hasContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors');\n    };\n    var getPlugins = function (editor) {\n      return editor.getParam('plugins', '', 'string');\n    };\n    var getExternalPlugins = function (editor) {\n      return editor.getParam('external_plugins');\n    };\n    var shouldBlockUnsupportedDrop = function (editor) {\n      return editor.getParam('block_unsupported_drop', true, 'boolean');\n    };\n    var isVisualAidsEnabled = function (editor) {\n      return editor.getParam('visual', true, 'boolean');\n    };\n    var getVisualAidsTableClass = function (editor) {\n      return editor.getParam('visual_table_class', 'mce-item-table', 'string');\n    };\n    var getVisualAidsAnchorClass = function (editor) {\n      return editor.getParam('visual_anchor_class', 'mce-item-anchor', 'string');\n    };\n\n    var isElement$4 = isElement$1;\n    var isText$6 = isText$1;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = trim$2(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var deleteZwspChars = function (caretContainer) {\n      var idx;\n      while ((idx = caretContainer.data.lastIndexOf(ZWSP)) !== -1) {\n        caretContainer.deleteData(idx, 1);\n      }\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        deleteZwspChars(caretContainer);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        deleteZwspChars(caretContainerNode);\n        if (caretContainerNode.data.length === 0) {\n          removeNode(caretContainerNode);\n        }\n      }\n    };\n\n    var browser$2 = detect$3().browser;\n    var isContentEditableFalse$3 = isContentEditableFalse;\n    var isMedia$1 = isMedia;\n    var isTableCell$2 = isTableCell;\n    var inlineFakeCaretSelector = '*[contentEditable=false],video,audio,embed,object';\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var fakeCaretTargetNodes = descendants$1(SugarElement.fromDom(root), inlineFakeCaretSelector);\n      for (var i = 0; i < fakeCaretTargetNodes.length; i++) {\n        var node = fakeCaretTargetNodes[i].dom;\n        var sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          var data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (editor, root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Optional.none());\n      var cursorInterval, caretContainerNode;\n      var rootBlock = getForcedRootBlock(editor);\n      var caretBlock = rootBlock.length > 0 ? rootBlock : 'p';\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$2(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock(caretBlock, element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Optional.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isInlineFakeCaretTarget(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          remove$5(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Optional.none());\n        });\n        if (cursorInterval) {\n          Delay.clearInterval(cursorInterval);\n          cursorInterval = null;\n        }\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(__assign({}, clientRect));\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isInlineFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || isMedia$1(node);\n    };\n    var isFakeCaretTarget = function (node) {\n      return isInlineFakeCaretTarget(node) || isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = isContentEditableFalse;\n    var isMedia$2 = isMedia;\n    var isBlockLike = matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = isElement$1;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new DomTreeWalker(node, rootNode);\n      var isCefOrCaretContainer = isContentEditableFalse$4(node) || isCaretContainerBlock$1(node);\n      if (isBackwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isCefOrCaretContainer) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      if (!caretPosition) {\n        return null;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling) || isMedia$2(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      var offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (isText$1(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Optional.from(pos.getNode()).map(SugarElement.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Optional.from(pos.getNode(true)).map(SugarElement.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = isContentEditableFalse;\n    var isText$7 = isText$1;\n    var isElement$6 = isElement$1;\n    var isBr$4 = isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, always, root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      var rootContentEditableFalseElm = last$1(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Optional.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Optional.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Optional.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (isText$1(startNode)) {\n        return Optional.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Optional.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Optional.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var firstPositionIn = curry(positionIn, true);\n    var lastPositionIn = curry(positionIn, false);\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return isElement$1(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (isElement$1(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var pos;\n      var rng = dom.createRng();\n      pos = resolve$1(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$1(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty$1 = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty$1(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return isText$1(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (isText$1(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && isText$1(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            container = prev;\n            offset = idx;\n          }\n        }\n        return Optional.some(CaretPosition$1(container, offset));\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Optional.some(rng);\n      } else {\n        return Optional.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, endPos.or(startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Optional.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$2 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Optional.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Optional.some(bookmark.rng);\n        }\n      }\n      return Optional.none();\n    };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      resolve$2(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return isElement$1(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2(nbsp);\n    var isWhiteSpace$1 = function (chr) {\n      return chr !== '' && ' \\f\\n\\r\\t\\x0B'.indexOf(chr) !== -1;\n    };\n    var isContent$1 = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isNode = function (node) {\n      return !!node.nodeType;\n    };\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new DomTreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        var nextName = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[nextName]; node; node = node[nextName]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (isNode(name)) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node, allowSpaces) {\n      if (allowSpaces === void 0) {\n        allowSpaces = false;\n      }\n      if (isNonNullable(node) && isText$1(node)) {\n        var data = allowSpaces ? node.data.replace(/ /g, '\\xA0') : node.data;\n        return isWhitespaceText(data);\n      } else {\n        return false;\n      }\n    };\n    var isEmptyTextNode = function (node) {\n      return isNonNullable(node) && isText$1(node) && node.length === 0;\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var isVariableFormatName = function (editor, formatName) {\n      var hasVariableValues = function (format) {\n        var isVariableValue = function (val) {\n          return val.length > 1 && val.charAt(0) === '%';\n        };\n        return exists([\n          'styles',\n          'attributes'\n        ], function (key) {\n          return get$1(format, key).exists(function (field) {\n            var fieldValues = isArray(field) ? field : values(field);\n            return exists(fieldValues, isVariableValue);\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), hasVariableValues);\n    };\n    var areSimilarFormats = function (editor, formatName, otherFormatName) {\n      var validKeys = [\n        'inline',\n        'block',\n        'selector',\n        'attributes',\n        'styles',\n        'classes'\n      ];\n      var filterObj = function (format) {\n        return filter$1(format, function (_, key) {\n          return exists(validKeys, function (validKey) {\n            return validKey === key;\n          });\n        });\n      };\n      return exists(editor.formatter.get(formatName), function (fmt1) {\n        var filteredFmt1 = filterObj(fmt1);\n        return exists(editor.formatter.get(otherFormatName), function (fmt2) {\n          var filteredFmt2 = filterObj(fmt2);\n          return equal(filteredFmt1, filteredFmt2);\n        });\n      });\n    };\n    var isBlockFormat = function (format) {\n      return hasNonNullableKey(format, 'block');\n    };\n    var isSelectorFormat = function (format) {\n      return hasNonNullableKey(format, 'selector');\n    };\n    var isInlineFormat = function (format) {\n      return hasNonNullableKey(format, 'inline');\n    };\n\n    var isBookmarkNode$2 = isBookmarkNode$1;\n    var getParents$2 = getParents$1;\n    var isWhiteSpaceNode$1 = isWhiteSpaceNode;\n    var isTextBlock$2 = isTextBlock$1;\n    var isBogusBr = function (node) {\n      return isBr(node) && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (isElement$1(parent) && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var walkText = function (start, node, offset, predicate) {\n      var str = node.data;\n      for (var i = offset; start ? i >= 0 : i < str.length; start ? i-- : i++) {\n        if (predicate(str.charAt(i))) {\n          return start ? i + 1 : i;\n        }\n      }\n      return -1;\n    };\n    var findSpace = function (start, node, offset) {\n      return walkText(start, node, offset, function (c) {\n        return isNbsp(c) || isWhiteSpace$1(c);\n      });\n    };\n    var findContent = function (start, node, offset) {\n      return walkText(start, node, offset, isContent$1);\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, includeTrailingSpaces) {\n      var lastTextNode;\n      var rootNode = dom.getParent(container, dom.isBlock) || body;\n      var walk = function (container, offset, pred) {\n        var textSeeker = TextSeeker(dom);\n        var walker = start ? textSeeker.backwards : textSeeker.forwards;\n        return Optional.from(walker(container, offset, function (text, textOffset) {\n          if (isBookmarkNode$2(text.parentNode)) {\n            return -1;\n          } else {\n            lastTextNode = text;\n            return pred(start, text, textOffset);\n          }\n        }, rootNode));\n      };\n      var spaceResult = walk(container, offset, findSpace);\n      return spaceResult.bind(function (result) {\n        return includeTrailingSpaces ? walk(result.container, result.offset + (start ? -1 : 0), findContent) : Optional.some(result);\n      }).orThunk(function () {\n        return lastTextNode ? Optional.some({\n          container: lastTextNode,\n          offset: start ? 0 : lastTextNode.length\n        }) : Optional.none();\n      });\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      if (isText$1(container) && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      var parents = getParents$2(dom, container);\n      for (var i = 0; i < parents.length; i++) {\n        for (var y = 0; y < format.length; y++) {\n          var curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(isText$1(container) ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var isAtBlockBoundary = function (dom, root, container, siblingName) {\n      var parent = container.parentNode;\n      if (isNonNullable(container[siblingName])) {\n        return false;\n      } else if (parent === root || isNullable(parent) || dom.isBlock(parent)) {\n        return true;\n      } else {\n        return isAtBlockBoundary(dom, root, parent, siblingName);\n      }\n    };\n    var findParentContainer = function (dom, format, container, offset, start) {\n      var parent = container;\n      var sibling;\n      var siblingName = start ? 'previousSibling' : 'nextSibling';\n      var root = dom.getRoot();\n      if (isText$1(container) && !isWhiteSpaceNode$1(container)) {\n        if (start ? offset > 0 : offset < container.data.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          var allowSpaces = isText$1(sibling) && !isAtBlockBoundary(dom, root, sibling, siblingName);\n          if (!isBookmarkNode$2(sibling) && !isBogusBr(sibling) && !isWhiteSpaceNode$1(sibling, allowSpaces)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var isSelfOrParentBookmark = function (container) {\n      return isBookmarkNode$2(container.parentNode) || isBookmarkNode$2(container);\n    };\n    var expandRng = function (editor, rng, format, includeTrailingSpace) {\n      if (includeTrailingSpace === void 0) {\n        includeTrailingSpace = false;\n      }\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (isElement$1(startContainer) && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (isText$1(startContainer)) {\n          startOffset = 0;\n        }\n      }\n      if (isElement$1(endContainer) && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (isText$1(endContainer)) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isSelfOrParentBookmark(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (isText$1(startContainer)) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isSelfOrParentBookmark(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (isText$1(endContainer)) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        var startPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, includeTrailingSpace);\n        startPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          startContainer = container;\n          startOffset = offset;\n        });\n        var endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, includeTrailingSpace);\n        endPoint.each(function (_a) {\n          var container = _a.container, offset = _a.offset;\n          endContainer = container;\n          endOffset = offset;\n        });\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (!isText$1(startContainer) || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, true);\n        }\n        if (!format[0].inline || (!isText$1(endContainer) || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (isElement$1(startContainer)) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (isElement$1(endContainer)) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    var clampToExistingChildren = function (container, index) {\n      var childNodes = container.childNodes;\n      if (index >= childNodes.length) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var getEndChild = function (container, index) {\n      return clampToExistingChildren(container, index - 1);\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (var node = startNode, parent_1 = node.parentNode; node && node !== endNode; node = parent_1) {\n          parent_1 = node.parentNode;\n          var siblings_1 = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings_1.length) {\n            if (!next) {\n              siblings_1.reverse();\n            }\n            callback(exclude(siblings_1));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = clampToExistingChildren(startContainer, startOffset);\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      var ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (var node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (var node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      var startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      var endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      var siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [SugarElement.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(getSelectedNodes(ranges), isTableCell$1);\n    };\n    var getCellsFromElement = function (elm) {\n      return descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      return selectedCells.length > 0 ? selectedCells : getCellsFromRanges(ranges);\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(getRanges(editor.selection.getSel()), SugarElement.fromDom(editor.getBody()));\n    };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (isText$1(sc)) {\n        return so === 0 ? Optional.some(SugarElement.fromDom(sc)) : Optional.none();\n      } else {\n        return Optional.from(sc.childNodes[so]).map(SugarElement.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (isText$1(ec)) {\n        return eo === ec.data.length ? Optional.some(SugarElement.fromDom(ec)) : Optional.none();\n      } else {\n        return Optional.from(ec.childNodes[eo - 1]).map(SugarElement.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq$2, startNode));\n        var end = find(getLastChildren(elm), curry(eq$2, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new DomTreeWalker(node, root);\n      var moveCaretBeforeOnEnterElementsMap = filter$1(dom.schema.getMoveCaretBeforeOnEnterElements(), function (_, name) {\n        return !contains([\n          'td',\n          'th',\n          'table'\n        ], name.toLowerCase());\n      });\n      do {\n        if (isText$1(node) && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (moveCaretBeforeOnEnterElementsMap[node.nodeName]) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n    var runOnRanges = function (editor, executor) {\n      var fakeSelectionNodes = getCellsFromEditor(editor);\n      if (fakeSelectionNodes.length > 0) {\n        each(fakeSelectionNodes, function (elem) {\n          var node = elem.dom;\n          var fakeNodeRng = editor.dom.createRng();\n          fakeNodeRng.setStartBefore(node);\n          fakeNodeRng.setEndAfter(node);\n          executor(fakeNodeRng, true);\n        });\n      } else {\n        executor(editor.selection.getRng(), false);\n      }\n    };\n    var preserve = function (selection, fillBookmark, executor) {\n      var bookmark = getPersistentBookmark(selection, fillBookmark);\n      executor(bookmark);\n      selection.moveToBookmark(bookmark);\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Optional.from(element.dom.nodeValue) : Optional.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom.nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$8 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$8(elem) === ZWSP;\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem.dom)) {\n          return 'caret';\n        } else if (!isValid(editor, wrapName, nodeName) || !isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var applyWordGrab = function (editor, rng) {\n      var r = expandRng(editor, rng, [{ inline: true }]);\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate$1('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = SugarElement.fromTag('span', eDoc);\n      add$3(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$4(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Optional.none());\n      var finishWrapper = function () {\n        wrapper.set(Optional.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Optional.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap(elem, w);\n            break;\n          }\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, SugarElement.fromDom);\n        processElements(elems);\n      };\n      walk$1(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var selection = editor.selection;\n        var initialRng = selection.getRng();\n        var hasFakeSelection = getCellsFromEditor(editor).length > 0;\n        if (initialRng.collapsed && !hasFakeSelection) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (selection.getRng().collapsed && !hasFakeSelection) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, nbsp);\n          selection.getRng().insertNode(wrapper.dom);\n          selection.select(wrapper.dom);\n        } else {\n          preserve(selection, false, function () {\n            runOnRanges(editor, function (selectionRng) {\n              annotate(editor, selectionRng, name, settings.decorate, data);\n            });\n          });\n        }\n      });\n    };\n\n    var Annotator = function (editor) {\n      var registry = create$2();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Optional.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$1(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom;\n            });\n          });\n        }\n      };\n    };\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(getBookmark$1, selection),\n        moveToBookmark: curry(moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = isBookmarkNode$1;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var getContentEditableRoot = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue(node) || isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.browser.isIE() && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (isElement$1(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height, origin) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height,\n        origin: origin\n      });\n    };\n    var firePreInit = function (editor) {\n      return editor.fire('PreInit');\n    };\n    var firePostRender = function (editor) {\n      return editor.fire('PostRender');\n    };\n    var fireInit = function (editor) {\n      return editor.fire('Init');\n    };\n    var firePlaceholderToggle = function (editor, state) {\n      return editor.fire('PlaceholderToggle', { state: state });\n    };\n    var fireError = function (editor, errorType, error) {\n      return editor.fire(errorType, error);\n    };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableFalse$6 = isContentEditableFalse;\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      var resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        if (evt.type === 'longpress' || evt.type.indexOf('touch') === 0) {\n          var touch = evt.touches[0];\n          return isImage(evt.target) && !isXYWithinRange(touch.clientX, touch.clientY, range);\n        } else {\n          return isImage(evt.target) && !isXYWithinRange(evt.clientX, evt.clientY, range);\n        }\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = getObjectResizing(editor);\n        if (!selector) {\n          return false;\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(SugarElement.fromDom(elm), selector);\n      };\n      var setGhostElmSize = function (ghostElm, width, height) {\n        dom.setStyles(getResizeTarget(ghostElm), {\n          width: width,\n          height: height\n        });\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && getResizeImgProportional(editor) !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e);\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        setGhostElmSize(selectedElmGhost, width, height);\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          fireObjectResizeStart(editor, selectedElm, startW, startH, 'corner-' + selectedHandle.name);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        var wasResizeStarted = resizeStarted;\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, '' + value);\n            }\n          }\n        };\n        if (wasResizeStarted) {\n          setSizeProp('width', width);\n          setSizeProp('height', height);\n        }\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        if (wasResizeStarted) {\n          fireObjectResized(editor, selectedElm, width, height, 'corner-' + selectedHandle.name);\n          dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        }\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        var position = dom.getPos(targetElm, rootElement);\n        var selectedElmX = position.x;\n        var selectedElmY = position.y;\n        var rect = targetElm.getBoundingClientRect();\n        var targetWidth = rect.width || rect.right - rect.left;\n        var targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        var e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              selectedHandle.name = name;\n              selectedHandle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              setGhostElmSize(selectedElmGhost, targetWidth, targetHeight);\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        each$1(resizeHandles, function (value, name) {\n          var handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        });\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$6(getContentEditableRoot(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        each$1(resizeHandles, function (handle) {\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        });\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, 'false');\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.browser.isIE() || Env.browser.isEdge()) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          var handleMSControlSelect_1 = function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                return editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target) || isMedia(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          };\n          dom.bind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          editor.on('remove', function () {\n            return dom.unbind(rootElement, 'mscontrolselect', handleMSControlSelect_1);\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu longpress', contextMenuSelectImage, true);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return isContentEditableTrue(node) || isContentEditableFalse(node);\n    };\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var rects;\n      var element = doc.elementFromPoint(clientX, clientY);\n      var rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return isContentEditableFalse(findParent(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n\n    var isEq$1 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent$1(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$3 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new DomTreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var lastInlineElement;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      var parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Optional.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      var walker = new DomTreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Optional.none();\n        }\n        if (isText$1(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Optional.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Optional.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Optional.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Optional.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Optional.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset;\n      var body = dom.getRoot();\n      var node;\n      var directionLeft, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      var isAfterNode = isElement$1(container) && offset === container.childNodes.length;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Optional.none();\n      }\n      if (isElement$1(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (isDocument$1(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Optional.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$3(node)) {\n              return Optional.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = isText$1(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$3(container)) {\n            return Optional.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Optional.none();\n          }\n          if (container.hasChildNodes() && isTable$3(container) === false) {\n            node = container;\n            var walker = new DomTreeWalker(container, body);\n            do {\n              if (isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (isText$1(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (isText$1(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (isElement$1(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && isText$1(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Optional.some(CaretPosition(container, offset)) : Optional.none();\n    };\n    var normalize = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return isEq$1(rng, normRng) ? Optional.none() : Optional.some(normRng);\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && isText$1(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (isText$1(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (isText$1(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return walk$1(dom, rng, callback);\n      };\n      var split = split$1;\n      var normalize$1 = function (rng) {\n        return normalize(dom, rng).fold(never, function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize$1\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = isEq$1;\n      RangeUtils.getCaretRangeFromPoint = fromPoint$1;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom;\n        if (isSupported$1(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$5(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$5(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom;\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$9 = function (element) {\n      return api$1.get(element);\n    };\n\n    var walkUp = function (navigation, doc) {\n      var frame = navigation.view(doc);\n      return frame.fold(constant([]), function (f) {\n        var parent = navigation.owner(f);\n        var rest = walkUp(navigation, parent);\n        return [f].concat(rest);\n      });\n    };\n    var pathTo = function (element, navigation) {\n      var d = navigation.owner(element);\n      return walkUp(navigation, d);\n    };\n\n    var view = function (doc) {\n      var _a;\n      var element = doc.dom === document ? Optional.none() : Optional.from((_a = doc.dom.defaultView) === null || _a === void 0 ? void 0 : _a.frameElement);\n      return element.map(SugarElement.fromDom);\n    };\n    var owner$1 = function (element) {\n      return documentOrOwner(element);\n    };\n\n    var Navigation = /*#__PURE__*/Object.freeze({\n        __proto__: null,\n        view: view,\n        owner: owner$1\n    });\n\n    var find$2 = function (element) {\n      var doc = SugarElement.fromDom(document);\n      var scroll = get$2(doc);\n      var frames = pathTo(element, Navigation);\n      var offset = viewport(element);\n      var r = foldr(frames, function (b, a) {\n        var loc = viewport(a);\n        return {\n          left: b.left + loc.left,\n          top: b.top + loc.top\n        };\n      }, {\n        left: 0,\n        top: 0\n      });\n      return SugarPosition(r.left + offset.left + scroll.left, r.top + offset.top + scroll.top);\n    };\n\n    var excludeFromDescend = function (element) {\n      return name(element) === 'textarea';\n    };\n    var fireScrollIntoViewEvent = function (editor, data) {\n      var scrollEvent = editor.fire('ScrollIntoView', data);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var fireAfterScrollIntoViewEvent = function (editor, data) {\n      editor.fire('AfterScrollIntoView', data);\n    };\n    var descend = function (element, offset) {\n      var children$1 = children(element);\n      if (children$1.length === 0 || excludeFromDescend(element)) {\n        return {\n          element: element,\n          offset: offset\n        };\n      } else if (offset < children$1.length && !excludeFromDescend(children$1[offset])) {\n        return {\n          element: children$1[offset],\n          offset: 0\n        };\n      } else {\n        var last = children$1[children$1.length - 1];\n        if (excludeFromDescend(last)) {\n          return {\n            element: element,\n            offset: offset\n          };\n        } else {\n          if (name(last) === 'img') {\n            return {\n              element: last,\n              offset: 1\n            };\n          } else if (isText(last)) {\n            return {\n              element: last,\n              offset: get$8(last).length\n            };\n          } else {\n            return {\n              element: last,\n              offset: children(last).length\n            };\n          }\n        }\n      }\n    };\n    var markerInfo = function (element, cleanupFun) {\n      var pos = absolute(element);\n      var height = get$9(element);\n      return {\n        element: element,\n        bottom: pos.top + height,\n        height: height,\n        pos: pos,\n        cleanup: cleanupFun\n      };\n    };\n    var createMarker = function (element, offset) {\n      var startPoint = descend(element, offset);\n      var span = SugarElement.fromHtml('<span data-mce-bogus=\"all\">' + ZWSP + '</span>');\n      before(startPoint.element, span);\n      return markerInfo(span, function () {\n        return remove(span);\n      });\n    };\n    var elementMarker = function (element) {\n      return markerInfo(SugarElement.fromDom(element), noop);\n    };\n    var withMarker = function (editor, f, rng, alignToTop) {\n      preserveWith(editor, function (_s, _e) {\n        return applyWithMarker(editor, f, rng, alignToTop);\n      }, rng);\n    };\n    var withScrollEvents = function (editor, doc, f, marker, alignToTop) {\n      var data = {\n        elm: marker.element.dom,\n        alignToTop: alignToTop\n      };\n      if (fireScrollIntoViewEvent(editor, data)) {\n        return;\n      }\n      var scrollTop = get$2(doc).top;\n      f(doc, scrollTop, marker, alignToTop);\n      fireAfterScrollIntoViewEvent(editor, data);\n    };\n    var applyWithMarker = function (editor, f, rng, alignToTop) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var doc = SugarElement.fromDom(editor.getDoc());\n      reflow(body);\n      var marker = createMarker(SugarElement.fromDom(rng.startContainer), rng.startOffset);\n      withScrollEvents(editor, doc, f, marker, alignToTop);\n      marker.cleanup();\n    };\n    var withElement = function (editor, element, f, alignToTop) {\n      var doc = SugarElement.fromDom(editor.getDoc());\n      withScrollEvents(editor, doc, f, elementMarker(element), alignToTop);\n    };\n    var preserveWith = function (editor, f, rng) {\n      var startElement = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endElement = rng.endContainer;\n      var endOffset = rng.endOffset;\n      f(SugarElement.fromDom(startElement), SugarElement.fromDom(endElement));\n      var newRng = editor.dom.createRng();\n      newRng.setStart(startElement, startOffset);\n      newRng.setEnd(endElement, endOffset);\n      editor.selection.setRng(rng);\n    };\n    var scrollToMarker = function (marker, viewHeight, alignToTop, doc) {\n      var pos = marker.pos;\n      if (alignToTop) {\n        to(pos.left, pos.top, doc);\n      } else {\n        var y = pos.top - viewHeight + marker.height;\n        to(pos.left, y, doc);\n      }\n    };\n    var intoWindowIfNeeded = function (doc, scrollTop, viewHeight, marker, alignToTop) {\n      var viewportBottom = viewHeight + scrollTop;\n      var markerTop = marker.pos.top;\n      var markerBottom = marker.bottom;\n      var largerThanViewport = markerBottom - markerTop >= viewHeight;\n      if (markerTop < scrollTop) {\n        scrollToMarker(marker, viewHeight, alignToTop !== false, doc);\n      } else if (markerTop > viewportBottom) {\n        var align = largerThanViewport ? alignToTop !== false : alignToTop === true;\n        scrollToMarker(marker, viewHeight, align, doc);\n      } else if (markerBottom > viewportBottom && !largerThanViewport) {\n        scrollToMarker(marker, viewHeight, alignToTop === true, doc);\n      }\n    };\n    var intoWindow = function (doc, scrollTop, marker, alignToTop) {\n      var viewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, viewHeight, marker, alignToTop);\n    };\n    var intoFrame = function (doc, scrollTop, marker, alignToTop) {\n      var frameViewHeight = doc.dom.defaultView.innerHeight;\n      intoWindowIfNeeded(doc, scrollTop, frameViewHeight, marker, alignToTop);\n      var op = find$2(marker.element);\n      var viewportBounds = getBounds(window);\n      if (op.top < viewportBounds.y) {\n        intoView(marker.element, alignToTop !== false);\n      } else if (op.top > viewportBounds.bottom) {\n        intoView(marker.element, alignToTop === true);\n      }\n    };\n    var rangeIntoWindow = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoWindow, rng, alignToTop);\n    };\n    var elementIntoWindow = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoWindow, alignToTop);\n    };\n    var rangeIntoFrame = function (editor, rng, alignToTop) {\n      return withMarker(editor, intoFrame, rng, alignToTop);\n    };\n    var elementIntoFrame = function (editor, element, alignToTop) {\n      return withElement(editor, element, intoFrame, alignToTop);\n    };\n    var scrollElementIntoView = function (editor, element, alignToTop) {\n      var scroller = editor.inline ? elementIntoWindow : elementIntoFrame;\n      scroller(editor, element, alignToTop);\n    };\n    var scrollRangeIntoView = function (editor, rng, alignToTop) {\n      var scroller = editor.inline ? rangeIntoWindow : rangeIntoFrame;\n      scroller(editor, rng, alignToTop);\n    };\n\n    var getDocument = function () {\n      return SugarElement.fromDom(document);\n    };\n\n    var focus = function (element) {\n      return element.dom.focus();\n    };\n    var hasFocus = function (element) {\n      var root = getRootNode(element).dom;\n      return element.dom === root.activeElement;\n    };\n    var active = function (root) {\n      if (root === void 0) {\n        root = getDocument();\n      }\n      return Optional.from(root.dom.activeElement).map(SugarElement.fromDom);\n    };\n    var search = function (element) {\n      return active(getRootNode(element)).filter(function (e) {\n        return element.dom.contains(e.dom);\n      });\n    };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: start,\n        soffset: soffset,\n        finish: finish,\n        foffset: foffset\n      };\n    };\n    var SimRange = { create: create$4 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$3 = adt.before;\n    var on = adt.on;\n    var after$2 = adt.after;\n    var Situ = {\n      before: before$3,\n      on: on,\n      after: after$2,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start, simRange.soffset, simRange.finish, simRange.foffset);\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return SugarElement.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, _finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, _soffset, _finish, _foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var SimSelection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = detect$3().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$8(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return SimSelection.range(rng.start, clamp(rng.soffset, rng.start), rng.finish, clamp(rng.foffset, rng.finish));\n    };\n    var isOrContains = function (root, elm) {\n      return !isRestrictedNode(elm.dom) && (contains$2(root, elm) || eq$2(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start) && isOrContains(root, rng.finish);\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return SimSelection.range(SugarElement.fromDom(r.startContainer), r.startOffset, SugarElement.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Optional.none() : Optional.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Optional.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = document.createRange();\n      try {\n        rng.setStart(bookmark.start.dom, bookmark.soffset);\n        rng.setEnd(bookmark.finish.dom, bookmark.foffset);\n        return Optional.some(rng);\n      } catch (_) {\n        return Optional.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(SugarElement.fromDom(editor.getBody())) : Optional.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Optional.from(rng) : Optional.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Optional.none();\n      return bookmark.bind(function (x) {\n        return validate(SugarElement.fromDom(editor.getBody()), x);\n      }).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        return editor.selection.setRng(rng);\n      });\n    };\n\n    var isEditorUIElement = function (elm) {\n      var className = elm.className.toString();\n      return className.indexOf('tox-') !== -1 || className.indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (_e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = detect$3().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup NodeChange', function (e) {\n        if (!isManualNodeChange(e)) {\n          store(editor);\n        }\n      });\n    };\n    var register = function (editor) {\n      var throttledStore = first(function () {\n        store(editor);\n      }, 0);\n      editor.on('init', function () {\n        if (editor.inline) {\n          registerPageMouseUp(editor, throttledStore);\n        }\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n\n    var documentFocusInHandler;\n    var DOM$2 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isEditorContentAreaElement = function (elm) {\n      var classList = elm.classList;\n      if (classList !== undefined) {\n        return classList.contains('tox-edit-area') || classList.contains('tox-edit-area__iframe') || classList.contains('mce-content-body');\n      } else {\n        return false;\n      }\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = getCustomUiSelector(editor);\n      var parent = DOM$2.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function (editor) {\n      try {\n        var root = getRootNode(SugarElement.fromDom(editor.getElement()));\n        return active(root).fold(function () {\n          return document.body;\n        }, function (x) {\n          return x.dom;\n        });\n      } catch (ex) {\n        return document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement(self)) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          if (activeEditor) {\n            getOriginalEventTarget(e).each(function (target) {\n              if (target.ownerDocument === document) {\n                if (target !== document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n                  activeEditor.fire('blur', { focusedEditor: null });\n                  editorManager.focusedEditor = null;\n                }\n              }\n            });\n          }\n        };\n        DOM$2.bind(document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$2.unbind(document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$2 = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Optional.from(getNode(rng.startContainer, rng.startOffset)).map(SugarElement.fromDom) : Optional.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Optional.some(node);\n        } else if (contains$2(root, node) === false) {\n          return Optional.some(root);\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(SugarElement.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return firstPositionIn(elm.dom);\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(SugarElement.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(SugarElement.fromDom(rawBody));\n    };\n    var hasUiFocus = function (editor) {\n      return active().filter(function (elem) {\n        return !isEditorContentAreaElement(elem.dom) && isUIElement(editor, elem.dom);\n      }).isSome();\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var hasEditorOrUiFocus = function (editor) {\n      return hasFocus$1(editor) || hasUiFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (!editor.inline) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || editor.inline) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus$1 = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Optional.from(container).map(SugarElement.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Optional.some(elm) : parent(elm).filter(isElement);\n      }).map(function (elm) {\n        return elm.dom;\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && isText$1(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      var startOffset = rng.startOffset;\n      var endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node;\n      var selectedBlocks = [];\n      var root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new DomTreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Optional.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n\n    var ensureIsRoot = function (isRoot) {\n      return isFunction(isRoot) ? isRoot : never;\n    };\n    var ancestor$3 = function (scope, transform, isRoot) {\n      var element = scope.dom;\n      var stop = ensureIsRoot(isRoot);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = SugarElement.fromDom(element);\n        var transformed = transform(el);\n        if (transformed.isSome()) {\n          return transformed;\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Optional.none();\n    };\n    var closest$2 = function (scope, transform, isRoot) {\n      var current = transform(scope);\n      var stop = ensureIsRoot(isRoot);\n      return current.orThunk(function () {\n        return stop(scope) ? Optional.none() : ancestor$3(scope, transform, stop);\n      });\n    };\n\n    var isEq$2 = isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isEq$2(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$2(value, normalizeStyleValue(dom, replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      var startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      var startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        for (var i = 0; i < names.length; i++) {\n          var name_1 = names[i];\n          if (!checkedMap[name_1] && matchNode(editor, node, name_1, vars)) {\n            checkedMap[name_1] = true;\n            matchedFormatNames.push(name_1);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var closest$3 = function (editor, names) {\n      var isRoot = function (elm) {\n        return eq$2(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      var match = function (elm, name) {\n        return matchNode(editor, elm.dom, name) ? Optional.some(name) : Optional.none();\n      };\n      return Optional.from(editor.selection.getStart(true)).bind(function (rawElm) {\n        return closest$2(SugarElement.fromDom(rawElm), function (elm) {\n          return findMap(names, function (name) {\n            return match(elm, name);\n          });\n        }, isRoot);\n      }).getOrNull();\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = getParents$1(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var matchAllOnNode = function (editor, node, formatNames) {\n      return foldl(formatNames, function (acc, name) {\n        var matchSimilar = isVariableFormatName(editor, name);\n        if (editor.formatter.matchNode(node, name, {}, matchSimilar)) {\n          return acc.concat([name]);\n        } else {\n          return acc;\n        }\n      }, []);\n    };\n\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        var sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (var parent_1 = node.parent; parent_1 && parent_1 !== root; parent_1 = parent_1.parent) {\n          sibling = parent_1[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var isEmptyTextNode$1 = function (node) {\n      if (!isWhitespaceText(node.value)) {\n        return false;\n      }\n      var parentNode = node.parent;\n      if (parentNode && (parentNode.name !== 'span' || parentNode.attr('style')) && /^[ ]+$/.test(node.value)) {\n        return false;\n      }\n      return true;\n    };\n    var isNonEmptyElement = function (node) {\n      var isNamedAnchor = node.name === 'a' && !node.attr('href') && node.attr('id');\n      return node.attr('name') || node.attr('id') && !node.firstChild || node.attr('data-mce-bookmark') || isNamedAnchor;\n    };\n    var AstNode = function () {\n      function AstNode(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      AstNode.create = function (name, attrs) {\n        var node = new AstNode(name, typeLookup[name] || 1);\n        if (attrs) {\n          each$1(attrs, function (value, attrName) {\n            node.attr(attrName, value);\n          });\n        }\n        return node;\n      };\n      AstNode.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      AstNode.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs;\n        if (typeof name !== 'string') {\n          if (name !== undefined && name !== null) {\n            each$1(name, function (value, key) {\n              self.attr(key, value);\n            });\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                var i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              var i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      AstNode.prototype.clone = function () {\n        var self = this;\n        var clone = new AstNode(self.name, self.type);\n        var selfAttrs;\n        if (selfAttrs = self.attributes) {\n          var cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (var i = 0, l = selfAttrs.length; i < l; i++) {\n            var selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      AstNode.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      AstNode.prototype.unwrap = function () {\n        var self = this;\n        for (var node = self.firstChild; node;) {\n          var next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      AstNode.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      AstNode.prototype.append = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        var last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      AstNode.prototype.insert = function (node, refNode, before) {\n        if (node.parent) {\n          node.remove();\n        }\n        var parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      AstNode.prototype.getAll = function (name) {\n        var self = this;\n        var collection = [];\n        for (var node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      AstNode.prototype.empty = function () {\n        var self = this;\n        if (self.firstChild) {\n          var nodes = [];\n          for (var node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      AstNode.prototype.isEmpty = function (elements, whitespace, predicate) {\n        if (whitespace === void 0) {\n          whitespace = {};\n        }\n        var self = this;\n        var node = self.firstChild;\n        if (isNonEmptyElement(self)) {\n          return false;\n        }\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attr('data-mce-bogus')) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              if (isNonEmptyElement(node)) {\n                return false;\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !isEmptyTextNode$1(node)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && isWhitespaceText(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      AstNode.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return AstNode;\n    }();\n\n    var makeMap$3 = Tools.makeMap;\n    var Writer = function (settings) {\n      var html = [];\n      settings = settings || {};\n      var indent = settings.indent;\n      var indentBefore = makeMap$3(settings.indent_before || '');\n      var indentAfter = makeMap$3(settings.indent_after || '');\n      var encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      var htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    };\n\n    var HtmlSerializer = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var validate = settings.validate;\n        var handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    };\n\n    var extractBase64DataUris = function (html) {\n      var dataImageUri = /data:[^;]+;base64,([a-z0-9\\+\\/=]+)/gi;\n      var chunks = [];\n      var uris = {};\n      var prefix = generate$1('img');\n      var matches;\n      var index = 0;\n      var count = 0;\n      while (matches = dataImageUri.exec(html)) {\n        var uri = matches[0];\n        var imageId = prefix + '_' + count++;\n        uris[imageId] = uri;\n        if (index < matches.index) {\n          chunks.push(html.substr(index, matches.index - index));\n        }\n        chunks.push(imageId);\n        index = matches.index + uri.length;\n      }\n      if (index === 0) {\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: html\n        };\n      } else {\n        if (index < html.length) {\n          chunks.push(html.substr(index));\n        }\n        return {\n          prefix: prefix,\n          uris: uris,\n          html: chunks.join('')\n        };\n      }\n    };\n    var restoreDataUris = function (html, result) {\n      return html.replace(new RegExp(result.prefix + '_[0-9]+', 'g'), function (imageId) {\n        return get$1(result.uris, imageId).getOr(imageId);\n      });\n    };\n    var parseDataUri = function (uri) {\n      var matches = /data:([^;]+);base64,([a-z0-9\\+\\/=]+)/i.exec(uri);\n      if (matches) {\n        return Optional.some({\n          type: matches[1],\n          data: decodeURIComponent(matches[2])\n        });\n      } else {\n        return Optional.none();\n      }\n    };\n\n    var safeSvgDataUrlElements = [\n      'img',\n      'video'\n    ];\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var blockSvgDataUris = function (allowSvgDataUrls, tagName) {\n      var allowed = isNullable(allowSvgDataUrls) ? contains(safeSvgDataUrlElements, tagName) : allowSvgDataUrls;\n      return !allowed;\n    };\n    var isInvalidUri = function (settings, uri, tagName) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return blockSvgDataUris(settings.allow_svg_data_urls, tagName) && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches;\n      var shortEndedElements = schema.getShortEndedElements();\n      var tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var isConditionalComment = function (html, startIndex) {\n      return /^\\s*\\[if [\\w\\W]+\\]>.*<!\\[endif\\](--!?)?>/.test(html.substr(startIndex));\n    };\n    var findCommentEndIndex = function (html, isBogus, startIndex) {\n      if (startIndex === void 0) {\n        startIndex = 0;\n      }\n      var lcHtml = html.toLowerCase();\n      if (lcHtml.indexOf('[if ', startIndex) !== -1 && isConditionalComment(lcHtml, startIndex)) {\n        var endIfIndex = lcHtml.indexOf('[endif]', startIndex);\n        return lcHtml.indexOf('>', endIfIndex);\n      } else {\n        if (isBogus) {\n          var endIndex = lcHtml.indexOf('>', startIndex);\n          return endIndex !== -1 ? endIndex : lcHtml.length;\n        } else {\n          var endCommentRegexp = /--!?>/;\n          endCommentRegexp.lastIndex = startIndex;\n          var match = endCommentRegexp.exec(html);\n          return match ? match.index + match[0].length : lcHtml.length;\n        }\n      }\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name_1 = matches[1];\n        var value = matches[2];\n        return typeof name_1 === 'string' && name_1.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parseInternal = function (base64Extract, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        var html = base64Extract.html;\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, isShortEnded;\n        var elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced;\n        var anyAttributesRequired, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var parsingMode = format === 'html' ? 0 : 1;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var processText = function (value, raw) {\n          return text(restoreDataUris(value, base64Extract), raw);\n        };\n        var processComment = function (value) {\n          if (value === '') {\n            return;\n          }\n          if (value.charAt(0) === '>') {\n            value = ' ' + value;\n          }\n          if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n            value = ' ' + value;\n          }\n          comment(restoreDataUris(value, base64Extract));\n        };\n        var processAttr = function (value) {\n          return get$1(base64Extract.uris, value).getOr(value);\n        };\n        var processMalformedComment = function (value, startIndex) {\n          var startTag = value || '';\n          var isBogus = !startsWith(startTag, '--');\n          var endIndex = findCommentEndIndex(html, isBogus, startIndex);\n          value = html.substr(startIndex, endIndex - startIndex);\n          processComment(isBogus ? startTag + value : value);\n          return endIndex + 1;\n        };\n        var parseAttribute = function (tagName, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = processAttr(name in fillAttrsMap ? name : decode(value || val2 || val3 || ''));\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri, tagName)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        var tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\\\w\\\\W]*?)>)|' + '(?:!(--)?)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        var attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        var shortEndedElements = schema.getShortEndedElements();\n        var selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        var fillAttrsMap = schema.getBoolAttrs();\n        var validate = settings.validate;\n        var removeInternalElements = settings.remove_internals;\n        var fixSelfClosing = settings.fix_self_closing;\n        var specialElements = schema.getSpecialElements();\n        var processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          var matchText = matches[0];\n          if (index < matches.index) {\n            processText(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[7]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[8]) {\n            if (matches.index + matchText.length > html.length) {\n              processText(decode(html.substr(matches.index)));\n              index = matches.index + matchText.length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[9]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[9]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, function (match, name, val, val2, val3) {\n                  parseAttribute(value, name, val, val2, val3);\n                  return '';\n                });\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matchText.length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  processText(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            processComment(value);\n          } else if (value = matches[2]) {\n            var isValidCdataSection = parsingMode === 1 || settings.preserve_cdata || stack.length > 0 && schema.isValidChild(stack[stack.length - 1].name, '#cdata');\n            if (isValidCdataSection) {\n              cdata(value);\n            } else {\n              index = processMalformedComment('', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if ((value = matches[4]) || matchText === '<!') {\n            index = processMalformedComment(value, matches.index + matchText.length);\n            tokenRegExp.lastIndex = index;\n            continue;\n          } else if (value = matches[5]) {\n            if (parsingMode === 1) {\n              pi(value, matches[6]);\n            } else {\n              index = processMalformedComment('?', matches.index + 2);\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n          }\n          index = matches.index + matchText.length;\n        }\n        if (index < html.length) {\n          processText(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      var parse = function (html, format) {\n        if (format === void 0) {\n          format = 'html';\n        }\n        parseInternal(extractBase64DataUris(html), format);\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      var shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return trim$2(content);\n    };\n    var trimExternal = trimInternal;\n\n    var trimEmptyContents = function (editor, html) {\n      var blockName = getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, format, body) {\n      var content;\n      args.format = format;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = editor.dom.isEmpty(body) ? '' : trim$2(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        content = editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (!contains([\n          'text',\n          'tree'\n        ], args.format) && !isWsPreserveElement(SugarElement.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContentInternal = function (editor, args, format) {\n      return Optional.from(editor.getBody()).fold(constant(args.format === 'tree' ? new AstNode('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, format, body);\n      });\n    };\n\n    var each$7 = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$7(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !isBookmarkNode$1(node1) && !isBookmarkNode$1(node2);\n      };\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Optional.from(pos.container()).filter(isText$1).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return isText$1(container) && (container.data.length === 0 || isZwsp$1(container.data) && BookmarkManager$1.isBookmarkNode(container.parentNode));\n    };\n    var matchesElementPosition = function (before, predicate) {\n      return function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(before ? 0 : -1, pos)).filter(predicate).isSome();\n      };\n    };\n    var isImageBlock = function (node) {\n      return isImg(node) && get$5(SugarElement.fromDom(node), 'display') === 'block';\n    };\n    var isCefNode = function (node) {\n      return isContentEditableFalse(node) && !isBogusAll(node);\n    };\n    var isBeforeImageBlock = matchesElementPosition(true, isImageBlock);\n    var isAfterImageBlock = matchesElementPosition(false, isImageBlock);\n    var isBeforeMedia = matchesElementPosition(true, isMedia);\n    var isAfterMedia = matchesElementPosition(false, isMedia);\n    var isBeforeTable = matchesElementPosition(true, isTable);\n    var isAfterTable = matchesElementPosition(false, isTable);\n    var isBeforeContentEditableFalse = matchesElementPosition(true, isCefNode);\n    var isAfterContentEditableFalse = matchesElementPosition(false, isCefNode);\n\n    var getLastChildren$1 = function (elm) {\n      var children = [];\n      var rawNode = elm.dom;\n      while (rawNode) {\n        children.push(SugarElement.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren$1(elm).slice(-1), isBr$1);\n      if (allBrs.length === brs.length) {\n        each(brs, remove);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, SugarElement.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr$1(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove(lastChild);\n          }\n        });\n      });\n    };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$2(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq$2(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, never);\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom) === false && contains$2(fromBlock, SugarElement.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary$1 = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom, pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom, pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary$1, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary$1, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr$1);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return fromPosition(forward, scope.dom, pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr$1) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr$1) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(parentsAndSelf(SugarElement.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || prevPosition(getClosestBlock$1(root, pos).dom, pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || nextPosition(getClosestBlock$1(root, pos).dom, pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$5(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return prevPosition(root.dom, pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return nextPosition(root.dom, pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$1(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, pos) || isAfterBlock(root, pos) || isBeforeBr(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, leanRight(pos));\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return isText$1(container) && contains$1(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent$1(chars[i - 1]) && isContent$1(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Optional.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Optional.some(pos) : Optional.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content, function (acc, c) {\n        if (isWhiteSpace$1(c) || isNbsp(c)) {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + nbsp\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var elm = SugarElement.fromDom(node);\n      var root = ancestor(elm, isBlock).getOr(elm);\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length && needsToBeNbspRight(root, CaretPosition$1(node, node.data.length));\n      var isStartOfContent = offset === 0 && needsToBeNbspLeft(root, CaretPosition$1(node, 0));\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace, mergeToPrev) {\n      if (mergeToPrev === void 0) {\n        mergeToPrev = true;\n      }\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      var newNode = mergeToPrev ? prevNode : nextNode;\n      var removeNode = mergeToPrev ? nextNode : prevNode;\n      if (mergeToPrev) {\n        newNode.appendData(removeNode.data);\n      } else {\n        newNode.insertData(0, removeNode.data);\n      }\n      remove(SugarElement.fromDom(removeNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(newNode, whitespaceOffset);\n      }\n      return newNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return isText$1(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return isText$1(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Optional.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? lastPositionIn(elm.previousSibling) : Optional.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Optional.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? firstPositionIn(elm.nextSibling) : Optional.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return prevPosition(rootElement, startPosition).fold(function () {\n        return nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Optional.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && has(editor.schema.getBlockElements(), name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (isEmpty(elm)) {\n        var br = SugarElement.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Optional.some(CaretPosition$1.before(br.dom));\n      } else {\n        return Optional.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom, nextNode = next.dom;\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom, elm.dom.length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom, 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom);\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Optional.some(paddPos));\n          }\n        });\n      }\n    };\n\n    var tableCellRng = function (start, end) {\n      return {\n        start: start,\n        end: end\n      };\n    };\n    var tableSelection = function (rng, table, cells) {\n      return {\n        rng: rng,\n        table: table,\n        cells: cells\n      };\n    };\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] },\n      {\n        deleteCellSelection: [\n          'rng',\n          'cell'\n        ]\n      }\n    ]);\n    var isRootFromElement = function (root) {\n      return function (cur) {\n        return eq$2(root, cur);\n      };\n    };\n    var getClosestCell = function (container, isRoot) {\n      return closest$1(SugarElement.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return !eq$2(cellRng.start, cellRng.end);\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end, isRoot).bind(function (endParentTable) {\n          return someIf(eq$2(startParentTable, endParentTable), startParentTable);\n        });\n      });\n    };\n    var isSingleCellTable = function (cellRng, isRoot) {\n      return !isExpandedCellRng(cellRng) && getTableFromCellRng(cellRng, isRoot).exists(function (table) {\n        var rows = table.dom.rows;\n        return rows.length === 1 && rows[0].cells.length === 1;\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng);\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start, isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start, endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return rng.collapsed ? Optional.none() : lift2(startCell, endCell, tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Optional.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelection = function (optCellRng, rng, isRoot) {\n      return optCellRng.filter(function (cellRng) {\n        return isExpandedCellRng(cellRng) && isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      }).bind(function (cRng) {\n        return getTableSelectionFromCellRng(cRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq$2(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells, tableSelection.rng.start), getCellIndex(tableSelection.cells, tableSelection.rng.end), function (startIndex, endIndex) {\n        return tableSelection.cells.slice(startIndex, endIndex + 1);\n      });\n    };\n    var isSingleCellTableContentSelected = function (optCellRng, rng, isRoot) {\n      return optCellRng.filter(function (cellRng) {\n        return isSingleCellTable(cellRng, isRoot) && hasAllContentsSelected(cellRng.start, rng);\n      }).map(function (cellRng) {\n        return cellRng.start;\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells;\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromRange = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      var optCellRng = getCellRng(rng, isRoot);\n      return isSingleCellTableContentSelected(optCellRng, rng, isRoot).map(function (cell) {\n        return deleteAction.deleteCellSelection(rng, cell);\n      }).orThunk(function () {\n        return getTableSelection(optCellRng, rng, isRoot).bind(getAction);\n      });\n    };\n\n    var freefallRtl = function (root) {\n      var child = isComment(root) ? prevSibling(root) : lastChild(root);\n      return child.bind(freefallRtl).orThunk(function () {\n        return Optional.some(root);\n      });\n    };\n    var emptyCells = function (editor, cells) {\n      each(cells, fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom, 0);\n      return true;\n    };\n    var deleteCellContents = function (editor, rng, cell) {\n      rng.deleteContents();\n      var lastNode = freefallRtl(cell).getOr(cell);\n      var lastBlock = SugarElement.fromDom(editor.dom.getParent(lastNode.dom, editor.dom.isBlock));\n      if (isEmpty(lastBlock)) {\n        fillWithPaddingBr(lastBlock);\n        editor.selection.setCursorLocation(lastBlock.dom, 0);\n      }\n      if (!eq$2(cell, lastBlock)) {\n        var additionalCleanupNodes = parent(lastBlock).is(cell) ? [] : siblings(lastBlock);\n        each(additionalCleanupNodes.concat(children(cell)), function (node) {\n          if (!eq$2(node, lastBlock) && !contains$2(node, lastBlock)) {\n            remove(node);\n          }\n        });\n      }\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor), curry(deleteCellContents, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange = function (editor, startElm) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(parentsAndSelf(elm, rootElm), isTableCell$1);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCell) {\n          return eq$2(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom, 0);\n      return Optional.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return firstPositionIn(fromCaption.dom).bind(function (first) {\n        return lastPositionIn(fromCaption.dom).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, SugarElement.fromDom(to.getNode())).map(function (toCaption) {\n        return eq$2(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Optional.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return isEmpty(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      }).getOr(false);\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isEmpty(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var isNearTable = function (forward, pos) {\n      return forward ? isBeforeTable(pos) : isAfterTable(pos);\n    };\n    var isBeforeOrAfterTable = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return isNearTable(forward, fromPos) || fromPosition(forward, editor.getBody(), fromPos).exists(function (pos) {\n        return isNearTable(forward, pos);\n      });\n    };\n    var deleteCaret = function (editor, forward, startElm) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm) || isBeforeOrAfterTable(editor, forward);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption).getOr(false);\n      });\n    };\n    var backspaceDelete = function (editor, forward) {\n      var startElm = SugarElement.fromDom(editor.selection.getStart(true));\n      var cells = getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret(editor, forward, startElm) : deleteRange(editor, startElm);\n    };\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize$2 = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n\n    var hasOnlyOneChild = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === nbsp;\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === nbsp || isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n\n    var trimOrPadLeftRight = function (dom, rng, html) {\n      var root = SugarElement.fromDom(dom.getRoot());\n      if (needsToBeNbspLeft(root, CaretPosition$1.fromRangeStart(rng))) {\n        html = html.replace(/^ /, '&nbsp;');\n      } else {\n        html = html.replace(/^&nbsp;/, ' ');\n      }\n      if (needsToBeNbspRight(root, CaretPosition$1.fromRangeEnd(rng))) {\n        html = html.replace(/(&nbsp;| )(<br( \\/)>)?$/, '&nbsp;');\n      } else {\n        html = html.replace(/&nbsp;(<br( \\/)?>)?$/, ' ');\n      }\n      return html;\n    };\n\n    var isTableCell$4 = isTableCell;\n    var isTableCellContentSelected = function (dom, rng, cell) {\n      if (cell !== null) {\n        var endCell = dom.getParent(rng.endContainer, isTableCell$4);\n        return cell === endCell && hasAllContentsSelected(SugarElement.fromDom(cell), rng);\n      } else {\n        return false;\n      }\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          editor.selection.setContent(value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Optional.from(dom.getParent(elm, 'td,th')).map(SugarElement.fromDom).each(trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var unmarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      selection.scrollIntoView(marker);\n      var parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      var node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      var parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$4(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var deleteSelectedContent = function (editor) {\n      var dom = editor.dom;\n      var rng = normalize$2(editor.selection.getRng());\n      editor.selection.setRng(rng);\n      var startCell = dom.getParent(rng.startContainer, isTableCell$4);\n      if (isTableCellContentSelected(dom, rng, startCell)) {\n        deleteCellContents(editor, rng, SugarElement.fromDom(startCell));\n      } else {\n        editor.getDoc().execCommand('Delete', false, null);\n      }\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parentNode, rootNode, args;\n      var marker, rng, node;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(dom, selection.getRng(), value);\n      }\n      var parser = editor.parser;\n      var merge = details.merge;\n      var serializer = HtmlSerializer({ validate: shouldValidate(editor) }, editor.schema);\n      var bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        deleteSelectedContent(editor);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      var fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && isListFragment(editor.schema, fragment) && isParentBlockLi(dom, parentNode)) {\n        rng = insertAtCaret(serializer, dom, selection.getRng(), fragment);\n        selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        editor.selection.setContent(bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      unmarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(dom, selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name_1 in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name_1)) {\n          matches.push(nodeMatches[name_1]);\n        }\n      }\n      for (var name_2 in attrMatches) {\n        if (attrMatches.hasOwnProperty(name_2)) {\n          matches.push(attrMatches[name_2]);\n        }\n      }\n      return matches;\n    };\n    var filter$3 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof AstNode;\n    };\n    var moveSelection = function (editor) {\n      if (hasFocus$1(editor)) {\n        firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable(node) ? firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, getForcedRootBlockAttrs(editor), content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$3(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(SugarElement.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContentInternal = function (editor, content, args) {\n      args.format = args.format ? args.format : defaultFormat;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!args.no_events) {\n        editor.fire('BeforeSetContent', args);\n      }\n      if (!isTreeNode(content)) {\n        content = args.content;\n      }\n      return Optional.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var addVisualInternal = function (editor, elm) {\n      var dom = editor.dom;\n      var scope = isNonNullable(elm) ? elm : editor.getBody();\n      if (isUndefined(editor.hasVisual)) {\n        editor.hasVisual = isVisualAidsEnabled(editor);\n      }\n      each(dom.select('table,a', scope), function (matchedElm) {\n        switch (matchedElm.nodeName) {\n        case 'TABLE':\n          var cls = getVisualAidsTableClass(editor);\n          var value = dom.getAttrib(matchedElm, 'border');\n          if ((!value || value === '0') && editor.hasVisual) {\n            dom.addClass(matchedElm, cls);\n          } else {\n            dom.removeClass(matchedElm, cls);\n          }\n          break;\n        case 'A':\n          if (!dom.getAttrib(matchedElm, 'href')) {\n            var value_1 = dom.getAttrib(matchedElm, 'name') || matchedElm.id;\n            var cls_1 = getVisualAidsAnchorClass(editor);\n            if (value_1 && editor.hasVisual) {\n              dom.addClass(matchedElm, cls_1);\n            } else {\n              dom.removeClass(matchedElm, cls_1);\n            }\n          }\n          break;\n        }\n      });\n      editor.fire('VisualAid', {\n        element: elm,\n        hasVisual: editor.hasVisual\n      });\n    };\n\n    var sibling$2 = function (scope, predicate) {\n      return sibling(scope, predicate).isSome();\n    };\n\n    var ZWSP$1 = ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      if (node) {\n        var walker = new DomTreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (isText$1(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = SugarElement.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, SugarElement.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        deleteElement(editor, false, SugarElement.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        var textNode = trimZwspFromCaretContainer(node);\n        dom.remove(node, true);\n        if (startContainer === textNode && startOffset > 0) {\n          rng.setStart(textNode, startOffset - 1);\n        }\n        if (endContainer === textNode && endOffset > 0) {\n          rng.setEnd(textNode, endOffset - 1);\n        }\n        if (block && dom.isEmpty(block)) {\n          fillWithPaddingBr(SugarElement.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(isTextBlock$1, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        removeTrailingBr(SugarElement.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var cleanFormatNode = function (editor, caretContainer, formatNode, name, vars, similar) {\n      var formatter = editor.formatter;\n      var dom = editor.dom;\n      var validFormats = filter(keys(formatter.get()), function (formatName) {\n        return formatName !== name && !contains$1(formatName, 'removeformat');\n      });\n      var matchedFormats = matchAllOnNode(editor, formatNode, validFormats);\n      var uniqueFormats = filter(matchedFormats, function (fmtName) {\n        return !areSimilarFormats(editor, fmtName, name);\n      });\n      if (uniqueFormats.length > 0) {\n        var clonedFormatNode = formatNode.cloneNode(false);\n        dom.add(caretContainer, clonedFormatNode);\n        formatter.remove(name, vars, clonedFormatNode, similar);\n        dom.remove(clonedFormatNode);\n        return Optional.some(clonedFormatNode);\n      } else {\n        return Optional.none();\n      }\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var caretContainer, textNode;\n      var selection = editor.selection;\n      var selectionRng = selection.getRng();\n      var offset = selectionRng.startOffset;\n      var container = selectionRng.startContainer;\n      var text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        var bookmark = selection.getBookmark();\n        selectionRng.collapse(true);\n        var rng = expandRng(editor, selectionRng, editor.formatter.get(name));\n        rng = split$1(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom);\n          textNode = caretContainer.firstChild;\n          selectionRng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom;\n      var selection = editor.selection;\n      var hasContentAfter, node, formatNode;\n      var parents = [];\n      var rng = selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        var bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = split$1(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng, similar);\n        selection.moveToBookmark(bookmark);\n      } else {\n        var caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom;\n        insertCaretContainerNode(editor, newCaretContainer, caretContainer !== null ? caretContainer : formatNode);\n        var cleanedFormatNode = cleanFormatNode(editor, newCaretContainer, formatNode, name, vars, similar);\n        var caretTextNode = insertFormatNodesIntoCaretContainer(parents.concat(cleanedFormatNode.toArray()), newCaretContainer);\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretTextNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$3 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom);\n      before(SugarElement.fromDom(targetNode), caretContainer);\n      remove(SugarElement.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom) && !isBogus(element.dom);\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom) && isCaretContainerEmpty(element.dom);\n    };\n\n    var postProcessHooks = {};\n    var filter$4 = filter$2;\n    var each$8 = each$2;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$8(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && indexOf$1(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      var isPre = matchNodeNames(['pre']);\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$8(filter$4(filter$4(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n\n    var each$9 = Tools.each;\n    var isElementNode = function (node) {\n      return isElement$1(node) && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (isText$1(sibling) && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (isElement$1(sibling) && !isBookmarkNode$1(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        var newNode = mergeSiblingsNodes(dom, getNonWhiteSpaceSibling(node), node);\n        mergeSiblingsNodes(dom, newNode, getNonWhiteSpaceSibling(newNode, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$9(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$9(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var processChildElements = function (node, filter, process) {\n      each$9(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var hasStyle = function (dom, name) {\n      return function (node) {\n        return !!(node && getStyle(dom, node, name));\n      };\n    };\n    var applyStyle = function (dom, name, value) {\n      return function (node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      };\n    };\n\n    var removeResult = Adt.generate([\n      { keep: [] },\n      { rename: ['name'] },\n      { removed: [] }\n    ]);\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$a = Tools.each;\n    var isEq$3 = isEq;\n    var isTableCellOrRow = function (node) {\n      return /^(TR|TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (isElement$1(container)) {\n        var lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (isText$1(container) && start && offset >= container.nodeValue.length) {\n        container = new DomTreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (isText$1(container) && !start && offset === 0) {\n        container = new DomTreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var normalizeTableSelection = function (node, start) {\n      var prop = start ? 'firstChild' : 'lastChild';\n      if (isTableCellOrRow(node) && node[prop]) {\n        var childNode = node[prop];\n        if (node.nodeName === 'TR') {\n          return childNode[prop] || childNode;\n        } else {\n          return childNode;\n        }\n      }\n      return node;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = SugarElement.fromDom(node);\n      var wrapper = SugarElement.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom;\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$3(node, format.inline)) {\n        return true;\n      }\n      if (isEq$3(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return isElement$1(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.nodeName === 'A';\n    };\n    var find$3 = function (dom, node, next, inc) {\n      node = getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = getForcedRootBlock(ed);\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$3(dom, node, false) && !find$3(dom, node.firstChild, true, true)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$3(dom, node, true) && !find$3(dom, node.lastChild, false, true)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$3(node, format.list_block)) {\n              each(from$1(node.childNodes), function (node) {\n                if (isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$3(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, true);\n    };\n    var removeFormatInternal = function (ed, format, vars, node, compareNode) {\n      var stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return removeResult.keep();\n      }\n      var elm = node;\n      if (format.inline && format.remove === 'all' && isArray(format.preserve_attributes)) {\n        var attrsToPreserve = filter(dom.getAttribs(elm), function (attr) {\n          return contains(format.preserve_attributes, attr.name.toLowerCase());\n        });\n        dom.removeAllAttribs(elm);\n        each(attrsToPreserve, function (attr) {\n          return dom.setAttrib(elm, attr.name, attr.value);\n        });\n        if (attrsToPreserve.length > 0) {\n          return removeResult.rename('span');\n        }\n      }\n      if (format.remove !== 'all') {\n        each$a(format.styles, function (value, name) {\n          value = normalizeStyleValue(dom, replaceVars(value, vars), name + '');\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$3(getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(elm, name, '');\n          }\n          stylesModified = true;\n        });\n        if (stylesModified && dom.getAttrib(elm, 'style') === '') {\n          elm.removeAttribute('style');\n          elm.removeAttribute('data-mce-style');\n        }\n        each$a(format.attributes, function (value, name) {\n          var valueOut;\n          value = replaceVars(value, vars);\n          if (isNumber(name)) {\n            name = value;\n            compareNode = null;\n          }\n          if (format.remove_similar || (!compareNode || isEq$3(dom.getAttrib(compareNode, name), value))) {\n            if (name === 'class') {\n              value = dom.getAttrib(elm, name);\n              if (value) {\n                valueOut = '';\n                each(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(elm, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              elm.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              elm.removeAttribute('data-mce-' + name);\n            }\n            elm.removeAttribute(name);\n          }\n        });\n        each$a(format.classes, function (value) {\n          value = replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(elm, value);\n          }\n        });\n        var attrs = dom.getAttribs(elm);\n        for (var i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return removeResult.keep();\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, elm, format);\n        return removeResult.removed();\n      }\n      return removeResult.keep();\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      return removeFormatInternal(ed, format, vars, node, compareNode).fold(never, function (newName) {\n        ed.dom.rename(node, newName);\n        return true;\n      }, always);\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each(getParents$1(editor.dom, container.parentNode).reverse(), function (parent) {\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          var format = matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var removeFormatFromClone = function (editor, format, vars, clone) {\n      return removeFormatInternal(editor, format, vars, clone, clone).fold(constant(clone), function (newName) {\n        var fragment = editor.dom.createFragment();\n        fragment.appendChild(clone);\n        return editor.dom.rename(clone, newName);\n      }, constant(null));\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var clone, lastClone, firstClone;\n      var dom = editor.dom;\n      if (formatRoot) {\n        var formatRootParent = formatRoot.parentNode;\n        for (var parent_1 = container.parentNode; parent_1 && parent_1 !== formatRootParent; parent_1 = parent_1.parentNode) {\n          clone = dom.clone(parent_1, false);\n          for (var i = 0; i < formatList.length; i++) {\n            clone = removeFormatFromClone(editor, formatList[i], vars, clone);\n            if (clone === null) {\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n          if (format.inline) {\n            mergeSiblings(dom, format, vars, lastClone);\n          }\n        }\n      }\n      return container;\n    };\n    var remove$6 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return isBookmarkNode$1(node) && isElement$1(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var lastContentEditable, hasContentEditableState;\n        if (isElement$1(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        var children = from$1(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (var i = 0; i < formatList.length; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (var i = 0; i < children.length; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (isText$1(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var expandedRng = expandRng(ed, rng, formatList, rng.collapsed);\n        if (format.split) {\n          expandedRng = split$1(expandedRng);\n          startContainer = getContainer(ed, expandedRng, true);\n          endContainer = getContainer(ed, expandedRng);\n          if (startContainer !== endContainer) {\n            startContainer = normalizeTableSelection(startContainer, true);\n            endContainer = normalizeTableSelection(endContainer, false);\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Optional.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Optional.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            var newRng = dom.createRng();\n            newRng.setStartAfter(startContainer);\n            newRng.setEndBefore(endContainer);\n            walk$1(dom, newRng, function (nodes) {\n              each(nodes, function (n) {\n                if (!isBookmarkNode$1(n) && !isBookmarkNode$1(n.parentNode)) {\n                  splitToFormatRoot(n);\n                }\n              });\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          expandedRng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          expandedRng.startOffset = dom.nodeIndex(startContainer);\n          expandedRng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          expandedRng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        walk$1(dom, expandedRng, function (nodes) {\n          each(nodes, function (node) {\n            process(node);\n            var textDecorations = [\n              'underline',\n              'line-through',\n              'overline'\n            ];\n            each(textDecorations, function (decoration) {\n              if (isElement$1(node) && ed.dom.getStyle(node, 'text-decoration') === decoration && node.parentNode && getTextDecoration(dom, node.parentNode) === decoration) {\n                removeFormat(ed, {\n                  deep: false,\n                  exact: true,\n                  inline: 'span',\n                  styles: { textDecoration: decoration }\n                }, null, node);\n              }\n            });\n          });\n        });\n      };\n      if (node) {\n        if (isNode(node)) {\n          var rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || getCellsFromEditor(ed).length) {\n        preserve(selection, true, function () {\n          runOnRanges(ed, removeRngStyle);\n        });\n        if (format.inline && match(ed, name, vars, selection.getStart())) {\n          moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n\n    var each$b = Tools.each;\n    var mergeTextDecorationsAndColor = function (dom, format, vars, node) {\n      var processTextDecorationsAndColor = function (n) {\n        if (n.nodeType === 1 && n.parentNode && n.parentNode.nodeType === 1) {\n          var textDecoration = getTextDecoration(dom, n.parentNode);\n          if (dom.getStyle(n, 'color') && textDecoration) {\n            dom.setStyle(n, 'text-decoration', textDecoration);\n          } else if (dom.getStyle(n, 'text-decoration') === textDecoration) {\n            dom.setStyle(n, 'text-decoration', null);\n          }\n        }\n      };\n      if (format.styles && (format.styles.color || format.styles.textDecoration)) {\n        Tools.walk(node, processTextDecorationsAndColor, 'childNodes');\n        processTextDecorationsAndColor(node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$b(formatList, function (format) {\n        each$b(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (matchNode(editor, node.parentNode, name, vars)) {\n        if (removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (matchNode(editor, parent, name, vars)) {\n            removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n\n    var each$c = Tools.each;\n    var hasFormatProperty = function (format, prop) {\n      return hasNonNullableKey(format, prop);\n    };\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !isBookmarkNode$1(node) && !isCaretNode(node) && !isBogus(node);\n    };\n    var canFormatBR = function (editor, format, node, parentName) {\n      if (canFormatEmptyLines(editor) && isInlineFormat(format)) {\n        var validBRParentElements = __assign(__assign({}, editor.schema.getTextBlockElements()), {\n          td: {},\n          th: {},\n          li: {},\n          dt: {},\n          dd: {},\n          figcaption: {},\n          caption: {},\n          details: {},\n          summary: {}\n        });\n        var hasCaretNodeSibling = sibling$2(SugarElement.fromDom(node), function (sibling) {\n          return isCaretNode(sibling.dom);\n        });\n        return hasNonNullableKey(validBRParentElements, parentName) && isEmpty(SugarElement.fromDom(node.parentNode), false) && !hasCaretNodeSibling;\n      } else {\n        return false;\n      }\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$c(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              dom.setAttrib(elm, 'data-mce-style', styleVal);\n            }\n          }\n          each$c(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, replaceVars(value, vars));\n          });\n          each$c(fmt.classes, function (value) {\n            value = replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!isSelectorFormat(format)) {\n          return false;\n        }\n        each$c(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var contentEditable = true;\n        var wrapName = format.inline || format.block;\n        var wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        walk$1(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var hasContentEditableState = false;\n            var lastContentEditable = contentEditable;\n            var nodeName = node.nodeName.toLowerCase();\n            var parentName = node.parentNode.nodeName.toLowerCase();\n            if (isElement$1(node) && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (isBr(node) && !canFormatBR(ed, format, node, parentName)) {\n              currentWrapElm = null;\n              if (isBlockFormat(format)) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && matchNode(ed, node, name, vars)) {\n              currentWrapElm = null;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && isBlockFormat(format) && !format.wrapper && isTextBlock$1(ed, nodeName) && isValid(ed, parentName, wrapName)) {\n              var elm = dom.rename(node, wrapName);\n              setElementFormat(elm);\n              newWrappers.push(elm);\n              currentWrapElm = null;\n              return;\n            }\n            if (isSelectorFormat(format)) {\n              var found = applyNodeStyle(formatList, node);\n              if (!hasFormatProperty(format, 'inline') || found) {\n                currentWrapElm = null;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && isValid(ed, wrapName, nodeName) && isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!hasFormatProperty(format, 'inline') || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = null;\n              each$c(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = null;\n            }\n          };\n          each$c(nodes, process);\n        });\n        if (format.links === true) {\n          each$c(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$c(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$c(newWrappers, function (node) {\n          var getChildCount = function (node) {\n            var count = 0;\n            each$c(node.childNodes, function (node) {\n              if (!isEmptyTextNode(node) && !isBookmarkNode$1(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$c(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var clone;\n            var child = getChildElementNode(node);\n            if (child && !isBookmarkNode$1(child) && matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, true);\n            }\n            return clone || node;\n          };\n          var childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, true);\n            return;\n          }\n          if (isInlineFormat(format) || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            mergeWithChildren(ed, formatList, vars, node);\n            mergeWithParents(ed, format, name, vars, node);\n            mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            mergeTextDecorationsAndColor(dom, format, vars, node);\n            mergeSubSup(dom, format, vars, node);\n            mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          var formatItem = formatList[i];\n          if (formatItem.ceFalseOverride && isSelectorFormat(formatItem) && dom.is(node, formatItem.selector)) {\n            setElementFormat(node, formatItem);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (isNode(node)) {\n            if (!applyNodeStyle(formatList, node)) {\n              var rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !isInlineFormat(format) || getCellsFromEditor(ed).length) {\n            var curSelNode = selection.getNode();\n            var firstFormat = formatList[0];\n            if (!ed.settings.forced_root_block && firstFormat.defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, firstFormat.defaultBlock);\n            }\n            selection.setRng(normalize$2(selection.getRng()));\n            preserve(selection, true, function (bookmark) {\n              runOnRanges(ed, function (selectionRng, fake) {\n                var expandedRng = fake ? selectionRng : expandRng(ed, selectionRng, formatList);\n                applyRngStyle(dom, expandedRng);\n              });\n            });\n            moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        postProcess(name, ed);\n      }\n    };\n\n    var setup$4 = function (registeredFormatListeners, editor) {\n      var currentFormats = Cell({});\n      registeredFormatListeners.set({});\n      editor.on('NodeChange', function (e) {\n        updateAndFireChangeCallbacks(editor, e.element, currentFormats, registeredFormatListeners.get());\n      });\n    };\n    var updateAndFireChangeCallbacks = function (editor, elm, currentFormats, formatChangeData) {\n      var formatsList = keys(currentFormats.get());\n      var newFormats = {};\n      var matchedFormats = {};\n      var parents = filter(getParents$1(editor.dom, elm), function (node) {\n        return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n      });\n      each$1(formatChangeData, function (data, format) {\n        Tools.each(parents, function (node) {\n          if (editor.formatter.matchNode(node, format, {}, data.similar)) {\n            if (formatsList.indexOf(format) === -1) {\n              each(data.callbacks, function (callback) {\n                callback(true, {\n                  node: node,\n                  format: format,\n                  parents: parents\n                });\n              });\n              newFormats[format] = data.callbacks;\n            }\n            matchedFormats[format] = data.callbacks;\n            return false;\n          }\n          if (matchesUnInheritedFormatSelector(editor, node, format)) {\n            return false;\n          }\n        });\n      });\n      var remainingFormats = filterRemainingFormats(currentFormats.get(), matchedFormats, elm, parents);\n      currentFormats.set(__assign(__assign({}, newFormats), remainingFormats));\n    };\n    var filterRemainingFormats = function (currentFormats, matchedFormats, elm, parents) {\n      return bifilter(currentFormats, function (callbacks, format) {\n        if (!has(matchedFormats, format)) {\n          each(callbacks, function (callback) {\n            callback(false, {\n              node: elm,\n              format: format,\n              parents: parents\n            });\n          });\n          return false;\n        } else {\n          return true;\n        }\n      }).t;\n    };\n    var addListeners = function (registeredFormatListeners, formats, callback, similar) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = {\n            similar: similar,\n            callbacks: []\n          };\n        }\n        formatChangeItems[format].callbacks.push(callback);\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var removeListeners = function (registeredFormatListeners, formats, callback) {\n      var formatChangeItems = registeredFormatListeners.get();\n      each(formats.split(','), function (format) {\n        formatChangeItems[format].callbacks = filter(formatChangeItems[format].callbacks, function (c) {\n          return c !== callback;\n        });\n        if (formatChangeItems[format].callbacks.length === 0) {\n          delete formatChangeItems[format];\n        }\n      });\n      registeredFormatListeners.set(formatChangeItems);\n    };\n    var formatChangedInternal = function (editor, registeredFormatListeners, formats, callback, similar) {\n      if (registeredFormatListeners.get() === null) {\n        setup$4(registeredFormatListeners, editor);\n      }\n      addListeners(registeredFormatListeners, formats, callback, similar);\n      return {\n        unbind: function () {\n          return removeListeners(registeredFormatListeners, formats, callback);\n        }\n      };\n    };\n\n    var toggle = function (editor, name, vars, node) {\n      var fmt = editor.formatter.get(name);\n      if (match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        remove$6(editor, name, vars, node);\n      } else {\n        applyFormat(editor, name, vars, node);\n      }\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom);\n      });\n      return SugarElement.fromDom(fragment);\n    };\n\n    var tableModel = function (element, width, rows) {\n      return {\n        element: element,\n        width: width,\n        rows: rows\n      };\n    };\n    var tableRow = function (element, cells) {\n      return {\n        element: element,\n        cells: cells\n      };\n    };\n    var cellPosition = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var getSpan = function (td, key) {\n      var value = parseInt(get$4(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows;\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells;\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows;\n      var cells = rows[y] ? rows[y].cells : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells.length > acc ? row.cells.length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows;\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells;\n        for (var x = 0; x < cells.length; x++) {\n          if (eq$2(cells[x], element)) {\n            return Optional.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Optional.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows;\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells;\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element, slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x, sy = startPos.y;\n      var ex = endPos.x, ey = endPos.y;\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element, getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element);\n      var tableBody = SugarElement.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows, function (row) {\n        var cells = map(row.cells, function (cell) {\n          var td = deep(cell);\n          remove$1(td, 'colspan');\n          remove$1(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element);\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element, getWidth(table.rows), table.rows);\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (_li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          var listElm = SugarElement.fromTag(name(listCont));\n          var listStyles = filter$1(getAllRaw(listCont), function (_style, name) {\n            return startsWith(name, 'list-style');\n          });\n          setAll$1(listElm, listStyles);\n          return [\n            SugarElement.fromTag('li'),\n            listElm\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = SugarElement.fromDom(rng.commonAncestorContainer);\n      var parents = parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(SugarElement.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq$2, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = fromDom$1(tableElm);\n        return subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$1 = function (rootNode, ranges) {\n      var selectedCells = getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n\n    var trimLeadingCollapsibleText = function (text) {\n      return text.replace(/^[ \\f\\n\\r\\t\\v]+/, '');\n    };\n    var isCollapsibleWhitespace = function (text, index) {\n      return index >= 0 && index < text.length && isWhiteSpace$1(text.charAt(index));\n    };\n    var getInnerText = function (bin, shouldTrim) {\n      var text = trim$2(bin.innerText);\n      return shouldTrim ? trimLeadingCollapsibleText(text) : text;\n    };\n    var getContextNodeName = function (parentBlockOpt) {\n      return parentBlockOpt.map(function (block) {\n        return block.nodeName;\n      }).getOr('div').toLowerCase();\n    };\n    var getTextContent = function (editor) {\n      return Optional.from(editor.selection.getRng()).map(function (rng) {\n        var parentBlockOpt = Optional.from(editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock));\n        var body = editor.getBody();\n        var contextNodeName = getContextNodeName(parentBlockOpt);\n        var shouldTrimSpaces = Env.browser.isIE() && contextNodeName !== 'pre';\n        var bin = editor.dom.add(body, contextNodeName, {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = getInnerText(bin, shouldTrimSpaces);\n        var nonRenderedText = trim$2(bin.textContent);\n        editor.dom.remove(bin);\n        if (isCollapsibleWhitespace(nonRenderedText, 0) || isCollapsibleWhitespace(nonRenderedText, nonRenderedText.length - 1)) {\n          var parentBlock = parentBlockOpt.getOr(body);\n          var parentBlockText = getInnerText(parentBlock, shouldTrimSpaces);\n          var textIndex = parentBlockText.indexOf(text);\n          if (textIndex === -1) {\n            return text;\n          } else {\n            var hasProceedingSpace = isCollapsibleWhitespace(parentBlockText, textIndex - 1);\n            var hasTrailingSpace = isCollapsibleWhitespace(parentBlockText, textIndex + text.length);\n            return (hasProceedingSpace ? ' ' : '') + text + (hasTrailingSpace ? ' ' : '');\n          }\n        } else {\n          return text;\n        }\n      }).getOr('');\n    };\n    var getSerializedContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var ranges = processRanges(editor, getRanges(sel));\n      var fragment = args.contextual ? read$1(SugarElement.fromDom(editor.getBody()), ranges).dom : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getSelectedContentInternal = function (editor, format, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = format;\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getSerializedContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n\n    var getOuterHtml = function (elm) {\n      if (isElement$1(elm)) {\n        return elm.outerHTML;\n      } else if (isText$1(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (isComment$1(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var node;\n      var container = document.createElement('div');\n      var frag = document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === KEEP) {\n          index++;\n        } else if (action[0] === INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$2 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(diff(currentFragments, fragments), elm);\n      return elm;\n    };\n\n    var undoLevelDocument = Cell(Optional.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Optional.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments = read$2(editor.getBody());\n      var trimmedFragments = bind(fragments, function (html) {\n        var trimmed = trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      var content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = SugarElement.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$7(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$4 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n\n    var isUnlocked = function (locks) {\n      return locks.get() === 0;\n    };\n\n    var setTyping = function (undoManager, typing, locks) {\n      if (isUnlocked(locks)) {\n        undoManager.typing = typing;\n      }\n    };\n    var endTyping = function (undoManager, locks) {\n      if (undoManager.typing) {\n        setTyping(undoManager, false, locks);\n        undoManager.add();\n      }\n    };\n    var endTypingLevelIgnoreLocks = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n\n    var beforeChange = function (editor, locks, beforeBookmark) {\n      if (isUnlocked(locks)) {\n        beforeBookmark.set(Optional.some(getUndoBookmark(editor.selection)));\n      }\n    };\n    var addUndoLevel = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      var currentLevel = createFromEditor(editor);\n      level = level || {};\n      level = Tools.extend(level, currentLevel);\n      if (isUnlocked(locks) === false || editor.removed) {\n        return null;\n      }\n      var lastLevel = undoManager.data[index.get()];\n      if (editor.fire('BeforeAddUndo', {\n          level: level,\n          lastLevel: lastLevel,\n          originalEvent: event\n        }).isDefaultPrevented()) {\n        return null;\n      }\n      if (lastLevel && isEq$4(lastLevel, level)) {\n        return null;\n      }\n      if (undoManager.data[index.get()]) {\n        beforeBookmark.get().each(function (bm) {\n          undoManager.data[index.get()].beforeBookmark = bm;\n        });\n      }\n      var customUndoRedoLevels = getCustomUndoRedoLevels(editor);\n      if (customUndoRedoLevels) {\n        if (undoManager.data.length > customUndoRedoLevels) {\n          for (var i = 0; i < undoManager.data.length - 1; i++) {\n            undoManager.data[i] = undoManager.data[i + 1];\n          }\n          undoManager.data.length--;\n          index.set(undoManager.data.length);\n        }\n      }\n      level.bookmark = getUndoBookmark(editor.selection);\n      if (index.get() < undoManager.data.length - 1) {\n        undoManager.data.length = index.get() + 1;\n      }\n      undoManager.data.push(level);\n      index.set(undoManager.data.length - 1);\n      var args = {\n        level: level,\n        lastLevel: lastLevel,\n        originalEvent: event\n      };\n      if (index.get() > 0) {\n        editor.setDirty(true);\n        editor.fire('AddUndo', args);\n        editor.fire('change', args);\n      } else {\n        editor.fire('AddUndo', args);\n      }\n      return level;\n    };\n    var clear = function (editor, undoManager, index) {\n      undoManager.data = [];\n      index.set(0);\n      undoManager.typing = false;\n      editor.fire('ClearUndos');\n    };\n    var extra = function (editor, undoManager, index, callback1, callback2) {\n      if (undoManager.transact(callback1)) {\n        var bookmark = undoManager.data[index.get()].bookmark;\n        var lastLevel = undoManager.data[index.get() - 1];\n        applyToEditor(editor, lastLevel, true);\n        if (undoManager.transact(callback2)) {\n          undoManager.data[index.get() - 1].beforeBookmark = bookmark;\n        }\n      }\n    };\n    var redo = function (editor, index, data) {\n      var level;\n      if (index.get() < data.length - 1) {\n        index.set(index.get() + 1);\n        level = data[index.get()];\n        applyToEditor(editor, level, false);\n        editor.setDirty(true);\n        editor.fire('Redo', { level: level });\n      }\n      return level;\n    };\n    var undo = function (editor, undoManager, locks, index) {\n      var level;\n      if (undoManager.typing) {\n        undoManager.add();\n        undoManager.typing = false;\n        setTyping(undoManager, false, locks);\n      }\n      if (index.get() > 0) {\n        index.set(index.get() - 1);\n        level = undoManager.data[index.get()];\n        applyToEditor(editor, level, true);\n        editor.setDirty(true);\n        editor.fire('Undo', { level: level });\n      }\n      return level;\n    };\n    var reset = function (undoManager) {\n      undoManager.clear();\n      undoManager.add();\n    };\n    var hasUndo = function (editor, undoManager, index) {\n      return index.get() > 0 || undoManager.typing && undoManager.data[0] && !isEq$4(createFromEditor(editor), undoManager.data[0]);\n    };\n    var hasRedo = function (undoManager, index) {\n      return index.get() < undoManager.data.length - 1 && !undoManager.typing;\n    };\n    var transact = function (undoManager, locks, callback) {\n      endTyping(undoManager, locks);\n      undoManager.beforeChange();\n      undoManager.ignore(callback);\n      return undoManager.add();\n    };\n    var ignore = function (locks, callback) {\n      try {\n        locks.set(locks.get() + 1);\n        callback();\n      } finally {\n        locks.set(locks.get() - 1);\n      }\n    };\n\n    var isTreeNode$1 = function (content) {\n      return content instanceof AstNode;\n    };\n    var runSerializerFiltersOnFragment = function (editor, fragment) {\n      filter$3(editor.serializer.getNodeFilters(), editor.serializer.getAttributeFilters(), fragment);\n    };\n    var getInsertContext = function (editor) {\n      return Optional.from(editor.selection.getStart(true)).map(function (elm) {\n        return elm.nodeName.toLowerCase();\n      });\n    };\n    var createDummyUndoLevel = function () {\n      return {\n        type: 'complete',\n        fragments: [],\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var makePlainAdaptor = function (editor) {\n      return {\n        undoManager: {\n          beforeChange: function (locks, beforeBookmark) {\n            return beforeChange(editor, locks, beforeBookmark);\n          },\n          addUndoLevel: function (undoManager, index, locks, beforeBookmark, level, event) {\n            return addUndoLevel(editor, undoManager, index, locks, beforeBookmark, level, event);\n          },\n          undo: function (undoManager, locks, index) {\n            return undo(editor, undoManager, locks, index);\n          },\n          redo: function (index, data) {\n            return redo(editor, index, data);\n          },\n          clear: function (undoManager, index) {\n            return clear(editor, undoManager, index);\n          },\n          reset: function (undoManager) {\n            return reset(undoManager);\n          },\n          hasUndo: function (undoManager, index) {\n            return hasUndo(editor, undoManager, index);\n          },\n          hasRedo: function (undoManager, index) {\n            return hasRedo(undoManager, index);\n          },\n          transact: function (undoManager, locks, callback) {\n            return transact(undoManager, locks, callback);\n          },\n          ignore: function (locks, callback) {\n            return ignore(locks, callback);\n          },\n          extra: function (undoManager, index, callback1, callback2) {\n            return extra(editor, undoManager, index, callback1, callback2);\n          }\n        },\n        formatter: {\n          match: function (name, vars, node) {\n            return match(editor, name, vars, node);\n          },\n          matchAll: function (names, vars) {\n            return matchAll(editor, names, vars);\n          },\n          matchNode: function (node, name, vars, similar) {\n            return matchNode(editor, node, name, vars, similar);\n          },\n          canApply: function (name) {\n            return canApply(editor, name);\n          },\n          closest: function (names) {\n            return closest$3(editor, names);\n          },\n          apply: function (name, vars, node) {\n            return applyFormat(editor, name, vars, node);\n          },\n          remove: function (name, vars, node, similar) {\n            return remove$6(editor, name, vars, node, similar);\n          },\n          toggle: function (name, vars, node) {\n            return toggle(editor, name, vars, node);\n          },\n          formatChanged: function (registeredFormatListeners, formats, callback, similar) {\n            return formatChangedInternal(editor, registeredFormatListeners, formats, callback, similar);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            return getContentInternal(editor, args, format);\n          },\n          setContent: function (content, args) {\n            return setContentInternal(editor, content, args);\n          },\n          insertContent: function (value, details) {\n            return insertHtmlAtCaret(editor, value, details);\n          },\n          addVisual: function (elm) {\n            return addVisualInternal(editor, elm);\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            return getSelectedContentInternal(editor, format, args);\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.none();\n          }\n        }\n      };\n    };\n    var makeRtcAdaptor = function (tinymceEditor, rtcEditor) {\n      var defaultVars = function (vars) {\n        return isObject(vars) ? vars : {};\n      };\n      var unsupported = die('Unimplemented feature for rtc');\n      var ignore = noop;\n      return {\n        undoManager: {\n          beforeChange: ignore,\n          addUndoLevel: unsupported,\n          undo: function () {\n            rtcEditor.undo();\n            return createDummyUndoLevel();\n          },\n          redo: function () {\n            rtcEditor.redo();\n            return createDummyUndoLevel();\n          },\n          clear: unsupported,\n          reset: unsupported,\n          hasUndo: function () {\n            return rtcEditor.hasUndo();\n          },\n          hasRedo: function () {\n            return rtcEditor.hasRedo();\n          },\n          transact: function (_undoManager, _locks, fn) {\n            rtcEditor.transact(fn);\n            return createDummyUndoLevel();\n          },\n          ignore: unsupported,\n          extra: unsupported\n        },\n        formatter: {\n          match: function (name, vars, _node) {\n            return rtcEditor.matchFormat(name, defaultVars(vars));\n          },\n          matchAll: unsupported,\n          matchNode: unsupported,\n          canApply: function (name) {\n            return rtcEditor.canApplyFormat(name);\n          },\n          closest: function (names) {\n            return rtcEditor.closestFormat(names);\n          },\n          apply: function (name, vars, _node) {\n            return rtcEditor.applyFormat(name, defaultVars(vars));\n          },\n          remove: function (name, vars, _node, _similar) {\n            return rtcEditor.removeFormat(name, defaultVars(vars));\n          },\n          toggle: function (name, vars, _node) {\n            return rtcEditor.toggleFormat(name, defaultVars(vars));\n          },\n          formatChanged: function (_rfl, formats, callback, similar) {\n            return rtcEditor.formatChanged(formats, callback, similar);\n          }\n        },\n        editor: {\n          getContent: function (args, format) {\n            if (format === 'html' || format === 'tree') {\n              var fragment = rtcEditor.getContent();\n              var serializer = HtmlSerializer({ inner: true });\n              runSerializerFiltersOnFragment(tinymceEditor, fragment);\n              return format === 'tree' ? fragment : serializer.serialize(fragment);\n            } else {\n              return makePlainAdaptor(tinymceEditor).editor.getContent(args, format);\n            }\n          },\n          setContent: function (content, _args) {\n            var fragment = isTreeNode$1(content) ? content : tinymceEditor.parser.parse(content, {\n              isRootContent: true,\n              insert: true\n            });\n            rtcEditor.setContent(fragment);\n            return content;\n          },\n          insertContent: function (value, _details) {\n            var contextArgs = getInsertContext(tinymceEditor).fold(function () {\n              return {};\n            }, function (context) {\n              return { context: context };\n            });\n            var fragment = isTreeNode$1(value) ? value : tinymceEditor.parser.parse(value, __assign(__assign({}, contextArgs), { insert: true }));\n            rtcEditor.insertContent(fragment);\n          },\n          addVisual: function (_elm) {\n          }\n        },\n        selection: {\n          getContent: function (format, args) {\n            if (format === 'html' || format === 'tree') {\n              var fragment = rtcEditor.getSelectedContent();\n              var serializer = HtmlSerializer({});\n              runSerializerFiltersOnFragment(tinymceEditor, fragment);\n              return format === 'tree' ? fragment : serializer.serialize(fragment);\n            } else {\n              return makePlainAdaptor(tinymceEditor).selection.getContent(format, args);\n            }\n          }\n        },\n        raw: {\n          getModel: function () {\n            return Optional.some(rtcEditor.getRawModel());\n          }\n        }\n      };\n    };\n    var isRtc = function (editor) {\n      return has(editor.plugins, 'rtc');\n    };\n    var setup$5 = function (editor) {\n      var editorCast = editor;\n      return get$1(editor.plugins, 'rtc').fold(function () {\n        editorCast.rtcInstance = makePlainAdaptor(editor);\n        return Optional.none();\n      }, function (rtc) {\n        return Optional.some(rtc.setup().then(function (rtcEditor) {\n          editorCast.rtcInstance = makeRtcAdaptor(editor, rtcEditor);\n          return rtcEditor.isRemote;\n        }));\n      });\n    };\n    var getRtcInstanceWithFallback = function (editor) {\n      return editor.rtcInstance ? editor.rtcInstance : makePlainAdaptor(editor);\n    };\n    var getRtcInstanceWithError = function (editor) {\n      var rtcInstance = editor.rtcInstance;\n      if (!rtcInstance) {\n        throw new Error('Failed to get RTC instance not yet initialized.');\n      } else {\n        return rtcInstance;\n      }\n    };\n    var beforeChange$1 = function (editor, locks, beforeBookmark) {\n      getRtcInstanceWithError(editor).undoManager.beforeChange(locks, beforeBookmark);\n    };\n    var addUndoLevel$1 = function (editor, undoManager, index, locks, beforeBookmark, level, event) {\n      return getRtcInstanceWithError(editor).undoManager.addUndoLevel(undoManager, index, locks, beforeBookmark, level, event);\n    };\n    var undo$1 = function (editor, undoManager, locks, index) {\n      return getRtcInstanceWithError(editor).undoManager.undo(undoManager, locks, index);\n    };\n    var redo$1 = function (editor, index, data) {\n      return getRtcInstanceWithError(editor).undoManager.redo(index, data);\n    };\n    var clear$1 = function (editor, undoManager, index) {\n      getRtcInstanceWithError(editor).undoManager.clear(undoManager, index);\n    };\n    var reset$1 = function (editor, undoManager) {\n      getRtcInstanceWithError(editor).undoManager.reset(undoManager);\n    };\n    var hasUndo$1 = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasUndo(undoManager, index);\n    };\n    var hasRedo$1 = function (editor, undoManager, index) {\n      return getRtcInstanceWithError(editor).undoManager.hasRedo(undoManager, index);\n    };\n    var transact$1 = function (editor, undoManager, locks, callback) {\n      return getRtcInstanceWithError(editor).undoManager.transact(undoManager, locks, callback);\n    };\n    var ignore$1 = function (editor, locks, callback) {\n      getRtcInstanceWithError(editor).undoManager.ignore(locks, callback);\n    };\n    var extra$1 = function (editor, undoManager, index, callback1, callback2) {\n      getRtcInstanceWithError(editor).undoManager.extra(undoManager, index, callback1, callback2);\n    };\n    var matchFormat = function (editor, name, vars, node) {\n      return getRtcInstanceWithError(editor).formatter.match(name, vars, node);\n    };\n    var matchAllFormats = function (editor, names, vars) {\n      return getRtcInstanceWithError(editor).formatter.matchAll(names, vars);\n    };\n    var matchNodeFormat = function (editor, node, name, vars, similar) {\n      return getRtcInstanceWithError(editor).formatter.matchNode(node, name, vars, similar);\n    };\n    var canApplyFormat = function (editor, name) {\n      return getRtcInstanceWithError(editor).formatter.canApply(name);\n    };\n    var closestFormat = function (editor, names) {\n      return getRtcInstanceWithError(editor).formatter.closest(names);\n    };\n    var applyFormat$1 = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.apply(name, vars, node);\n    };\n    var removeFormat$1 = function (editor, name, vars, node, similar) {\n      getRtcInstanceWithError(editor).formatter.remove(name, vars, node, similar);\n    };\n    var toggleFormat = function (editor, name, vars, node) {\n      getRtcInstanceWithError(editor).formatter.toggle(name, vars, node);\n    };\n    var formatChanged = function (editor, registeredFormatListeners, formats, callback, similar) {\n      if (similar === void 0) {\n        similar = false;\n      }\n      return getRtcInstanceWithError(editor).formatter.formatChanged(registeredFormatListeners, formats, callback, similar);\n    };\n    var getContent = function (editor, args, format) {\n      return getRtcInstanceWithFallback(editor).editor.getContent(args, format);\n    };\n    var setContent = function (editor, content, args) {\n      return getRtcInstanceWithFallback(editor).editor.setContent(content, args);\n    };\n    var insertContent = function (editor, value, details) {\n      return getRtcInstanceWithFallback(editor).editor.insertContent(value, details);\n    };\n    var getSelectedContent = function (editor, format, args) {\n      return getRtcInstanceWithError(editor).selection.getContent(format, args);\n    };\n    var addVisual = function (editor, elm) {\n      return getRtcInstanceWithError(editor).editor.addVisual(elm);\n    };\n\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : 'html';\n      return getSelectedContent(editor, format, args);\n    };\n\n    var removeEmpty = function (text) {\n      if (text.dom.length === 0) {\n        remove(text);\n        return Optional.none();\n      } else {\n        return Optional.some(text);\n      }\n    };\n    var walkPastBookmark = function (node, start) {\n      return node.filter(function (elm) {\n        return BookmarkManager$1.isBookmarkNode(elm.dom);\n      }).bind(start ? nextSibling : prevSibling);\n    };\n    var merge = function (outer, inner, rng, start) {\n      var outerElm = outer.dom;\n      var innerElm = inner.dom;\n      var oldLength = start ? outerElm.length : innerElm.length;\n      if (start) {\n        mergeTextNodes(outerElm, innerElm, false, !start);\n        rng.setStart(innerElm, oldLength);\n      } else {\n        mergeTextNodes(innerElm, outerElm, false, !start);\n        rng.setEnd(innerElm, oldLength);\n      }\n    };\n    var normalizeTextIfRequired = function (inner, start) {\n      parent(inner).each(function (root) {\n        var text = inner.dom;\n        if (start && needsToBeNbspLeft(root, CaretPosition$1(text, 0))) {\n          normalizeWhitespaceAfter(text, 0);\n        } else if (!start && needsToBeNbspRight(root, CaretPosition$1(text, text.length))) {\n          normalizeWhitespaceBefore(text, text.length);\n        }\n      });\n    };\n    var mergeAndNormalizeText = function (outerNode, innerNode, rng, start) {\n      outerNode.bind(function (outer) {\n        var normalizer = start ? normalizeWhitespaceBefore : normalizeWhitespaceAfter;\n        normalizer(outer.dom, start ? outer.dom.length : 0);\n        return innerNode.filter(isText).map(function (inner) {\n          return merge(outer, inner, rng, start);\n        });\n      }).orThunk(function () {\n        var innerTextNode = walkPastBookmark(innerNode, start).or(innerNode).filter(isText);\n        return innerTextNode.map(function (inner) {\n          return normalizeTextIfRequired(inner, start);\n        });\n      });\n    };\n    var rngSetContent = function (rng, fragment) {\n      var firstChild = Optional.from(fragment.firstChild).map(SugarElement.fromDom);\n      var lastChild = Optional.from(fragment.lastChild).map(SugarElement.fromDom);\n      rng.deleteContents();\n      rng.insertNode(fragment);\n      var prevText = firstChild.bind(prevSibling).filter(isText).bind(removeEmpty);\n      var nextText = lastChild.bind(nextSibling).filter(isText).bind(removeEmpty);\n      mergeAndNormalizeText(prevText, firstChild, rng, true);\n      mergeAndNormalizeText(nextText, lastChild, rng, false);\n      rng.collapse(false);\n    };\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var rng = editor.selection.getRng();\n        var contextBlock = editor.dom.getParent(rng.commonAncestorContainer, editor.dom.isBlock);\n        var contextArgs = contextBlock ? { context: contextBlock.nodeName.toLowerCase() } : {};\n        var node = editor.parser.parse(args.content, __assign(__assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, contextArgs), args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var contentArgs = setupArgs(args, content);\n      if (!contentArgs.no_events) {\n        contentArgs = editor.fire('BeforeSetContent', contentArgs);\n        if (contentArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', contentArgs);\n          return;\n        }\n      }\n      args.content = cleanContent(editor, contentArgs);\n      var rng = editor.selection.getRng();\n      rngSetContent(rng, rng.createContextualFragment(args.content));\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n      if (!contentArgs.no_events) {\n        editor.fire('SetContent', contentArgs);\n      }\n    };\n\n    var deleteFromCallbackMap = function (callbackMap, selector, callback) {\n      if (callbackMap && callbackMap.hasOwnProperty(selector)) {\n        var newCallbacks = filter(callbackMap[selector], function (cb) {\n          return cb !== callback;\n        });\n        if (newCallbacks.length === 0) {\n          delete callbackMap[selector];\n        } else {\n          callbackMap[selector] = newCallbacks;\n        }\n      }\n    };\n    function SelectorChanged (dom, editor) {\n      var selectorChangedData;\n      var currentSelectors;\n      return {\n        selectorChangedWithUnbind: function (selector, callback) {\n          if (!selectorChangedData) {\n            selectorChangedData = {};\n            currentSelectors = {};\n            editor.on('NodeChange', function (e) {\n              var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n              Tools.each(selectorChangedData, function (callbacks, selector) {\n                Tools.each(parents, function (node) {\n                  if (dom.is(node, selector)) {\n                    if (!currentSelectors[selector]) {\n                      Tools.each(callbacks, function (callback) {\n                        callback(true, {\n                          node: node,\n                          selector: selector,\n                          parents: parents\n                        });\n                      });\n                      currentSelectors[selector] = callbacks;\n                    }\n                    matchedSelectors[selector] = callbacks;\n                    return false;\n                  }\n                });\n              });\n              Tools.each(currentSelectors, function (callbacks, selector) {\n                if (!matchedSelectors[selector]) {\n                  delete currentSelectors[selector];\n                  Tools.each(callbacks, function (callback) {\n                    callback(false, {\n                      node: node,\n                      selector: selector,\n                      parents: parents\n                    });\n                  });\n                }\n              });\n            });\n          }\n          if (!selectorChangedData[selector]) {\n            selectorChangedData[selector] = [];\n          }\n          selectorChangedData[selector].push(callback);\n          return {\n            unbind: function () {\n              deleteFromCallbackMap(selectorChangedData, selector, callback);\n              deleteFromCallbackMap(currentSelectors, selector, callback);\n            }\n          };\n        }\n      };\n    }\n\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$2(SugarElement.fromDom(node.ownerDocument), SugarElement.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var EditorSelection = function (dom, win, serializer, editor) {\n      var selectedRange;\n      var explicitRange;\n      var selectorChangedWithUnbind = SelectorChanged(dom, editor).selectorChangedWithUnbind;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return getContent$1(editor, args);\n      };\n      var setContent = function (content, args) {\n        return setContent$1(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng$1(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng$1(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng$1(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng$1();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng$1 = function () {\n        var selection, rng, elm;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        var doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n          var bookmark = getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n            rng = processRanges(editor, [rng])[0];\n          }\n        } catch (ex) {\n        }\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var node;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        var sel = getSel();\n        var evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng$1());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng$1(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorNode = sel === null || sel === void 0 ? void 0 : sel.anchorNode;\n        var focusNode = sel === null || sel === void 0 ? void 0 : sel.focusNode;\n        if (!sel || !anchorNode || !focusNode || isRestrictedNode(anchorNode) || isRestrictedNode(focusNode)) {\n          return true;\n        }\n        var anchorRange = dom.createRng();\n        anchorRange.setStart(anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        var focusRange = dom.createRng();\n        focusRange.setStart(focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize$1 = function () {\n        var rng = getRng$1();\n        var sel = getSel();\n        if (!hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = normalize(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        selectorChangedWithUnbind(selector, callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(fromPoint$1(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng$1();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng$1,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize$1,\n        selectorChanged: selectorChanged,\n        selectorChangedWithUnbind: selectorChangedWithUnbind,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      var bookmarkManager = BookmarkManager$1(exports);\n      var controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$1 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri$1 = function (uri) {\n      var type;\n      var uriParts = decodeURIComponent(uri).split(',');\n      var matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var buildBlob = function (type, data) {\n      var str;\n      try {\n        str = atob(data);\n      } catch (e) {\n        return Optional.none();\n      }\n      var arr = new Uint8Array(str.length);\n      for (var i = 0; i < arr.length; i++) {\n        arr[i] = str.charCodeAt(i);\n      }\n      return Optional.some(new Blob([arr], { type: type }));\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var _a = parseDataUri$1(uri), type = _a.type, data = _a.data;\n        buildBlob(type, data).fold(function () {\n          return resolve(new Blob([]));\n        }, resolve);\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          uriToBlob(img.src).then(function (blob) {\n            blobToDataUri(blob).then(function (dataUri) {\n              base64 = parseDataUri$1(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      var _a = parseDataUri$1(img.src), data = _a.data, type = _a.type;\n      base64 = data;\n      blobInfo = blobCache.getByData(base64, type);\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner(uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        if (!predicate) {\n          predicate = always;\n        }\n        var images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src] !== undefined) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new AstNode('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new AstNode('#text', 3)).value = nbsp;\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === nbsp;\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var isBogusImage = function (img) {\n      return img.attr('data-mce-bogus');\n    };\n    var isInternalImageSource = function (img) {\n      return img.attr('src') === Env.transparentSrc || img.attr('data-mce-placeholder');\n    };\n    var isValidDataImg = function (img, settings) {\n      if (settings.images_dataimg_filter) {\n        var imgElem_1 = new Image();\n        imgElem_1.src = img.attr('src');\n        each$1(img.attributes.map, function (value, key) {\n          imgElem_1.setAttribute(key, value);\n        });\n        return settings.images_dataimg_filter(imgElem_1);\n      } else {\n        return true;\n      }\n    };\n    var registerBase64ImageFilter = function (parser, settings) {\n      var blobCache = settings.blob_cache;\n      var processImage = function (img) {\n        var inputSrc = img.attr('src');\n        if (isInternalImageSource(img) || isBogusImage(img)) {\n          return;\n        }\n        parseDataUri(inputSrc).filter(function () {\n          return isValidDataImg(img, settings);\n        }).bind(function (_a) {\n          var type = _a.type, data = _a.data;\n          return Optional.from(blobCache.getByData(data, type)).orThunk(function () {\n            return buildBlob(type, data).map(function (blob) {\n              var blobInfo = blobCache.create(uniqueId(), blob, data);\n              blobCache.add(blobInfo);\n              return blobInfo;\n            });\n          });\n        }).each(function (blobInfo) {\n          img.attr('src', blobInfo.blobUri());\n        });\n      };\n      if (blobCache) {\n        parser.addAttributeFilter('src', function (nodes) {\n          return each(nodes, processImage);\n        });\n      }\n    };\n    var register$2 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName === 'br') {\n                    node = null;\n                  }\n                  break;\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new AstNode('#text', 3);\n                textNode.value = nbsp;\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            var node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new AstNode('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n      registerBase64ImageFilter(parser, settings);\n    };\n\n    var makeMap$4 = Tools.makeMap, each$d = Tools.each, explode$2 = Tools.explode, extend$2 = Tools.extend;\n    var DomParser = function (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var sibling, nextNode;\n        var nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var whitespaceElements = schema.getWhiteSpaceElements();\n        var textBlockElements = schema.getTextBlockElements();\n        var specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ol')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new AstNode('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new AstNode('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$d(explode$2(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name_1 in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name_1)) {\n            out.push({\n              name: name_1,\n              callbacks: nodeFilters[name_1]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$d(explode$2(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var nodes, i, l, fi, fl, list, name;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        var getRootBlockName = function (name) {\n          if (name === false) {\n            return '';\n          } else if (name === true) {\n            return 'p';\n          } else {\n            return name;\n          }\n        };\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        var blockElements = extend$2(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var forcedRootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var rootBlockName = getRootBlockName(forcedRootBlockName);\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new AstNode(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        var parser = SaxParser$1({\n          validate: validate,\n          allow_html_data_urls: settings.allow_html_data_urls,\n          allow_svg_data_urls: settings.allow_svg_data_urls,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          preserve_cdata: settings.preserve_cdata,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, attrName, parent;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, text, sibling, tempNode;\n            var elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                tempNode = node.parent;\n                if (blockElements[node.name]) {\n                  node.empty().remove();\n                } else {\n                  node.unwrap();\n                }\n                node = tempNode;\n                return;\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new AstNode(args.context || settings.root_name, 11);\n        parser.parse(html, args.format);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            if (!matchedNodes.hasOwnProperty(name)) {\n              continue;\n            }\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$2(exports, settings);\n      register$1(exports, settings);\n      return exports;\n    };\n\n    var register$3 = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attr('data-mce-tabindex'));\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(internalName);\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attr(name);\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attr('data-mce-type') === 'bookmark' && !args.cleanup) {\n            var hasChildren = Optional.from(node.firstChild).exists(function (firstChild) {\n              return !isZwsp$1(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (settings.preserve_cdata && node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = dom.decode(node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, ''));\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !node.attr('type')) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize,data-mce-placeholder', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      var brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        var brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n\n    var preProcess = function (editor, node, args) {\n      var doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      var impl = document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      firePreProcess(editor, __assign(__assign({}, args), { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = firePostProcess(editor, __assign(__assign({}, args), { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = trim$2(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(SugarElement.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? __assign({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    var DomSerializerImpl = function (settings, editor) {\n      var tempAttrs = ['data-mce-selected'];\n      var dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      var schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      var htmlParser = DomParser(settings, schema);\n      register$3(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        if (parserArgs === void 0) {\n          parserArgs = {};\n        }\n        var args = __assign({ format: 'html' }, parserArgs);\n        var targetNode = process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        },\n        getNodeFilters: htmlParser.getNodeFilters,\n        getAttributeFilters: htmlParser.getAttributeFilters\n      };\n    };\n\n    var DomSerializer = function (settings, editor) {\n      var domSerializer = DomSerializerImpl(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs,\n        getNodeFilters: domSerializer.getNodeFilters,\n        getAttributeFilters: domSerializer.getAttributeFilters\n      };\n    };\n\n    var defaultFormat$1 = 'html';\n    var getContent$2 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      var format = args.format ? args.format : defaultFormat$1;\n      return getContent(editor, args, format);\n    };\n\n    var setContent$2 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return setContent(editor, content, args);\n    };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$3.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Optional.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$3.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$7 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$3.remove(element.nextSibling);\n        }\n        fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        fireDetach(editor);\n        DOM$3.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var deep$1 = function (old, nu) {\n      var bothObjects = isObject(old) && isObject(nu);\n      return bothObjects ? deepMerge(old, nu) : nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var deepMerge = baseMerge(deep$1);\n\n    var sectionResult = function (sections, settings) {\n      return {\n        sections: constant(sections),\n        settings: constant(settings)\n      };\n    };\n    var deviceDetection = detect$3().deviceType;\n    var isTouch = deviceDetection.isTouch();\n    var isPhone = deviceDetection.isPhone();\n    var isTablet = deviceDetection.isTablet();\n    var legacyMobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultTouchSettings = {\n      table_grid: false,\n      object_resizing: false,\n      resize: false\n    };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterLegacyMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, legacyMobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      if (defaults === void 0) {\n        defaults = {};\n      }\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var isSectionTheme = function (sectionResult, name, theme) {\n      var section = sectionResult.sections();\n      return hasSection(sectionResult, name) && section[name].theme === theme;\n    };\n    var getSectionConfig = function (sectionResult, name) {\n      return hasSection(sectionResult, name) ? sectionResult.sections()[name] : {};\n    };\n    var getToolbarMode = function (settings, defaultVal) {\n      return get$1(settings, 'toolbar_mode').orThunk(function () {\n        return get$1(settings, 'toolbar_drawer').map(function (val) {\n          return val === false ? 'wrap' : val;\n        });\n      }).getOr(defaultVal);\n    };\n    var getDefaultSettings = function (settings, id, documentBaseUrl, isTouch, editor) {\n      var baseDefaults = {\n        id: id,\n        theme: 'silver',\n        toolbar_mode: getToolbarMode(settings, 'floating'),\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: true,\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor\n      };\n      return __assign(__assign({}, baseDefaults), isTouch ? defaultTouchSettings : {});\n    };\n    var getDefaultMobileSettings = function (mobileSettings, isPhone) {\n      var defaultMobileSettings = {\n        resize: false,\n        toolbar_mode: getToolbarMode(mobileSettings, 'scrolling'),\n        toolbar_sticky: false\n      };\n      var defaultPhoneSettings = { menubar: false };\n      return __assign(__assign(__assign({}, defaultTouchSettings), defaultMobileSettings), isPhone ? defaultPhoneSettings : {});\n    };\n    var getExternalPlugins$1 = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var getPlatformPlugins = function (isMobileDevice, sectionResult, desktopPlugins, mobilePlugins) {\n      if (isMobileDevice && isSectionTheme(sectionResult, 'mobile', 'mobile')) {\n        return filterLegacyMobilePlugins(mobilePlugins);\n      } else if (isMobileDevice && hasSection(sectionResult, 'mobile')) {\n        return mobilePlugins;\n      } else {\n        return desktopPlugins;\n      }\n    };\n    var processPlugins = function (isMobileDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var desktopPlugins = normalizePlugins(settings.plugins);\n      var mobileConfig = getSectionConfig(sectionResult, 'mobile');\n      var mobilePlugins = mobileConfig.plugins ? normalizePlugins(mobileConfig.plugins) : desktopPlugins;\n      var platformPlugins = getPlatformPlugins(isMobileDevice, sectionResult, desktopPlugins, mobilePlugins);\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      if (Env.browser.isIE() && contains(combinedPlugins, 'rtc')) {\n        throw new Error('RTC plugin is not supported on IE 11.');\n      }\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isMobileDevice, sectionResult) {\n      return isMobileDevice && hasSection(sectionResult, 'mobile');\n    };\n    var combineSettings = function (isMobileDevice, isPhone, defaultSettings, defaultOverrideSettings, settings) {\n      var defaultDeviceSettings = isMobileDevice ? { mobile: getDefaultMobileSettings(settings.mobile || {}, isPhone) } : {};\n      var sectionResult = extractSections(['mobile'], deepMerge(defaultDeviceSettings, settings));\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isMobileDevice, sectionResult) ? getSection(sectionResult, 'mobile') : {}, {\n        validate: true,\n        external_plugins: getExternalPlugins$1(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isMobileDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(settings, id, documentBaseUrl, isTouch, editor);\n      return combineSettings(isPhone || isTablet, isPhone, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Optional.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[0]);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var CreateIconManager = function () {\n      var lookup = {};\n      var add = function (id, iconPack) {\n        lookup[id] = iconPack;\n      };\n      var get = function (id) {\n        if (lookup[id]) {\n          return lookup[id];\n        }\n        return { icons: {} };\n      };\n      var has$1 = function (id) {\n        return has(lookup, id);\n      };\n      return {\n        add: add,\n        get: get,\n        has: has$1\n      };\n    };\n    var IconManager = CreateIconManager();\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom;\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$5(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom.getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom.clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom.clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = SugarElement.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Optional.from(node).map(SugarElement.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(inBody).getOr(false);\n    };\n\n    function NotificationManagerImpl() {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager(editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Optional.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (spec, fireEvent) {\n        if (fireEvent === void 0) {\n          fireEvent = true;\n        }\n        if (editor.removed || !isEditorAttachedToDom(editor)) {\n          return;\n        }\n        if (fireEvent) {\n          editor.fire('BeforeOpenNotification', { notification: spec });\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), spec);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(spec, function () {\n            closeNotification(notification);\n            reposition();\n            getTopNotification().fold(function () {\n              return editor.focus();\n            }, function (top) {\n              return focus(SugarElement.fromDom(top.getEl()));\n            });\n          });\n          addNotification(notification);\n          reposition();\n          editor.fire('OpenNotification', __assign({}, notification));\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = getServiceMessage(editor);\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0\n            }, false);\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow NodeChange', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    var PluginManager = AddOnManager$1.PluginManager;\n\n    var ThemeManager = AddOnManager$1.ThemeManager;\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        openUrl: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    var WindowManager = function (editor) {\n      var dialogs = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (dialog) {\n        editor.fire('OpenWindow', { dialog: dialog });\n      };\n      var fireCloseEvent = function (dialog) {\n        editor.fire('CloseWindow', { dialog: dialog });\n      };\n      var addDialog = function (dialog) {\n        dialogs.push(dialog);\n        fireOpenEvent(dialog);\n      };\n      var closeDialog = function (dialog) {\n        fireCloseEvent(dialog);\n        dialogs = filter(dialogs, function (otherDialog) {\n          return otherDialog !== dialog;\n        });\n        if (dialogs.length === 0) {\n          editor.focus();\n        }\n      };\n      var getTopDialog = function () {\n        return Optional.from(dialogs[dialogs.length - 1]);\n      };\n      var storeSelectionAndOpenDialog = function (openDialog) {\n        editor.editorManager.setActive(editor);\n        store(editor);\n        var dialog = openDialog();\n        addDialog(dialog);\n        return dialog;\n      };\n      var open = function (args, params) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().open(args, params, closeDialog);\n        });\n      };\n      var openUrl = function (args) {\n        return storeSelectionAndOpenDialog(function () {\n          return getImplementation().openUrl(args, closeDialog);\n        });\n      };\n      var alert = function (message, callback, scope) {\n        getImplementation().alert(message, funcBind(scope ? scope : this, callback));\n      };\n      var confirm = function (message, callback, scope) {\n        getImplementation().confirm(message, funcBind(scope ? scope : this, callback));\n      };\n      var close = function () {\n        getTopDialog().each(function (dialog) {\n          getImplementation().close(dialog);\n          closeDialog(dialog);\n        });\n      };\n      editor.on('remove', function () {\n        each(dialogs, function (dialog) {\n          getImplementation().close(dialog);\n        });\n      });\n      return {\n        open: open,\n        openUrl: openUrl,\n        alert: alert,\n        confirm: confirm,\n        close: close\n      };\n    };\n\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var logError = function (editor, errorType, msg) {\n      fireError(editor, errorType, { message: msg });\n      console.error(msg);\n    };\n    var createLoadError = function (type, url, name) {\n      return name ? 'Failed to load ' + type + ': ' + name + ' from url ' + url : 'Failed to load ' + type + ' url: ' + url;\n    };\n    var pluginLoadError = function (editor, url, name) {\n      logError(editor, 'PluginLoadError', createLoadError('plugin', url, name));\n    };\n    var iconsLoadError = function (editor, url, name) {\n      logError(editor, 'IconsLoadError', createLoadError('icons', url, name));\n    };\n    var languageLoadError = function (editor, url, name) {\n      logError(editor, 'LanguageLoadError', createLoadError('language', url, name));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, __spreadArrays([message], x));\n        } else {\n          console.log.apply(console, __spreadArrays([message], x));\n        }\n      }\n    };\n\n    var isContentCssSkinName = function (url) {\n      return /^[a-z0-9\\-]+$/i.test(url);\n    };\n    var getContentCssUrls = function (editor) {\n      var contentCss = getContentCss(editor);\n      var skinUrl = editor.editorManager.baseURL + '/skins/content';\n      var suffix = editor.editorManager.suffix;\n      var contentCssFile = 'content' + suffix + '.css';\n      var inline = editor.inline === true;\n      return map(contentCss, function (url) {\n        if (isContentCssSkinName(url) && !inline) {\n          return skinUrl + '/' + url + '/' + contentCssFile;\n        } else {\n          return editor.documentBaseURI.toAbsolute(url);\n        }\n      });\n    };\n    var appendContentCssFromSettings = function (editor) {\n      editor.contentCSS = editor.contentCSS.concat(getContentCssUrls(editor));\n    };\n\n    function Uploader(uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          var json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        var formData = new FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, message, options) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: {\n            message: message,\n            options: options\n          }\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error, options) {\n              var failureOptions = options ? options : {};\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error, failureOptions));\n              resolve(handlerFailure(blobInfo, error, failureOptions));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message, {}));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n\n    var BlobCache = function () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png',\n          'image/apng': 'apng',\n          'image/avif': 'avif',\n          'image/svg+xml': 'svg',\n          'image/webp': 'webp',\n          'image/bmp': 'bmp',\n          'image/tiff': 'tiff'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, name, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: name,\n            filename: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        var id = o.id || uuid('blobid');\n        var name = o.name || id;\n        var blob = o.blob;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(o.filename || name + '.' + mimeToExt(blob.type)),\n          blob: constant(blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var findFirst = function (predicate) {\n        return find(cache, predicate).getOrUndefined();\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var getByData = function (base64, type) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.base64() === base64 && blobInfo.blob().type === type;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        getByData: getByData,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    };\n\n    var UploadChangeHandler = function (editor) {\n      var lastChangedLevel = Cell(null);\n      editor.on('change AddUndo', function (e) {\n        lastChangedLevel.set(__assign({}, e.level));\n      });\n      var fireIfChanged = function () {\n        var data = editor.undoManager.data;\n        last(data).filter(function (level) {\n          return !isEq$4(lastChangedLevel.get(), level);\n        }).each(function (level) {\n          editor.setDirty(true);\n          editor.fire('change', {\n            level: level,\n            lastLevel: get(data, data.length - 2).getOrNull()\n          });\n        });\n      };\n      return { fireIfChanged: fireIfChanged };\n    };\n    var EditorUpload = function (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var changeHandler = UploadChangeHandler(editor);\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function (url) {\n        return url + (url.indexOf('?') === -1 ? '?' : '&') + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        var replacementString = 'src=\"' + replacementUrl + '\"' + (replacementUrl === Env.transparentSrc ? ' data-mce-placeholder=\"1\"' : '');\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', replacementString);\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUriInView = function (image, resultUri) {\n        var src = editor.convertURL(resultUri, 'src');\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': shouldReuseFileName(editor) ? cacheInvalidator(resultUri) : resultUri,\n          'data-mce-src': src\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: getImageUploadUrl(editor),\n            basePath: getImageUploadBasePath(editor),\n            credentials: getImagesUploadCredentials(editor),\n            handler: getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var imagesToRemove = [];\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var blobInfo = imageInfos[index].blobInfo;\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && shouldReplaceBlobUris(editor)) {\n                blobCache.removeByUri(image.src);\n                replaceImageUriInView(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                if (uploadInfo.error.options.remove) {\n                  replaceUrlInUndoStack(image.getAttribute('src'), Env.transparentSrc);\n                  imagesToRemove.push(image);\n                }\n                uploadError(editor, uploadInfo.error.message);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status,\n                uploadUri: uploadInfo.url,\n                blobInfo: blobInfo\n              };\n            });\n            if (filteredResult.length > 0) {\n              changeHandler.fireIfChanged();\n            }\n            if (imagesToRemove.length > 0) {\n              if (isRtc(editor)) {\n                console.error('Removing images on failed uploads is currently unsupported for RTC');\n              } else {\n                editor.undoManager.transact(function () {\n                  each(imagesToRemove, function (element) {\n                    editor.dom.remove(element);\n                    blobCache.removeByUri(element.src);\n                  });\n                });\n              }\n            }\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('SetContent', function () {\n        if (isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('GetContent', function (e) {\n        if (e.source_view || e.format === 'raw' || e.format === 'tree') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    };\n\n    var get$a = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          },\n          {\n            inline: 's',\n            remove: 'all',\n            preserve_attributes: [\n              'class',\n              'style'\n            ]\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        lineheight: {\n          selector: 'h1,h2,h3,h4,h5,h6,p,li,td,th,div',\n          defaultBlock: 'p',\n          styles: { lineHeight: '%value' }\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: true,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function (node, _fmt, _itemName) {\n            return isElement$1(node) && node.hasAttribute('href');\n          },\n          onformat: function (elm, _fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n\n    function FormatRegistry(editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var has$1 = function (name) {\n        return has(formats, name);\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            if (!isArray(format)) {\n              format = [format];\n            }\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(get$a(editor.dom));\n      register(getFormats(editor));\n      return {\n        get: get,\n        has: has$1,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$e = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        var elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        var parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag;\n      var previewCss = '', parentFontSize;\n      var previewStyles = getPreviewStyles(editor);\n      if (previewStyles === '') {\n        return '';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        var previewOpt = get$1(format, 'preview');\n        if (previewOpt.is(false)) {\n          return '';\n        } else {\n          previewStyles = previewOpt.getOr(previewStyles);\n        }\n      }\n      name = format.block || format.inline || 'span';\n      var items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      var previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$e(format.styles, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setStyle(previewElm, name, newValue);\n        }\n      });\n      each$e(format.attributes, function (value, name) {\n        var newValue = removeVars(value);\n        if (newValue) {\n          dom.setAttrib(previewElm, name, newValue);\n        }\n      });\n      each$e(format.classes, function (value) {\n        var newValue = removeVars(value);\n        if (!dom.hasClass(previewElm, newValue)) {\n          dom.addClass(previewElm, newValue);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$e(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n\n    var setup$6 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n\n    var Formatter = function (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      setup$6(editor);\n      setup$3(editor);\n      return {\n        get: formats.get,\n        has: formats.has,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: function (name, vars, node) {\n          applyFormat$1(editor, name, vars, node);\n        },\n        remove: function (name, vars, node, similar) {\n          removeFormat$1(editor, name, vars, node, similar);\n        },\n        toggle: function (name, vars, node) {\n          toggleFormat(editor, name, vars, node);\n        },\n        match: function (name, vars, node) {\n          return matchFormat(editor, name, vars, node);\n        },\n        closest: function (names) {\n          return closestFormat(editor, names);\n        },\n        matchAll: function (names, vars) {\n          return matchAllFormats(editor, names, vars);\n        },\n        matchNode: function (node, names, vars, similar) {\n          return matchNodeFormat(editor, node, names, vars, similar);\n        },\n        canApply: function (name) {\n          return canApplyFormat(editor, name);\n        },\n        formatChanged: function (formats, callback, similar) {\n          return formatChanged(editor, formatChangeState, formats, callback, similar);\n        },\n        getCssText: curry(getCssText, editor)\n      };\n    };\n\n    var registerEvents$1 = function (editor, undoManager, locks) {\n      var isFirstTypedCharacter = Cell(false);\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(undoManager, false, locks);\n        undoManager.add({}, e);\n      };\n      editor.on('init', function () {\n        undoManager.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd !== 'undo' && cmd !== 'redo' && cmd !== 'mcerepaint') {\n          endTyping(undoManager, locks);\n          undoManager.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd !== 'undo' && cmd !== 'redo' && cmd !== 'mcerepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart cut', function () {\n        undoManager.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('dragend', addNonTypingUndoLevel);\n      editor.on('keyup', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter.get() && undoManager.typing && isEq$4(createFromEditor(editor), undoManager.data[0]) === false) {\n          if (editor.isDirty() === false) {\n            editor.setDirty(true);\n            editor.fire('change', {\n              level: undoManager.data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter.set(false);\n          editor.nodeChanged();\n        }\n      });\n      editor.on('keydown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (undoManager.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !undoManager.typing && !modKey) {\n          undoManager.beforeChange();\n          setTyping(undoManager, true, locks);\n          undoManager.add({}, e);\n          isFirstTypedCharacter.set(true);\n        }\n      });\n      editor.on('mousedown', function (e) {\n        if (undoManager.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      var isInsertFromPasteOrDrop = function (event) {\n        return event.inputType === 'insertFromPaste' || event.inputType === 'insertFromDrop';\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e) || isInsertFromPasteOrDrop(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n    };\n    var addKeyboardShortcuts = function (editor) {\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n    };\n\n    var UndoManager = function (editor) {\n      var beforeBookmark = Cell(Optional.none());\n      var locks = Cell(0);\n      var index = Cell(0);\n      var undoManager = {\n        data: [],\n        typing: false,\n        beforeChange: function () {\n          beforeChange$1(editor, locks, beforeBookmark);\n        },\n        add: function (level, event) {\n          return addUndoLevel$1(editor, undoManager, index, locks, beforeBookmark, level, event);\n        },\n        undo: function () {\n          return undo$1(editor, undoManager, locks, index);\n        },\n        redo: function () {\n          return redo$1(editor, index, undoManager.data);\n        },\n        clear: function () {\n          clear$1(editor, undoManager, index);\n        },\n        reset: function () {\n          reset$1(editor, undoManager);\n        },\n        hasUndo: function () {\n          return hasUndo$1(editor, undoManager, index);\n        },\n        hasRedo: function () {\n          return hasRedo$1(editor, undoManager, index);\n        },\n        transact: function (callback) {\n          return transact$1(editor, undoManager, locks, callback);\n        },\n        ignore: function (callback) {\n          ignore$1(editor, locks, callback);\n        },\n        extra: function (callback1, callback2) {\n          extra$1(editor, undoManager, index, callback1, callback2);\n        }\n      };\n      if (!isRtc(editor)) {\n        registerEvents$1(editor, undoManager, locks);\n      }\n      addKeyboardShortcuts(editor);\n      return undoManager;\n    };\n\n    var nonTypingKeycodes = [\n      9,\n      27,\n      VK.HOME,\n      VK.END,\n      19,\n      20,\n      44,\n      144,\n      145,\n      33,\n      34,\n      45,\n      16,\n      17,\n      18,\n      91,\n      92,\n      93,\n      VK.DOWN,\n      VK.UP,\n      VK.LEFT,\n      VK.RIGHT\n    ].concat(Env.browser.isFirefox() ? [224] : []);\n    var placeholderAttr = 'data-mce-placeholder';\n    var isKeyboardEvent = function (e) {\n      return e.type === 'keydown' || e.type === 'keyup';\n    };\n    var isDeleteEvent = function (e) {\n      var keyCode = e.keyCode;\n      return keyCode === VK.BACKSPACE || keyCode === VK.DELETE;\n    };\n    var isNonTypingKeyboardEvent = function (e) {\n      if (isKeyboardEvent(e)) {\n        var keyCode = e.keyCode;\n        return !isDeleteEvent(e) && (VK.metaKeyPressed(e) || e.altKey || keyCode >= 112 && keyCode <= 123 || contains(nonTypingKeycodes, keyCode));\n      } else {\n        return false;\n      }\n    };\n    var isTypingKeyboardEvent = function (e) {\n      return isKeyboardEvent(e) && !(isDeleteEvent(e) || e.type === 'keyup' && e.keyCode === 229);\n    };\n    var isVisuallyEmpty = function (dom, rootElm, forcedRootBlock) {\n      if (isEmpty(SugarElement.fromDom(rootElm), false)) {\n        var isForcedRootBlockFalse = forcedRootBlock === '';\n        var firstElement = rootElm.firstElementChild;\n        if (!firstElement) {\n          return true;\n        } else if (dom.getStyle(rootElm.firstElementChild, 'padding-left') || dom.getStyle(rootElm.firstElementChild, 'padding-right')) {\n          return false;\n        } else {\n          return isForcedRootBlockFalse ? !dom.isBlock(firstElement) : forcedRootBlock === firstElement.nodeName.toLowerCase();\n        }\n      } else {\n        return false;\n      }\n    };\n    var setup$7 = function (editor) {\n      var dom = editor.dom;\n      var rootBlock = getForcedRootBlock(editor);\n      var placeholder = getPlaceholder(editor);\n      var updatePlaceholder = function (e, initial) {\n        if (isNonTypingKeyboardEvent(e)) {\n          return;\n        }\n        var body = editor.getBody();\n        var showPlaceholder = isTypingKeyboardEvent(e) ? false : isVisuallyEmpty(dom, body, rootBlock);\n        var isPlaceholderShown = dom.getAttrib(body, placeholderAttr) !== '';\n        if (isPlaceholderShown !== showPlaceholder || initial) {\n          dom.setAttrib(body, placeholderAttr, showPlaceholder ? placeholder : null);\n          dom.setAttrib(body, 'aria-placeholder', showPlaceholder ? placeholder : null);\n          firePlaceholderToggle(editor, showPlaceholder);\n          editor.on(showPlaceholder ? 'keydown' : 'keyup', updatePlaceholder);\n          editor.off(showPlaceholder ? 'keyup' : 'keydown', updatePlaceholder);\n        }\n      };\n      if (placeholder) {\n        editor.on('init', function (e) {\n          updatePlaceholder(e, true);\n          editor.on('change SetContent ExecCommand', updatePlaceholder);\n          editor.on('paste', function (e) {\n            return Delay.setEditorTimeout(editor, function () {\n              return updatePlaceholder(e);\n            });\n          });\n        });\n      }\n    };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(SugarElement.fromDom(elm), getInlineBoundarySelector(editor));\n    };\n    var isRtl$1 = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Optional.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (isText$1(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (isText$1(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq$2(rootNode, SugarElement.fromDom(elm.dom.parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$2(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Optional.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        var normalizedFromPos = normalizePosition(false, fromPos);\n        if (forward) {\n          return nextPosition(elm, normalizedFromPos).exists(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          });\n        } else {\n          return prevPosition(elm, normalizedFromPos).exists(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          });\n        }\n      }).getOr(true);\n    };\n\n    var blockPosition = function (block, position) {\n      return {\n        block: block,\n        position: position\n      };\n    };\n    var blockBoundary = function (from, to) {\n      return {\n        from: from,\n        to: to\n      };\n    };\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = SugarElement.fromDom(rootNode);\n      var containerElm = SugarElement.fromDom(pos.container());\n      return getParentBlock$1(rootElm, containerElm).map(function (block) {\n        return blockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq$2(blockBoundary.from.block, blockBoundary.to.block) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from.block).bind(function (parent1) {\n        return parent(blockBoundary.to.block).filter(function (parent2) {\n          return eq$2(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return isContentEditableFalse(blockBoundary.from.block.dom) === false && isContentEditableFalse(blockBoundary.to.block.dom) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (isBr(blockPosition.position.getNode()) && isEmpty(blockPosition.block) === false) {\n        return positionIn(false, blockPosition.block.dom).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position)) {\n            return fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Optional.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return fromPosition(forward, rootNode, blockPos.position).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, blockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$3 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Optional.none();\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), function (element) {\n        return isEmpty(element);\n      }).each(remove);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !isEmpty(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (isEmpty(toBlock)) {\n        fillWithPaddingBr(toBlock);\n        return firstPositionIn(toBlock.dom);\n      }\n      if (isEmptyBefore(insertionPoint) && isEmpty(fromBlock)) {\n        before(insertionPoint, SugarElement.fromTag('br'));\n      }\n      var position = prevPosition(toBlock.dom, CaretPosition$1.before(insertionPoint.dom));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (isEmpty(toBlock)) {\n        remove(toBlock);\n        if (isEmpty(fromBlock)) {\n          fillWithPaddingBr(fromBlock);\n        }\n        return firstPositionIn(fromBlock.dom);\n      }\n      var position = lastPositionIn(toBlock.dom);\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf$1 = parentsAndSelf(block, toBlock);\n      return Optional.from(parentsAndSelf$1[parentsAndSelf$1.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$2(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Optional.none();\n    };\n    var trimBr = function (first, block) {\n      positionIn(first, block.dom).map(function (position) {\n        return position.getNode();\n      }).map(SugarElement.fromDom).filter(isBr$1).each(remove);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n\n    var backspaceDelete$1 = function (editor, forward) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var position = read$3(rootNode.dom, forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return mergeBlocks(rootNode, forward, blockBoundary.from.block, blockBoundary.to.block);\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(getParentBlock$1(rootNode, SugarElement.fromDom(rng.startContainer)), getParentBlock$1(rootNode, SugarElement.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq$2(block1, block2) === false) {\n          rng.deleteContents();\n          mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = SugarElement.fromDom(rawNode);\n      var isRoot = curry(eq$2, root);\n      return ancestor(node, isTableCell$1, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = prevPosition(root.dom, CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = nextPosition(root.dom, CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange$1 = function (editor) {\n      var rootNode = SugarElement.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$2 = function (editor, _forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange$1(editor);\n    };\n\n    var isContentEditableTrue$2 = isContentEditableTrue;\n    var isContentEditableFalse$7 = isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return Optional.from(editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView));\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return Optional.none();\n      }\n      return Optional.some(getNodeRange(node));\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isInlineFakeCaretTarget(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isInlineFakeCaretTarget(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$7(node) || isContentEditableTrue$2(node);\n      });\n      if (isInlineFakeCaretTarget(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return Optional.none();\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      return range.collapsed ? renderCaretAtRange(editor, range, scrollIntoView).getOr(range) : range;\n    };\n\n    var isBeforeBoundary = function (pos) {\n      return isBeforeContentEditableFalse(pos) || isBeforeMedia(pos);\n    };\n    var isAfterBoundary = function (pos) {\n      return isAfterContentEditableFalse(pos) || isAfterMedia(pos);\n    };\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (isText$1(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true).each(function (caretRange) {\n        if (range.collapsed) {\n          var deleteRange = range.cloneRange();\n          if (forward) {\n            deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n          } else {\n            deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n          }\n          deleteRange.deleteContents();\n        } else {\n          range.deleteContents();\n        }\n        editor.selection.setRng(caretRange);\n      });\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!isText$1(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forward ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forward ? isBeforeBoundary : isAfterBoundary;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition || !isMoveInsideSameBlock(caretPosition, nextCaretPosition)) {\n        return false;\n      } else if (isBeforeFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$3 = function (editor, forward) {\n      return deleteBoundaryText(editor, forward);\n    };\n\n    var isCompoundElement = function (node) {\n      return isTableCell$1(SugarElement.fromDom(node)) || isListItem(SugarElement.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return isElement$1(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(SugarElement.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(never, inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return getParentBlock$1(SugarElement.fromDom(root), SugarElement.fromDom(from.getNode())).map(function (blockElm) {\n        return isEmpty(blockElm) ? DeleteAction.remove(blockElm.dom) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Optional.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Optional.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Optional.none();\n        } else if (forward && isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Optional.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && isContentEditableFalse(elm.nextSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && isContentEditableFalse(elm.previousSibling)) {\n        return Optional.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Optional.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Optional.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Optional.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Optional.none();\n        } else {\n          return Optional.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Optional.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$4 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = SugarElement.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Optional.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        deleteElement(editor, forward, SugarElement.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var getAncestorCe = function (editor, node) {\n      return Optional.from(getContentEditableRoot(editor.getBody(), node));\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return getAncestorCe(editor, selectedNode).filter(isContentEditableFalse).fold(function () {\n        return read$4(editor.getBody(), forward, editor.selection.getRng()).exists(function (deleteAction) {\n          return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n        });\n      }, always);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      if (isContentEditableFalse(selectedNode)) {\n        var hasCefAncestor = getAncestorCe(editor, selectedNode.parentNode).filter(isContentEditableFalse);\n        return hasCefAncestor.fold(function () {\n          deleteOffscreenSelection(SugarElement.fromDom(editor.getBody()));\n          deleteElement(editor, forward, SugarElement.fromDom(editor.selection.getNode()));\n          paddEmptyBody(editor);\n          return true;\n        }, function () {\n          return true;\n        });\n      }\n      return false;\n    };\n    var paddEmptyElement = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var ceRoot = getContentEditableRoot(editor.getBody(), selection.getNode());\n      if (isContentEditableTrue(ceRoot) && dom.isBlock(ceRoot) && dom.isEmpty(ceRoot)) {\n        var br = dom.create('br', { 'data-mce-bogus': '1' });\n        dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n\n    var deleteCaret$1 = function (editor, forward) {\n      var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return fromPosition(forward, editor.getBody(), fromPos).filter(function (pos) {\n        return forward ? isBeforeImageBlock(pos) : isAfterImageBlock(pos);\n      }).bind(function (pos) {\n        return Optional.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, pos));\n      }).exists(function (elm) {\n        editor.selection.select(elm);\n        return true;\n      });\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n\n    var isText$8 = isText$1;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(ZWSP);\n    };\n    var insertBefore$1 = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter$1 = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore$1(node) : insertAfter$1(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (isText$1(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        remove$5(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Optional.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$5(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            remove$5(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        remove$5(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Optional.some(CaretPosition$1(text, 1));\n      });\n    };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Optional.none();\n    };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$4 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return nextPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Optional.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = prevPosition(inline, nPos);\n        return prevPos.isNone() ? Optional.some(Location.start(inline)) : Optional.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = nextPosition(inline, nPos);\n        return nextPos.isNone() ? Optional.some(Location.end(inline)) : Optional.none();\n      });\n    };\n    var after$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return prevPosition(scope, nPos).bind(curry(findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Optional.none);\n    };\n    var isValidLocation = function (location) {\n      return isRtl$1(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = evaluateUntil([\n        before$4,\n        start,\n        end,\n        after$3\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$5 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(findRootInline(isInlineTarget, rootNode, from), findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(always, function (fromLocation) {\n        return !isEq$5(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = normalizePosition(forward, pos);\n      var to = fromPosition(forward, rootNode, from).map(curry(normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Optional.some, Location.start), Optional.none, compose(Optional.some, Location.after), Optional.none);\n      } else {\n        return location.fold(Optional.none, compose(Optional.some, Location.before), Optional.none, compose(Optional.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var prevLocation = curry(findLocation, false);\n    var nextLocation = curry(findLocation, true);\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var location = findLocation(forward, isInlineTarget$1, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var inlineBoundaries = map(descendants$1(SugarElement.fromDom(dom.getRoot()), '*[data-mce-selected=\"inline-boundary\"]'), function (e) {\n        return e.dom;\n      });\n      var selectedInlines = filter(inlineBoundaries, isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && isAtZwsp(pos) === false) {\n          setCaretPosition(editor, removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (_inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move = function (editor, caret, forward) {\n      return isInlineBoundariesEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n    };\n    var moveWord = function (forward, editor, _caret) {\n      return isInlineBoundariesEnabled(editor) ? moveByWord(forward, editor) : false;\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isInlineBoundariesEnabled(editor) && !(Env.browser.isIE() && e.initial)) {\n          toggleInlines(isInlineTarget$1, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget$1, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n\n    var rangeFromPositions = function (from, to) {\n      var range = document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(firstPositionIn(elm), lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = normalizePosition(true, firstPos);\n        var normalizedLastPos = normalizePosition(false, lastPos);\n        return nextPosition(elm, normalizedFirstPos).forall(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        });\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return renderCaret(caret, location).exists(function (pos) {\n          setCaretPosition(editor, pos);\n          return true;\n        });\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        readLocation(isInlineTarget$1, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var fromLocation = readLocation(isInlineTarget$1, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Optional.some(inside(location))), Optional.none, constant(Optional.some(outside(location))), Optional.none);\n        } else {\n          return location.fold(Optional.none, constant(Optional.some(outside(location))), Optional.none, constant(Optional.some(inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return readLocation(isInlineTarget$1, rootNode, pos);\n        });\n        return lift2(fromLocation, toLocation, function () {\n          return findRootInline(isInlineTarget$1, rootNode, from).exists(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              deleteElement(editor, forward, SugarElement.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          });\n        }).orThunk(function () {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          });\n        }).getOr(false);\n      });\n    };\n    var backspaceDelete$6 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isInlineBoundariesEnabled(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild$1 = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom;\n      });\n      if (formatNodes.length === 0) {\n        deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom, formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$2 = function (editor, forward) {\n      var rootElm = SugarElement.fromDom(editor.getBody());\n      var startElm = SugarElement.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild$1);\n      return last(parentInlines).exists(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (willDeleteLastPositionInElement(forward, fromPos, target.dom) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var backspaceDelete$7 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$2(editor, forward) : false;\n    };\n\n    var deleteElement$2 = function (editor, forward, element) {\n      editor._selectionOverrides.hideFakeCaret();\n      deleteElement(editor, forward, SugarElement.fromDom(element));\n      return true;\n    };\n    var deleteCaret$3 = function (editor, forward) {\n      var isNearMedia = forward ? isBeforeMedia : isAfterMedia;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var fromPos = getNormalizedRangeEndPoint(direction, editor.getBody(), editor.selection.getRng());\n      if (isNearMedia(fromPos)) {\n        return deleteElement$2(editor, forward, fromPos.getNode(!forward));\n      } else {\n        return Optional.from(normalizePosition(forward, fromPos)).filter(function (pos) {\n          return isNearMedia(pos) && isMoveInsideSameBlock(fromPos, pos);\n        }).exists(function (pos) {\n          return deleteElement$2(editor, forward, pos.getNode(!forward));\n        });\n      }\n    };\n    var deleteRange$2 = function (editor, forward) {\n      var selectedNode = editor.selection.getNode();\n      return isMedia(selectedNode) ? deleteElement$2(editor, forward, selectedNode) : false;\n    };\n    var backspaceDelete$8 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$3(editor, forward) : deleteRange$2(editor, forward);\n    };\n\n    var isEditable$1 = function (target) {\n      return closest(target, function (elm) {\n        return isContentEditableTrue(elm.dom) || isContentEditableFalse(elm.dom);\n      }).exists(function (elm) {\n        return isContentEditableTrue(elm.dom);\n      });\n    };\n    var parseIndentValue = function (value) {\n      var number = parseInt(value, 10);\n      return isNaN(number) ? 0 : number;\n    };\n    var getIndentStyleName = function (useMargin, element) {\n      var indentStyleName = useMargin || isTable$1(element) ? 'margin' : 'padding';\n      var suffix = get$5(element, 'direction') === 'rtl' ? '-right' : '-left';\n      return indentStyleName + suffix;\n    };\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      var indentStyleName = getIndentStyleName(useMargin, SugarElement.fromDom(element));\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseIndentValue(element.style[indentStyleName]) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseIndentValue(element.style[indentStyleName]) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var validateBlocks = function (editor, blocks) {\n      return forall(blocks, function (block) {\n        var indentStyleName = getIndentStyleName(shouldIndentUseMargin(editor), block);\n        var intentValue = getRaw(block, indentStyleName).map(parseIndentValue).getOr(0);\n        var contentEditable = editor.dom.getContentEditable(block.dom);\n        return contentEditable !== 'false' && intentValue > 0;\n      });\n    };\n    var canOutdent = function (editor) {\n      var blocks = getBlocksToIndent(editor);\n      return !editor.mode.isReadOnly() && (blocks.length > 1 || validateBlocks(editor, blocks));\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), SugarElement.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el) && isEditable$1(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentation = getIndentation(editor);\n      var indentUnit = /[a-z%]+$/i.exec(indentation)[0];\n      var indentValue = parseInt(indentation, 10);\n      var useMargin = shouldIndentUseMargin(editor);\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (forcedRootBlock === '' && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom);\n      });\n    };\n\n    var backspaceDelete$9 = function (editor, _forward) {\n      if (editor.selection.isCollapsed() && canOutdent(editor)) {\n        var dom = editor.dom;\n        var rng = editor.selection.getRng();\n        var pos = CaretPosition$1.fromRangeStart(rng);\n        var block = dom.getParent(rng.startContainer, dom.isBlock);\n        if (block !== null && isAtStartOfBlock(SugarElement.fromDom(block), pos)) {\n          handle(editor, 'outdent');\n          return true;\n        }\n      }\n      return false;\n    };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor, caret) {\n      if (backspaceDelete$9(editor)) {\n        return;\n      } else if (backspaceDelete$4(editor, false)) {\n        return;\n      } else if (backspaceDelete$3(editor, false)) {\n        return;\n      } else if (backspaceDelete$6(editor, caret, false)) {\n        return;\n      } else if (backspaceDelete$1(editor, false)) {\n        return;\n      } else if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, false)) {\n        return;\n      } else if (backspaceDelete$8(editor, false)) {\n        return;\n      } else if (backspaceDelete$2(editor)) {\n        return;\n      } else if (backspaceDelete$7(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor, caret) {\n      if (backspaceDelete$4(editor, true)) {\n        return;\n      } else if (backspaceDelete$3(editor, true)) {\n        return;\n      } else if (backspaceDelete$6(editor, caret, true)) {\n        return;\n      } else if (backspaceDelete$1(editor, true)) {\n        return;\n      } else if (backspaceDelete(editor)) {\n        return;\n      } else if (backspaceDelete$5(editor, true)) {\n        return;\n      } else if (backspaceDelete$8(editor, true)) {\n        return;\n      } else if (backspaceDelete$2(editor)) {\n        return;\n      } else if (backspaceDelete$7(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var setup$8 = function (editor, caret) {\n      editor.addCommand('delete', function () {\n        deleteCommand(editor, caret);\n      });\n      editor.addCommand('forwardDelete', function () {\n        forwardDeleteCommand(editor, caret);\n      });\n    };\n\n    var SIGNIFICANT_MOVE = 5;\n    var LONGPRESS_DELAY = 400;\n    var getTouch = function (event) {\n      if (event.touches === undefined || event.touches.length !== 1) {\n        return Optional.none();\n      }\n      return Optional.some(event.touches[0]);\n    };\n    var isFarEnough = function (touch, data) {\n      var distX = Math.abs(touch.clientX - data.x);\n      var distY = Math.abs(touch.clientY - data.y);\n      return distX > SIGNIFICANT_MOVE || distY > SIGNIFICANT_MOVE;\n    };\n    var setup$9 = function (editor) {\n      var startData = Cell(Optional.none());\n      var longpressFired = Cell(false);\n      var debounceLongpress = last$2(function (e) {\n        editor.fire('longpress', __assign(__assign({}, e), { type: 'longpress' }));\n        longpressFired.set(true);\n      }, LONGPRESS_DELAY);\n      editor.on('touchstart', function (e) {\n        getTouch(e).each(function (touch) {\n          debounceLongpress.cancel();\n          var data = {\n            x: touch.clientX,\n            y: touch.clientY,\n            target: e.target\n          };\n          debounceLongpress.throttle(e);\n          longpressFired.set(false);\n          startData.set(Optional.some(data));\n        });\n      }, true);\n      editor.on('touchmove', function (e) {\n        debounceLongpress.cancel();\n        getTouch(e).each(function (touch) {\n          startData.get().each(function (data) {\n            if (isFarEnough(touch, data)) {\n              startData.set(Optional.none());\n              longpressFired.set(false);\n              editor.fire('longpresscancel');\n            }\n          });\n        });\n      }, true);\n      editor.on('touchend touchcancel', function (e) {\n        debounceLongpress.cancel();\n        if (e.type === 'touchcancel') {\n          return;\n        }\n        startData.get().filter(function (data) {\n          return data.target.isEqualNode(e.target);\n        }).each(function () {\n          if (longpressFired.get()) {\n            e.preventDefault();\n          } else {\n            editor.fire('tap', __assign(__assign({}, e), { type: 'tap' }));\n          }\n        });\n      }, true);\n    };\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (isText$1(node)) {\n        return true;\n      } else if (isElement$1(node)) {\n        return !isBlockElement(blockElements, node) && !isBookmarkNode$1(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(parents$1(SugarElement.fromDom(node), SugarElement.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom);\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (isText$1(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rootBlockNode, tempNode, wrapped;\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (!node || !isElement$1(node) || !forcedRootBlock) {\n        return;\n      }\n      var rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      var rng = selection.getRng();\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var restoreSelection = hasFocus$1(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, getForcedRootBlockAttrs(editor));\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$a = function (editor) {\n      if (getForcedRootBlock(editor)) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(SugarElement.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom;\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$b = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? reverse(positions) : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Optional.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Optional.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Optional.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Optional.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Optional.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$2(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (isElement$1(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (isText$1(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (nodes) {\n      return bind(nodes, getNodeClientRects);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0;\n      var result = [];\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, last$1(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      var targetClientRect = last$1(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      var node = caretPosition.getNode();\n      add(node);\n      findUntil$1(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return last$1(caretPosition.getClientRects());\n        }\n        return last$1(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      var targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, last$1(result))) {\n          line++;\n        }\n        clientRect = clone$2(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$8 = isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInsideX = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var isInsideY = function (clientY, clientRect) {\n      return clientY >= clientRect.top && clientY <= clientRect.bottom;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        var newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInsideX(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInsideX(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$8(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, startNode, includeChildren) {\n      var node = findNode$1(startNode, direction, isEditableCaretCandidate, root, !includeChildren);\n      do {\n        if (!node || predicateFn(node)) {\n          return;\n        }\n      } while (node = findNode$1(node, direction, isEditableCaretCandidate, root));\n    };\n    var findLineNodeRects = function (root, targetNodeRect, includeChildren) {\n      if (includeChildren === void 0) {\n        includeChildren = true;\n      }\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node, includeChildren);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node, includeChildren);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestFakeCaret = function (root, clientX, clientY) {\n      var fakeTargetNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(fakeTargetNodeRects, curry(isInsideY, clientY));\n      var closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        var includeChildren = !isTable(closestNodeRect.node) && !isMedia(closestNodeRect.node);\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect, includeChildren), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n    var renderRangeCaretOpt = function (editor, range, scrollIntoView) {\n      return Optional.some(renderRangeCaret(editor, range, scrollIntoView));\n    };\n    var moveHorizontally = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var forwards = direction === HDirection.Forwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextPosFn = curry(getVisualCaretPosition, forwards ? caretWalker.next : caretWalker.prev);\n      var isBeforeFn = forwards ? isBefore : isAfter;\n      if (!range.collapsed) {\n        var node = getSelectedNode(range);\n        if (isElement(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, false);\n        }\n      }\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = normalizePosition(forwards, getNextPosFn(caretPosition));\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      if (!nextCaretPosition) {\n        return rangeIsInContainerBlock ? Optional.some(range) : Optional.none();\n      }\n      if (isBeforeFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, false);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, false);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaretOpt(editor, nextCaretPosition.toRange(), false);\n      }\n      return Optional.none();\n    };\n    var moveVertically = function (editor, direction, range, isBefore, isAfter, isElement) {\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var caretClientRect = last$1(caretPosition.getClientRects());\n      var forwards = direction === VDirection.Down;\n      if (!caretClientRect) {\n        return Optional.none();\n      }\n      var walkerFn = forwards ? downUntil : upUntil;\n      var linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      var nextLinePositions = filter(linePositions, isLine(1));\n      var clientX = caretClientRect.left;\n      var nextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (nextLineRect && isElement(nextLineRect.node)) {\n        var dist1 = Math.abs(clientX - nextLineRect.left);\n        var dist2 = Math.abs(clientX - nextLineRect.right);\n        return showCaret(direction, editor, nextLineRect.node, dist1 < dist2, false);\n      }\n      var currentNode;\n      if (isBefore(caretPosition)) {\n        currentNode = caretPosition.getNode();\n      } else if (isAfter(caretPosition)) {\n        currentNode = caretPosition.getNode(true);\n      } else {\n        currentNode = getSelectedNode(range);\n      }\n      if (currentNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), currentNode);\n        var closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n        closestNextLineRect = last$1(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaretOpt(editor, closestNextLineRect.position.toRange(), false);\n        }\n      }\n      if (nextLinePositions.length === 0) {\n        return getLineEndPoint(editor, forwards).filter(forwards ? isAfter : isBefore).map(function (pos) {\n          return renderRangeCaret(editor, pos.toRange(), false);\n        });\n      }\n      return Optional.none();\n    };\n    var getLineEndPoint = function (editor, forward) {\n      var rng = editor.selection.getRng();\n      var body = editor.getBody();\n      if (forward) {\n        var from = CaretPosition$1.fromRangeEnd(rng);\n        var result = getPositionsUntilNextLine(body, from);\n        return last(result.positions);\n      } else {\n        var from = CaretPosition$1.fromRangeStart(rng);\n        var result = getPositionsUntilPreviousLine(body, from);\n        return head(result.positions);\n      }\n    };\n    var moveToLineEndPoint = function (editor, forward, isElementPosition) {\n      return getLineEndPoint(editor, forward).filter(isElementPosition).exists(function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      });\n    };\n\n    var isContentEditableFalse$9 = isContentEditableFalse;\n    var moveToCeFalseHorizontally = function (direction, editor, range) {\n      return moveHorizontally(editor, direction, range, isBeforeContentEditableFalse, isAfterContentEditableFalse, isContentEditableFalse$9);\n    };\n    var moveToCeFalseVertically = function (direction, editor, range) {\n      var isBefore = function (caretPosition) {\n        return isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition);\n      };\n      var isAfter = function (caretPosition) {\n        return isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition);\n      };\n      return moveVertically(editor, direction, range, isBefore, isAfter, isContentEditableFalse$9);\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getVisualCaretPosition$1 = curry(getVisualCaretPosition, direction === 1 ? caretWalker.next : caretWalker.prev);\n      if (range.collapsed && hasForcedRootBlock(editor)) {\n        var pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        var caretPos = getVisualCaretPosition$1(CaretPosition$1.fromRangeStart(range));\n        if (!caretPos) {\n          var newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveToCeFalseHorizontally(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var getVerticalRange = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveToCeFalseVertically(direction, editor, range).orThunk(function () {\n        exitPreBlock(editor, direction, range);\n        return Optional.none();\n      });\n    };\n    var moveH = function (editor, forward) {\n      return getHorizontalRange(editor, forward).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV = function (editor, down) {\n      return getVerticalRange(editor, down).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$1 = function (editor, forward) {\n      var isCefPosition = forward ? isAfterContentEditableFalse : isBeforeContentEditableFalse;\n      return moveToLineEndPoint(editor, forward, isCefPosition);\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = document.createRange();\n      rng.setStartBefore(target.dom);\n      rng.setEndBefore(target.dom);\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = SugarElement.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = SugarElement.fromTag(blockName);\n      var br = SugarElement.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq$2, root);\n      return closest(SugarElement.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom, pos) : isAtFirstLine(root.dom, pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = SugarElement.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = getForcedRootBlock(editor);\n      var rootBlockAttrs = getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$1 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return moveCaretToNewEmptyLine(editor, forward);\n      } else {\n        return false;\n      }\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return __assign({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      return function () {\n        return f.apply(null, x);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n\n    var moveH$1 = function (editor, forward) {\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var range = editor.selection.getRng();\n      return moveHorizontally(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveV$2 = function (editor, down) {\n      var direction = down ? 1 : -1;\n      var range = editor.selection.getRng();\n      return moveVertically(editor, direction, range, isBeforeMedia, isAfterMedia, isMedia).exists(function (newRange) {\n        moveToRange(editor, newRange);\n        return true;\n      });\n    };\n    var moveToLineEndPoint$2 = function (editor, forward) {\n      var isNearMedia = forward ? isAfterMedia : isBeforeMedia;\n      return moveToLineEndPoint(editor, forward, isNearMedia);\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$2(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Optional.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Optional.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Optional.none());\n    };\n    var getClosestCell$1 = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(SugarElement.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom;\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell$1, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell$1, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.exists(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      });\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return positionIn(!forward, table).exists(function (pos) {\n        return pos.isEqual(caretPos);\n      });\n    };\n    var navigateHorizontally = function (editor, forward, table, _td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        showCaret(direction, editor, table, !forward, false).each(function (newRng) {\n          moveToRange(editor, newRng);\n        });\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return isElement$1(node) && node.nodeName === 'TABLE' ? Optional.some(node) : Optional.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = SugarElement.fromTag(forcedRootBlock);\n          setAll(element, getForcedRootBlockAttrs(editor));\n          append(element, SugarElement.fromTag('br'));\n          if (down) {\n            after(SugarElement.fromDom(table), element);\n          } else {\n            before(SugarElement.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom, 0);\n          rng.setEnd(element.dom, 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var move$1 = function (editor, forward, mover) {\n      return Optional.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n        return Optional.from(editor.dom.getParent(td, 'table')).map(function (table) {\n          return mover(editor, forward, table, td);\n        });\n      }).getOr(false);\n    };\n    var moveH$2 = function (editor, forward) {\n      return move$1(editor, forward, navigateHorizontally);\n    };\n    var moveV$3 = function (editor, forward) {\n      return move$1(editor, forward, navigateVertically);\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = detect$3().os;\n      execute([\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$2, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$2, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$3, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$3, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(moveH$1, editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(moveH$1, editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$2, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$2, editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: action(move, editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: action(move, editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(moveNextWord, editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: action(movePrevWord, editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: action(moveV$1, editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: action(moveV$1, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$c = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$9, editor, false)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$4, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$4, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$3, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$3, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$6, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$6, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$5, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$5, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$8, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$8, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$2, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$2, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$1, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$1, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(backspaceDelete$7, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(backspaceDelete$7, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: action(paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: action(paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$d = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var node, lastNode = root;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode(nbsp), root.firstChild);\n        }\n      }\n      var rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        var walker = new DomTreeWalker(root, root);\n        while (node = walker.current()) {\n          if (isText$1(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      scrollRangeIntoView(editor, rng);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Optional.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(SugarElement.fromDom(elm));\n      }).isSome();\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (isElement$1(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      moveToCaretPosition(editor, newBlock);\n    };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(SugarElement.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom;\n        rawNode.nodeValue = trim$2(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$5 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (isElement$1(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (isText$1(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (isText$1(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      var dom = editor.dom;\n      Optional.from(forcedRootBlockAttrs.style).map(dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(SugarElement.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Optional.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Optional.from(node.className).map(function (currentClasses) {\n        return filter(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter(currentClasses, function (clazz) {\n          return !contains(attrClasses, clazz);\n        });\n        var newClasses = __spreadArrays(attrClasses, filteredClasses);\n        dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = filter$1(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains(appliedAttrs, attrs);\n      });\n      dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$5(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      block.normalize();\n      var lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$1 = function (editor, evt) {\n      var tmpRng, container, offset, parentBlock;\n      var newBlock, fragment, containerBlock, parentBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || isBookmarkNode$1(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var node, name;\n        var normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (isText$1(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && isElement$1(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        var walker = new DomTreeWalker(container, parentBlock);\n        if (isText$1(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (isElement$1(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (isText$1(node) && !isWhitespaceText(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        moveToCaretPosition(editor, newBlock);\n      };\n      normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = getForcedRootBlock(editor);\n      var shiftKey = !!(evt && evt.shiftKey);\n      var ctrlKey = !!(evt && evt.ctrlKey);\n      if (isElement$1(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && isText$1(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new DomTreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = !!(evt && evt.ctrlKey);\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = SugarElement.fromTag('br');\n      before(SugarElement.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(SugarElement.fromDom(inline), SugarElement.fromTag('br'));\n      }\n      var br = SugarElement.fromTag('br');\n      after(SugarElement.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom);\n      moveSelectionToBr(editor.dom, editor.selection, br.dom, false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(never, isAnchorLink, isAnchorLink, never);\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget$1 = curry(isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return readLocation(isInlineTarget$1, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert$2 = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n\n    var matchesSelector = function (editor, selector) {\n      return getParentBlock$2(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(SugarElement.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, getNoNewLineSelector(editor));\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, _shiftKey) {\n      return shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, _shiftKey) {\n        var brMode = getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, _shiftKey) {\n        var state = getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, _shiftKey) {\n        return shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, _shiftKey) {\n      return shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (_editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = getForcedRootBlock(editor);\n      var rootEditable = getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Optional.some(action) : Optional.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        !!(evt && evt.shiftKey)\n      ]).getOr(newLineAction.none());\n    };\n\n    var insert$3 = function (editor, evt) {\n      getAction$1(editor, evt).fold(function () {\n        insert$2(editor, evt);\n      }, function () {\n        insert$1(editor, evt);\n      }, noop);\n    };\n\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevelIgnoreLocks(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        insert$3(editor, event);\n      });\n    };\n    var setup$e = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      execute([\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$1, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$1, editor, false)\n        },\n        {\n          keyCode: VK.END,\n          action: action(moveToLineEndPoint$2, editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: action(moveToLineEndPoint$2, editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$f = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n\n    var browser$4 = detect$3().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (_e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (_e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$g = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (isText$1(container)) {\n        container.insertData(offset, text);\n        return Optional.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = SugarElement.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom, text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, nbsp);\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return prevPosition(root.dom, CaretPosition$1.before(element));\n        }, function (element) {\n          return firstPositionIn(element);\n        }, function (element) {\n          return lastPositionIn(element);\n        }, function (element) {\n          return nextPosition(root.dom, CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = SugarElement.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget$1 = curry(isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return readLocation(isInlineTarget$1, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      execute([{\n          keyCode: VK.SPACEBAR,\n          action: action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$h = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n\n    var registerKeyboardOverrides = function (editor) {\n      var caret = setupSelectedState(editor);\n      setup$b(editor);\n      setup$c(editor, caret);\n      setup$d(editor, caret);\n      setup$e(editor);\n      setup$h(editor);\n      setup$g(editor);\n      setup$f(editor);\n      return caret;\n    };\n    var setup$i = function (editor) {\n      if (!isRtc(editor)) {\n        return registerKeyboardOverrides(editor);\n      } else {\n        return Cell(null);\n      }\n    };\n\n    var NodeChange = function () {\n      function NodeChange(editor) {\n        this.lastPath = [];\n        this.editor = editor;\n        var lastRng;\n        var self = this;\n        if (!('onselectionchange' in editor.getDoc())) {\n          editor.on('NodeChange click mouseup keyup focus', function (e) {\n            var nativeRng = editor.selection.getRng();\n            var fakeRng = {\n              startContainer: nativeRng.startContainer,\n              startOffset: nativeRng.startOffset,\n              endContainer: nativeRng.endContainer,\n              endOffset: nativeRng.endOffset\n            };\n            if (e.type === 'nodechange' || !isEq$1(fakeRng, lastRng)) {\n              editor.fire('SelectionChange');\n            }\n            lastRng = fakeRng;\n          });\n        }\n        editor.on('contextmenu', function () {\n          editor.fire('SelectionChange');\n        });\n        editor.on('SelectionChange', function () {\n          var startElm = editor.selection.getStart(true);\n          if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n            return;\n          }\n          if (hasAnyRanges(editor) && !self.isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n            editor.nodeChanged({ selectionChange: true });\n          }\n        });\n        editor.on('mouseup', function (e) {\n          if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n            if (editor.selection.getNode().nodeName === 'IMG') {\n              Delay.setEditorTimeout(editor, function () {\n                editor.nodeChanged();\n              });\n            } else {\n              editor.nodeChanged();\n            }\n          }\n        });\n      }\n      NodeChange.prototype.nodeChanged = function (args) {\n        var selection = this.editor.selection;\n        var node, parents, root;\n        if (this.editor.initialized && selection && !shouldDisableNodeChange(this.editor) && !this.editor.mode.isReadOnly()) {\n          root = this.editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== this.editor.getDoc() || !this.editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          this.editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          this.editor.fire('NodeChange', args);\n        }\n      };\n      NodeChange.prototype.isSameElementPath = function (startElm) {\n        var i;\n        var currentPath = this.editor.$(startElm).parentsUntil(this.editor.getBody()).add(startElm);\n        if (currentPath.length === this.lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== this.lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            this.lastPath = currentPath;\n            return true;\n          }\n        }\n        this.lastPath = currentPath;\n        return false;\n      };\n      return NodeChange;\n    }();\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$j = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var isTextBlockNode = function (node) {\n      return isElement$1(node) && isTextBlock(SugarElement.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(normalize$2(rng));\n    };\n    var setup$k = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var value$1 = function () {\n      var subject = Cell(Optional.none());\n      var clear = function () {\n        return subject.set(Optional.none());\n      };\n      var set = function (s) {\n        return subject.set(Optional.some(s));\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      var on = function (f) {\n        return subject.get().each(f);\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var getAbsolutePosition = function (elm) {\n      var clientRect = elm.getBoundingClientRect();\n      var doc = elm.ownerDocument;\n      var docElem = doc.documentElement;\n      var win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n\n    var isContentEditableFalse$a = isContentEditableFalse, isContentEditableTrue$3 = isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$a(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      return !isContentEditableFalse$a(targetElement);\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var dom = editor.dom;\n      var clonedElm = elm.cloneNode(true);\n      dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start$1 = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), or(isContentEditableFalse$a, isContentEditableTrue$3)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.set({\n              element: ceElm,\n              dragging: false,\n              screenX: e.screenX,\n              screenY: e.screenY,\n              maxX: (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2,\n              maxY: (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2,\n              relX: e.pageX - elmPos.x,\n              relY: e.pageY - elmPos.y,\n              width: ceElm.offsetWidth,\n              height: ceElm.offsetHeight,\n              ghost: createGhost(editor, ceElm, ceElm.offsetWidth, ceElm.offsetHeight)\n            });\n          }\n        }\n      };\n    };\n    var move$2 = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      editor.on('remove', throttledPlaceCaretAt.stop);\n      return function (e) {\n        return state.on(function (state) {\n          var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n          if (!state.dragging && movement > 10) {\n            var args = editor.fire('dragstart', { target: state.element });\n            if (args.isDefaultPrevented()) {\n              return;\n            }\n            state.dragging = true;\n            editor.focus();\n          }\n          if (state.dragging) {\n            var targetPos = applyRelPos(state, calc(editor, e));\n            appendGhostToBody(state.ghost, editor.getBody());\n            moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n            throttledPlaceCaretAt(e.clientX, e.clientY);\n          }\n        });\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        state.on(function (state) {\n          if (state.dragging) {\n            if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n              var targetClone_1 = cloneElement(state.element);\n              var args = editor.fire('drop', {\n                clientX: e.clientX,\n                clientY: e.clientY\n              });\n              if (!args.isDefaultPrevented()) {\n                editor.undoManager.transact(function () {\n                  removeElement(state.element);\n                  editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                  editor._selectionOverrides.hideFakeCaret();\n                });\n              }\n            }\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        state.on(function (state) {\n          if (state.dragging) {\n            editor.fire('dragend');\n          }\n        });\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.on(function (state) {\n        removeElement(state.ghost);\n      });\n      state.clear();\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = value$1();\n      var pageDom = DOMUtils$1.DOM;\n      var rootDocument = document;\n      var dragStartHandler = start$1(state, editor);\n      var dragHandler = move$2(state, editor);\n      var dropHandler = drop(state, editor);\n      var dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$a(realTarget) || editor.dom.getContentEditableParent(realTarget) === 'false') {\n          e.preventDefault();\n        }\n      });\n    };\n    var blockUnsupportedFileDrop = function (editor) {\n      var preventFileDrop = function (e) {\n        if (!e.defaultPrevented) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && (contains(dataTransfer.types, 'Files') || dataTransfer.files.length > 0)) {\n            e.preventDefault();\n            if (e.type === 'drop') {\n              displayError(editor, 'Dropped file type is not supported');\n            }\n          }\n        }\n      };\n      var preventFileDropIfUIElement = function (e) {\n        if (isUIElement(editor, e.target)) {\n          preventFileDrop(e);\n        }\n      };\n      var setup = function () {\n        var pageDom = DOMUtils$1.DOM;\n        var dom = editor.dom;\n        var doc = document;\n        var editorRoot = editor.inline ? editor.getBody() : editor.getDoc();\n        var eventNames = [\n          'drop',\n          'dragover'\n        ];\n        each(eventNames, function (name) {\n          pageDom.bind(doc, name, preventFileDropIfUIElement);\n          dom.bind(editorRoot, name, preventFileDrop);\n        });\n        editor.on('remove', function () {\n          each(eventNames, function (name) {\n            pageDom.unbind(doc, name, preventFileDropIfUIElement);\n            dom.unbind(editorRoot, name, preventFileDrop);\n          });\n        });\n      };\n      editor.on('init', function () {\n        Delay.setEditorTimeout(editor, setup, 0);\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n      if (shouldBlockUnsupportedDrop(editor)) {\n        blockUnsupportedFileDrop(editor);\n      }\n    };\n\n    var setup$l = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed && editor.getBody().contains(document.activeElement)) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, rng, false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n\n    var setup$m = function (editor) {\n      editor.on('init', function () {\n        editor.on('focusin', function (e) {\n          var target = e.target;\n          if (isMedia(target)) {\n            var ceRoot = getContentEditableRoot(editor.getBody(), target);\n            var node = isContentEditableFalse(ceRoot) ? ceRoot : target;\n            if (editor.selection.getNode() !== node) {\n              selectNode(editor, node).each(function (rng) {\n                return editor.selection.setRng(rng);\n              });\n            }\n          }\n        });\n      });\n    };\n\n    var isContentEditableTrue$4 = isContentEditableTrue;\n    var isContentEditableFalse$b = isContentEditableFalse;\n    var getContentEditableRoot$1 = function (editor, node) {\n      return getContentEditableRoot(editor.getBody(), node);\n    };\n    var SelectionOverrides = function (editor) {\n      var selection = editor.selection, dom = editor.dom;\n      var isBlock = dom.isBlock;\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor, rootNode, isBlock, function () {\n        return hasFocus$1(editor);\n      });\n      var realSelectionId = 'sel-' + dom.uniqueId();\n      var elementSelectionAttr = 'data-mce-selected';\n      var selectedElement;\n      var isFakeSelectionElement = function (node) {\n        return dom.hasClass(node, 'mce-offscreen-selection');\n      };\n      var isFakeSelectionTargetElement = function (node) {\n        return node !== rootNode && (isContentEditableFalse$b(node) || isMedia(node)) && dom.isChildOf(node, rootNode);\n      };\n      var isNearFakeSelectionElement = function (pos) {\n        return isBeforeContentEditableFalse(pos) || isAfterContentEditableFalse(pos) || isBeforeMedia(pos) || isAfterMedia(pos);\n      };\n      var getRealSelectionElement = function () {\n        var container = dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          selection.setRng(range);\n        }\n      };\n      var getRange = selection.getRng;\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          selection.scrollIntoView(blockCaretContainer);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && isXYInContentArea(editor, e.clientX, e.clientY)) {\n            renderCaretAtRange(editor, range, false).each(setRange);\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$4(contentEditableRoot)) {\n              if (dom.isChildOf(contentEditableRoot, selection.getNode())) {\n                removeElementSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', removeElementSelection);\n        editor.on('ResizeWindow FullscreenStateChanged', fakeCaret.reposition);\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isNearFakeSelectionElement(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = dom.getParent(node1, isBlock);\n          var block2 = dom.getParent(node2, isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = dom.getParent(targetNode, isBlock);\n          var caretBlock = dom.getParent(caretNode, isBlock);\n          if (targetBlock && targetNode !== caretBlock && dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$b(getContentEditableRoot$1(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        editor.on('tap', function (e) {\n          var targetElm = e.target;\n          var contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (isContentEditableFalse$b(contentEditableRoot)) {\n            e.preventDefault();\n            selectNode(editor, contentEditableRoot).each(setElementSelection);\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          }\n        }, true);\n        editor.on('mousedown', function (e) {\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          var contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$b(contentEditableRoot)) {\n              e.preventDefault();\n              selectNode(editor, contentEditableRoot).each(setElementSelection);\n            } else {\n              removeElementSelection();\n              if (!(isContentEditableTrue$4(contentEditableRoot) && e.shiftKey) && !isXYWithinRange(e.clientX, e.clientY, selection.getRng())) {\n                hideFakeCaret();\n                selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeSelectionTargetElement(targetElm)) {\n            selectNode(editor, targetElm).each(setElementSelection);\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeElementSelection();\n            hideFakeCaret();\n            var fakeCaretInfo = closestFakeCaret(rootNode, e.clientX, e.clientY);\n            if (fakeCaretInfo) {\n              if (!hasBetterMouseTarget(targetElm, fakeCaretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, fakeCaretInfo.node, fakeCaretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          if (isContentEditableFalse$b(selection.getNode())) {\n            e.preventDefault();\n          }\n        });\n        editor.on('GetSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedElement) {\n            if (!selectedElement.parentNode) {\n              selectedElement = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedElement);\n            e.range = rng;\n          }\n        });\n        editor.on('SetSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setElementSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          var parentNode = rng.startContainer.parentNode;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(parentNode)) {\n            removeElementSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText || realSelectionElement.innerText);\n            }\n          }\n        });\n        init(editor);\n        setup$l(editor);\n        setup$m(editor);\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setupOffscreenSelection = function (node, targetClone, origTargetClone) {\n        var $ = editor.$;\n        var $realSelectionContainer = descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom]);\n        });\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        var newRange = dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          newRange.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          newRange.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append(nbsp).append(targetClone).append(nbsp);\n          newRange.setStart($realSelectionContainer[0].firstChild, 1);\n          newRange.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        var sel = selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(newRange);\n        return newRange;\n      };\n      var selectElement = function (elm) {\n        var targetClone = elm.cloneNode(true);\n        var e = editor.fire('ObjectSelected', {\n          target: elm,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        var range = setupOffscreenSelection(elm, e.targetClone, targetClone);\n        var nodeElm = SugarElement.fromDom(elm);\n        each(descendants$1(SugarElement.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          if (!eq$2(nodeElm, elm)) {\n            remove$1(elm, elementSelectionAttr);\n          }\n        });\n        if (!dom.getAttrib(elm, elementSelectionAttr)) {\n          elm.setAttribute(elementSelectionAttr, '1');\n        }\n        selectedElement = elm;\n        hideFakeCaret();\n        return range;\n      };\n      var setElementSelection = function (range, forward) {\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            var dir = forward ? 1 : -1;\n            var caretPosition = getNormalizedRangeEndPoint(dir, rootNode, range);\n            var beforeNode = caretPosition.getNode(!forward);\n            if (isFakeCaretTarget(beforeNode)) {\n              return showCaret(dir, beforeNode, forward ? !caretPosition.isAtEnd() : false, false);\n            }\n            var afterNode = caretPosition.getNode(forward);\n            if (isFakeCaretTarget(afterNode)) {\n              return showCaret(dir, afterNode, forward ? false : !caretPosition.isAtEnd(), false);\n            }\n          }\n          return null;\n        }\n        var startContainer = range.startContainer;\n        var startOffset = range.startOffset;\n        var endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$b(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          var node = startContainer.childNodes[startOffset];\n          if (isFakeSelectionTargetElement(node)) {\n            return selectElement(node);\n          }\n        }\n        return null;\n      };\n      var removeElementSelection = function () {\n        if (selectedElement) {\n          selectedElement.removeAttribute(elementSelectionAttr);\n        }\n        descendant(SugarElement.fromDom(editor.getBody()), '#' + realSelectionId).each(remove);\n        selectedElement = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedElement = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var Quirks = function (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.inline) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          var container = rng.startContainer;\n          var offset = rng.startOffset;\n          var root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!getObjectResizing(editor)) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!isReadOnly(editor)) {\n          editor.on('BeforeExecCommand mousedown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (getForcedRootBlock(editor)) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', getForcedRootBlock(editor));\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (document.activeElement === document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              var selection_1 = editor.selection.getSel();\n              selection_1.modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = fromPoint$1(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        if (!isGecko || editor.removed) {\n          return false;\n        }\n        var sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var body = SugarElement.fromDom(editor.getBody());\n      var container = getStyleContainer(getRootNode(body));\n      var style = SugarElement.fromTag('style');\n      set(style, 'type', 'text/css');\n      append(style, SugarElement.fromText(text));\n      append(container, style);\n      editor.on('remove', function () {\n        remove(style);\n      });\n    };\n    var getRootName = function (editor) {\n      return editor.inline ? editor.getElement().nodeName.toLowerCase() : undefined;\n    };\n    var removeUndefined = function (obj) {\n      return filter$1(obj, function (v) {\n        return isUndefined(v) === false;\n      });\n    };\n    var mkParserSettings = function (editor) {\n      var settings = editor.settings;\n      var blobCache = editor.editorUpload.blobCache;\n      return removeUndefined({\n        allow_conditional_comments: settings.allow_conditional_comments,\n        allow_html_data_urls: settings.allow_html_data_urls,\n        allow_svg_data_urls: settings.allow_svg_data_urls,\n        allow_html_in_named_anchor: settings.allow_html_in_named_anchor,\n        allow_script_urls: settings.allow_script_urls,\n        allow_unsafe_link_target: settings.allow_unsafe_link_target,\n        convert_fonts_to_spans: settings.convert_fonts_to_spans,\n        fix_list_elements: settings.fix_list_elements,\n        font_size_legacy_values: settings.font_size_legacy_values,\n        forced_root_block: settings.forced_root_block,\n        forced_root_block_attrs: settings.forced_root_block_attrs,\n        padd_empty_with_br: settings.padd_empty_with_br,\n        preserve_cdata: settings.preserve_cdata,\n        remove_trailing_brs: settings.remove_trailing_brs,\n        inline_styles: settings.inline_styles,\n        root_name: getRootName(editor),\n        validate: true,\n        blob_cache: blobCache,\n        images_dataimg_filter: settings.images_dataimg_filter\n      });\n    };\n    var mkSerializerSettings = function (editor) {\n      var settings = editor.settings;\n      return __assign(__assign({}, mkParserSettings(editor)), removeUndefined({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope,\n        element_format: settings.element_format,\n        entities: settings.entities,\n        entity_encoding: settings.entity_encoding,\n        indent: settings.indent,\n        indent_after: settings.indent_after,\n        indent_before: settings.indent_before,\n        block_elements: settings.block_elements,\n        boolean_attributes: settings.boolean_attributes,\n        custom_elements: settings.custom_elements,\n        extended_valid_elements: settings.extended_valid_elements,\n        invalid_elements: settings.invalid_elements,\n        invalid_styles: settings.invalid_styles,\n        move_caret_before_on_enter_elements: settings.move_caret_before_on_enter_elements,\n        non_empty_elements: settings.non_empty_elements,\n        schema: settings.schema,\n        self_closing_elements: settings.self_closing_elements,\n        short_ended_elements: settings.short_ended_elements,\n        special: settings.special,\n        text_block_elements: settings.text_block_elements,\n        text_inline_elements: settings.text_inline_elements,\n        valid_children: settings.valid_children,\n        valid_classes: settings.valid_classes,\n        valid_elements: settings.valid_elements,\n        valid_styles: settings.valid_styles,\n        verify_html: settings.verify_html,\n        whitespace_elements: settings.whitespace_elements\n      }));\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(mkParserSettings(editor), editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var dom = editor.dom;\n        var internalName = 'data-mce-' + name;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          if (value && !node.attr(internalName)) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          var node = nodes[i];\n          var type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      if (editor.settings.preserve_cdata) {\n        parser.addNodeFilter('#cdata', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            var node = nodes[i];\n            node.type = 8;\n            node.name = '#comment';\n            node.value = '[CDATA[' + editor.dom.encode(node.value) + ']]';\n          }\n        });\n      }\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          var node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new AstNode('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var moveSelectionToFirstCaretPosition = function (editor) {\n      var root = editor.dom.getRoot();\n      if (!editor.inline && (!hasAnyRanges(editor) || editor.selection.getStart(true) === root)) {\n        firstPositionIn(root).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = isTable(node) ? firstPositionIn(node).getOr(pos) : pos;\n          if (Env.browser.isIE()) {\n            storeNative(editor, caretPos.toRange());\n          } else {\n            editor.selection.setRng(caretPos.toRange());\n          }\n        });\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      fireInit(editor);\n      editor.focus(true);\n      moveSelectionToFirstCaretPosition(editor);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? editor.ui.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var loadContentCss = function (editor, css) {\n      var styleSheetLoader = getStyleSheetLoader(editor);\n      var loaded = function () {\n        editor.on('remove', function () {\n          return styleSheetLoader.unloadAll(css);\n        });\n        initEditor(editor);\n      };\n      styleSheetLoader.loadAll(css, loaded, loaded);\n    };\n    var preInit = function (editor, rtcMode) {\n      var settings = editor.settings, doc = editor.getDoc(), body = editor.getBody();\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$4.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      firePostRender(editor);\n      var directionality = getDirectionality(editor);\n      if (directionality !== undefined) {\n        body.dir = directionality;\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      if (rtcMode === false) {\n        editor.load({\n          initial: true,\n          format: 'html'\n        });\n      }\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        var contentCssText_1 = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText_1 += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText_1);\n      }\n      loadContentCss(editor, editor.contentCSS);\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc();\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !editor.inline) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (editor.inline) {\n        DOM$4.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = document;\n        editor.contentWindow = window;\n        editor.bodyElement = targetElm;\n        editor.contentAreaContainer = targetElm;\n      }\n      var body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = !!settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$4.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: function () {\n          return editor.inline;\n        },\n        schema: editor.schema,\n        contentCssCors: shouldUseContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer(mkSerializerSettings(editor), editor);\n      editor.selection = EditorSelection(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$9(editor);\n      setup$j(editor);\n      if (!isRtc(editor)) {\n        setup$k(editor);\n      }\n      var caret = setup$i(editor);\n      setup$8(editor, caret);\n      setup$a(editor);\n      setup$7(editor);\n      firePreInit(editor);\n      setup$5(editor).fold(function () {\n        preInit(editor, false);\n      }, function (loadingRtc) {\n        editor.setProgressState(true);\n        loadingRtc.then(function (rtcMode) {\n          editor.setProgressState(false);\n          preInit(editor, rtcMode);\n        });\n      });\n    };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (document.domain !== window.location.hostname && Env.browser.isIE()) {\n        var bodyUuid = uuid('mce');\n        editor[bodyUuid] = function () {\n          initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$5.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = SugarElement.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      add$3(iframe, 'tox-edit-area__iframe');\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var iframeHTML = getDocType(editor) + '<html><head>';\n      if (getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      var bodyId = getBodyId(editor);\n      var bodyClass = getBodyClass(editor);\n      if (getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-0 for help.');\n      var ifr = createIframeElement(editor.id, title, o.height, getIframeAttrs(editor)).dom;\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$5.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$5.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$5.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$5.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        initContentBody(editor);\n      }\n    };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager.get(plugin);\n      var pluginUrl = PluginManager.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initIcons = function (editor) {\n      var iconPackName = Tools.trim(getIconPackName(editor));\n      var currentIcons = editor.ui.registry.getAll().icons;\n      var loadIcons = __assign(__assign({}, IconManager.get('default').icons), IconManager.get(iconPackName).icons);\n      each$1(loadIcons, function (svgData, icon) {\n        if (!has(currentIcons, icon)) {\n          editor.ui.registry.addIcon(icon, svgData);\n        }\n      });\n    };\n    var initTheme = function (editor) {\n      var theme = getTheme(editor);\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        var Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      return editor.theme.renderUI();\n    };\n    var renderFromThemeFunc = function (editor) {\n      var elm = editor.getElement();\n      var theme = getTheme(editor);\n      var info = theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element,\n        api: {}\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$6.create('div');\n      DOM$6.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(getTheme(editor))) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(getTheme(editor))) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var augmentEditorUiApi = function (editor, api) {\n      var uiApiFacade = {\n        show: Optional.from(api.show).getOr(noop),\n        hide: Optional.from(api.hide).getOr(noop),\n        disable: Optional.from(api.disable).getOr(noop),\n        isDisabled: Optional.from(api.isDisabled).getOr(never),\n        enable: function () {\n          if (!editor.mode.isReadOnly()) {\n            Optional.from(api.enable).map(call);\n          }\n        }\n      };\n      editor.ui = __assign(__assign({}, editor.ui), uiApiFacade);\n    };\n    var init$2 = function (editor) {\n      editor.fire('ScriptsLoaded');\n      initIcons(editor);\n      initTheme(editor);\n      initPlugins(editor);\n      var renderInfo = renderThemeUi(editor);\n      augmentEditorUiApi(editor, Optional.from(renderInfo.api).getOr({}));\n      var boxInfo = {\n        editorContainer: renderInfo.editorContainer,\n        iframeContainer: renderInfo.iframeContainer\n      };\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      appendContentCssFromSettings(editor);\n      if (editor.inline) {\n        return initContentBody(editor);\n      } else {\n        return init$1(editor, boxInfo);\n      }\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var languageCode = getLanguageCode(editor);\n      var languageUrl = getLanguageUrl(editor);\n      if (I18n.hasCode(languageCode) === false && languageCode !== 'en') {\n        var url_1 = languageUrl !== '' ? languageUrl : editor.editorManager.baseURL + '/langs/' + languageCode + '.js';\n        scriptLoader.add(url_1, noop, undefined, function () {\n          languageLoadError(editor, url_1, languageCode);\n        });\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var theme = getTheme(editor);\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = getThemeUrl(editor);\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var getIconsUrlMetaFromUrl = function (editor) {\n      return Optional.from(getIconsUrl(editor)).filter(function (url) {\n        return url.length > 0;\n      }).map(function (url) {\n        return {\n          url: url,\n          name: Optional.none()\n        };\n      });\n    };\n    var getIconsUrlMetaFromName = function (editor, name, suffix) {\n      return Optional.from(name).filter(function (name) {\n        return name.length > 0 && !IconManager.has(name);\n      }).map(function (name) {\n        return {\n          url: editor.editorManager.baseURL + '/icons/' + name + '/icons' + suffix + '.js',\n          name: Optional.some(name)\n        };\n      });\n    };\n    var loadIcons = function (scriptLoader, editor, suffix) {\n      var defaultIconsUrl = getIconsUrlMetaFromName(editor, 'default', suffix);\n      var customIconsUrl = getIconsUrlMetaFromUrl(editor).orThunk(function () {\n        return getIconsUrlMetaFromName(editor, getIconPackName(editor), '');\n      });\n      each(cat([\n        defaultIconsUrl,\n        customIconsUrl\n      ]), function (urlMeta) {\n        scriptLoader.add(urlMeta.url, noop, undefined, function () {\n          iconsLoadError(editor, urlMeta.url, urlMeta.name.getOrUndefined());\n        });\n      });\n    };\n    var loadPlugins = function (editor, suffix) {\n      Tools.each(getExternalPlugins(editor), function (url, name) {\n        PluginManager.load(name, url, noop, undefined, function () {\n          pluginLoadError(editor, url, name);\n        });\n        editor.settings.plugins += ' ' + name;\n      });\n      Tools.each(getPlugins(editor).split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager.dependencies(plugin);\n            Tools.each(dependencies, function (depPlugin) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: depPlugin,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              var dep = PluginManager.createUrl(defaultSettings, depPlugin);\n              PluginManager.load(dep.resource, dep, noop, undefined, function () {\n                pluginLoadError(editor, dep.prefix + dep.resource + dep.suffix, dep.resource);\n              });\n            });\n          } else {\n            var url_2 = {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            };\n            PluginManager.load(plugin, url_2, noop, undefined, function () {\n              pluginLoadError(editor, url_2.prefix + url_2.resource + url_2.suffix, plugin);\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadIcons(scriptLoader, editor, suffix);\n        loadPlugins(editor, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            init$2(editor);\n          }\n        }, editor, function () {\n          if (!editor.removed) {\n            init$2(editor);\n          }\n        });\n      });\n    };\n    var getStyleSheetLoader$1 = function (element, editor) {\n      return instance.forElement(element, {\n        contentCssCors: hasContentCssCors(editor),\n        referrerPolicy: getReferrerPolicy(editor)\n      });\n    };\n    var render = function (editor) {\n      var id = editor.id;\n      I18n.setCode(getLanguageCode(editor));\n      var readyHandler = function () {\n        DOM$7.unbind(window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$7.bind(window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      var element = SugarElement.fromDom(editor.getElement());\n      var snapshot = clone(element);\n      editor.on('remove', function () {\n        eachr(element.dom.attributes, function (attr) {\n          return remove$1(element, attr.name);\n        });\n        setAll(element, snapshot);\n      });\n      editor.ui.styleSheetLoader = getStyleSheetLoader$1(element, editor);\n      if (!isInline$1(editor)) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$7.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (hasHiddenInput(editor) && !isTextareaOrInput(editor.getElement())) {\n          DOM$7.insertAfter(DOM$7.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$7.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.resetContent();\n        });\n        if (shouldPatchSubmit(editor) && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (isEncodingXml(editor)) {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$7.encode(e.content);\n          }\n        });\n      }\n      if (shouldAddFormSubmitTrigger(editor)) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (shouldAddUnloadTrigger(editor)) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n\n    var addVisual$1 = function (editor, elm) {\n      return addVisual(editor, elm);\n    };\n\n    var legacyPropNames = {\n      'font-size': 'size',\n      'font-family': 'face'\n    };\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName).orThunk(function () {\n          if (name(elm) === 'font') {\n            return get$1(legacyPropNames, propName).bind(function (legacyPropName) {\n              return getOpt(elm, legacyPropName);\n            });\n          } else {\n            return Optional.none();\n          }\n        });\n      };\n      var isRoot = function (elm) {\n        return eq$2(SugarElement.fromDom(rootElm), elm);\n      };\n      return closest$2(SugarElement.fromDom(elm), function (elm) {\n        return getProperty(elm);\n      }, isRoot);\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Optional.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Optional.from(elm).map(SugarElement.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom).or(getComputedFontProp(propName, element.dom));\n        }).getOr('');\n      };\n    };\n    var getFontSize = getFontProp('font-size');\n    var getFontFamily = compose(normalizeFontFamily, getFontProp('font-family'));\n\n    var findFirstCaretElement = function (editor) {\n      return firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return isText$1(container) ? container.parentNode : container;\n      });\n    };\n    var getCaretElement = function (editor) {\n      return Optional.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        var atStartOfNode = rng.startContainer === root && rng.startOffset === 0;\n        return atStartOfNode ? Optional.none() : Optional.from(editor.selection.getStart(true));\n      });\n    };\n    var mapRange = function (editor, mapper) {\n      return getCaretElement(editor).orThunk(curry(findFirstCaretElement, editor)).map(SugarElement.fromDom).filter(isElement).map(mapper);\n    };\n\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = getFontStyleValues(editor);\n          var fontClasses = getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var normalizeFontNames = function (font) {\n      var fonts = font.split(/\\s*,\\s*/);\n      return map(fonts, function (font) {\n        if (font.indexOf(' ') !== -1 && !(startsWith(font, '\"') || startsWith(font, '\\''))) {\n          return '\\'' + font + '\\'';\n        } else {\n          return font;\n        }\n      }).join(',');\n    };\n    var fontNameAction = function (editor, value) {\n      var font = fromFontSizeNumber(editor, value);\n      editor.formatter.toggle('fontname', { value: normalizeFontNames(font) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontFamily(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        return getFontSize(editor.getBody(), elm.dom);\n      }).getOr('');\n    };\n\n    var lineHeightQuery = function (editor) {\n      return mapRange(editor, function (elm) {\n        var root = SugarElement.fromDom(editor.getBody());\n        var specifiedStyle = closest$2(elm, function (elm) {\n          return getRaw(elm, 'line-height');\n        }, curry(eq$2, root));\n        var computedStyle = function () {\n          var lineHeight = parseFloat(get$5(elm, 'line-height'));\n          var fontSize = parseFloat(get$5(elm, 'font-size'));\n          return String(lineHeight / fontSize);\n        };\n        return specifiedStyle.getOrThunk(computedStyle);\n      }).getOr('');\n    };\n    var lineHeightAction = function (editor, lineHeight) {\n      editor.undoManager.transact(function () {\n        editor.formatter.toggle('lineheight', { value: String(lineHeight) });\n        editor.nodeChanged();\n      });\n    };\n\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertContent(editor, result.content, result.details);\n    };\n\n    var each$f = Tools.each;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    var EditorCommands = function () {\n      function EditorCommands(editor) {\n        this.commands = {\n          state: {},\n          exec: {},\n          value: {}\n        };\n        this.editor = editor;\n        this.setupCommands(editor);\n      }\n      EditorCommands.prototype.execCommand = function (command, ui, value, args) {\n        var func, state = false;\n        var self = this;\n        if (self.editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          self.editor.focus();\n        } else {\n          restore(self.editor);\n        }\n        args = self.editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        var customCommand = command.toLowerCase();\n        if (func = self.commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$f(this.editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            self.editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (self.editor.theme && self.editor.theme.execCommand && self.editor.theme.execCommand(command, ui, value)) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = self.editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          self.editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandState = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.queryCommandValue = function (command) {\n        var func;\n        if (this.editor.quirks.isHidden() || this.editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = this.commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return this.editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      EditorCommands.prototype.addCommands = function (commandList, type) {\n        if (type === void 0) {\n          type = 'exec';\n        }\n        var self = this;\n        each$f(commandList, function (callback, command) {\n          each$f(command.toLowerCase().split(','), function (command) {\n            self.commands[type][command] = callback;\n          });\n        });\n      };\n      EditorCommands.prototype.addCommand = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || _this.editor, ui, value, args);\n        };\n      };\n      EditorCommands.prototype.queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (this.commands.exec[command]) {\n          return true;\n        }\n        try {\n          return this.editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      EditorCommands.prototype.addQueryStateHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.state[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.addQueryValueHandler = function (command, callback, scope) {\n        var _this = this;\n        command = command.toLowerCase();\n        this.commands.value[command] = function () {\n          return callback.call(scope || _this.editor);\n        };\n      };\n      EditorCommands.prototype.hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!this.commands.exec[command];\n      };\n      EditorCommands.prototype.execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return this.editor.getDoc().execCommand(command, ui, value);\n      };\n      EditorCommands.prototype.isFormatMatch = function (name) {\n        return this.editor.formatter.match(name);\n      };\n      EditorCommands.prototype.toggleFormat = function (name, value) {\n        this.editor.formatter.toggle(name, value ? { value: value } : undefined);\n        this.editor.nodeChanged();\n      };\n      EditorCommands.prototype.storeSelection = function (type) {\n        this.selectionBookmark = this.editor.selection.getBookmark(type);\n      };\n      EditorCommands.prototype.restoreSelection = function () {\n        this.editor.selection.moveToBookmark(this.selectionBookmark);\n      };\n      EditorCommands.prototype.setupCommands = function (editor) {\n        var self = this;\n        this.addCommands({\n          'mceResetDesignMode,mceBeginUndoLevel': function () {\n          },\n          'mceEndUndoLevel,mceAddUndoLevel': function () {\n            editor.undoManager.add();\n          },\n          'Cut,Copy,Paste': function (command) {\n            var doc = editor.getDoc();\n            var failed;\n            try {\n              self.execNativeCommand(command);\n            } catch (ex) {\n              failed = true;\n            }\n            if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n              failed = true;\n            }\n            if (failed || !doc.queryCommandSupported(command)) {\n              var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n              if (Env.mac) {\n                msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n              }\n              editor.notificationManager.open({\n                text: msg,\n                type: 'error'\n              });\n            }\n          },\n          'unlink': function () {\n            if (editor.selection.isCollapsed()) {\n              var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n              if (elm) {\n                editor.dom.remove(elm, true);\n              }\n              return;\n            }\n            editor.formatter.remove('link');\n          },\n          'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n            var align = command.substring(7);\n            if (align === 'full') {\n              align = 'justify';\n            }\n            each$f('left,center,right,justify'.split(','), function (name) {\n              if (align !== name) {\n                editor.formatter.remove('align' + name);\n              }\n            });\n            if (align !== 'none') {\n              self.toggleFormat('align' + align);\n            }\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var listParent;\n            self.execNativeCommand(command);\n            var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n            if (listElm) {\n              listParent = listElm.parentNode;\n              if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n                self.storeSelection();\n                editor.dom.split(listParent, listElm);\n                self.restoreSelection();\n              }\n            }\n          },\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            self.toggleFormat(command);\n          },\n          'ForeColor,HiliteColor': function (command, ui, value) {\n            self.toggleFormat(command, value);\n          },\n          'FontName': function (command, ui, value) {\n            fontNameAction(editor, value);\n          },\n          'FontSize': function (command, ui, value) {\n            fontSizeAction(editor, value);\n          },\n          'LineHeight': function (command, ui, value) {\n            lineHeightAction(editor, value);\n          },\n          'RemoveFormat': function (command) {\n            editor.formatter.remove(command);\n          },\n          'mceBlockQuote': function () {\n            self.toggleFormat('blockquote');\n          },\n          'FormatBlock': function (command, ui, value) {\n            return self.toggleFormat(value || 'p');\n          },\n          'mceCleanup': function () {\n            var bookmark = editor.selection.getBookmark();\n            editor.setContent(editor.getContent());\n            editor.selection.moveToBookmark(bookmark);\n          },\n          'mceRemoveNode': function (command, ui, value) {\n            var node = value || editor.selection.getNode();\n            if (node !== editor.getBody()) {\n              self.storeSelection();\n              editor.dom.remove(node, true);\n              self.restoreSelection();\n            }\n          },\n          'mceSelectNodeDepth': function (command, ui, value) {\n            var counter = 0;\n            editor.dom.getParent(editor.selection.getNode(), function (node) {\n              if (node.nodeType === 1 && counter++ === value) {\n                editor.selection.select(node);\n                return false;\n              }\n            }, editor.getBody());\n          },\n          'mceSelectNode': function (command, ui, value) {\n            editor.selection.select(value);\n          },\n          'mceInsertContent': function (command, ui, value) {\n            insertAtCaret$1(editor, value);\n          },\n          'mceInsertRawHTML': function (command, ui, value) {\n            editor.selection.setContent('tiny_mce_marker');\n            var content = editor.getContent();\n            editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n              return value;\n            }));\n          },\n          'mceInsertNewLine': function (command, ui, value) {\n            insert$3(editor, value);\n          },\n          'mceToggleFormat': function (command, ui, value) {\n            self.toggleFormat(value);\n          },\n          'mceSetContent': function (command, ui, value) {\n            editor.setContent(value);\n          },\n          'Indent,Outdent': function (command) {\n            handle(editor, command);\n          },\n          'mceRepaint': function () {\n          },\n          'InsertHorizontalRule': function () {\n            editor.execCommand('mceInsertContent', false, '<hr />');\n          },\n          'mceToggleVisualAid': function () {\n            editor.hasVisual = !editor.hasVisual;\n            editor.addVisual();\n          },\n          'mceReplaceContent': function (command, ui, value) {\n            editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, editor.selection.getContent({ format: 'text' })));\n          },\n          'mceInsertLink': function (command, ui, value) {\n            if (typeof value === 'string') {\n              value = { href: value };\n            }\n            var anchor = editor.dom.getParent(editor.selection.getNode(), 'a');\n            value.href = value.href.replace(/ /g, '%20');\n            if (!anchor || !value.href) {\n              editor.formatter.remove('link');\n            }\n            if (value.href) {\n              editor.formatter.apply('link', value, anchor);\n            }\n          },\n          'selectAll': function () {\n            var editingHost = editor.dom.getParent(editor.selection.getStart(), isContentEditableTrue);\n            if (editingHost) {\n              var rng = editor.dom.createRng();\n              rng.selectNodeContents(editingHost);\n              editor.selection.setRng(rng);\n            }\n          },\n          'mceNewDocument': function () {\n            editor.setContent('');\n          },\n          'InsertLineBreak': function (command, ui, value) {\n            insert$2(editor, value);\n            return true;\n          }\n        });\n        var alignStates = function (name) {\n          return function () {\n            var selection = editor.selection;\n            var nodes = selection.isCollapsed() ? [editor.dom.getParent(selection.getNode(), editor.dom.isBlock)] : selection.getSelectedBlocks();\n            var matches = map$3(nodes, function (node) {\n              return !!editor.formatter.matchNode(node, name);\n            });\n            return inArray$2(matches, true) !== -1;\n          };\n        };\n        self.addCommands({\n          'JustifyLeft': alignStates('alignleft'),\n          'JustifyCenter': alignStates('aligncenter'),\n          'JustifyRight': alignStates('alignright'),\n          'JustifyFull': alignStates('alignjustify'),\n          'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n            return self.isFormatMatch(command);\n          },\n          'mceBlockQuote': function () {\n            return self.isFormatMatch('blockquote');\n          },\n          'Outdent': function () {\n            return canOutdent(editor);\n          },\n          'InsertUnorderedList,InsertOrderedList': function (command) {\n            var list = editor.dom.getParent(editor.selection.getNode(), 'ul,ol');\n            return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n          }\n        }, 'state');\n        self.addCommands({\n          Undo: function () {\n            editor.undoManager.undo();\n          },\n          Redo: function () {\n            editor.undoManager.redo();\n          }\n        });\n        self.addQueryValueHandler('FontName', function () {\n          return fontNameQuery(editor);\n        }, this);\n        self.addQueryValueHandler('FontSize', function () {\n          return fontSizeQuery(editor);\n        }, this);\n        self.addQueryValueHandler('LineHeight', function () {\n          return lineHeightQuery(editor);\n        }, this);\n      };\n      return EditorCommands;\n    }();\n\n    var internalContentEditableAttr = 'data-mce-contenteditable';\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$3(elm, cls);\n      }\n    };\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, String(state));\n      } catch (ex) {\n      }\n    };\n    var setContentEditable = function (elm, state) {\n      elm.dom.contentEditable = state ? 'true' : 'false';\n    };\n    var switchOffContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[contenteditable=\"true\"]'), function (elm) {\n        set(elm, internalContentEditableAttr, 'true');\n        setContentEditable(elm, false);\n      });\n    };\n    var switchOnContentEditableTrue = function (elm) {\n      each(descendants$1(elm, '*[' + internalContentEditableAttr + '=\"true\"]'), function (elm) {\n        remove$1(elm, internalContentEditableAttr);\n        setContentEditable(elm, true);\n      });\n    };\n    var removeFakeSelection = function (editor) {\n      Optional.from(editor.selection.getNode()).each(function (elm) {\n        elm.removeAttribute('data-mce-selected');\n      });\n    };\n    var restoreFakeSelection = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var toggleReadOnly = function (editor, state) {\n      var body = SugarElement.fromDom(editor.getBody());\n      toggleClass(body, 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor._selectionOverrides.hideFakeCaret();\n        removeFakeSelection(editor);\n        editor.readonly = true;\n        setContentEditable(body, false);\n        switchOffContentEditableTrue(body);\n      } else {\n        editor.readonly = false;\n        setContentEditable(body, true);\n        switchOnContentEditableTrue(body);\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        if (hasEditorOrUiFocus(editor)) {\n          editor.focus();\n        }\n        restoreFakeSelection(editor);\n        editor.nodeChanged();\n      }\n    };\n    var isReadOnly$1 = function (editor) {\n      return editor.readonly;\n    };\n    var registerFilters = function (editor) {\n      editor.parser.addAttributeFilter('contenteditable', function (nodes) {\n        if (isReadOnly$1(editor)) {\n          each(nodes, function (node) {\n            node.attr(internalContentEditableAttr, node.attr('contenteditable'));\n            node.attr('contenteditable', 'false');\n          });\n        }\n      });\n      editor.serializer.addAttributeFilter(internalContentEditableAttr, function (nodes) {\n        if (isReadOnly$1(editor)) {\n          each(nodes, function (node) {\n            node.attr('contenteditable', node.attr(internalContentEditableAttr));\n          });\n        }\n      });\n      editor.serializer.addTempAttr(internalContentEditableAttr);\n    };\n    var registerReadOnlyContentFilters = function (editor) {\n      if (editor.serializer) {\n        registerFilters(editor);\n      } else {\n        editor.on('PreInit', function () {\n          registerFilters(editor);\n        });\n      }\n    };\n    var isClickEvent = function (e) {\n      return e.type === 'click';\n    };\n    var getAnchorHrefOpt = function (editor, elm) {\n      var isRoot = function (elm) {\n        return eq$2(elm, SugarElement.fromDom(editor.getBody()));\n      };\n      return closest$1(elm, 'a', isRoot).bind(function (a) {\n        return getOpt(a, 'href');\n      });\n    };\n    var processReadonlyEvents = function (editor, e) {\n      if (isClickEvent(e) && !VK.metaKeyPressed(e)) {\n        var elm = SugarElement.fromDom(e.target);\n        getAnchorHrefOpt(editor, elm).each(function (href) {\n          e.preventDefault();\n          if (/^#/.test(href)) {\n            var targetEl = editor.dom.select(href + ',[name=\"' + removeLeading(href, '#') + '\"]');\n            if (targetEl.length) {\n              editor.selection.scrollIntoView(targetEl[0], true);\n            }\n          } else {\n            window.open(href, '_blank', 'rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes');\n          }\n        });\n      }\n    };\n    var registerReadOnlySelectionBlockers = function (editor) {\n      editor.on('ShowCaret', function (e) {\n        if (isReadOnly$1(editor)) {\n          e.preventDefault();\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        if (isReadOnly$1(editor)) {\n          e.preventDefault();\n        }\n      });\n    };\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel', ' ');\n    var EventDispatcher = function () {\n      function EventDispatcher(settings) {\n        this.bindings = {};\n        this.settings = settings || {};\n        this.scope = this.settings.scope || this;\n        this.toggleEvent = this.settings.toggleEvent || never;\n      }\n      EventDispatcher.isNative = function (name) {\n        return !!nativeEvents[name.toLowerCase()];\n      };\n      EventDispatcher.prototype.fire = function (nameIn, argsIn) {\n        var name = nameIn.toLowerCase();\n        var args = argsIn || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = this.scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = always;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = always;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = always;\n          };\n          args.isDefaultPrevented = never;\n          args.isPropagationStopped = never;\n          args.isImmediatePropagationStopped = never;\n        }\n        if (this.settings.beforeFire) {\n          this.settings.beforeFire(args);\n        }\n        var handlers = this.bindings[name];\n        if (handlers) {\n          for (var i = 0, l = handlers.length; i < l; i++) {\n            var callback = handlers[i];\n            if (callback.once) {\n              this.off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(this.scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      EventDispatcher.prototype.on = function (name, callback, prepend, extra) {\n        if (callback === false) {\n          callback = never;\n        }\n        if (callback) {\n          var wrappedCallback = { func: callback };\n          if (extra) {\n            Tools.extend(wrappedCallback, extra);\n          }\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!handlers) {\n              handlers = this.bindings[currentName] = [];\n              this.toggleEvent(currentName, true);\n            }\n            if (prepend) {\n              handlers.unshift(wrappedCallback);\n            } else {\n              handlers.push(wrappedCallback);\n            }\n          }\n        }\n        return this;\n      };\n      EventDispatcher.prototype.off = function (name, callback) {\n        var _this = this;\n        if (name) {\n          var names = name.toLowerCase().split(' ');\n          var i = names.length;\n          while (i--) {\n            var currentName = names[i];\n            var handlers = this.bindings[currentName];\n            if (!currentName) {\n              each$1(this.bindings, function (_value, bindingName) {\n                _this.toggleEvent(bindingName, false);\n                delete _this.bindings[bindingName];\n              });\n              return this;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                var hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    this.bindings[currentName] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                this.toggleEvent(name, false);\n                delete this.bindings[currentName];\n              }\n            }\n          }\n        } else {\n          each$1(this.bindings, function (_value, name) {\n            _this.toggleEvent(name, false);\n          });\n          this.bindings = {};\n        }\n        return this;\n      };\n      EventDispatcher.prototype.once = function (name, callback, prepend) {\n        return this.on(name, callback, prepend, { once: true });\n      };\n      EventDispatcher.prototype.has = function (name) {\n        name = name.toLowerCase();\n        return !(!this.bindings[name] || this.bindings[name].length === 0);\n      };\n      return EventDispatcher;\n    }();\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new EventDispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (EventDispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        var dispatcherArgs = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent_1 = self.parent();\n          while (parent_1 && !dispatcherArgs.isPropagationStopped()) {\n            parent_1.fire(name, dispatcherArgs, false);\n            parent_1 = parent_1.parent();\n          }\n        }\n        return dispatcherArgs;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var DOM$8 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      var eventRoot = getEventRoot(editor);\n      if (eventRoot) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$8.select(eventRoot)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !isReadOnly$1(editor);\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly$1(editor)) {\n        processReadonlyEvents(editor, e);\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      var eventRootElm = getEventTarget(editor, eventName);\n      if (getEventRoot(editor)) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                each$1(customEventRootDelegates, function (_value, name) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                });\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$8.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$8.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$8.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = __assign(__assign({}, Observable), {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        if (self.delegates) {\n          each$1(self.delegates, function (value, name) {\n            self.dom.unbind(getEventTarget(self, name), name, value);\n          });\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    });\n\n    var defaultModes = [\n      'design',\n      'readonly'\n    ];\n    var switchToMode = function (editor, activeMode, availableModes, mode) {\n      var oldMode = availableModes[activeMode.get()];\n      var newMode = availableModes[mode];\n      try {\n        newMode.activate();\n      } catch (e) {\n        console.error('problem while activating editor mode ' + mode + ':', e);\n        return;\n      }\n      oldMode.deactivate();\n      if (oldMode.editorReadOnly !== newMode.editorReadOnly) {\n        toggleReadOnly(editor, newMode.editorReadOnly);\n      }\n      activeMode.set(mode);\n      fireSwitchMode(editor, mode);\n    };\n    var setMode = function (editor, availableModes, activeMode, mode) {\n      if (mode === activeMode.get()) {\n        return;\n      } else if (!has(availableModes, mode)) {\n        throw new Error('Editor mode \\'' + mode + '\\' is invalid');\n      }\n      if (editor.initialized) {\n        switchToMode(editor, activeMode, availableModes, mode);\n      } else {\n        editor.on('init', function () {\n          return switchToMode(editor, activeMode, availableModes, mode);\n        });\n      }\n    };\n    var registerMode = function (availableModes, mode, api) {\n      var _a;\n      if (contains(defaultModes, mode)) {\n        throw new Error('Cannot override default mode ' + mode);\n      }\n      return __assign(__assign({}, availableModes), (_a = {}, _a[mode] = __assign(__assign({}, api), {\n        deactivate: function () {\n          try {\n            api.deactivate();\n          } catch (e) {\n            console.error('problem while deactivating editor mode ' + mode + ':', e);\n          }\n        }\n      }), _a));\n    };\n\n    var create$5 = function (editor) {\n      var activeMode = Cell('design');\n      var availableModes = Cell({\n        design: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: false\n        },\n        readonly: {\n          activate: noop,\n          deactivate: noop,\n          editorReadOnly: true\n        }\n      });\n      registerReadOnlyContentFilters(editor);\n      registerReadOnlySelectionBlockers(editor);\n      return {\n        isReadOnly: function () {\n          return isReadOnly$1(editor);\n        },\n        set: function (mode) {\n          return setMode(editor, availableModes.get(), activeMode, mode);\n        },\n        get: function () {\n          return activeMode.get();\n        },\n        register: function (mode, api) {\n          availableModes.set(registerMode(availableModes.get(), mode, api));\n        }\n      };\n    };\n\n    var each$g = Tools.each, explode$3 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    var Shortcuts = function () {\n      function Shortcuts(editor) {\n        this.shortcuts = {};\n        this.pendingPatterns = [];\n        this.editor = editor;\n        var self = this;\n        editor.on('keyup keypress keydown', function (e) {\n          if ((self.hasModifier(e) || self.isFunctionKey(e)) && !e.isDefaultPrevented()) {\n            each$g(self.shortcuts, function (shortcut) {\n              if (self.matchShortcut(e, shortcut)) {\n                self.pendingPatterns = shortcut.subpatterns.slice(0);\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(shortcut);\n                }\n                return true;\n              }\n            });\n            if (self.matchShortcut(e, self.pendingPatterns[0])) {\n              if (self.pendingPatterns.length === 1) {\n                if (e.type === 'keydown') {\n                  self.executeShortcutAction(self.pendingPatterns[0]);\n                }\n              }\n              self.pendingPatterns.shift();\n            }\n          }\n        });\n      }\n      Shortcuts.prototype.add = function (pattern, desc, cmdFunc, scope) {\n        var self = this;\n        var func = self.normalizeCommandFunc(cmdFunc);\n        each$g(explode$3(Tools.trim(pattern)), function (pattern) {\n          var shortcut = self.createShortcut(pattern, desc, func, scope);\n          self.shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      Shortcuts.prototype.remove = function (pattern) {\n        var shortcut = this.createShortcut(pattern);\n        if (this.shortcuts[shortcut.id]) {\n          delete this.shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.normalizeCommandFunc = function (cmdFunc) {\n        var self = this;\n        var cmd = cmdFunc;\n        if (typeof cmd === 'string') {\n          return function () {\n            self.editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          return function () {\n            self.editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        } else {\n          return cmd;\n        }\n      };\n      Shortcuts.prototype.parseShortcut = function (pattern) {\n        var key;\n        var shortcut = {};\n        each$g(explode$3(pattern.toLowerCase(), '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        var id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      Shortcuts.prototype.createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts = Tools.map(explode$3(pattern, '>'), this.parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || this.editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: this.editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      Shortcuts.prototype.hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      Shortcuts.prototype.isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      Shortcuts.prototype.matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      Shortcuts.prototype.executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      return Shortcuts;\n    }();\n\n    var create$6 = function () {\n      var buttons = {};\n      var menuItems = {};\n      var popups = {};\n      var icons = {};\n      var contextMenus = {};\n      var contextToolbars = {};\n      var sidebars = {};\n      var add = function (collection, type) {\n        return function (name, spec) {\n          return collection[name.toLowerCase()] = __assign(__assign({}, spec), { type: type });\n        };\n      };\n      var addIcon = function (name, svgData) {\n        return icons[name.toLowerCase()] = svgData;\n      };\n      return {\n        addButton: add(buttons, 'button'),\n        addGroupToolbarButton: add(buttons, 'grouptoolbarbutton'),\n        addToggleButton: add(buttons, 'togglebutton'),\n        addMenuButton: add(buttons, 'menubutton'),\n        addSplitButton: add(buttons, 'splitbutton'),\n        addMenuItem: add(menuItems, 'menuitem'),\n        addNestedMenuItem: add(menuItems, 'nestedmenuitem'),\n        addToggleMenuItem: add(menuItems, 'togglemenuitem'),\n        addAutocompleter: add(popups, 'autocompleter'),\n        addContextMenu: add(contextMenus, 'contextmenu'),\n        addContextToolbar: add(contextToolbars, 'contexttoolbar'),\n        addContextForm: add(contextToolbars, 'contextform'),\n        addSidebar: add(sidebars, 'sidebar'),\n        addIcon: addIcon,\n        getAll: function () {\n          return {\n            buttons: buttons,\n            menuItems: menuItems,\n            icons: icons,\n            popups: popups,\n            contextMenus: contextMenus,\n            contextToolbars: contextToolbars,\n            sidebars: sidebars\n          };\n        }\n      };\n    };\n\n    var registry = function () {\n      var bridge = create$6();\n      return {\n        addAutocompleter: bridge.addAutocompleter,\n        addButton: bridge.addButton,\n        addContextForm: bridge.addContextForm,\n        addContextMenu: bridge.addContextMenu,\n        addContextToolbar: bridge.addContextToolbar,\n        addIcon: bridge.addIcon,\n        addMenuButton: bridge.addMenuButton,\n        addMenuItem: bridge.addMenuItem,\n        addNestedMenuItem: bridge.addNestedMenuItem,\n        addSidebar: bridge.addSidebar,\n        addSplitButton: bridge.addSplitButton,\n        addToggleButton: bridge.addToggleButton,\n        addGroupToolbarButton: bridge.addGroupToolbarButton,\n        addToggleMenuItem: bridge.addToggleMenuItem,\n        getAll: bridge.getAll\n      };\n    };\n\n    var each$h = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function () {\n      function URI(url, settings) {\n        url = trim$4(url);\n        this.settings = settings || {};\n        var baseUri = this.settings.base_uri;\n        var self = this;\n        if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n          self.source = url;\n          return;\n        }\n        var isProtocolRelative = url.indexOf('//') === 0;\n        if (url.indexOf('/') === 0 && !isProtocolRelative) {\n          url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n        }\n        if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n          var baseUrl = this.settings.base_uri ? this.settings.base_uri.path : new URI(document.location.href).directory;\n          if (this.settings.base_uri && this.settings.base_uri.protocol == '') {\n            url = '//mce_host' + self.toAbsPath(baseUrl, url);\n          } else {\n            var match = /([^#?]*)([#?]?.*)/.exec(url);\n            url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, match[1]) + match[2];\n          }\n        }\n        url = url.replace(/@@/g, '(mce_at)');\n        var urlMatch = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n        each$h(queryParts, function (v, i) {\n          var part = urlMatch[i];\n          if (part) {\n            part = part.replace(/\\(mce_at\\)/g, '@@');\n          }\n          self[v] = part;\n        });\n        if (baseUri) {\n          if (!self.protocol) {\n            self.protocol = baseUri.protocol;\n          }\n          if (!self.userInfo) {\n            self.userInfo = baseUri.userInfo;\n          }\n          if (!self.port && self.host === 'mce_host') {\n            self.port = baseUri.port;\n          }\n          if (!self.host || self.host === 'mce_host') {\n            self.host = baseUri.host;\n          }\n          self.source = '';\n        }\n        if (isProtocolRelative) {\n          self.protocol = '';\n        }\n      }\n      URI.parseDataUri = function (uri) {\n        var type;\n        var uriComponents = decodeURIComponent(uri).split(',');\n        var matches = /data:([^;]+)/.exec(uriComponents[0]);\n        if (matches) {\n          type = matches[1];\n        }\n        return {\n          type: type,\n          data: uriComponents[1]\n        };\n      };\n      URI.getDocumentBaseUrl = function (loc) {\n        var baseUrl;\n        if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n          baseUrl = loc.href;\n        } else {\n          baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n        }\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n          baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(baseUrl)) {\n            baseUrl += '/';\n          }\n        }\n        return baseUrl;\n      };\n      URI.prototype.setPath = function (path) {\n        var pathMatch = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        this.path = pathMatch[0];\n        this.directory = pathMatch[1];\n        this.file = pathMatch[2];\n        this.source = '';\n        this.getURI();\n      };\n      URI.prototype.toRelative = function (uri) {\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        var relativeUri = new URI(uri, { base_uri: this });\n        if (relativeUri.host !== 'mce_host' && this.host !== relativeUri.host && relativeUri.host || this.port !== relativeUri.port || this.protocol !== relativeUri.protocol && relativeUri.protocol !== '') {\n          return relativeUri.getURI();\n        }\n        var tu = this.getURI(), uu = relativeUri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = this.toRelPath(this.path, relativeUri.path);\n        if (relativeUri.query) {\n          output += '?' + relativeUri.query;\n        }\n        if (relativeUri.anchor) {\n          output += '#' + relativeUri.anchor;\n        }\n        return output;\n      };\n      URI.prototype.toAbsolute = function (uri, noHost) {\n        var absoluteUri = new URI(uri, { base_uri: this });\n        return absoluteUri.getURI(noHost && this.isSameOrigin(absoluteUri));\n      };\n      URI.prototype.isSameOrigin = function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      };\n      URI.prototype.toRelPath = function (base, path) {\n        var breakPoint = 0, out = '', i, l;\n        var normalizedBase = base.substring(0, base.lastIndexOf('/')).split('/');\n        var items = path.split('/');\n        if (normalizedBase.length >= items.length) {\n          for (i = 0, l = normalizedBase.length; i < l; i++) {\n            if (i >= items.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (normalizedBase.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= normalizedBase.length || normalizedBase[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = normalizedBase.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      };\n      URI.prototype.toAbsPath = function (base, path) {\n        var i, nb = 0, o = [], outPath;\n        var tr = /\\/$/.test(path) ? '/' : '';\n        var normalizedBase = base.split('/');\n        var normalizedPath = path.split('/');\n        each$h(normalizedBase, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        normalizedBase = o;\n        for (i = normalizedPath.length - 1, o = []; i >= 0; i--) {\n          if (normalizedPath[i].length === 0 || normalizedPath[i] === '.') {\n            continue;\n          }\n          if (normalizedPath[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(normalizedPath[i]);\n        }\n        i = normalizedBase.length - nb;\n        if (i <= 0) {\n          outPath = reverse(o).join('/');\n        } else {\n          outPath = normalizedBase.slice(0, i).join('/') + '/' + reverse(o).join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      };\n      URI.prototype.getURI = function (noProtoHost) {\n        if (noProtoHost === void 0) {\n          noProtoHost = false;\n        }\n        var s;\n        if (!this.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (this.protocol) {\n              s += this.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (this.userInfo) {\n              s += this.userInfo + '@';\n            }\n            if (this.host) {\n              s += this.host;\n            }\n            if (this.port) {\n              s += ':' + this.port;\n            }\n          }\n          if (this.path) {\n            s += this.path;\n          }\n          if (this.query) {\n            s += '?' + this.query;\n          }\n          if (this.anchor) {\n            s += '#' + this.anchor;\n          }\n          this.source = s;\n        }\n        return this.source;\n      };\n      return URI;\n    }();\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var extend$3 = Tools.extend, each$i = Tools.each;\n    var resolve$3 = Tools.resolve;\n    var ie$1 = Env.ie;\n    var Editor = function () {\n      function Editor(id, settings, editorManager) {\n        var _this = this;\n        this.plugins = {};\n        this.contentCSS = [];\n        this.contentStyles = [];\n        this.loadedCSS = {};\n        this.isNotDirty = false;\n        this.editorManager = editorManager;\n        this.documentBaseUrl = editorManager.documentBaseURL;\n        extend$3(this, EditorObservable);\n        this.settings = getEditorSettings(this, id, this.documentBaseUrl, editorManager.defaultSettings, settings);\n        if (this.settings.suffix) {\n          editorManager.suffix = this.settings.suffix;\n        }\n        this.suffix = editorManager.suffix;\n        if (this.settings.base_url) {\n          editorManager._setBaseUrl(this.settings.base_url);\n        }\n        this.baseUri = editorManager.baseURI;\n        if (this.settings.referrer_policy) {\n          ScriptLoader.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy);\n          DOMUtils$1.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy);\n        }\n        AddOnManager$1.languageLoad = this.settings.language_load;\n        AddOnManager$1.baseURL = editorManager.baseURL;\n        this.id = id;\n        this.setDirty(false);\n        this.documentBaseURI = new URI(this.settings.document_base_url, { base_uri: this.baseUri });\n        this.baseURI = this.baseUri;\n        this.inline = !!this.settings.inline;\n        this.shortcuts = new Shortcuts(this);\n        this.editorCommands = new EditorCommands(this);\n        if (this.settings.cache_suffix) {\n          Env.cacheSuffix = this.settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n        }\n        this.ui = {\n          registry: registry(),\n          styleSheetLoader: undefined,\n          show: noop,\n          hide: noop,\n          enable: noop,\n          disable: noop,\n          isDisabled: never\n        };\n        var self = this;\n        var modeInstance = create$5(self);\n        this.mode = modeInstance;\n        this.setMode = modeInstance.set;\n        editorManager.fire('SetupEditor', { editor: this });\n        this.execCallback('setup', this);\n        this.$ = DomQuery.overrideDefaults(function () {\n          return {\n            context: _this.inline ? _this.getBody() : _this.getDoc(),\n            element: _this.getBody()\n          };\n        });\n      }\n      Editor.prototype.render = function () {\n        render(this);\n      };\n      Editor.prototype.focus = function (skipFocus) {\n        focus$1(this, skipFocus);\n      };\n      Editor.prototype.hasFocus = function () {\n        return hasFocus$1(this);\n      };\n      Editor.prototype.execCallback = function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$3(scope) : 0;\n          callback = resolve$3(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, x);\n      };\n      Editor.prototype.translate = function (text) {\n        return I18n.translate(text);\n      };\n      Editor.prototype.getParam = function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      };\n      Editor.prototype.hasPlugin = function (name, loaded) {\n        var hasPlugin = contains(getPlugins(this).split(/[ ,]/), name);\n        if (hasPlugin) {\n          return loaded ? PluginManager.get(name) !== undefined : true;\n        } else {\n          return false;\n        }\n      };\n      Editor.prototype.nodeChanged = function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      };\n      Editor.prototype.addCommand = function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      };\n      Editor.prototype.addQueryStateHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      };\n      Editor.prototype.addQueryValueHandler = function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      };\n      Editor.prototype.addShortcut = function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      };\n      Editor.prototype.execCommand = function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      };\n      Editor.prototype.queryCommandState = function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      };\n      Editor.prototype.queryCommandValue = function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      };\n      Editor.prototype.queryCommandSupported = function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      };\n      Editor.prototype.show = function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = 'true';\n          } else {\n            DOM$9.show(self.getContainer());\n            DOM$9.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      };\n      Editor.prototype.hide = function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$1 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = 'false';\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$9.hide(self.getContainer());\n            DOM$9.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      };\n      Editor.prototype.isHidden = function () {\n        return !!this.hidden;\n      };\n      Editor.prototype.setProgressState = function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      };\n      Editor.prototype.load = function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          var value = isTextareaOrInput(elm) ? elm.value : elm.innerHTML;\n          html = self.setContent(value, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      };\n      Editor.prototype.save = function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!isTextareaOrInput(elm)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$9.getParent(self.id, 'form')) {\n            each$i(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      };\n      Editor.prototype.setContent = function (content, args) {\n        return setContent$2(this, content, args);\n      };\n      Editor.prototype.getContent = function (args) {\n        return getContent$2(this, args);\n      };\n      Editor.prototype.insertContent = function (content, args) {\n        if (args) {\n          content = extend$3({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      };\n      Editor.prototype.resetContent = function (initialContent) {\n        if (initialContent === undefined) {\n          setContent$2(this, this.startContent, { format: 'raw' });\n        } else {\n          setContent$2(this, initialContent);\n        }\n        this.undoManager.reset();\n        this.setDirty(false);\n        this.nodeChanged();\n      };\n      Editor.prototype.isDirty = function () {\n        return !this.isNotDirty;\n      };\n      Editor.prototype.setDirty = function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      };\n      Editor.prototype.getContainer = function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$9.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      };\n      Editor.prototype.getContentAreaContainer = function () {\n        return this.contentAreaContainer;\n      };\n      Editor.prototype.getElement = function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$9.get(this.id);\n        }\n        return this.targetElm;\n      };\n      Editor.prototype.getWin = function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      };\n      Editor.prototype.getDoc = function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      };\n      Editor.prototype.getBody = function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      };\n      Editor.prototype.convertURL = function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      };\n      Editor.prototype.addVisual = function (elm) {\n        addVisual$1(this, elm);\n      };\n      Editor.prototype.remove = function () {\n        remove$7(this);\n      };\n      Editor.prototype.destroy = function (automatic) {\n        destroy(this, automatic);\n      };\n      Editor.prototype.uploadImages = function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      };\n      Editor.prototype._scanForImages = function () {\n        return this.editorUpload.scanForImages();\n      };\n      Editor.prototype.addButton = function () {\n        throw new Error('editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead');\n      };\n      Editor.prototype.addSidebar = function () {\n        throw new Error('editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead');\n      };\n      Editor.prototype.addMenuItem = function () {\n        throw new Error('editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead');\n      };\n      Editor.prototype.addContextToolbar = function () {\n        throw new Error('editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead');\n      };\n      return Editor;\n    }();\n\n    var DOM$a = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$j = Tools.each, extend$4 = Tools.extend;\n    var instanceCounter = 0, boundGlobalEvents = false;\n    var beforeUnloadDelegate;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$j(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    var isQuirksMode = document.compatMode !== 'CSS1Compat';\n    var EditorManager = __assign(__assign({}, Observable), {\n      baseURI: null,\n      baseURL: null,\n      defaultSettings: {},\n      documentBaseURL: null,\n      suffix: null,\n      $: DomQuery,\n      majorVersion: '5',\n      minorVersion: '6.2',\n      releaseDate: '2020-12-08',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      focusedEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && document.currentScript) {\n            var src = document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        setup$2(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this._setBaseUrl(baseUrl);\n        }\n        var suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        if (pluginBaseUrls !== undefined) {\n          each$1(pluginBaseUrls, function (pluginBaseUrl, pluginName) {\n            AddOnManager$1.PluginManager.urls[pluginName] = pluginBaseUrl;\n          });\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result;\n        var invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = get$1(elm, 'name').filter(function (name) {\n              return !DOM$a.get(name);\n            }).getOrThunk(DOM$a.uniqueId);\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$a.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var targets = [];\n          if (Env.browser.isIE() && Env.browser.version.major < 11) {\n            initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          } else if (isQuirksMode) {\n            initError('Failed to initialize the editor as the document is not in standards mode. ' + 'TinyMCE requires standards mode.');\n            return [];\n          }\n          if (settings.types) {\n            each$j(settings.types, function (type) {\n              targets = targets.concat(DOM$a.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$a.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            var l = settings.elements || '';\n            if (l.length > 0) {\n              each$j(explode$4(l), function (id) {\n                var elm = DOM$a.get(id);\n                if (elm) {\n                  targets.push(elm);\n                } else {\n                  each$j(document.forms, function (f) {\n                    each$j(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$a.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$j(DOM$a.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$a.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$j(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$a.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$4({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$j(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$a.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function (e) {\n            var event = self.fire('BeforeUnload');\n            if (event.returnValue) {\n              e.preventDefault();\n              e.returnValue = event.returnValue;\n              return event.returnValue;\n            }\n          };\n          window.addEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$j(DOM$a.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          window.removeEventListener('beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$j(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      },\n      _setBaseUrl: function (baseUrl) {\n        this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n        this.baseURI = new URI(this.baseURL);\n      }\n    });\n    EditorManager.setup();\n\n    var min = Math.min, max = Math.max, round$1 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x = targetRect.x;\n      var y = targetRect.y;\n      var w = rect.w;\n      var h = rect.h;\n      var targetW = targetRect.w;\n      var targetH = targetRect.h;\n      var relChars = (rel || '').split('');\n      if (relChars[0] === 'b') {\n        y += targetH;\n      }\n      if (relChars[1] === 'r') {\n        x += targetW;\n      }\n      if (relChars[0] === 'c') {\n        y += round$1(targetH / 2);\n      }\n      if (relChars[1] === 'c') {\n        x += round$1(targetW / 2);\n      }\n      if (relChars[3] === 'b') {\n        y -= h;\n      }\n      if (relChars[4] === 'r') {\n        x -= w;\n      }\n      if (relChars[3] === 'c') {\n        y -= round$1(h / 2);\n      }\n      if (relChars[4] === 'c') {\n        x -= round$1(w / 2);\n      }\n      return create$7(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$7(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1 = max(rect.x, cropRect.x);\n      var y1 = max(rect.y, cropRect.y);\n      var x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      var y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$7(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var x1 = rect.x;\n      var y1 = rect.y;\n      var x2 = rect.x + rect.w;\n      var y2 = rect.y + rect.h;\n      var cx2 = clampRect.x + clampRect.w;\n      var cy2 = clampRect.y + clampRect.h;\n      var underflowX1 = max(0, clampRect.x - x1);\n      var underflowY1 = max(0, clampRect.y - y1);\n      var overflowX2 = max(0, x2 - cx2);\n      var overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$7(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$7 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$7(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$7,\n      fromClientRect: fromClientRect\n    };\n\n    var awaiter = function (resolveCb, rejectCb, timeout) {\n      if (timeout === void 0) {\n        timeout = 1000;\n      }\n      var done = false;\n      var timer = null;\n      var complete = function (completer) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (!done) {\n            done = true;\n            if (timer !== null) {\n              clearTimeout(timer);\n              timer = null;\n            }\n            completer.apply(null, args);\n          }\n        };\n      };\n      var resolve = complete(resolveCb);\n      var reject = complete(rejectCb);\n      var start = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!done && timer === null) {\n          timer = setTimeout(function () {\n            return reject.apply(null, args);\n          }, timeout);\n        }\n      };\n      return {\n        start: start,\n        resolve: resolve,\n        reject: reject\n      };\n    };\n    var create$8 = function () {\n      var tasks = {};\n      var resultFns = {};\n      var load = function (id, url) {\n        var loadErrMsg = 'Script at URL \"' + url + '\" failed to load';\n        var runErrMsg = 'Script at URL \"' + url + '\" did not call `tinymce.Resource.add(\\'' + id + '\\', data)` within 1 second';\n        if (tasks[id] !== undefined) {\n          return tasks[id];\n        } else {\n          var task = new promiseObj(function (resolve, reject) {\n            var waiter = awaiter(resolve, reject);\n            resultFns[id] = waiter.resolve;\n            ScriptLoader.ScriptLoader.loadScript(url, function () {\n              return waiter.start(runErrMsg);\n            }, function () {\n              return waiter.reject(loadErrMsg);\n            });\n          });\n          tasks[id] = task;\n          return task;\n        }\n      };\n      var add = function (id, data) {\n        if (resultFns[id] !== undefined) {\n          resultFns[id](data);\n          delete resultFns[id];\n        }\n        tasks[id] = promiseObj.resolve(data);\n      };\n      return {\n        load: load,\n        add: add\n      };\n    };\n    var Resource = create$8();\n\n    var each$k = Tools.each, extend$5 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (props) {\n      var self = this;\n      var _super = self.prototype;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          self._super = _super[name];\n          var ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      var prototype = new self();\n      initializing = false;\n      if (props.Mixins) {\n        each$k(props.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              props[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          props.Mixins = _super.Mixins.concat(props.Mixins);\n        }\n      }\n      if (props.Methods) {\n        each$k(props.Methods.split(','), function (name) {\n          props[name] = dummy;\n        });\n      }\n      if (props.Properties) {\n        each$k(props.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          props[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (props.Statics) {\n        each$k(props.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (props.Defaults && _super.Defaults) {\n        props.Defaults = extend$5({}, _super.Defaults, props.Defaults);\n      }\n      each$1(props, function (member, name) {\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      });\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$2 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        var minRGB = min$1(r, min$1(g, b));\n        var maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        var d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$2(h),\n          s: round$2(s * 100),\n          v: round$2(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$2(255 * brightness);\n          return;\n        }\n        var side = hue / 60;\n        var chroma = brightness * saturation;\n        var x = chroma * (1 - Math.abs(side % 2 - 1));\n        var match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$2(255 * (r + match));\n        g = round$2(255 * (g + match));\n        b = round$2(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (obj) {\n      var data = JSON.stringify(obj);\n      if (!isString(data)) {\n        return data;\n      }\n      return data.replace(/[\\u0080-\\uFFFF]/g, function (match) {\n        var hexCode = match.charCodeAt(0).toString(16);\n        return '\\\\u' + '0000'.substring(hexCode.length) + hexCode;\n      });\n    };\n    var JSONUtils = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = __assign(__assign({}, Observable), {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            Delay.setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async !== false;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = new XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n          xhr.overrideMimeType(settings.content_type);\n        }\n        xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n        if (settings.crossDomain) {\n          xhr.withCredentials = true;\n        }\n        if (settings.content_type) {\n          xhr.setRequestHeader('Content-Type', settings.content_type);\n        }\n        if (settings.requestheaders) {\n          Tools.each(settings.requestheaders, function (header) {\n            xhr.setRequestHeader(header.key, header.value);\n          });\n        }\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr = XHR.fire('beforeSend', {\n          xhr: xhr,\n          settings: settings\n        }).xhr;\n        xhr.send(settings.data);\n        if (!settings.async) {\n          return ready();\n        }\n        Delay.setTimeout(ready, 10);\n      }\n    });\n\n    var extend$6 = Tools.extend;\n    var JSONRequest = function () {\n      function JSONRequest(settings) {\n        this.settings = extend$6({}, settings);\n        this.count = 0;\n      }\n      JSONRequest.sendRPC = function (o) {\n        return new JSONRequest().send(o);\n      };\n      JSONRequest.prototype.send = function (args) {\n        var ecb = args.error, scb = args.success;\n        var xhrArgs = extend$6(this.settings, args);\n        xhrArgs.success = function (c, x) {\n          c = JSONUtils.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, c.error, x);\n          } else {\n            scb.call(xhrArgs.success_scope || xhrArgs.scope, c.result);\n          }\n        };\n        xhrArgs.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(xhrArgs.error_scope || xhrArgs.scope, ty, x);\n          }\n        };\n        xhrArgs.data = JSONUtils.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        xhrArgs.content_type = 'application/json';\n        XHR.send(xhrArgs);\n      };\n      return JSONRequest;\n    }();\n\n    var create$9 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      var test = '__storage_test__';\n      localStorage = window.localStorage;\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n    } catch (e) {\n      localStorage = create$9();\n    }\n    var LocalStorage = localStorage;\n\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: EventDispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSONUtils,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: DomTreeWalker,\n        TextSeeker: TextSeeker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: DomSerializer,\n        StyleSheetLoader: StyleSheetLoader,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: EditorSelection,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: AstNode,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      Env: Env,\n      AddOnManager: AddOnManager$1,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: PluginManager,\n      ThemeManager: ThemeManager,\n      IconManager: IconManager,\n      Resource: Resource,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    var tinymce = Tools.extend(EditorManager, publicApi);\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(tinymce);\n    exportToModuleLoaders(tinymce);\n\n}());\n"],"sourceRoot":""}
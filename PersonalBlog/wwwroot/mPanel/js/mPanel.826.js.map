{"version":3,"sources":["webpack://mPanel/./src/js/common/fileUpload.js","webpack://mPanel/./src/js/helpers/elementFactory.js"],"names":["inputs","document","querySelectorAll","handleChange","uploadedFiles","wrapperElement","allowedExtensions","fileList","querySelector","innerHTML","files","Array","from","filter","f","some","e","type","includes","length","classList","add","forEach","isImage","name","slice","classes","innerHtml","URL","createObjectURL","appendTo","remove","dragenter","stopPropagation","preventDefault","this","dragover","dragleave","i","parentElement","addEventListener","ref","dataTransfer","drop","extensionArray","createElement","appendChild","getAttribute","split","map","trim","text","styles","children","event","attributes","insertBefore","el","c","s","style","property","value","a","setAttribute","textNode","createTextNode","parent","child"],"mappings":"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","file":"js/mPanel.826.js","sourcesContent":["import elementFactory from \"../helpers/elementFactory\";\r\n\r\nconst inputs = document.querySelectorAll(\".m-file-upload input[type='file']\");\r\n\r\nif (inputs.length > 0) {\r\n  inputs.forEach((i) => {\r\n    i.parentElement.addEventListener(\"dragenter\", dragenter, false);\r\n    i.parentElement.addEventListener(\"dragover\", dragover, false);\r\n    i.parentElement.addEventListener(\"dragleave\", dragleave, false);\r\n    i.parentElement.addEventListener(\r\n      \"drop\",\r\n      function (e) {\r\n        drop(this, e, extensionArray);\r\n      },\r\n      false\r\n    );\r\n\r\n    const fileList = document.createElement(\"ul\");\r\n    i.parentElement.appendChild(fileList);\r\n    const allowedExtensions = i.getAttribute(\"data-extensions\");\r\n    const extensionArray = allowedExtensions.split(\",\").map((e) => e.trim());\r\n\r\n    elementFactory({\r\n      name: \"div\",\r\n      classes: [\"extension-notifier\"],\r\n      text: `Desteklenen uzantılar: ${allowedExtensions}`,\r\n      appendTo: i.parentElement,\r\n    });\r\n\r\n    elementFactory({\r\n      name: \"div\",\r\n      classes: [\"initial-notifier\"],\r\n      innerHtml: `<i class=\"fas fa-cloud-upload-alt\"></i>\r\n        <div>Dosyaları sürükle & bırak, veya <span>seç</span></div>`,\r\n      appendTo: i.parentElement,\r\n    });\r\n\r\n    i.addEventListener(\"change\", function () {\r\n      handleChange(this.files, this.parentElement, extensionArray);\r\n    });\r\n  });\r\n}\r\n\r\nfunction handleChange(uploadedFiles, wrapperElement, allowedExtensions) {\r\n  const fileList = wrapperElement.querySelector(\"ul\");\r\n  fileList.innerHTML = \" \";\r\n\r\n  const files = Array.from(uploadedFiles).filter((f) =>\r\n    allowedExtensions.some((e) => f.type.includes(e))\r\n  );\r\n\r\n  if (files && files.length > 0) {\r\n    wrapperElement.classList.add(\"has-files\");\r\n  } else {\r\n    wrapperElement.classList.remove(\"has-files\");\r\n    return;\r\n  }\r\n\r\n  files.forEach((f) => {\r\n    const isImage = f.type.includes(\"image\");\r\n    const name = f.name.length > 12 ? f.name.slice(0, 9) + \"...\" : f.name;\r\n\r\n    elementFactory({\r\n      name: \"li\",\r\n      classes: [\"file\"],\r\n      innerHtml: `${\r\n        isImage\r\n          ? `<img src='${URL.createObjectURL(f)}' alt='...' />`\r\n          : '<i class=\"fas fa-file\"></i>'\r\n      } <div>${name}</div>`,\r\n      appendTo: fileList,\r\n    });\r\n  });\r\n}\r\n\r\nfunction drop(ref, e, allowedExtensions) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n\r\n  const dt = e.dataTransfer;\r\n  const files = dt.files;\r\n\r\n  ref.classList.remove(\"dragover\");\r\n\r\n  handleChange(files, ref, allowedExtensions);\r\n}\r\n\r\nfunction dragenter(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n\r\n  this.classList.add(\"dragover\");\r\n}\r\n\r\nfunction dragover(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n}\r\n\r\nfunction dragleave(e) {\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n\r\n  this.classList.remove(\"dragover\");\r\n}\r\n","function elementFactory({\r\n  name,\r\n  classes,\r\n  text,\r\n  styles,\r\n  appendTo,\r\n  children,\r\n  event,\r\n  innerHtml,\r\n  attributes,\r\n  insertBefore,\r\n}) {\r\n  const el = document.createElement(name);\r\n\r\n  if (classes) classes.forEach((c) => el.classList.add(c));\r\n\r\n  if (styles) styles.forEach((s) => (el.style[s.property] = s.value));\r\n\r\n  if (innerHtml) el.innerHTML = innerHtml;\r\n\r\n  if (attributes) attributes.forEach((a) => el.setAttribute(a.name, a.value));\r\n\r\n  if (text) {\r\n    const textNode = document.createTextNode(text);\r\n    el.appendChild(textNode);\r\n  }\r\n\r\n  if (children) {\r\n    children.forEach((c) => el.appendChild(c));\r\n  }\r\n\r\n  if (event) el.addEventListener(event[0], event[1]);\r\n\r\n  if (insertBefore) insertBefore.parent.insertBefore(el, insertBefore.child);\r\n\r\n  if (appendTo) {\r\n    appendTo.appendChild(el);\r\n  }\r\n\r\n  return el;\r\n}\r\n\r\nexport default elementFactory;\r\n"],"sourceRoot":""}